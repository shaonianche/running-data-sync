function dp(t,o){for(var c=0;c<o.length;c++){const p=o[c];if(typeof p!="string"&&!Array.isArray(p)){for(const _ in p)if(_!=="default"&&!(_ in t)){const x=Object.getOwnPropertyDescriptor(p,_);x&&Object.defineProperty(t,_,x.get?x:{enumerable:!0,get:()=>p[_]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var Tw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ol(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jm={exports:{}},P5={},Qm={exports:{}},_n={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I2=Symbol.for("react.element"),Ew=Symbol.for("react.portal"),Sw=Symbol.for("react.fragment"),Mw=Symbol.for("react.strict_mode"),Cw=Symbol.for("react.profiler"),Pw=Symbol.for("react.provider"),Aw=Symbol.for("react.context"),Iw=Symbol.for("react.forward_ref"),kw=Symbol.for("react.suspense"),Lw=Symbol.for("react.memo"),zw=Symbol.for("react.lazy"),Z8=Symbol.iterator;function Dw(t){return t===null||typeof t!="object"?null:(t=Z8&&t[Z8]||t["@@iterator"],typeof t=="function"?t:null)}var e_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},t_=Object.assign,n_={};function eu(t,o,c){this.props=t,this.context=o,this.refs=n_,this.updater=c||e_}eu.prototype.isReactComponent={};eu.prototype.setState=function(t,o){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,o,"setState")};eu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function r_(){}r_.prototype=eu.prototype;function pp(t,o,c){this.props=t,this.context=o,this.refs=n_,this.updater=c||e_}var fp=pp.prototype=new r_;fp.constructor=pp;t_(fp,eu.prototype);fp.isPureReactComponent=!0;var W8=Array.isArray,i_=Object.prototype.hasOwnProperty,mp={current:null},o_={key:!0,ref:!0,__self:!0,__source:!0};function s_(t,o,c){var p,_={},x=null,E=null;if(o!=null)for(p in o.ref!==void 0&&(E=o.ref),o.key!==void 0&&(x=""+o.key),o)i_.call(o,p)&&!o_.hasOwnProperty(p)&&(_[p]=o[p]);var s=arguments.length-2;if(s===1)_.children=c;else if(1<s){for(var C=Array(s),D=0;D<s;D++)C[D]=arguments[D+2];_.children=C}if(t&&t.defaultProps)for(p in s=t.defaultProps,s)_[p]===void 0&&(_[p]=s[p]);return{$$typeof:I2,type:t,key:x,ref:E,props:_,_owner:mp.current}}function Rw(t,o){return{$$typeof:I2,type:t.type,key:o,ref:t.ref,props:t.props,_owner:t._owner}}function _p(t){return typeof t=="object"&&t!==null&&t.$$typeof===I2}function Fw(t){var o={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(c){return o[c]})}var q8=/\/+/g;function C4(t,o){return typeof t=="object"&&t!==null&&t.key!=null?Fw(""+t.key):o.toString(36)}function A3(t,o,c,p,_){var x=typeof t;(x==="undefined"||x==="boolean")&&(t=null);var E=!1;if(t===null)E=!0;else switch(x){case"string":case"number":E=!0;break;case"object":switch(t.$$typeof){case I2:case Ew:E=!0}}if(E)return E=t,_=_(E),t=p===""?"."+C4(E,0):p,W8(_)?(c="",t!=null&&(c=t.replace(q8,"$&/")+"/"),A3(_,o,c,"",function(D){return D})):_!=null&&(_p(_)&&(_=Rw(_,c+(!_.key||E&&E.key===_.key?"":(""+_.key).replace(q8,"$&/")+"/")+t)),o.push(_)),1;if(E=0,p=p===""?".":p+":",W8(t))for(var s=0;s<t.length;s++){x=t[s];var C=p+C4(x,s);E+=A3(x,o,c,C,_)}else if(C=Dw(t),typeof C=="function")for(t=C.call(t),s=0;!(x=t.next()).done;)x=x.value,C=p+C4(x,s++),E+=A3(x,o,c,C,_);else if(x==="object")throw o=String(t),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return E}function a3(t,o,c){if(t==null)return t;var p=[],_=0;return A3(t,p,"","",function(x){return o.call(c,x,_++)}),p}function Bw(t){if(t._status===-1){var o=t._result;o=o(),o.then(function(c){(t._status===0||t._status===-1)&&(t._status=1,t._result=c)},function(c){(t._status===0||t._status===-1)&&(t._status=2,t._result=c)}),t._status===-1&&(t._status=0,t._result=o)}if(t._status===1)return t._result.default;throw t._result}var wi={current:null},I3={transition:null},Ow={ReactCurrentDispatcher:wi,ReactCurrentBatchConfig:I3,ReactCurrentOwner:mp};function a_(){throw Error("act(...) is not supported in production builds of React.")}_n.Children={map:a3,forEach:function(t,o,c){a3(t,function(){o.apply(this,arguments)},c)},count:function(t){var o=0;return a3(t,function(){o++}),o},toArray:function(t){return a3(t,function(o){return o})||[]},only:function(t){if(!_p(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_n.Component=eu;_n.Fragment=Sw;_n.Profiler=Cw;_n.PureComponent=pp;_n.StrictMode=Mw;_n.Suspense=kw;_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ow;_n.act=a_;_n.cloneElement=function(t,o,c){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var p=t_({},t.props),_=t.key,x=t.ref,E=t._owner;if(o!=null){if(o.ref!==void 0&&(x=o.ref,E=mp.current),o.key!==void 0&&(_=""+o.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(C in o)i_.call(o,C)&&!o_.hasOwnProperty(C)&&(p[C]=o[C]===void 0&&s!==void 0?s[C]:o[C])}var C=arguments.length-2;if(C===1)p.children=c;else if(1<C){s=Array(C);for(var D=0;D<C;D++)s[D]=arguments[D+2];p.children=s}return{$$typeof:I2,type:t.type,key:_,ref:x,props:p,_owner:E}};_n.createContext=function(t){return t={$$typeof:Aw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Pw,_context:t},t.Consumer=t};_n.createElement=s_;_n.createFactory=function(t){var o=s_.bind(null,t);return o.type=t,o};_n.createRef=function(){return{current:null}};_n.forwardRef=function(t){return{$$typeof:Iw,render:t}};_n.isValidElement=_p;_n.lazy=function(t){return{$$typeof:zw,_payload:{_status:-1,_result:t},_init:Bw}};_n.memo=function(t,o){return{$$typeof:Lw,type:t,compare:o===void 0?null:o}};_n.startTransition=function(t){var o=I3.transition;I3.transition={};try{t()}finally{I3.transition=o}};_n.unstable_act=a_;_n.useCallback=function(t,o){return wi.current.useCallback(t,o)};_n.useContext=function(t){return wi.current.useContext(t)};_n.useDebugValue=function(){};_n.useDeferredValue=function(t){return wi.current.useDeferredValue(t)};_n.useEffect=function(t,o){return wi.current.useEffect(t,o)};_n.useId=function(){return wi.current.useId()};_n.useImperativeHandle=function(t,o,c){return wi.current.useImperativeHandle(t,o,c)};_n.useInsertionEffect=function(t,o){return wi.current.useInsertionEffect(t,o)};_n.useLayoutEffect=function(t,o){return wi.current.useLayoutEffect(t,o)};_n.useMemo=function(t,o){return wi.current.useMemo(t,o)};_n.useReducer=function(t,o,c){return wi.current.useReducer(t,o,c)};_n.useRef=function(t){return wi.current.useRef(t)};_n.useState=function(t){return wi.current.useState(t)};_n.useSyncExternalStore=function(t,o,c){return wi.current.useSyncExternalStore(t,o,c)};_n.useTransition=function(){return wi.current.useTransition()};_n.version="18.3.1";Qm.exports=_n;var Ne=Qm.exports;const Xs=ol(Ne),Uw=dp({__proto__:null,default:Xs},[Ne]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw=Ne,jw=Symbol.for("react.element"),Vw=Symbol.for("react.fragment"),Gw=Object.prototype.hasOwnProperty,$w=Nw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zw={key:!0,ref:!0,__self:!0,__source:!0};function l_(t,o,c){var p,_={},x=null,E=null;c!==void 0&&(x=""+c),o.key!==void 0&&(x=""+o.key),o.ref!==void 0&&(E=o.ref);for(p in o)Gw.call(o,p)&&!Zw.hasOwnProperty(p)&&(_[p]=o[p]);if(t&&t.defaultProps)for(p in o=t.defaultProps,o)_[p]===void 0&&(_[p]=o[p]);return{$$typeof:jw,type:t,key:x,ref:E,props:_,_owner:$w.current}}P5.Fragment=Vw;P5.jsx=l_;P5.jsxs=l_;Jm.exports=P5;var FC=Jm.exports,H8={},c_={exports:{}},oo={},u_={exports:{}},h_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function o(Ee,ct){var yt=Ee.length;Ee.push(ct);e:for(;0<yt;){var kt=yt-1>>>1,Nt=Ee[kt];if(0<_(Nt,ct))Ee[kt]=ct,Ee[yt]=Nt,yt=kt;else break e}}function c(Ee){return Ee.length===0?null:Ee[0]}function p(Ee){if(Ee.length===0)return null;var ct=Ee[0],yt=Ee.pop();if(yt!==ct){Ee[0]=yt;e:for(var kt=0,Nt=Ee.length,Zt=Nt>>>1;kt<Zt;){var cn=2*(kt+1)-1,Zn=Ee[cn],Bn=cn+1,On=Ee[Bn];if(0>_(Zn,yt))Bn<Nt&&0>_(On,Zn)?(Ee[kt]=On,Ee[Bn]=yt,kt=Bn):(Ee[kt]=Zn,Ee[cn]=yt,kt=cn);else if(Bn<Nt&&0>_(On,yt))Ee[kt]=On,Ee[Bn]=yt,kt=Bn;else break e}}return ct}function _(Ee,ct){var yt=Ee.sortIndex-ct.sortIndex;return yt!==0?yt:Ee.id-ct.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;t.unstable_now=function(){return x.now()}}else{var E=Date,s=E.now();t.unstable_now=function(){return E.now()-s}}var C=[],D=[],N=1,U=null,G=3,ce=!1,ge=!1,xe=!1,$e=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function oe(Ee){for(var ct=c(D);ct!==null;){if(ct.callback===null)p(D);else if(ct.startTime<=Ee)p(D),ct.sortIndex=ct.expirationTime,o(C,ct);else break;ct=c(D)}}function Te(Ee){if(xe=!1,oe(Ee),!ge)if(c(C)!==null)ge=!0,Je(Oe);else{var ct=c(D);ct!==null&&it(Te,ct.startTime-Ee)}}function Oe(Ee,ct){ge=!1,xe&&(xe=!1,ne(Ye),Ye=-1),ce=!0;var yt=G;try{for(oe(ct),U=c(C);U!==null&&(!(U.expirationTime>ct)||Ee&&!Qt());){var kt=U.callback;if(typeof kt=="function"){U.callback=null,G=U.priorityLevel;var Nt=kt(U.expirationTime<=ct);ct=t.unstable_now(),typeof Nt=="function"?U.callback=Nt:U===c(C)&&p(C),oe(ct)}else p(C);U=c(C)}if(U!==null)var Zt=!0;else{var cn=c(D);cn!==null&&it(Te,cn.startTime-ct),Zt=!1}return Zt}finally{U=null,G=yt,ce=!1}}var rt=!1,we=null,Ye=-1,ze=5,gt=-1;function Qt(){return!(t.unstable_now()-gt<ze)}function St(){if(we!==null){var Ee=t.unstable_now();gt=Ee;var ct=!0;try{ct=we(!0,Ee)}finally{ct?$t():(rt=!1,we=null)}}else rt=!1}var $t;if(typeof ee=="function")$t=function(){ee(St)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,Ve=He.port2;He.port1.onmessage=St,$t=function(){Ve.postMessage(null)}}else $t=function(){$e(St,0)};function Je(Ee){we=Ee,rt||(rt=!0,$t())}function it(Ee,ct){Ye=$e(function(){Ee(t.unstable_now())},ct)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ee){Ee.callback=null},t.unstable_continueExecution=function(){ge||ce||(ge=!0,Je(Oe))},t.unstable_forceFrameRate=function(Ee){0>Ee||125<Ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ze=0<Ee?Math.floor(1e3/Ee):5},t.unstable_getCurrentPriorityLevel=function(){return G},t.unstable_getFirstCallbackNode=function(){return c(C)},t.unstable_next=function(Ee){switch(G){case 1:case 2:case 3:var ct=3;break;default:ct=G}var yt=G;G=ct;try{return Ee()}finally{G=yt}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ee,ct){switch(Ee){case 1:case 2:case 3:case 4:case 5:break;default:Ee=3}var yt=G;G=Ee;try{return ct()}finally{G=yt}},t.unstable_scheduleCallback=function(Ee,ct,yt){var kt=t.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?kt+yt:kt):yt=kt,Ee){case 1:var Nt=-1;break;case 2:Nt=250;break;case 5:Nt=1073741823;break;case 4:Nt=1e4;break;default:Nt=5e3}return Nt=yt+Nt,Ee={id:N++,callback:ct,priorityLevel:Ee,startTime:yt,expirationTime:Nt,sortIndex:-1},yt>kt?(Ee.sortIndex=yt,o(D,Ee),c(C)===null&&Ee===c(D)&&(xe?(ne(Ye),Ye=-1):xe=!0,it(Te,yt-kt))):(Ee.sortIndex=Nt,o(C,Ee),ge||ce||(ge=!0,Je(Oe))),Ee},t.unstable_shouldYield=Qt,t.unstable_wrapCallback=function(Ee){var ct=G;return function(){var yt=G;G=ct;try{return Ee.apply(this,arguments)}finally{G=yt}}}})(h_);u_.exports=h_;var Ww=u_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qw=Ne,io=Ww;function mt(t){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+t,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+t+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d_=new Set,a2={};function h1(t,o){Vc(t,o),Vc(t+"Capture",o)}function Vc(t,o){for(a2[t]=o,t=0;t<o.length;t++)d_.add(o[t])}var ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c6=Object.prototype.hasOwnProperty,Hw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,X8={},K8={};function Xw(t){return c6.call(K8,t)?!0:c6.call(X8,t)?!1:Hw.test(t)?K8[t]=!0:(X8[t]=!0,!1)}function Kw(t,o,c,p){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Yw(t,o,c,p){if(o===null||typeof o>"u"||Kw(t,o,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function bi(t,o,c,p,_,x,E){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=_,this.mustUseProperty=c,this.propertyName=t,this.type=o,this.sanitizeURL=x,this.removeEmptyString=E}var Jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jr[t]=new bi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var o=t[0];Jr[o]=new bi(o,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jr[t]=new bi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jr[t]=new bi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jr[t]=new bi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jr[t]=new bi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jr[t]=new bi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jr[t]=new bi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jr[t]=new bi(t,5,!1,t.toLowerCase(),null,!1,!1)});var gp=/[\-:]([a-z])/g;function yp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var o=t.replace(gp,yp);Jr[o]=new bi(o,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var o=t.replace(gp,yp);Jr[o]=new bi(o,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var o=t.replace(gp,yp);Jr[o]=new bi(o,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jr[t]=new bi(t,1,!1,t.toLowerCase(),null,!1,!1)});Jr.xlinkHref=new bi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jr[t]=new bi(t,1,!1,t.toLowerCase(),null,!0,!0)});function vp(t,o,c,p){var _=Jr.hasOwnProperty(o)?Jr[o]:null;(_!==null?_.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(Yw(o,c,_,p)&&(c=null),p||_===null?Xw(o)&&(c===null?t.removeAttribute(o):t.setAttribute(o,""+c)):_.mustUseProperty?t[_.propertyName]=c===null?_.type===3?!1:"":c:(o=_.attributeName,p=_.attributeNamespace,c===null?t.removeAttribute(o):(_=_.type,c=_===3||_===4&&c===!0?"":""+c,p?t.setAttributeNS(p,o,c):t.setAttribute(o,c))))}var ia=qw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l3=Symbol.for("react.element"),xc=Symbol.for("react.portal"),wc=Symbol.for("react.fragment"),xp=Symbol.for("react.strict_mode"),u6=Symbol.for("react.profiler"),p_=Symbol.for("react.provider"),f_=Symbol.for("react.context"),wp=Symbol.for("react.forward_ref"),h6=Symbol.for("react.suspense"),d6=Symbol.for("react.suspense_list"),bp=Symbol.for("react.memo"),Na=Symbol.for("react.lazy"),m_=Symbol.for("react.offscreen"),Y8=Symbol.iterator;function L0(t){return t===null||typeof t!="object"?null:(t=Y8&&t[Y8]||t["@@iterator"],typeof t=="function"?t:null)}var gr=Object.assign,P4;function Z0(t){if(P4===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);P4=o&&o[1]||""}return`
`+P4+t}var A4=!1;function I4(t,o){if(!t||A4)return"";A4=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(D){var p=D}Reflect.construct(t,[],o)}else{try{o.call()}catch(D){p=D}t.call(o.prototype)}else{try{throw Error()}catch(D){p=D}t()}}catch(D){if(D&&p&&typeof D.stack=="string"){for(var _=D.stack.split(`
`),x=p.stack.split(`
`),E=_.length-1,s=x.length-1;1<=E&&0<=s&&_[E]!==x[s];)s--;for(;1<=E&&0<=s;E--,s--)if(_[E]!==x[s]){if(E!==1||s!==1)do if(E--,s--,0>s||_[E]!==x[s]){var C=`
`+_[E].replace(" at new "," at ");return t.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",t.displayName)),C}while(1<=E&&0<=s);break}}}finally{A4=!1,Error.prepareStackTrace=c}return(t=t?t.displayName||t.name:"")?Z0(t):""}function Jw(t){switch(t.tag){case 5:return Z0(t.type);case 16:return Z0("Lazy");case 13:return Z0("Suspense");case 19:return Z0("SuspenseList");case 0:case 2:case 15:return t=I4(t.type,!1),t;case 11:return t=I4(t.type.render,!1),t;case 1:return t=I4(t.type,!0),t;default:return""}}function p6(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wc:return"Fragment";case xc:return"Portal";case u6:return"Profiler";case xp:return"StrictMode";case h6:return"Suspense";case d6:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case f_:return(t.displayName||"Context")+".Consumer";case p_:return(t._context.displayName||"Context")+".Provider";case wp:var o=t.render;return t=t.displayName,t||(t=o.displayName||o.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bp:return o=t.displayName||null,o!==null?o:p6(t.type)||"Memo";case Na:o=t._payload,t=t._init;try{return p6(t(o))}catch{}}return null}function Qw(t){var o=t.type;switch(t.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=o.render,t=t.displayName||t.name||"",o.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return p6(o);case 8:return o===xp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function nl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function __(t){var o=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function eb(t){var o=__(t)?"checked":"value",c=Object.getOwnPropertyDescriptor(t.constructor.prototype,o),p=""+t[o];if(!t.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var _=c.get,x=c.set;return Object.defineProperty(t,o,{configurable:!0,get:function(){return _.call(this)},set:function(E){p=""+E,x.call(this,E)}}),Object.defineProperty(t,o,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(E){p=""+E},stopTracking:function(){t._valueTracker=null,delete t[o]}}}}function c3(t){t._valueTracker||(t._valueTracker=eb(t))}function g_(t){if(!t)return!1;var o=t._valueTracker;if(!o)return!0;var c=o.getValue(),p="";return t&&(p=__(t)?t.checked?"true":"false":t.value),t=p,t!==c?(o.setValue(t),!0):!1}function Z3(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function f6(t,o){var c=o.checked;return gr({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??t._wrapperState.initialChecked})}function J8(t,o){var c=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;c=nl(o.value!=null?o.value:c),t._wrapperState={initialChecked:p,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function y_(t,o){o=o.checked,o!=null&&vp(t,"checked",o,!1)}function m6(t,o){y_(t,o);var c=nl(o.value),p=o.type;if(c!=null)p==="number"?(c===0&&t.value===""||t.value!=c)&&(t.value=""+c):t.value!==""+c&&(t.value=""+c);else if(p==="submit"||p==="reset"){t.removeAttribute("value");return}o.hasOwnProperty("value")?_6(t,o.type,c):o.hasOwnProperty("defaultValue")&&_6(t,o.type,nl(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(t.defaultChecked=!!o.defaultChecked)}function Q8(t,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+t._wrapperState.initialValue,c||o===t.value||(t.value=o),t.defaultValue=o}c=t.name,c!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,c!==""&&(t.name=c)}function _6(t,o,c){(o!=="number"||Z3(t.ownerDocument)!==t)&&(c==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+c&&(t.defaultValue=""+c))}var W0=Array.isArray;function zc(t,o,c,p){if(t=t.options,o){o={};for(var _=0;_<c.length;_++)o["$"+c[_]]=!0;for(c=0;c<t.length;c++)_=o.hasOwnProperty("$"+t[c].value),t[c].selected!==_&&(t[c].selected=_),_&&p&&(t[c].defaultSelected=!0)}else{for(c=""+nl(c),o=null,_=0;_<t.length;_++){if(t[_].value===c){t[_].selected=!0,p&&(t[_].defaultSelected=!0);return}o!==null||t[_].disabled||(o=t[_])}o!==null&&(o.selected=!0)}}function g6(t,o){if(o.dangerouslySetInnerHTML!=null)throw Error(mt(91));return gr({},o,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function e9(t,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(mt(92));if(W0(c)){if(1<c.length)throw Error(mt(93));c=c[0]}o=c}o==null&&(o=""),c=o}t._wrapperState={initialValue:nl(c)}}function v_(t,o){var c=nl(o.value),p=nl(o.defaultValue);c!=null&&(c=""+c,c!==t.value&&(t.value=c),o.defaultValue==null&&t.defaultValue!==c&&(t.defaultValue=c)),p!=null&&(t.defaultValue=""+p)}function t9(t){var o=t.textContent;o===t._wrapperState.initialValue&&o!==""&&o!==null&&(t.value=o)}function x_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function y6(t,o){return t==null||t==="http://www.w3.org/1999/xhtml"?x_(o):t==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var u3,w_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,p,_){MSApp.execUnsafeLocalFunction(function(){return t(o,c,p,_)})}:t}(function(t,o){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=o;else{for(u3=u3||document.createElement("div"),u3.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=u3.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;o.firstChild;)t.appendChild(o.firstChild)}});function l2(t,o){if(o){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=o;return}}t.textContent=o}var Y0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tb=["Webkit","ms","Moz","O"];Object.keys(Y0).forEach(function(t){tb.forEach(function(o){o=o+t.charAt(0).toUpperCase()+t.substring(1),Y0[o]=Y0[t]})});function b_(t,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||Y0.hasOwnProperty(t)&&Y0[t]?(""+o).trim():o+"px"}function T_(t,o){t=t.style;for(var c in o)if(o.hasOwnProperty(c)){var p=c.indexOf("--")===0,_=b_(c,o[c],p);c==="float"&&(c="cssFloat"),p?t.setProperty(c,_):t[c]=_}}var nb=gr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function v6(t,o){if(o){if(nb[t]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(mt(137,t));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(mt(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(mt(61))}if(o.style!=null&&typeof o.style!="object")throw Error(mt(62))}}function x6(t,o){if(t.indexOf("-")===-1)return typeof o.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w6=null;function Tp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var b6=null,Dc=null,Rc=null;function n9(t){if(t=z2(t)){if(typeof b6!="function")throw Error(mt(280));var o=t.stateNode;o&&(o=z5(o),b6(t.stateNode,t.type,o))}}function E_(t){Dc?Rc?Rc.push(t):Rc=[t]:Dc=t}function S_(){if(Dc){var t=Dc,o=Rc;if(Rc=Dc=null,n9(t),o)for(t=0;t<o.length;t++)n9(o[t])}}function M_(t,o){return t(o)}function C_(){}var k4=!1;function P_(t,o,c){if(k4)return t(o,c);k4=!0;try{return M_(t,o,c)}finally{k4=!1,(Dc!==null||Rc!==null)&&(C_(),S_())}}function c2(t,o){var c=t.stateNode;if(c===null)return null;var p=z5(c);if(p===null)return null;c=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(t=t.type,p=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!p;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(mt(231,o,typeof c));return c}var T6=!1;if(ea)try{var z0={};Object.defineProperty(z0,"passive",{get:function(){T6=!0}}),window.addEventListener("test",z0,z0),window.removeEventListener("test",z0,z0)}catch{T6=!1}function rb(t,o,c,p,_,x,E,s,C){var D=Array.prototype.slice.call(arguments,3);try{o.apply(c,D)}catch(N){this.onError(N)}}var J0=!1,W3=null,q3=!1,E6=null,ib={onError:function(t){J0=!0,W3=t}};function ob(t,o,c,p,_,x,E,s,C){J0=!1,W3=null,rb.apply(ib,arguments)}function sb(t,o,c,p,_,x,E,s,C){if(ob.apply(this,arguments),J0){if(J0){var D=W3;J0=!1,W3=null}else throw Error(mt(198));q3||(q3=!0,E6=D)}}function d1(t){var o=t,c=t;if(t.alternate)for(;o.return;)o=o.return;else{t=o;do o=t,o.flags&4098&&(c=o.return),t=o.return;while(t)}return o.tag===3?c:null}function A_(t){if(t.tag===13){var o=t.memoizedState;if(o===null&&(t=t.alternate,t!==null&&(o=t.memoizedState)),o!==null)return o.dehydrated}return null}function r9(t){if(d1(t)!==t)throw Error(mt(188))}function ab(t){var o=t.alternate;if(!o){if(o=d1(t),o===null)throw Error(mt(188));return o!==t?null:t}for(var c=t,p=o;;){var _=c.return;if(_===null)break;var x=_.alternate;if(x===null){if(p=_.return,p!==null){c=p;continue}break}if(_.child===x.child){for(x=_.child;x;){if(x===c)return r9(_),t;if(x===p)return r9(_),o;x=x.sibling}throw Error(mt(188))}if(c.return!==p.return)c=_,p=x;else{for(var E=!1,s=_.child;s;){if(s===c){E=!0,c=_,p=x;break}if(s===p){E=!0,p=_,c=x;break}s=s.sibling}if(!E){for(s=x.child;s;){if(s===c){E=!0,c=x,p=_;break}if(s===p){E=!0,p=x,c=_;break}s=s.sibling}if(!E)throw Error(mt(189))}}if(c.alternate!==p)throw Error(mt(190))}if(c.tag!==3)throw Error(mt(188));return c.stateNode.current===c?t:o}function I_(t){return t=ab(t),t!==null?k_(t):null}function k_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var o=k_(t);if(o!==null)return o;t=t.sibling}return null}var L_=io.unstable_scheduleCallback,i9=io.unstable_cancelCallback,lb=io.unstable_shouldYield,cb=io.unstable_requestPaint,Er=io.unstable_now,ub=io.unstable_getCurrentPriorityLevel,Ep=io.unstable_ImmediatePriority,z_=io.unstable_UserBlockingPriority,H3=io.unstable_NormalPriority,hb=io.unstable_LowPriority,D_=io.unstable_IdlePriority,A5=null,bs=null;function db(t){if(bs&&typeof bs.onCommitFiberRoot=="function")try{bs.onCommitFiberRoot(A5,t,void 0,(t.current.flags&128)===128)}catch{}}var es=Math.clz32?Math.clz32:mb,pb=Math.log,fb=Math.LN2;function mb(t){return t>>>=0,t===0?32:31-(pb(t)/fb|0)|0}var h3=64,d3=4194304;function q0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function X3(t,o){var c=t.pendingLanes;if(c===0)return 0;var p=0,_=t.suspendedLanes,x=t.pingedLanes,E=c&268435455;if(E!==0){var s=E&~_;s!==0?p=q0(s):(x&=E,x!==0&&(p=q0(x)))}else E=c&~_,E!==0?p=q0(E):x!==0&&(p=q0(x));if(p===0)return 0;if(o!==0&&o!==p&&!(o&_)&&(_=p&-p,x=o&-o,_>=x||_===16&&(x&4194240)!==0))return o;if(p&4&&(p|=c&16),o=t.entangledLanes,o!==0)for(t=t.entanglements,o&=p;0<o;)c=31-es(o),_=1<<c,p|=t[c],o&=~_;return p}function _b(t,o){switch(t){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gb(t,o){for(var c=t.suspendedLanes,p=t.pingedLanes,_=t.expirationTimes,x=t.pendingLanes;0<x;){var E=31-es(x),s=1<<E,C=_[E];C===-1?(!(s&c)||s&p)&&(_[E]=_b(s,o)):C<=o&&(t.expiredLanes|=s),x&=~s}}function S6(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function R_(){var t=h3;return h3<<=1,!(h3&4194240)&&(h3=64),t}function L4(t){for(var o=[],c=0;31>c;c++)o.push(t);return o}function k2(t,o,c){t.pendingLanes|=o,o!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,o=31-es(o),t[o]=c}function yb(t,o){var c=t.pendingLanes&~o;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=o,t.mutableReadLanes&=o,t.entangledLanes&=o,o=t.entanglements;var p=t.eventTimes;for(t=t.expirationTimes;0<c;){var _=31-es(c),x=1<<_;o[_]=0,p[_]=-1,t[_]=-1,c&=~x}}function Sp(t,o){var c=t.entangledLanes|=o;for(t=t.entanglements;c;){var p=31-es(c),_=1<<p;_&o|t[p]&o&&(t[p]|=o),c&=~_}}var Vn=0;function F_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var B_,Mp,O_,U_,N_,M6=!1,p3=[],qa=null,Ha=null,Xa=null,u2=new Map,h2=new Map,Va=[],vb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function o9(t,o){switch(t){case"focusin":case"focusout":qa=null;break;case"dragenter":case"dragleave":Ha=null;break;case"mouseover":case"mouseout":Xa=null;break;case"pointerover":case"pointerout":u2.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":h2.delete(o.pointerId)}}function D0(t,o,c,p,_,x){return t===null||t.nativeEvent!==x?(t={blockedOn:o,domEventName:c,eventSystemFlags:p,nativeEvent:x,targetContainers:[_]},o!==null&&(o=z2(o),o!==null&&Mp(o)),t):(t.eventSystemFlags|=p,o=t.targetContainers,_!==null&&o.indexOf(_)===-1&&o.push(_),t)}function xb(t,o,c,p,_){switch(o){case"focusin":return qa=D0(qa,t,o,c,p,_),!0;case"dragenter":return Ha=D0(Ha,t,o,c,p,_),!0;case"mouseover":return Xa=D0(Xa,t,o,c,p,_),!0;case"pointerover":var x=_.pointerId;return u2.set(x,D0(u2.get(x)||null,t,o,c,p,_)),!0;case"gotpointercapture":return x=_.pointerId,h2.set(x,D0(h2.get(x)||null,t,o,c,p,_)),!0}return!1}function j_(t){var o=Ql(t.target);if(o!==null){var c=d1(o);if(c!==null){if(o=c.tag,o===13){if(o=A_(c),o!==null){t.blockedOn=o,N_(t.priority,function(){O_(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function k3(t){if(t.blockedOn!==null)return!1;for(var o=t.targetContainers;0<o.length;){var c=C6(t.domEventName,t.eventSystemFlags,o[0],t.nativeEvent);if(c===null){c=t.nativeEvent;var p=new c.constructor(c.type,c);w6=p,c.target.dispatchEvent(p),w6=null}else return o=z2(c),o!==null&&Mp(o),t.blockedOn=c,!1;o.shift()}return!0}function s9(t,o,c){k3(t)&&c.delete(o)}function wb(){M6=!1,qa!==null&&k3(qa)&&(qa=null),Ha!==null&&k3(Ha)&&(Ha=null),Xa!==null&&k3(Xa)&&(Xa=null),u2.forEach(s9),h2.forEach(s9)}function R0(t,o){t.blockedOn===o&&(t.blockedOn=null,M6||(M6=!0,io.unstable_scheduleCallback(io.unstable_NormalPriority,wb)))}function d2(t){function o(_){return R0(_,t)}if(0<p3.length){R0(p3[0],t);for(var c=1;c<p3.length;c++){var p=p3[c];p.blockedOn===t&&(p.blockedOn=null)}}for(qa!==null&&R0(qa,t),Ha!==null&&R0(Ha,t),Xa!==null&&R0(Xa,t),u2.forEach(o),h2.forEach(o),c=0;c<Va.length;c++)p=Va[c],p.blockedOn===t&&(p.blockedOn=null);for(;0<Va.length&&(c=Va[0],c.blockedOn===null);)j_(c),c.blockedOn===null&&Va.shift()}var Fc=ia.ReactCurrentBatchConfig,K3=!0;function bb(t,o,c,p){var _=Vn,x=Fc.transition;Fc.transition=null;try{Vn=1,Cp(t,o,c,p)}finally{Vn=_,Fc.transition=x}}function Tb(t,o,c,p){var _=Vn,x=Fc.transition;Fc.transition=null;try{Vn=4,Cp(t,o,c,p)}finally{Vn=_,Fc.transition=x}}function Cp(t,o,c,p){if(K3){var _=C6(t,o,c,p);if(_===null)V4(t,o,p,Y3,c),o9(t,p);else if(xb(_,t,o,c,p))p.stopPropagation();else if(o9(t,p),o&4&&-1<vb.indexOf(t)){for(;_!==null;){var x=z2(_);if(x!==null&&B_(x),x=C6(t,o,c,p),x===null&&V4(t,o,p,Y3,c),x===_)break;_=x}_!==null&&p.stopPropagation()}else V4(t,o,p,null,c)}}var Y3=null;function C6(t,o,c,p){if(Y3=null,t=Tp(p),t=Ql(t),t!==null)if(o=d1(t),o===null)t=null;else if(c=o.tag,c===13){if(t=A_(o),t!==null)return t;t=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;t=null}else o!==t&&(t=null);return Y3=t,null}function V_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ub()){case Ep:return 1;case z_:return 4;case H3:case hb:return 16;case D_:return 536870912;default:return 16}default:return 16}}var $a=null,Pp=null,L3=null;function G_(){if(L3)return L3;var t,o=Pp,c=o.length,p,_="value"in $a?$a.value:$a.textContent,x=_.length;for(t=0;t<c&&o[t]===_[t];t++);var E=c-t;for(p=1;p<=E&&o[c-p]===_[x-p];p++);return L3=_.slice(t,1<p?1-p:void 0)}function z3(t){var o=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&o===13&&(t=13)):t=o,t===10&&(t=13),32<=t||t===13?t:0}function f3(){return!0}function a9(){return!1}function so(t){function o(c,p,_,x,E){this._reactName=c,this._targetInst=_,this.type=p,this.nativeEvent=x,this.target=E,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(c=t[s],this[s]=c?c(x):x[s]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?f3:a9,this.isPropagationStopped=a9,this}return gr(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=f3)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=f3)},persist:function(){},isPersistent:f3}),o}var tu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ap=so(tu),L2=gr({},tu,{view:0,detail:0}),Eb=so(L2),z4,D4,F0,I5=gr({},L2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ip,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==F0&&(F0&&t.type==="mousemove"?(z4=t.screenX-F0.screenX,D4=t.screenY-F0.screenY):D4=z4=0,F0=t),z4)},movementY:function(t){return"movementY"in t?t.movementY:D4}}),l9=so(I5),Sb=gr({},I5,{dataTransfer:0}),Mb=so(Sb),Cb=gr({},L2,{relatedTarget:0}),R4=so(Cb),Pb=gr({},tu,{animationName:0,elapsedTime:0,pseudoElement:0}),Ab=so(Pb),Ib=gr({},tu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kb=so(Ib),Lb=gr({},tu,{data:0}),c9=so(Lb),zb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Db={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fb(t){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(t):(t=Rb[t])?!!o[t]:!1}function Ip(){return Fb}var Bb=gr({},L2,{key:function(t){if(t.key){var o=zb[t.key]||t.key;if(o!=="Unidentified")return o}return t.type==="keypress"?(t=z3(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Db[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ip,charCode:function(t){return t.type==="keypress"?z3(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?z3(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ob=so(Bb),Ub=gr({},I5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),u9=so(Ub),Nb=gr({},L2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ip}),jb=so(Nb),Vb=gr({},tu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gb=so(Vb),$b=gr({},I5,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zb=so($b),Wb=[9,13,27,32],kp=ea&&"CompositionEvent"in window,Q0=null;ea&&"documentMode"in document&&(Q0=document.documentMode);var qb=ea&&"TextEvent"in window&&!Q0,$_=ea&&(!kp||Q0&&8<Q0&&11>=Q0),h9=String.fromCharCode(32),d9=!1;function Z_(t,o){switch(t){case"keyup":return Wb.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bc=!1;function Hb(t,o){switch(t){case"compositionend":return W_(o);case"keypress":return o.which!==32?null:(d9=!0,h9);case"textInput":return t=o.data,t===h9&&d9?null:t;default:return null}}function Xb(t,o){if(bc)return t==="compositionend"||!kp&&Z_(t,o)?(t=G_(),L3=Pp=$a=null,bc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return $_&&o.locale!=="ko"?null:o.data;default:return null}}var Kb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function p9(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o==="input"?!!Kb[t.type]:o==="textarea"}function q_(t,o,c,p){E_(p),o=J3(o,"onChange"),0<o.length&&(c=new Ap("onChange","change",null,c,p),t.push({event:c,listeners:o}))}var e2=null,p2=null;function Yb(t){ig(t,0)}function k5(t){var o=Sc(t);if(g_(o))return t}function Jb(t,o){if(t==="change")return o}var H_=!1;if(ea){var F4;if(ea){var B4="oninput"in document;if(!B4){var f9=document.createElement("div");f9.setAttribute("oninput","return;"),B4=typeof f9.oninput=="function"}F4=B4}else F4=!1;H_=F4&&(!document.documentMode||9<document.documentMode)}function m9(){e2&&(e2.detachEvent("onpropertychange",X_),p2=e2=null)}function X_(t){if(t.propertyName==="value"&&k5(p2)){var o=[];q_(o,p2,t,Tp(t)),P_(Yb,o)}}function Qb(t,o,c){t==="focusin"?(m9(),e2=o,p2=c,e2.attachEvent("onpropertychange",X_)):t==="focusout"&&m9()}function eT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return k5(p2)}function tT(t,o){if(t==="click")return k5(o)}function nT(t,o){if(t==="input"||t==="change")return k5(o)}function rT(t,o){return t===o&&(t!==0||1/t===1/o)||t!==t&&o!==o}var ns=typeof Object.is=="function"?Object.is:rT;function f2(t,o){if(ns(t,o))return!0;if(typeof t!="object"||t===null||typeof o!="object"||o===null)return!1;var c=Object.keys(t),p=Object.keys(o);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var _=c[p];if(!c6.call(o,_)||!ns(t[_],o[_]))return!1}return!0}function _9(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g9(t,o){var c=_9(t);t=0;for(var p;c;){if(c.nodeType===3){if(p=t+c.textContent.length,t<=o&&p>=o)return{node:c,offset:o-t};t=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=_9(c)}}function K_(t,o){return t&&o?t===o?!0:t&&t.nodeType===3?!1:o&&o.nodeType===3?K_(t,o.parentNode):"contains"in t?t.contains(o):t.compareDocumentPosition?!!(t.compareDocumentPosition(o)&16):!1:!1}function Y_(){for(var t=window,o=Z3();o instanceof t.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)t=o.contentWindow;else break;o=Z3(t.document)}return o}function Lp(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o&&(o==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||o==="textarea"||t.contentEditable==="true")}function iT(t){var o=Y_(),c=t.focusedElem,p=t.selectionRange;if(o!==c&&c&&c.ownerDocument&&K_(c.ownerDocument.documentElement,c)){if(p!==null&&Lp(c)){if(o=p.start,t=p.end,t===void 0&&(t=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(t,c.value.length);else if(t=(o=c.ownerDocument||document)&&o.defaultView||window,t.getSelection){t=t.getSelection();var _=c.textContent.length,x=Math.min(p.start,_);p=p.end===void 0?x:Math.min(p.end,_),!t.extend&&x>p&&(_=p,p=x,x=_),_=g9(c,x);var E=g9(c,p);_&&E&&(t.rangeCount!==1||t.anchorNode!==_.node||t.anchorOffset!==_.offset||t.focusNode!==E.node||t.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(_.node,_.offset),t.removeAllRanges(),x>p?(t.addRange(o),t.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),t.addRange(o)))}}for(o=[],t=c;t=t.parentNode;)t.nodeType===1&&o.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)t=o[c],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var oT=ea&&"documentMode"in document&&11>=document.documentMode,Tc=null,P6=null,t2=null,A6=!1;function y9(t,o,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;A6||Tc==null||Tc!==Z3(p)||(p=Tc,"selectionStart"in p&&Lp(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),t2&&f2(t2,p)||(t2=p,p=J3(P6,"onSelect"),0<p.length&&(o=new Ap("onSelect","select",null,o,c),t.push({event:o,listeners:p}),o.target=Tc)))}function m3(t,o){var c={};return c[t.toLowerCase()]=o.toLowerCase(),c["Webkit"+t]="webkit"+o,c["Moz"+t]="moz"+o,c}var Ec={animationend:m3("Animation","AnimationEnd"),animationiteration:m3("Animation","AnimationIteration"),animationstart:m3("Animation","AnimationStart"),transitionend:m3("Transition","TransitionEnd")},O4={},J_={};ea&&(J_=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);function L5(t){if(O4[t])return O4[t];if(!Ec[t])return t;var o=Ec[t],c;for(c in o)if(o.hasOwnProperty(c)&&c in J_)return O4[t]=o[c];return t}var Q_=L5("animationend"),eg=L5("animationiteration"),tg=L5("animationstart"),ng=L5("transitionend"),rg=new Map,v9="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sl(t,o){rg.set(t,o),h1(o,[t])}for(var U4=0;U4<v9.length;U4++){var N4=v9[U4],sT=N4.toLowerCase(),aT=N4[0].toUpperCase()+N4.slice(1);sl(sT,"on"+aT)}sl(Q_,"onAnimationEnd");sl(eg,"onAnimationIteration");sl(tg,"onAnimationStart");sl("dblclick","onDoubleClick");sl("focusin","onFocus");sl("focusout","onBlur");sl(ng,"onTransitionEnd");Vc("onMouseEnter",["mouseout","mouseover"]);Vc("onMouseLeave",["mouseout","mouseover"]);Vc("onPointerEnter",["pointerout","pointerover"]);Vc("onPointerLeave",["pointerout","pointerover"]);h1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));h1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));h1("onBeforeInput",["compositionend","keypress","textInput","paste"]);h1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));h1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));h1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var H0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lT=new Set("cancel close invalid load scroll toggle".split(" ").concat(H0));function x9(t,o,c){var p=t.type||"unknown-event";t.currentTarget=c,sb(p,o,void 0,t),t.currentTarget=null}function ig(t,o){o=(o&4)!==0;for(var c=0;c<t.length;c++){var p=t[c],_=p.event;p=p.listeners;e:{var x=void 0;if(o)for(var E=p.length-1;0<=E;E--){var s=p[E],C=s.instance,D=s.currentTarget;if(s=s.listener,C!==x&&_.isPropagationStopped())break e;x9(_,s,D),x=C}else for(E=0;E<p.length;E++){if(s=p[E],C=s.instance,D=s.currentTarget,s=s.listener,C!==x&&_.isPropagationStopped())break e;x9(_,s,D),x=C}}}if(q3)throw t=E6,q3=!1,E6=null,t}function Qn(t,o){var c=o[D6];c===void 0&&(c=o[D6]=new Set);var p=t+"__bubble";c.has(p)||(og(o,t,2,!1),c.add(p))}function j4(t,o,c){var p=0;o&&(p|=4),og(c,t,p,o)}var _3="_reactListening"+Math.random().toString(36).slice(2);function m2(t){if(!t[_3]){t[_3]=!0,d_.forEach(function(c){c!=="selectionchange"&&(lT.has(c)||j4(c,!1,t),j4(c,!0,t))});var o=t.nodeType===9?t:t.ownerDocument;o===null||o[_3]||(o[_3]=!0,j4("selectionchange",!1,o))}}function og(t,o,c,p){switch(V_(o)){case 1:var _=bb;break;case 4:_=Tb;break;default:_=Cp}c=_.bind(null,o,c,t),_=void 0,!T6||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(_=!0),p?_!==void 0?t.addEventListener(o,c,{capture:!0,passive:_}):t.addEventListener(o,c,!0):_!==void 0?t.addEventListener(o,c,{passive:_}):t.addEventListener(o,c,!1)}function V4(t,o,c,p,_){var x=p;if(!(o&1)&&!(o&2)&&p!==null)e:for(;;){if(p===null)return;var E=p.tag;if(E===3||E===4){var s=p.stateNode.containerInfo;if(s===_||s.nodeType===8&&s.parentNode===_)break;if(E===4)for(E=p.return;E!==null;){var C=E.tag;if((C===3||C===4)&&(C=E.stateNode.containerInfo,C===_||C.nodeType===8&&C.parentNode===_))return;E=E.return}for(;s!==null;){if(E=Ql(s),E===null)return;if(C=E.tag,C===5||C===6){p=x=E;continue e}s=s.parentNode}}p=p.return}P_(function(){var D=x,N=Tp(c),U=[];e:{var G=rg.get(t);if(G!==void 0){var ce=Ap,ge=t;switch(t){case"keypress":if(z3(c)===0)break e;case"keydown":case"keyup":ce=Ob;break;case"focusin":ge="focus",ce=R4;break;case"focusout":ge="blur",ce=R4;break;case"beforeblur":case"afterblur":ce=R4;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=l9;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Mb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=jb;break;case Q_:case eg:case tg:ce=Ab;break;case ng:ce=Gb;break;case"scroll":ce=Eb;break;case"wheel":ce=Zb;break;case"copy":case"cut":case"paste":ce=kb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=u9}var xe=(o&4)!==0,$e=!xe&&t==="scroll",ne=xe?G!==null?G+"Capture":null:G;xe=[];for(var ee=D,oe;ee!==null;){oe=ee;var Te=oe.stateNode;if(oe.tag===5&&Te!==null&&(oe=Te,ne!==null&&(Te=c2(ee,ne),Te!=null&&xe.push(_2(ee,Te,oe)))),$e)break;ee=ee.return}0<xe.length&&(G=new ce(G,ge,null,c,N),U.push({event:G,listeners:xe}))}}if(!(o&7)){e:{if(G=t==="mouseover"||t==="pointerover",ce=t==="mouseout"||t==="pointerout",G&&c!==w6&&(ge=c.relatedTarget||c.fromElement)&&(Ql(ge)||ge[ta]))break e;if((ce||G)&&(G=N.window===N?N:(G=N.ownerDocument)?G.defaultView||G.parentWindow:window,ce?(ge=c.relatedTarget||c.toElement,ce=D,ge=ge?Ql(ge):null,ge!==null&&($e=d1(ge),ge!==$e||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(ce=null,ge=D),ce!==ge)){if(xe=l9,Te="onMouseLeave",ne="onMouseEnter",ee="mouse",(t==="pointerout"||t==="pointerover")&&(xe=u9,Te="onPointerLeave",ne="onPointerEnter",ee="pointer"),$e=ce==null?G:Sc(ce),oe=ge==null?G:Sc(ge),G=new xe(Te,ee+"leave",ce,c,N),G.target=$e,G.relatedTarget=oe,Te=null,Ql(N)===D&&(xe=new xe(ne,ee+"enter",ge,c,N),xe.target=oe,xe.relatedTarget=$e,Te=xe),$e=Te,ce&&ge)t:{for(xe=ce,ne=ge,ee=0,oe=xe;oe;oe=dc(oe))ee++;for(oe=0,Te=ne;Te;Te=dc(Te))oe++;for(;0<ee-oe;)xe=dc(xe),ee--;for(;0<oe-ee;)ne=dc(ne),oe--;for(;ee--;){if(xe===ne||ne!==null&&xe===ne.alternate)break t;xe=dc(xe),ne=dc(ne)}xe=null}else xe=null;ce!==null&&w9(U,G,ce,xe,!1),ge!==null&&$e!==null&&w9(U,$e,ge,xe,!0)}}e:{if(G=D?Sc(D):window,ce=G.nodeName&&G.nodeName.toLowerCase(),ce==="select"||ce==="input"&&G.type==="file")var Oe=Jb;else if(p9(G))if(H_)Oe=nT;else{Oe=eT;var rt=Qb}else(ce=G.nodeName)&&ce.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(Oe=tT);if(Oe&&(Oe=Oe(t,D))){q_(U,Oe,c,N);break e}rt&&rt(t,G,D),t==="focusout"&&(rt=G._wrapperState)&&rt.controlled&&G.type==="number"&&_6(G,"number",G.value)}switch(rt=D?Sc(D):window,t){case"focusin":(p9(rt)||rt.contentEditable==="true")&&(Tc=rt,P6=D,t2=null);break;case"focusout":t2=P6=Tc=null;break;case"mousedown":A6=!0;break;case"contextmenu":case"mouseup":case"dragend":A6=!1,y9(U,c,N);break;case"selectionchange":if(oT)break;case"keydown":case"keyup":y9(U,c,N)}var we;if(kp)e:{switch(t){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else bc?Z_(t,c)&&(Ye="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(Ye="onCompositionStart");Ye&&($_&&c.locale!=="ko"&&(bc||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&bc&&(we=G_()):($a=N,Pp="value"in $a?$a.value:$a.textContent,bc=!0)),rt=J3(D,Ye),0<rt.length&&(Ye=new c9(Ye,t,null,c,N),U.push({event:Ye,listeners:rt}),we?Ye.data=we:(we=W_(c),we!==null&&(Ye.data=we)))),(we=qb?Hb(t,c):Xb(t,c))&&(D=J3(D,"onBeforeInput"),0<D.length&&(N=new c9("onBeforeInput","beforeinput",null,c,N),U.push({event:N,listeners:D}),N.data=we))}ig(U,o)})}function _2(t,o,c){return{instance:t,listener:o,currentTarget:c}}function J3(t,o){for(var c=o+"Capture",p=[];t!==null;){var _=t,x=_.stateNode;_.tag===5&&x!==null&&(_=x,x=c2(t,c),x!=null&&p.unshift(_2(t,x,_)),x=c2(t,o),x!=null&&p.push(_2(t,x,_))),t=t.return}return p}function dc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function w9(t,o,c,p,_){for(var x=o._reactName,E=[];c!==null&&c!==p;){var s=c,C=s.alternate,D=s.stateNode;if(C!==null&&C===p)break;s.tag===5&&D!==null&&(s=D,_?(C=c2(c,x),C!=null&&E.unshift(_2(c,C,s))):_||(C=c2(c,x),C!=null&&E.push(_2(c,C,s)))),c=c.return}E.length!==0&&t.push({event:o,listeners:E})}var cT=/\r\n?/g,uT=/\u0000|\uFFFD/g;function b9(t){return(typeof t=="string"?t:""+t).replace(cT,`
`).replace(uT,"")}function g3(t,o,c){if(o=b9(o),b9(t)!==o&&c)throw Error(mt(425))}function Q3(){}var I6=null,k6=null;function L6(t,o){return t==="textarea"||t==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var z6=typeof setTimeout=="function"?setTimeout:void 0,hT=typeof clearTimeout=="function"?clearTimeout:void 0,T9=typeof Promise=="function"?Promise:void 0,dT=typeof queueMicrotask=="function"?queueMicrotask:typeof T9<"u"?function(t){return T9.resolve(null).then(t).catch(pT)}:z6;function pT(t){setTimeout(function(){throw t})}function G4(t,o){var c=o,p=0;do{var _=c.nextSibling;if(t.removeChild(c),_&&_.nodeType===8)if(c=_.data,c==="/$"){if(p===0){t.removeChild(_),d2(o);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=_}while(c);d2(o)}function Ka(t){for(;t!=null;t=t.nextSibling){var o=t.nodeType;if(o===1||o===3)break;if(o===8){if(o=t.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return t}function E9(t){t=t.previousSibling;for(var o=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return t;o--}else c==="/$"&&o++}t=t.previousSibling}return null}var nu=Math.random().toString(36).slice(2),ws="__reactFiber$"+nu,g2="__reactProps$"+nu,ta="__reactContainer$"+nu,D6="__reactEvents$"+nu,fT="__reactListeners$"+nu,mT="__reactHandles$"+nu;function Ql(t){var o=t[ws];if(o)return o;for(var c=t.parentNode;c;){if(o=c[ta]||c[ws]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(t=E9(t);t!==null;){if(c=t[ws])return c;t=E9(t)}return o}t=c,c=t.parentNode}return null}function z2(t){return t=t[ws]||t[ta],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(mt(33))}function z5(t){return t[g2]||null}var R6=[],Mc=-1;function al(t){return{current:t}}function er(t){0>Mc||(t.current=R6[Mc],R6[Mc]=null,Mc--)}function Kn(t,o){Mc++,R6[Mc]=t.current,t.current=o}var rl={},pi=al(rl),Oi=al(!1),o1=rl;function Gc(t,o){var c=t.type.contextTypes;if(!c)return rl;var p=t.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var _={},x;for(x in c)_[x]=o[x];return p&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=_),_}function Ui(t){return t=t.childContextTypes,t!=null}function e5(){er(Oi),er(pi)}function S9(t,o,c){if(pi.current!==rl)throw Error(mt(168));Kn(pi,o),Kn(Oi,c)}function sg(t,o,c){var p=t.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var _ in p)if(!(_ in o))throw Error(mt(108,Qw(t)||"Unknown",_));return gr({},c,p)}function t5(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rl,o1=pi.current,Kn(pi,t),Kn(Oi,Oi.current),!0}function M9(t,o,c){var p=t.stateNode;if(!p)throw Error(mt(169));c?(t=sg(t,o,o1),p.__reactInternalMemoizedMergedChildContext=t,er(Oi),er(pi),Kn(pi,t)):er(Oi),Kn(Oi,c)}var Hs=null,D5=!1,$4=!1;function ag(t){Hs===null?Hs=[t]:Hs.push(t)}function _T(t){D5=!0,ag(t)}function ll(){if(!$4&&Hs!==null){$4=!0;var t=0,o=Vn;try{var c=Hs;for(Vn=1;t<c.length;t++){var p=c[t];do p=p(!0);while(p!==null)}Hs=null,D5=!1}catch(_){throw Hs!==null&&(Hs=Hs.slice(t+1)),L_(Ep,ll),_}finally{Vn=o,$4=!1}}return null}var Cc=[],Pc=0,n5=null,r5=0,To=[],Eo=0,s1=null,Ks=1,Ys="";function Xl(t,o){Cc[Pc++]=r5,Cc[Pc++]=n5,n5=t,r5=o}function lg(t,o,c){To[Eo++]=Ks,To[Eo++]=Ys,To[Eo++]=s1,s1=t;var p=Ks;t=Ys;var _=32-es(p)-1;p&=~(1<<_),c+=1;var x=32-es(o)+_;if(30<x){var E=_-_%5;x=(p&(1<<E)-1).toString(32),p>>=E,_-=E,Ks=1<<32-es(o)+_|c<<_|p,Ys=x+t}else Ks=1<<x|c<<_|p,Ys=t}function zp(t){t.return!==null&&(Xl(t,1),lg(t,1,0))}function Dp(t){for(;t===n5;)n5=Cc[--Pc],Cc[Pc]=null,r5=Cc[--Pc],Cc[Pc]=null;for(;t===s1;)s1=To[--Eo],To[Eo]=null,Ys=To[--Eo],To[Eo]=null,Ks=To[--Eo],To[Eo]=null}var ro=null,no=null,or=!1,Jo=null;function cg(t,o){var c=So(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=t,o=t.deletions,o===null?(t.deletions=[c],t.flags|=16):o.push(c)}function C9(t,o){switch(t.tag){case 5:var c=t.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(t.stateNode=o,ro=t,no=Ka(o.firstChild),!0):!1;case 6:return o=t.pendingProps===""||o.nodeType!==3?null:o,o!==null?(t.stateNode=o,ro=t,no=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=s1!==null?{id:Ks,overflow:Ys}:null,t.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=So(18,null,null,0),c.stateNode=o,c.return=t,t.child=c,ro=t,no=null,!0):!1;default:return!1}}function F6(t){return(t.mode&1)!==0&&(t.flags&128)===0}function B6(t){if(or){var o=no;if(o){var c=o;if(!C9(t,o)){if(F6(t))throw Error(mt(418));o=Ka(c.nextSibling);var p=ro;o&&C9(t,o)?cg(p,c):(t.flags=t.flags&-4097|2,or=!1,ro=t)}}else{if(F6(t))throw Error(mt(418));t.flags=t.flags&-4097|2,or=!1,ro=t}}}function P9(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ro=t}function y3(t){if(t!==ro)return!1;if(!or)return P9(t),or=!0,!1;var o;if((o=t.tag!==3)&&!(o=t.tag!==5)&&(o=t.type,o=o!=="head"&&o!=="body"&&!L6(t.type,t.memoizedProps)),o&&(o=no)){if(F6(t))throw ug(),Error(mt(418));for(;o;)cg(t,o),o=Ka(o.nextSibling)}if(P9(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(mt(317));e:{for(t=t.nextSibling,o=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"){if(o===0){no=Ka(t.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}t=t.nextSibling}no=null}}else no=ro?Ka(t.stateNode.nextSibling):null;return!0}function ug(){for(var t=no;t;)t=Ka(t.nextSibling)}function $c(){no=ro=null,or=!1}function Rp(t){Jo===null?Jo=[t]:Jo.push(t)}var gT=ia.ReactCurrentBatchConfig;function B0(t,o,c){if(t=c.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(mt(309));var p=c.stateNode}if(!p)throw Error(mt(147,t));var _=p,x=""+t;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===x?o.ref:(o=function(E){var s=_.refs;E===null?delete s[x]:s[x]=E},o._stringRef=x,o)}if(typeof t!="string")throw Error(mt(284));if(!c._owner)throw Error(mt(290,t))}return t}function v3(t,o){throw t=Object.prototype.toString.call(o),Error(mt(31,t==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":t))}function A9(t){var o=t._init;return o(t._payload)}function hg(t){function o(ne,ee){if(t){var oe=ne.deletions;oe===null?(ne.deletions=[ee],ne.flags|=16):oe.push(ee)}}function c(ne,ee){if(!t)return null;for(;ee!==null;)o(ne,ee),ee=ee.sibling;return null}function p(ne,ee){for(ne=new Map;ee!==null;)ee.key!==null?ne.set(ee.key,ee):ne.set(ee.index,ee),ee=ee.sibling;return ne}function _(ne,ee){return ne=el(ne,ee),ne.index=0,ne.sibling=null,ne}function x(ne,ee,oe){return ne.index=oe,t?(oe=ne.alternate,oe!==null?(oe=oe.index,oe<ee?(ne.flags|=2,ee):oe):(ne.flags|=2,ee)):(ne.flags|=1048576,ee)}function E(ne){return t&&ne.alternate===null&&(ne.flags|=2),ne}function s(ne,ee,oe,Te){return ee===null||ee.tag!==6?(ee=Y4(oe,ne.mode,Te),ee.return=ne,ee):(ee=_(ee,oe),ee.return=ne,ee)}function C(ne,ee,oe,Te){var Oe=oe.type;return Oe===wc?N(ne,ee,oe.props.children,Te,oe.key):ee!==null&&(ee.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===Na&&A9(Oe)===ee.type)?(Te=_(ee,oe.props),Te.ref=B0(ne,ee,oe),Te.return=ne,Te):(Te=N3(oe.type,oe.key,oe.props,null,ne.mode,Te),Te.ref=B0(ne,ee,oe),Te.return=ne,Te)}function D(ne,ee,oe,Te){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==oe.containerInfo||ee.stateNode.implementation!==oe.implementation?(ee=J4(oe,ne.mode,Te),ee.return=ne,ee):(ee=_(ee,oe.children||[]),ee.return=ne,ee)}function N(ne,ee,oe,Te,Oe){return ee===null||ee.tag!==7?(ee=i1(oe,ne.mode,Te,Oe),ee.return=ne,ee):(ee=_(ee,oe),ee.return=ne,ee)}function U(ne,ee,oe){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=Y4(""+ee,ne.mode,oe),ee.return=ne,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case l3:return oe=N3(ee.type,ee.key,ee.props,null,ne.mode,oe),oe.ref=B0(ne,null,ee),oe.return=ne,oe;case xc:return ee=J4(ee,ne.mode,oe),ee.return=ne,ee;case Na:var Te=ee._init;return U(ne,Te(ee._payload),oe)}if(W0(ee)||L0(ee))return ee=i1(ee,ne.mode,oe,null),ee.return=ne,ee;v3(ne,ee)}return null}function G(ne,ee,oe,Te){var Oe=ee!==null?ee.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return Oe!==null?null:s(ne,ee,""+oe,Te);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case l3:return oe.key===Oe?C(ne,ee,oe,Te):null;case xc:return oe.key===Oe?D(ne,ee,oe,Te):null;case Na:return Oe=oe._init,G(ne,ee,Oe(oe._payload),Te)}if(W0(oe)||L0(oe))return Oe!==null?null:N(ne,ee,oe,Te,null);v3(ne,oe)}return null}function ce(ne,ee,oe,Te,Oe){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return ne=ne.get(oe)||null,s(ee,ne,""+Te,Oe);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case l3:return ne=ne.get(Te.key===null?oe:Te.key)||null,C(ee,ne,Te,Oe);case xc:return ne=ne.get(Te.key===null?oe:Te.key)||null,D(ee,ne,Te,Oe);case Na:var rt=Te._init;return ce(ne,ee,oe,rt(Te._payload),Oe)}if(W0(Te)||L0(Te))return ne=ne.get(oe)||null,N(ee,ne,Te,Oe,null);v3(ee,Te)}return null}function ge(ne,ee,oe,Te){for(var Oe=null,rt=null,we=ee,Ye=ee=0,ze=null;we!==null&&Ye<oe.length;Ye++){we.index>Ye?(ze=we,we=null):ze=we.sibling;var gt=G(ne,we,oe[Ye],Te);if(gt===null){we===null&&(we=ze);break}t&&we&&gt.alternate===null&&o(ne,we),ee=x(gt,ee,Ye),rt===null?Oe=gt:rt.sibling=gt,rt=gt,we=ze}if(Ye===oe.length)return c(ne,we),or&&Xl(ne,Ye),Oe;if(we===null){for(;Ye<oe.length;Ye++)we=U(ne,oe[Ye],Te),we!==null&&(ee=x(we,ee,Ye),rt===null?Oe=we:rt.sibling=we,rt=we);return or&&Xl(ne,Ye),Oe}for(we=p(ne,we);Ye<oe.length;Ye++)ze=ce(we,ne,Ye,oe[Ye],Te),ze!==null&&(t&&ze.alternate!==null&&we.delete(ze.key===null?Ye:ze.key),ee=x(ze,ee,Ye),rt===null?Oe=ze:rt.sibling=ze,rt=ze);return t&&we.forEach(function(Qt){return o(ne,Qt)}),or&&Xl(ne,Ye),Oe}function xe(ne,ee,oe,Te){var Oe=L0(oe);if(typeof Oe!="function")throw Error(mt(150));if(oe=Oe.call(oe),oe==null)throw Error(mt(151));for(var rt=Oe=null,we=ee,Ye=ee=0,ze=null,gt=oe.next();we!==null&&!gt.done;Ye++,gt=oe.next()){we.index>Ye?(ze=we,we=null):ze=we.sibling;var Qt=G(ne,we,gt.value,Te);if(Qt===null){we===null&&(we=ze);break}t&&we&&Qt.alternate===null&&o(ne,we),ee=x(Qt,ee,Ye),rt===null?Oe=Qt:rt.sibling=Qt,rt=Qt,we=ze}if(gt.done)return c(ne,we),or&&Xl(ne,Ye),Oe;if(we===null){for(;!gt.done;Ye++,gt=oe.next())gt=U(ne,gt.value,Te),gt!==null&&(ee=x(gt,ee,Ye),rt===null?Oe=gt:rt.sibling=gt,rt=gt);return or&&Xl(ne,Ye),Oe}for(we=p(ne,we);!gt.done;Ye++,gt=oe.next())gt=ce(we,ne,Ye,gt.value,Te),gt!==null&&(t&&gt.alternate!==null&&we.delete(gt.key===null?Ye:gt.key),ee=x(gt,ee,Ye),rt===null?Oe=gt:rt.sibling=gt,rt=gt);return t&&we.forEach(function(St){return o(ne,St)}),or&&Xl(ne,Ye),Oe}function $e(ne,ee,oe,Te){if(typeof oe=="object"&&oe!==null&&oe.type===wc&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case l3:e:{for(var Oe=oe.key,rt=ee;rt!==null;){if(rt.key===Oe){if(Oe=oe.type,Oe===wc){if(rt.tag===7){c(ne,rt.sibling),ee=_(rt,oe.props.children),ee.return=ne,ne=ee;break e}}else if(rt.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===Na&&A9(Oe)===rt.type){c(ne,rt.sibling),ee=_(rt,oe.props),ee.ref=B0(ne,rt,oe),ee.return=ne,ne=ee;break e}c(ne,rt);break}else o(ne,rt);rt=rt.sibling}oe.type===wc?(ee=i1(oe.props.children,ne.mode,Te,oe.key),ee.return=ne,ne=ee):(Te=N3(oe.type,oe.key,oe.props,null,ne.mode,Te),Te.ref=B0(ne,ee,oe),Te.return=ne,ne=Te)}return E(ne);case xc:e:{for(rt=oe.key;ee!==null;){if(ee.key===rt)if(ee.tag===4&&ee.stateNode.containerInfo===oe.containerInfo&&ee.stateNode.implementation===oe.implementation){c(ne,ee.sibling),ee=_(ee,oe.children||[]),ee.return=ne,ne=ee;break e}else{c(ne,ee);break}else o(ne,ee);ee=ee.sibling}ee=J4(oe,ne.mode,Te),ee.return=ne,ne=ee}return E(ne);case Na:return rt=oe._init,$e(ne,ee,rt(oe._payload),Te)}if(W0(oe))return ge(ne,ee,oe,Te);if(L0(oe))return xe(ne,ee,oe,Te);v3(ne,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,ee!==null&&ee.tag===6?(c(ne,ee.sibling),ee=_(ee,oe),ee.return=ne,ne=ee):(c(ne,ee),ee=Y4(oe,ne.mode,Te),ee.return=ne,ne=ee),E(ne)):c(ne,ee)}return $e}var Zc=hg(!0),dg=hg(!1),i5=al(null),o5=null,Ac=null,Fp=null;function Bp(){Fp=Ac=o5=null}function Op(t){var o=i5.current;er(i5),t._currentValue=o}function O6(t,o,c){for(;t!==null;){var p=t.alternate;if((t.childLanes&o)!==o?(t.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),t===c)break;t=t.return}}function Bc(t,o){o5=t,Fp=Ac=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&o&&(Bi=!0),t.firstContext=null)}function Po(t){var o=t._currentValue;if(Fp!==t)if(t={context:t,memoizedValue:o,next:null},Ac===null){if(o5===null)throw Error(mt(308));Ac=t,o5.dependencies={lanes:0,firstContext:t}}else Ac=Ac.next=t;return o}var e1=null;function Up(t){e1===null?e1=[t]:e1.push(t)}function pg(t,o,c,p){var _=o.interleaved;return _===null?(c.next=c,Up(o)):(c.next=_.next,_.next=c),o.interleaved=c,na(t,p)}function na(t,o){t.lanes|=o;var c=t.alternate;for(c!==null&&(c.lanes|=o),c=t,t=t.return;t!==null;)t.childLanes|=o,c=t.alternate,c!==null&&(c.childLanes|=o),c=t,t=t.return;return c.tag===3?c.stateNode:null}var ja=!1;function Np(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fg(t,o){t=t.updateQueue,o.updateQueue===t&&(o.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Js(t,o){return{eventTime:t,lane:o,tag:0,payload:null,callback:null,next:null}}function Ya(t,o,c){var p=t.updateQueue;if(p===null)return null;if(p=p.shared,wn&2){var _=p.pending;return _===null?o.next=o:(o.next=_.next,_.next=o),p.pending=o,na(t,c)}return _=p.interleaved,_===null?(o.next=o,Up(p)):(o.next=_.next,_.next=o),p.interleaved=o,na(t,c)}function D3(t,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var p=o.lanes;p&=t.pendingLanes,c|=p,o.lanes=c,Sp(t,c)}}function I9(t,o){var c=t.updateQueue,p=t.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var _=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var E={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};x===null?_=x=E:x=x.next=E,c=c.next}while(c!==null);x===null?_=x=o:x=x.next=o}else _=x=o;c={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:x,shared:p.shared,effects:p.effects},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=o:t.next=o,c.lastBaseUpdate=o}function s5(t,o,c,p){var _=t.updateQueue;ja=!1;var x=_.firstBaseUpdate,E=_.lastBaseUpdate,s=_.shared.pending;if(s!==null){_.shared.pending=null;var C=s,D=C.next;C.next=null,E===null?x=D:E.next=D,E=C;var N=t.alternate;N!==null&&(N=N.updateQueue,s=N.lastBaseUpdate,s!==E&&(s===null?N.firstBaseUpdate=D:s.next=D,N.lastBaseUpdate=C))}if(x!==null){var U=_.baseState;E=0,N=D=C=null,s=x;do{var G=s.lane,ce=s.eventTime;if((p&G)===G){N!==null&&(N=N.next={eventTime:ce,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var ge=t,xe=s;switch(G=o,ce=c,xe.tag){case 1:if(ge=xe.payload,typeof ge=="function"){U=ge.call(ce,U,G);break e}U=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=xe.payload,G=typeof ge=="function"?ge.call(ce,U,G):ge,G==null)break e;U=gr({},U,G);break e;case 2:ja=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,G=_.effects,G===null?_.effects=[s]:G.push(s))}else ce={eventTime:ce,lane:G,tag:s.tag,payload:s.payload,callback:s.callback,next:null},N===null?(D=N=ce,C=U):N=N.next=ce,E|=G;if(s=s.next,s===null){if(s=_.shared.pending,s===null)break;G=s,s=G.next,G.next=null,_.lastBaseUpdate=G,_.shared.pending=null}}while(1);if(N===null&&(C=U),_.baseState=C,_.firstBaseUpdate=D,_.lastBaseUpdate=N,o=_.shared.interleaved,o!==null){_=o;do E|=_.lane,_=_.next;while(_!==o)}else x===null&&(_.shared.lanes=0);l1|=E,t.lanes=E,t.memoizedState=U}}function k9(t,o,c){if(t=o.effects,o.effects=null,t!==null)for(o=0;o<t.length;o++){var p=t[o],_=p.callback;if(_!==null){if(p.callback=null,p=c,typeof _!="function")throw Error(mt(191,_));_.call(p)}}}var D2={},Ts=al(D2),y2=al(D2),v2=al(D2);function t1(t){if(t===D2)throw Error(mt(174));return t}function jp(t,o){switch(Kn(v2,o),Kn(y2,t),Kn(Ts,D2),t=o.nodeType,t){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:y6(null,"");break;default:t=t===8?o.parentNode:o,o=t.namespaceURI||null,t=t.tagName,o=y6(o,t)}er(Ts),Kn(Ts,o)}function Wc(){er(Ts),er(y2),er(v2)}function mg(t){t1(v2.current);var o=t1(Ts.current),c=y6(o,t.type);o!==c&&(Kn(y2,t),Kn(Ts,c))}function Vp(t){y2.current===t&&(er(Ts),er(y2))}var mr=al(0);function a5(t){for(var o=t;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Z4=[];function Gp(){for(var t=0;t<Z4.length;t++)Z4[t]._workInProgressVersionPrimary=null;Z4.length=0}var R3=ia.ReactCurrentDispatcher,W4=ia.ReactCurrentBatchConfig,a1=0,_r=null,Dr=null,Gr=null,l5=!1,n2=!1,x2=0,yT=0;function ci(){throw Error(mt(321))}function $p(t,o){if(o===null)return!1;for(var c=0;c<o.length&&c<t.length;c++)if(!ns(t[c],o[c]))return!1;return!0}function Zp(t,o,c,p,_,x){if(a1=x,_r=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,R3.current=t===null||t.memoizedState===null?bT:TT,t=c(p,_),n2){x=0;do{if(n2=!1,x2=0,25<=x)throw Error(mt(301));x+=1,Gr=Dr=null,o.updateQueue=null,R3.current=ET,t=c(p,_)}while(n2)}if(R3.current=c5,o=Dr!==null&&Dr.next!==null,a1=0,Gr=Dr=_r=null,l5=!1,o)throw Error(mt(300));return t}function Wp(){var t=x2!==0;return x2=0,t}function xs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?_r.memoizedState=Gr=t:Gr=Gr.next=t,Gr}function Ao(){if(Dr===null){var t=_r.alternate;t=t!==null?t.memoizedState:null}else t=Dr.next;var o=Gr===null?_r.memoizedState:Gr.next;if(o!==null)Gr=o,Dr=t;else{if(t===null)throw Error(mt(310));Dr=t,t={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},Gr===null?_r.memoizedState=Gr=t:Gr=Gr.next=t}return Gr}function w2(t,o){return typeof o=="function"?o(t):o}function q4(t){var o=Ao(),c=o.queue;if(c===null)throw Error(mt(311));c.lastRenderedReducer=t;var p=Dr,_=p.baseQueue,x=c.pending;if(x!==null){if(_!==null){var E=_.next;_.next=x.next,x.next=E}p.baseQueue=_=x,c.pending=null}if(_!==null){x=_.next,p=p.baseState;var s=E=null,C=null,D=x;do{var N=D.lane;if((a1&N)===N)C!==null&&(C=C.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),p=D.hasEagerState?D.eagerState:t(p,D.action);else{var U={lane:N,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};C===null?(s=C=U,E=p):C=C.next=U,_r.lanes|=N,l1|=N}D=D.next}while(D!==null&&D!==x);C===null?E=p:C.next=s,ns(p,o.memoizedState)||(Bi=!0),o.memoizedState=p,o.baseState=E,o.baseQueue=C,c.lastRenderedState=p}if(t=c.interleaved,t!==null){_=t;do x=_.lane,_r.lanes|=x,l1|=x,_=_.next;while(_!==t)}else _===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function H4(t){var o=Ao(),c=o.queue;if(c===null)throw Error(mt(311));c.lastRenderedReducer=t;var p=c.dispatch,_=c.pending,x=o.memoizedState;if(_!==null){c.pending=null;var E=_=_.next;do x=t(x,E.action),E=E.next;while(E!==_);ns(x,o.memoizedState)||(Bi=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),c.lastRenderedState=x}return[x,p]}function _g(){}function gg(t,o){var c=_r,p=Ao(),_=o(),x=!ns(p.memoizedState,_);if(x&&(p.memoizedState=_,Bi=!0),p=p.queue,qp(xg.bind(null,c,p,t),[t]),p.getSnapshot!==o||x||Gr!==null&&Gr.memoizedState.tag&1){if(c.flags|=2048,b2(9,vg.bind(null,c,p,_,o),void 0,null),$r===null)throw Error(mt(349));a1&30||yg(c,o,_)}return _}function yg(t,o,c){t.flags|=16384,t={getSnapshot:o,value:c},o=_r.updateQueue,o===null?(o={lastEffect:null,stores:null},_r.updateQueue=o,o.stores=[t]):(c=o.stores,c===null?o.stores=[t]:c.push(t))}function vg(t,o,c,p){o.value=c,o.getSnapshot=p,wg(o)&&bg(t)}function xg(t,o,c){return c(function(){wg(o)&&bg(t)})}function wg(t){var o=t.getSnapshot;t=t.value;try{var c=o();return!ns(t,c)}catch{return!0}}function bg(t){var o=na(t,1);o!==null&&ts(o,t,1,-1)}function L9(t){var o=xs();return typeof t=="function"&&(t=t()),o.memoizedState=o.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:w2,lastRenderedState:t},o.queue=t,t=t.dispatch=wT.bind(null,_r,t),[o.memoizedState,t]}function b2(t,o,c,p){return t={tag:t,create:o,destroy:c,deps:p,next:null},o=_r.updateQueue,o===null?(o={lastEffect:null,stores:null},_r.updateQueue=o,o.lastEffect=t.next=t):(c=o.lastEffect,c===null?o.lastEffect=t.next=t:(p=c.next,c.next=t,t.next=p,o.lastEffect=t)),t}function Tg(){return Ao().memoizedState}function F3(t,o,c,p){var _=xs();_r.flags|=t,_.memoizedState=b2(1|o,c,void 0,p===void 0?null:p)}function R5(t,o,c,p){var _=Ao();p=p===void 0?null:p;var x=void 0;if(Dr!==null){var E=Dr.memoizedState;if(x=E.destroy,p!==null&&$p(p,E.deps)){_.memoizedState=b2(o,c,x,p);return}}_r.flags|=t,_.memoizedState=b2(1|o,c,x,p)}function z9(t,o){return F3(8390656,8,t,o)}function qp(t,o){return R5(2048,8,t,o)}function Eg(t,o){return R5(4,2,t,o)}function Sg(t,o){return R5(4,4,t,o)}function Mg(t,o){if(typeof o=="function")return t=t(),o(t),function(){o(null)};if(o!=null)return t=t(),o.current=t,function(){o.current=null}}function Cg(t,o,c){return c=c!=null?c.concat([t]):null,R5(4,4,Mg.bind(null,o,t),c)}function Hp(){}function Pg(t,o){var c=Ao();o=o===void 0?null:o;var p=c.memoizedState;return p!==null&&o!==null&&$p(o,p[1])?p[0]:(c.memoizedState=[t,o],t)}function Ag(t,o){var c=Ao();o=o===void 0?null:o;var p=c.memoizedState;return p!==null&&o!==null&&$p(o,p[1])?p[0]:(t=t(),c.memoizedState=[t,o],t)}function Ig(t,o,c){return a1&21?(ns(c,o)||(c=R_(),_r.lanes|=c,l1|=c,t.baseState=!0),o):(t.baseState&&(t.baseState=!1,Bi=!0),t.memoizedState=c)}function vT(t,o){var c=Vn;Vn=c!==0&&4>c?c:4,t(!0);var p=W4.transition;W4.transition={};try{t(!1),o()}finally{Vn=c,W4.transition=p}}function kg(){return Ao().memoizedState}function xT(t,o,c){var p=Qa(t);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},Lg(t))zg(o,c);else if(c=pg(t,o,c,p),c!==null){var _=xi();ts(c,t,p,_),Dg(c,o,p)}}function wT(t,o,c){var p=Qa(t),_={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(Lg(t))zg(o,_);else{var x=t.alternate;if(t.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var E=o.lastRenderedState,s=x(E,c);if(_.hasEagerState=!0,_.eagerState=s,ns(s,E)){var C=o.interleaved;C===null?(_.next=_,Up(o)):(_.next=C.next,C.next=_),o.interleaved=_;return}}catch{}finally{}c=pg(t,o,_,p),c!==null&&(_=xi(),ts(c,t,p,_),Dg(c,o,p))}}function Lg(t){var o=t.alternate;return t===_r||o!==null&&o===_r}function zg(t,o){n2=l5=!0;var c=t.pending;c===null?o.next=o:(o.next=c.next,c.next=o),t.pending=o}function Dg(t,o,c){if(c&4194240){var p=o.lanes;p&=t.pendingLanes,c|=p,o.lanes=c,Sp(t,c)}}var c5={readContext:Po,useCallback:ci,useContext:ci,useEffect:ci,useImperativeHandle:ci,useInsertionEffect:ci,useLayoutEffect:ci,useMemo:ci,useReducer:ci,useRef:ci,useState:ci,useDebugValue:ci,useDeferredValue:ci,useTransition:ci,useMutableSource:ci,useSyncExternalStore:ci,useId:ci,unstable_isNewReconciler:!1},bT={readContext:Po,useCallback:function(t,o){return xs().memoizedState=[t,o===void 0?null:o],t},useContext:Po,useEffect:z9,useImperativeHandle:function(t,o,c){return c=c!=null?c.concat([t]):null,F3(4194308,4,Mg.bind(null,o,t),c)},useLayoutEffect:function(t,o){return F3(4194308,4,t,o)},useInsertionEffect:function(t,o){return F3(4,2,t,o)},useMemo:function(t,o){var c=xs();return o=o===void 0?null:o,t=t(),c.memoizedState=[t,o],t},useReducer:function(t,o,c){var p=xs();return o=c!==void 0?c(o):o,p.memoizedState=p.baseState=o,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},p.queue=t,t=t.dispatch=xT.bind(null,_r,t),[p.memoizedState,t]},useRef:function(t){var o=xs();return t={current:t},o.memoizedState=t},useState:L9,useDebugValue:Hp,useDeferredValue:function(t){return xs().memoizedState=t},useTransition:function(){var t=L9(!1),o=t[0];return t=vT.bind(null,t[1]),xs().memoizedState=t,[o,t]},useMutableSource:function(){},useSyncExternalStore:function(t,o,c){var p=_r,_=xs();if(or){if(c===void 0)throw Error(mt(407));c=c()}else{if(c=o(),$r===null)throw Error(mt(349));a1&30||yg(p,o,c)}_.memoizedState=c;var x={value:c,getSnapshot:o};return _.queue=x,z9(xg.bind(null,p,x,t),[t]),p.flags|=2048,b2(9,vg.bind(null,p,x,c,o),void 0,null),c},useId:function(){var t=xs(),o=$r.identifierPrefix;if(or){var c=Ys,p=Ks;c=(p&~(1<<32-es(p)-1)).toString(32)+c,o=":"+o+"R"+c,c=x2++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=yT++,o=":"+o+"r"+c.toString(32)+":";return t.memoizedState=o},unstable_isNewReconciler:!1},TT={readContext:Po,useCallback:Pg,useContext:Po,useEffect:qp,useImperativeHandle:Cg,useInsertionEffect:Eg,useLayoutEffect:Sg,useMemo:Ag,useReducer:q4,useRef:Tg,useState:function(){return q4(w2)},useDebugValue:Hp,useDeferredValue:function(t){var o=Ao();return Ig(o,Dr.memoizedState,t)},useTransition:function(){var t=q4(w2)[0],o=Ao().memoizedState;return[t,o]},useMutableSource:_g,useSyncExternalStore:gg,useId:kg,unstable_isNewReconciler:!1},ET={readContext:Po,useCallback:Pg,useContext:Po,useEffect:qp,useImperativeHandle:Cg,useInsertionEffect:Eg,useLayoutEffect:Sg,useMemo:Ag,useReducer:H4,useRef:Tg,useState:function(){return H4(w2)},useDebugValue:Hp,useDeferredValue:function(t){var o=Ao();return Dr===null?o.memoizedState=t:Ig(o,Dr.memoizedState,t)},useTransition:function(){var t=H4(w2)[0],o=Ao().memoizedState;return[t,o]},useMutableSource:_g,useSyncExternalStore:gg,useId:kg,unstable_isNewReconciler:!1};function Xo(t,o){if(t&&t.defaultProps){o=gr({},o),t=t.defaultProps;for(var c in t)o[c]===void 0&&(o[c]=t[c]);return o}return o}function U6(t,o,c,p){o=t.memoizedState,c=c(p,o),c=c==null?o:gr({},o,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var F5={isMounted:function(t){return(t=t._reactInternals)?d1(t)===t:!1},enqueueSetState:function(t,o,c){t=t._reactInternals;var p=xi(),_=Qa(t),x=Js(p,_);x.payload=o,c!=null&&(x.callback=c),o=Ya(t,x,_),o!==null&&(ts(o,t,_,p),D3(o,t,_))},enqueueReplaceState:function(t,o,c){t=t._reactInternals;var p=xi(),_=Qa(t),x=Js(p,_);x.tag=1,x.payload=o,c!=null&&(x.callback=c),o=Ya(t,x,_),o!==null&&(ts(o,t,_,p),D3(o,t,_))},enqueueForceUpdate:function(t,o){t=t._reactInternals;var c=xi(),p=Qa(t),_=Js(c,p);_.tag=2,o!=null&&(_.callback=o),o=Ya(t,_,p),o!==null&&(ts(o,t,p,c),D3(o,t,p))}};function D9(t,o,c,p,_,x,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(p,x,E):o.prototype&&o.prototype.isPureReactComponent?!f2(c,p)||!f2(_,x):!0}function Rg(t,o,c){var p=!1,_=rl,x=o.contextType;return typeof x=="object"&&x!==null?x=Po(x):(_=Ui(o)?o1:pi.current,p=o.contextTypes,x=(p=p!=null)?Gc(t,_):rl),o=new o(c,x),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=F5,t.stateNode=o,o._reactInternals=t,p&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=_,t.__reactInternalMemoizedMaskedChildContext=x),o}function R9(t,o,c,p){t=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,p),o.state!==t&&F5.enqueueReplaceState(o,o.state,null)}function N6(t,o,c,p){var _=t.stateNode;_.props=c,_.state=t.memoizedState,_.refs={},Np(t);var x=o.contextType;typeof x=="object"&&x!==null?_.context=Po(x):(x=Ui(o)?o1:pi.current,_.context=Gc(t,x)),_.state=t.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(U6(t,o,x,c),_.state=t.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(o=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),o!==_.state&&F5.enqueueReplaceState(_,_.state,null),s5(t,c,_,p),_.state=t.memoizedState),typeof _.componentDidMount=="function"&&(t.flags|=4194308)}function qc(t,o){try{var c="",p=o;do c+=Jw(p),p=p.return;while(p);var _=c}catch(x){_=`
Error generating stack: `+x.message+`
`+x.stack}return{value:t,source:o,stack:_,digest:null}}function X4(t,o,c){return{value:t,source:null,stack:c??null,digest:o??null}}function j6(t,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var ST=typeof WeakMap=="function"?WeakMap:Map;function Fg(t,o,c){c=Js(-1,c),c.tag=3,c.payload={element:null};var p=o.value;return c.callback=function(){h5||(h5=!0,Y6=p),j6(t,o)},c}function Bg(t,o,c){c=Js(-1,c),c.tag=3;var p=t.type.getDerivedStateFromError;if(typeof p=="function"){var _=o.value;c.payload=function(){return p(_)},c.callback=function(){j6(t,o)}}var x=t.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(c.callback=function(){j6(t,o),typeof p!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),c}function F9(t,o,c){var p=t.pingCache;if(p===null){p=t.pingCache=new ST;var _=new Set;p.set(o,_)}else _=p.get(o),_===void 0&&(_=new Set,p.set(o,_));_.has(c)||(_.add(c),t=UT.bind(null,t,o,c),o.then(t,t))}function B9(t){do{var o;if((o=t.tag===13)&&(o=t.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return t;t=t.return}while(t!==null);return null}function O9(t,o,c,p,_){return t.mode&1?(t.flags|=65536,t.lanes=_,t):(t===o?t.flags|=65536:(t.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=Js(-1,1),o.tag=2,Ya(c,o,1))),c.lanes|=1),t)}var MT=ia.ReactCurrentOwner,Bi=!1;function yi(t,o,c,p){o.child=t===null?dg(o,null,c,p):Zc(o,t.child,c,p)}function U9(t,o,c,p,_){c=c.render;var x=o.ref;return Bc(o,_),p=Zp(t,o,c,p,x,_),c=Wp(),t!==null&&!Bi?(o.updateQueue=t.updateQueue,o.flags&=-2053,t.lanes&=~_,ra(t,o,_)):(or&&c&&zp(o),o.flags|=1,yi(t,o,p,_),o.child)}function N9(t,o,c,p,_){if(t===null){var x=c.type;return typeof x=="function"&&!n7(x)&&x.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=x,Og(t,o,x,p,_)):(t=N3(c.type,null,p,o,o.mode,_),t.ref=o.ref,t.return=o,o.child=t)}if(x=t.child,!(t.lanes&_)){var E=x.memoizedProps;if(c=c.compare,c=c!==null?c:f2,c(E,p)&&t.ref===o.ref)return ra(t,o,_)}return o.flags|=1,t=el(x,p),t.ref=o.ref,t.return=o,o.child=t}function Og(t,o,c,p,_){if(t!==null){var x=t.memoizedProps;if(f2(x,p)&&t.ref===o.ref)if(Bi=!1,o.pendingProps=p=x,(t.lanes&_)!==0)t.flags&131072&&(Bi=!0);else return o.lanes=t.lanes,ra(t,o,_)}return V6(t,o,c,p,_)}function Ug(t,o,c){var p=o.pendingProps,_=p.children,x=t!==null?t.memoizedState:null;if(p.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kn(kc,Ji),Ji|=c;else{if(!(c&1073741824))return t=x!==null?x.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:t,cachePool:null,transitions:null},o.updateQueue=null,Kn(kc,Ji),Ji|=t,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=x!==null?x.baseLanes:c,Kn(kc,Ji),Ji|=p}else x!==null?(p=x.baseLanes|c,o.memoizedState=null):p=c,Kn(kc,Ji),Ji|=p;return yi(t,o,_,c),o.child}function Ng(t,o){var c=o.ref;(t===null&&c!==null||t!==null&&t.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function V6(t,o,c,p,_){var x=Ui(c)?o1:pi.current;return x=Gc(o,x),Bc(o,_),c=Zp(t,o,c,p,x,_),p=Wp(),t!==null&&!Bi?(o.updateQueue=t.updateQueue,o.flags&=-2053,t.lanes&=~_,ra(t,o,_)):(or&&p&&zp(o),o.flags|=1,yi(t,o,c,_),o.child)}function j9(t,o,c,p,_){if(Ui(c)){var x=!0;t5(o)}else x=!1;if(Bc(o,_),o.stateNode===null)B3(t,o),Rg(o,c,p),N6(o,c,p,_),p=!0;else if(t===null){var E=o.stateNode,s=o.memoizedProps;E.props=s;var C=E.context,D=c.contextType;typeof D=="object"&&D!==null?D=Po(D):(D=Ui(c)?o1:pi.current,D=Gc(o,D));var N=c.getDerivedStateFromProps,U=typeof N=="function"||typeof E.getSnapshotBeforeUpdate=="function";U||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(s!==p||C!==D)&&R9(o,E,p,D),ja=!1;var G=o.memoizedState;E.state=G,s5(o,p,E,_),C=o.memoizedState,s!==p||G!==C||Oi.current||ja?(typeof N=="function"&&(U6(o,c,N,p),C=o.memoizedState),(s=ja||D9(o,c,s,p,G,C,D))?(U||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=C),E.props=p,E.state=C,E.context=D,p=s):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{E=o.stateNode,fg(t,o),s=o.memoizedProps,D=o.type===o.elementType?s:Xo(o.type,s),E.props=D,U=o.pendingProps,G=E.context,C=c.contextType,typeof C=="object"&&C!==null?C=Po(C):(C=Ui(c)?o1:pi.current,C=Gc(o,C));var ce=c.getDerivedStateFromProps;(N=typeof ce=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(s!==U||G!==C)&&R9(o,E,p,C),ja=!1,G=o.memoizedState,E.state=G,s5(o,p,E,_);var ge=o.memoizedState;s!==U||G!==ge||Oi.current||ja?(typeof ce=="function"&&(U6(o,c,ce,p),ge=o.memoizedState),(D=ja||D9(o,c,D,p,G,ge,C)||!1)?(N||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,ge,C),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,ge,C)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||s===t.memoizedProps&&G===t.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&G===t.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=ge),E.props=p,E.state=ge,E.context=C,p=D):(typeof E.componentDidUpdate!="function"||s===t.memoizedProps&&G===t.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&G===t.memoizedState||(o.flags|=1024),p=!1)}return G6(t,o,c,p,x,_)}function G6(t,o,c,p,_,x){Ng(t,o);var E=(o.flags&128)!==0;if(!p&&!E)return _&&M9(o,c,!1),ra(t,o,x);p=o.stateNode,MT.current=o;var s=E&&typeof c.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,t!==null&&E?(o.child=Zc(o,t.child,null,x),o.child=Zc(o,null,s,x)):yi(t,o,s,x),o.memoizedState=p.state,_&&M9(o,c,!0),o.child}function jg(t){var o=t.stateNode;o.pendingContext?S9(t,o.pendingContext,o.pendingContext!==o.context):o.context&&S9(t,o.context,!1),jp(t,o.containerInfo)}function V9(t,o,c,p,_){return $c(),Rp(_),o.flags|=256,yi(t,o,c,p),o.child}var $6={dehydrated:null,treeContext:null,retryLane:0};function Z6(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vg(t,o,c){var p=o.pendingProps,_=mr.current,x=!1,E=(o.flags&128)!==0,s;if((s=E)||(s=t!==null&&t.memoizedState===null?!1:(_&2)!==0),s?(x=!0,o.flags&=-129):(t===null||t.memoizedState!==null)&&(_|=1),Kn(mr,_&1),t===null)return B6(o),t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(o.mode&1?t.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(E=p.children,t=p.fallback,x?(p=o.mode,x=o.child,E={mode:"hidden",children:E},!(p&1)&&x!==null?(x.childLanes=0,x.pendingProps=E):x=U5(E,p,0,null),t=i1(t,p,c,null),x.return=o,t.return=o,x.sibling=t,o.child=x,o.child.memoizedState=Z6(c),o.memoizedState=$6,t):Xp(o,E));if(_=t.memoizedState,_!==null&&(s=_.dehydrated,s!==null))return CT(t,o,E,p,s,_,c);if(x){x=p.fallback,E=o.mode,_=t.child,s=_.sibling;var C={mode:"hidden",children:p.children};return!(E&1)&&o.child!==_?(p=o.child,p.childLanes=0,p.pendingProps=C,o.deletions=null):(p=el(_,C),p.subtreeFlags=_.subtreeFlags&14680064),s!==null?x=el(s,x):(x=i1(x,E,c,null),x.flags|=2),x.return=o,p.return=o,p.sibling=x,o.child=p,p=x,x=o.child,E=t.child.memoizedState,E=E===null?Z6(c):{baseLanes:E.baseLanes|c,cachePool:null,transitions:E.transitions},x.memoizedState=E,x.childLanes=t.childLanes&~c,o.memoizedState=$6,p}return x=t.child,t=x.sibling,p=el(x,{mode:"visible",children:p.children}),!(o.mode&1)&&(p.lanes=c),p.return=o,p.sibling=null,t!==null&&(c=o.deletions,c===null?(o.deletions=[t],o.flags|=16):c.push(t)),o.child=p,o.memoizedState=null,p}function Xp(t,o){return o=U5({mode:"visible",children:o},t.mode,0,null),o.return=t,t.child=o}function x3(t,o,c,p){return p!==null&&Rp(p),Zc(o,t.child,null,c),t=Xp(o,o.pendingProps.children),t.flags|=2,o.memoizedState=null,t}function CT(t,o,c,p,_,x,E){if(c)return o.flags&256?(o.flags&=-257,p=X4(Error(mt(422))),x3(t,o,E,p)):o.memoizedState!==null?(o.child=t.child,o.flags|=128,null):(x=p.fallback,_=o.mode,p=U5({mode:"visible",children:p.children},_,0,null),x=i1(x,_,E,null),x.flags|=2,p.return=o,x.return=o,p.sibling=x,o.child=p,o.mode&1&&Zc(o,t.child,null,E),o.child.memoizedState=Z6(E),o.memoizedState=$6,x);if(!(o.mode&1))return x3(t,o,E,null);if(_.data==="$!"){if(p=_.nextSibling&&_.nextSibling.dataset,p)var s=p.dgst;return p=s,x=Error(mt(419)),p=X4(x,p,void 0),x3(t,o,E,p)}if(s=(E&t.childLanes)!==0,Bi||s){if(p=$r,p!==null){switch(E&-E){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(p.suspendedLanes|E)?0:_,_!==0&&_!==x.retryLane&&(x.retryLane=_,na(t,_),ts(p,t,_,-1))}return t7(),p=X4(Error(mt(421))),x3(t,o,E,p)}return _.data==="$?"?(o.flags|=128,o.child=t.child,o=NT.bind(null,t),_._reactRetry=o,null):(t=x.treeContext,no=Ka(_.nextSibling),ro=o,or=!0,Jo=null,t!==null&&(To[Eo++]=Ks,To[Eo++]=Ys,To[Eo++]=s1,Ks=t.id,Ys=t.overflow,s1=o),o=Xp(o,p.children),o.flags|=4096,o)}function G9(t,o,c){t.lanes|=o;var p=t.alternate;p!==null&&(p.lanes|=o),O6(t.return,o,c)}function K4(t,o,c,p,_){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:_}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=p,x.tail=c,x.tailMode=_)}function Gg(t,o,c){var p=o.pendingProps,_=p.revealOrder,x=p.tail;if(yi(t,o,p.children,c),p=mr.current,p&2)p=p&1|2,o.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=o.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&G9(t,c,o);else if(t.tag===19)G9(t,c,o);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===o)break e;for(;t.sibling===null;){if(t.return===null||t.return===o)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}p&=1}if(Kn(mr,p),!(o.mode&1))o.memoizedState=null;else switch(_){case"forwards":for(c=o.child,_=null;c!==null;)t=c.alternate,t!==null&&a5(t)===null&&(_=c),c=c.sibling;c=_,c===null?(_=o.child,o.child=null):(_=c.sibling,c.sibling=null),K4(o,!1,_,c,x);break;case"backwards":for(c=null,_=o.child,o.child=null;_!==null;){if(t=_.alternate,t!==null&&a5(t)===null){o.child=_;break}t=_.sibling,_.sibling=c,c=_,_=t}K4(o,!0,c,null,x);break;case"together":K4(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function B3(t,o){!(o.mode&1)&&t!==null&&(t.alternate=null,o.alternate=null,o.flags|=2)}function ra(t,o,c){if(t!==null&&(o.dependencies=t.dependencies),l1|=o.lanes,!(c&o.childLanes))return null;if(t!==null&&o.child!==t.child)throw Error(mt(153));if(o.child!==null){for(t=o.child,c=el(t,t.pendingProps),o.child=c,c.return=o;t.sibling!==null;)t=t.sibling,c=c.sibling=el(t,t.pendingProps),c.return=o;c.sibling=null}return o.child}function PT(t,o,c){switch(o.tag){case 3:jg(o),$c();break;case 5:mg(o);break;case 1:Ui(o.type)&&t5(o);break;case 4:jp(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,_=o.memoizedProps.value;Kn(i5,p._currentValue),p._currentValue=_;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(Kn(mr,mr.current&1),o.flags|=128,null):c&o.child.childLanes?Vg(t,o,c):(Kn(mr,mr.current&1),t=ra(t,o,c),t!==null?t.sibling:null);Kn(mr,mr.current&1);break;case 19:if(p=(c&o.childLanes)!==0,t.flags&128){if(p)return Gg(t,o,c);o.flags|=128}if(_=o.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Kn(mr,mr.current),p)break;return null;case 22:case 23:return o.lanes=0,Ug(t,o,c)}return ra(t,o,c)}var $g,W6,Zg,Wg;$g=function(t,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}};W6=function(){};Zg=function(t,o,c,p){var _=t.memoizedProps;if(_!==p){t=o.stateNode,t1(Ts.current);var x=null;switch(c){case"input":_=f6(t,_),p=f6(t,p),x=[];break;case"select":_=gr({},_,{value:void 0}),p=gr({},p,{value:void 0}),x=[];break;case"textarea":_=g6(t,_),p=g6(t,p),x=[];break;default:typeof _.onClick!="function"&&typeof p.onClick=="function"&&(t.onclick=Q3)}v6(c,p);var E;c=null;for(D in _)if(!p.hasOwnProperty(D)&&_.hasOwnProperty(D)&&_[D]!=null)if(D==="style"){var s=_[D];for(E in s)s.hasOwnProperty(E)&&(c||(c={}),c[E]="")}else D!=="dangerouslySetInnerHTML"&&D!=="children"&&D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(a2.hasOwnProperty(D)?x||(x=[]):(x=x||[]).push(D,null));for(D in p){var C=p[D];if(s=_!=null?_[D]:void 0,p.hasOwnProperty(D)&&C!==s&&(C!=null||s!=null))if(D==="style")if(s){for(E in s)!s.hasOwnProperty(E)||C&&C.hasOwnProperty(E)||(c||(c={}),c[E]="");for(E in C)C.hasOwnProperty(E)&&s[E]!==C[E]&&(c||(c={}),c[E]=C[E])}else c||(x||(x=[]),x.push(D,c)),c=C;else D==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,s=s?s.__html:void 0,C!=null&&s!==C&&(x=x||[]).push(D,C)):D==="children"?typeof C!="string"&&typeof C!="number"||(x=x||[]).push(D,""+C):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&(a2.hasOwnProperty(D)?(C!=null&&D==="onScroll"&&Qn("scroll",t),x||s===C||(x=[])):(x=x||[]).push(D,C))}c&&(x=x||[]).push("style",c);var D=x;(o.updateQueue=D)&&(o.flags|=4)}};Wg=function(t,o,c,p){c!==p&&(o.flags|=4)};function O0(t,o){if(!or)switch(t.tailMode){case"hidden":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o||t.tail===null?t.tail=null:t.tail.sibling=null:p.sibling=null}}function ui(t){var o=t.alternate!==null&&t.alternate.child===t.child,c=0,p=0;if(o)for(var _=t.child;_!==null;)c|=_.lanes|_.childLanes,p|=_.subtreeFlags&14680064,p|=_.flags&14680064,_.return=t,_=_.sibling;else for(_=t.child;_!==null;)c|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=t,_=_.sibling;return t.subtreeFlags|=p,t.childLanes=c,o}function AT(t,o,c){var p=o.pendingProps;switch(Dp(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ui(o),null;case 1:return Ui(o.type)&&e5(),ui(o),null;case 3:return p=o.stateNode,Wc(),er(Oi),er(pi),Gp(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(t===null||t.child===null)&&(y3(o)?o.flags|=4:t===null||t.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,Jo!==null&&(ep(Jo),Jo=null))),W6(t,o),ui(o),null;case 5:Vp(o);var _=t1(v2.current);if(c=o.type,t!==null&&o.stateNode!=null)Zg(t,o,c,p,_),t.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(mt(166));return ui(o),null}if(t=t1(Ts.current),y3(o)){p=o.stateNode,c=o.type;var x=o.memoizedProps;switch(p[ws]=o,p[g2]=x,t=(o.mode&1)!==0,c){case"dialog":Qn("cancel",p),Qn("close",p);break;case"iframe":case"object":case"embed":Qn("load",p);break;case"video":case"audio":for(_=0;_<H0.length;_++)Qn(H0[_],p);break;case"source":Qn("error",p);break;case"img":case"image":case"link":Qn("error",p),Qn("load",p);break;case"details":Qn("toggle",p);break;case"input":J8(p,x),Qn("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!x.multiple},Qn("invalid",p);break;case"textarea":e9(p,x),Qn("invalid",p)}v6(c,x),_=null;for(var E in x)if(x.hasOwnProperty(E)){var s=x[E];E==="children"?typeof s=="string"?p.textContent!==s&&(x.suppressHydrationWarning!==!0&&g3(p.textContent,s,t),_=["children",s]):typeof s=="number"&&p.textContent!==""+s&&(x.suppressHydrationWarning!==!0&&g3(p.textContent,s,t),_=["children",""+s]):a2.hasOwnProperty(E)&&s!=null&&E==="onScroll"&&Qn("scroll",p)}switch(c){case"input":c3(p),Q8(p,x,!0);break;case"textarea":c3(p),t9(p);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(p.onclick=Q3)}p=_,o.updateQueue=p,p!==null&&(o.flags|=4)}else{E=_.nodeType===9?_:_.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=x_(c)),t==="http://www.w3.org/1999/xhtml"?c==="script"?(t=E.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof p.is=="string"?t=E.createElement(c,{is:p.is}):(t=E.createElement(c),c==="select"&&(E=t,p.multiple?E.multiple=!0:p.size&&(E.size=p.size))):t=E.createElementNS(t,c),t[ws]=o,t[g2]=p,$g(t,o,!1,!1),o.stateNode=t;e:{switch(E=x6(c,p),c){case"dialog":Qn("cancel",t),Qn("close",t),_=p;break;case"iframe":case"object":case"embed":Qn("load",t),_=p;break;case"video":case"audio":for(_=0;_<H0.length;_++)Qn(H0[_],t);_=p;break;case"source":Qn("error",t),_=p;break;case"img":case"image":case"link":Qn("error",t),Qn("load",t),_=p;break;case"details":Qn("toggle",t),_=p;break;case"input":J8(t,p),_=f6(t,p),Qn("invalid",t);break;case"option":_=p;break;case"select":t._wrapperState={wasMultiple:!!p.multiple},_=gr({},p,{value:void 0}),Qn("invalid",t);break;case"textarea":e9(t,p),_=g6(t,p),Qn("invalid",t);break;default:_=p}v6(c,_),s=_;for(x in s)if(s.hasOwnProperty(x)){var C=s[x];x==="style"?T_(t,C):x==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&w_(t,C)):x==="children"?typeof C=="string"?(c!=="textarea"||C!=="")&&l2(t,C):typeof C=="number"&&l2(t,""+C):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(a2.hasOwnProperty(x)?C!=null&&x==="onScroll"&&Qn("scroll",t):C!=null&&vp(t,x,C,E))}switch(c){case"input":c3(t),Q8(t,p,!1);break;case"textarea":c3(t),t9(t);break;case"option":p.value!=null&&t.setAttribute("value",""+nl(p.value));break;case"select":t.multiple=!!p.multiple,x=p.value,x!=null?zc(t,!!p.multiple,x,!1):p.defaultValue!=null&&zc(t,!!p.multiple,p.defaultValue,!0);break;default:typeof _.onClick=="function"&&(t.onclick=Q3)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return ui(o),null;case 6:if(t&&o.stateNode!=null)Wg(t,o,t.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(mt(166));if(c=t1(v2.current),t1(Ts.current),y3(o)){if(p=o.stateNode,c=o.memoizedProps,p[ws]=o,(x=p.nodeValue!==c)&&(t=ro,t!==null))switch(t.tag){case 3:g3(p.nodeValue,c,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&g3(p.nodeValue,c,(t.mode&1)!==0)}x&&(o.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[ws]=o,o.stateNode=p}return ui(o),null;case 13:if(er(mr),p=o.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(or&&no!==null&&o.mode&1&&!(o.flags&128))ug(),$c(),o.flags|=98560,x=!1;else if(x=y3(o),p!==null&&p.dehydrated!==null){if(t===null){if(!x)throw Error(mt(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(mt(317));x[ws]=o}else $c(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;ui(o),x=!1}else Jo!==null&&(ep(Jo),Jo=null),x=!0;if(!x)return o.flags&65536?o:null}return o.flags&128?(o.lanes=c,o):(p=p!==null,p!==(t!==null&&t.memoizedState!==null)&&p&&(o.child.flags|=8192,o.mode&1&&(t===null||mr.current&1?Rr===0&&(Rr=3):t7())),o.updateQueue!==null&&(o.flags|=4),ui(o),null);case 4:return Wc(),W6(t,o),t===null&&m2(o.stateNode.containerInfo),ui(o),null;case 10:return Op(o.type._context),ui(o),null;case 17:return Ui(o.type)&&e5(),ui(o),null;case 19:if(er(mr),x=o.memoizedState,x===null)return ui(o),null;if(p=(o.flags&128)!==0,E=x.rendering,E===null)if(p)O0(x,!1);else{if(Rr!==0||t!==null&&t.flags&128)for(t=o.child;t!==null;){if(E=a5(t),E!==null){for(o.flags|=128,O0(x,!1),p=E.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=c,c=o.child;c!==null;)x=c,t=p,x.flags&=14680066,E=x.alternate,E===null?(x.childLanes=0,x.lanes=t,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=E.childLanes,x.lanes=E.lanes,x.child=E.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=E.memoizedProps,x.memoizedState=E.memoizedState,x.updateQueue=E.updateQueue,x.type=E.type,t=E.dependencies,x.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),c=c.sibling;return Kn(mr,mr.current&1|2),o.child}t=t.sibling}x.tail!==null&&Er()>Hc&&(o.flags|=128,p=!0,O0(x,!1),o.lanes=4194304)}else{if(!p)if(t=a5(E),t!==null){if(o.flags|=128,p=!0,c=t.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),O0(x,!0),x.tail===null&&x.tailMode==="hidden"&&!E.alternate&&!or)return ui(o),null}else 2*Er()-x.renderingStartTime>Hc&&c!==1073741824&&(o.flags|=128,p=!0,O0(x,!1),o.lanes=4194304);x.isBackwards?(E.sibling=o.child,o.child=E):(c=x.last,c!==null?c.sibling=E:o.child=E,x.last=E)}return x.tail!==null?(o=x.tail,x.rendering=o,x.tail=o.sibling,x.renderingStartTime=Er(),o.sibling=null,c=mr.current,Kn(mr,p?c&1|2:c&1),o):(ui(o),null);case 22:case 23:return e7(),p=o.memoizedState!==null,t!==null&&t.memoizedState!==null!==p&&(o.flags|=8192),p&&o.mode&1?Ji&1073741824&&(ui(o),o.subtreeFlags&6&&(o.flags|=8192)):ui(o),null;case 24:return null;case 25:return null}throw Error(mt(156,o.tag))}function IT(t,o){switch(Dp(o),o.tag){case 1:return Ui(o.type)&&e5(),t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 3:return Wc(),er(Oi),er(pi),Gp(),t=o.flags,t&65536&&!(t&128)?(o.flags=t&-65537|128,o):null;case 5:return Vp(o),null;case 13:if(er(mr),t=o.memoizedState,t!==null&&t.dehydrated!==null){if(o.alternate===null)throw Error(mt(340));$c()}return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 19:return er(mr),null;case 4:return Wc(),null;case 10:return Op(o.type._context),null;case 22:case 23:return e7(),null;case 24:return null;default:return null}}var w3=!1,di=!1,kT=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function Ic(t,o){var c=t.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){wr(t,o,p)}else c.current=null}function q6(t,o,c){try{c()}catch(p){wr(t,o,p)}}var $9=!1;function LT(t,o){if(I6=K3,t=Y_(),Lp(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var _=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var E=0,s=-1,C=-1,D=0,N=0,U=t,G=null;t:for(;;){for(var ce;U!==c||_!==0&&U.nodeType!==3||(s=E+_),U!==x||p!==0&&U.nodeType!==3||(C=E+p),U.nodeType===3&&(E+=U.nodeValue.length),(ce=U.firstChild)!==null;)G=U,U=ce;for(;;){if(U===t)break t;if(G===c&&++D===_&&(s=E),G===x&&++N===p&&(C=E),(ce=U.nextSibling)!==null)break;U=G,G=U.parentNode}U=ce}c=s===-1||C===-1?null:{start:s,end:C}}else c=null}c=c||{start:0,end:0}}else c=null;for(k6={focusedElem:t,selectionRange:c},K3=!1,Ft=o;Ft!==null;)if(o=Ft,t=o.child,(o.subtreeFlags&1028)!==0&&t!==null)t.return=o,Ft=t;else for(;Ft!==null;){o=Ft;try{var ge=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var xe=ge.memoizedProps,$e=ge.memoizedState,ne=o.stateNode,ee=ne.getSnapshotBeforeUpdate(o.elementType===o.type?xe:Xo(o.type,xe),$e);ne.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var oe=o.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(mt(163))}}catch(Te){wr(o,o.return,Te)}if(t=o.sibling,t!==null){t.return=o.return,Ft=t;break}Ft=o.return}return ge=$9,$9=!1,ge}function r2(t,o,c){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var _=p=p.next;do{if((_.tag&t)===t){var x=_.destroy;_.destroy=void 0,x!==void 0&&q6(o,c,x)}_=_.next}while(_!==p)}}function B5(t,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&t)===t){var p=c.create;c.destroy=p()}c=c.next}while(c!==o)}}function H6(t){var o=t.ref;if(o!==null){var c=t.stateNode;switch(t.tag){case 5:t=c;break;default:t=c}typeof o=="function"?o(t):o.current=t}}function qg(t){var o=t.alternate;o!==null&&(t.alternate=null,qg(o)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(o=t.stateNode,o!==null&&(delete o[ws],delete o[g2],delete o[D6],delete o[fT],delete o[mT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Hg(t){return t.tag===5||t.tag===3||t.tag===4}function Z9(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function X6(t,o,c){var p=t.tag;if(p===5||p===6)t=t.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(t,o):c.insertBefore(t,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(t,c)):(o=c,o.appendChild(t)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Q3));else if(p!==4&&(t=t.child,t!==null))for(X6(t,o,c),t=t.sibling;t!==null;)X6(t,o,c),t=t.sibling}function K6(t,o,c){var p=t.tag;if(p===5||p===6)t=t.stateNode,o?c.insertBefore(t,o):c.appendChild(t);else if(p!==4&&(t=t.child,t!==null))for(K6(t,o,c),t=t.sibling;t!==null;)K6(t,o,c),t=t.sibling}var Kr=null,Ko=!1;function Fa(t,o,c){for(c=c.child;c!==null;)Xg(t,o,c),c=c.sibling}function Xg(t,o,c){if(bs&&typeof bs.onCommitFiberUnmount=="function")try{bs.onCommitFiberUnmount(A5,c)}catch{}switch(c.tag){case 5:di||Ic(c,o);case 6:var p=Kr,_=Ko;Kr=null,Fa(t,o,c),Kr=p,Ko=_,Kr!==null&&(Ko?(t=Kr,c=c.stateNode,t.nodeType===8?t.parentNode.removeChild(c):t.removeChild(c)):Kr.removeChild(c.stateNode));break;case 18:Kr!==null&&(Ko?(t=Kr,c=c.stateNode,t.nodeType===8?G4(t.parentNode,c):t.nodeType===1&&G4(t,c),d2(t)):G4(Kr,c.stateNode));break;case 4:p=Kr,_=Ko,Kr=c.stateNode.containerInfo,Ko=!0,Fa(t,o,c),Kr=p,Ko=_;break;case 0:case 11:case 14:case 15:if(!di&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){_=p=p.next;do{var x=_,E=x.destroy;x=x.tag,E!==void 0&&(x&2||x&4)&&q6(c,o,E),_=_.next}while(_!==p)}Fa(t,o,c);break;case 1:if(!di&&(Ic(c,o),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(s){wr(c,o,s)}Fa(t,o,c);break;case 21:Fa(t,o,c);break;case 22:c.mode&1?(di=(p=di)||c.memoizedState!==null,Fa(t,o,c),di=p):Fa(t,o,c);break;default:Fa(t,o,c)}}function W9(t){var o=t.updateQueue;if(o!==null){t.updateQueue=null;var c=t.stateNode;c===null&&(c=t.stateNode=new kT),o.forEach(function(p){var _=jT.bind(null,t,p);c.has(p)||(c.add(p),p.then(_,_))})}}function Ho(t,o){var c=o.deletions;if(c!==null)for(var p=0;p<c.length;p++){var _=c[p];try{var x=t,E=o,s=E;e:for(;s!==null;){switch(s.tag){case 5:Kr=s.stateNode,Ko=!1;break e;case 3:Kr=s.stateNode.containerInfo,Ko=!0;break e;case 4:Kr=s.stateNode.containerInfo,Ko=!0;break e}s=s.return}if(Kr===null)throw Error(mt(160));Xg(x,E,_),Kr=null,Ko=!1;var C=_.alternate;C!==null&&(C.return=null),_.return=null}catch(D){wr(_,o,D)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Kg(o,t),o=o.sibling}function Kg(t,o){var c=t.alternate,p=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ho(o,t),vs(t),p&4){try{r2(3,t,t.return),B5(3,t)}catch(xe){wr(t,t.return,xe)}try{r2(5,t,t.return)}catch(xe){wr(t,t.return,xe)}}break;case 1:Ho(o,t),vs(t),p&512&&c!==null&&Ic(c,c.return);break;case 5:if(Ho(o,t),vs(t),p&512&&c!==null&&Ic(c,c.return),t.flags&32){var _=t.stateNode;try{l2(_,"")}catch(xe){wr(t,t.return,xe)}}if(p&4&&(_=t.stateNode,_!=null)){var x=t.memoizedProps,E=c!==null?c.memoizedProps:x,s=t.type,C=t.updateQueue;if(t.updateQueue=null,C!==null)try{s==="input"&&x.type==="radio"&&x.name!=null&&y_(_,x),x6(s,E);var D=x6(s,x);for(E=0;E<C.length;E+=2){var N=C[E],U=C[E+1];N==="style"?T_(_,U):N==="dangerouslySetInnerHTML"?w_(_,U):N==="children"?l2(_,U):vp(_,N,U,D)}switch(s){case"input":m6(_,x);break;case"textarea":v_(_,x);break;case"select":var G=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!x.multiple;var ce=x.value;ce!=null?zc(_,!!x.multiple,ce,!1):G!==!!x.multiple&&(x.defaultValue!=null?zc(_,!!x.multiple,x.defaultValue,!0):zc(_,!!x.multiple,x.multiple?[]:"",!1))}_[g2]=x}catch(xe){wr(t,t.return,xe)}}break;case 6:if(Ho(o,t),vs(t),p&4){if(t.stateNode===null)throw Error(mt(162));_=t.stateNode,x=t.memoizedProps;try{_.nodeValue=x}catch(xe){wr(t,t.return,xe)}}break;case 3:if(Ho(o,t),vs(t),p&4&&c!==null&&c.memoizedState.isDehydrated)try{d2(o.containerInfo)}catch(xe){wr(t,t.return,xe)}break;case 4:Ho(o,t),vs(t);break;case 13:Ho(o,t),vs(t),_=t.child,_.flags&8192&&(x=_.memoizedState!==null,_.stateNode.isHidden=x,!x||_.alternate!==null&&_.alternate.memoizedState!==null||(Jp=Er())),p&4&&W9(t);break;case 22:if(N=c!==null&&c.memoizedState!==null,t.mode&1?(di=(D=di)||N,Ho(o,t),di=D):Ho(o,t),vs(t),p&8192){if(D=t.memoizedState!==null,(t.stateNode.isHidden=D)&&!N&&t.mode&1)for(Ft=t,N=t.child;N!==null;){for(U=Ft=N;Ft!==null;){switch(G=Ft,ce=G.child,G.tag){case 0:case 11:case 14:case 15:r2(4,G,G.return);break;case 1:Ic(G,G.return);var ge=G.stateNode;if(typeof ge.componentWillUnmount=="function"){p=G,c=G.return;try{o=p,ge.props=o.memoizedProps,ge.state=o.memoizedState,ge.componentWillUnmount()}catch(xe){wr(p,c,xe)}}break;case 5:Ic(G,G.return);break;case 22:if(G.memoizedState!==null){H9(U);continue}}ce!==null?(ce.return=G,Ft=ce):H9(U)}N=N.sibling}e:for(N=null,U=t;;){if(U.tag===5){if(N===null){N=U;try{_=U.stateNode,D?(x=_.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(s=U.stateNode,C=U.memoizedProps.style,E=C!=null&&C.hasOwnProperty("display")?C.display:null,s.style.display=b_("display",E))}catch(xe){wr(t,t.return,xe)}}}else if(U.tag===6){if(N===null)try{U.stateNode.nodeValue=D?"":U.memoizedProps}catch(xe){wr(t,t.return,xe)}}else if((U.tag!==22&&U.tag!==23||U.memoizedState===null||U===t)&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===t)break e;for(;U.sibling===null;){if(U.return===null||U.return===t)break e;N===U&&(N=null),U=U.return}N===U&&(N=null),U.sibling.return=U.return,U=U.sibling}}break;case 19:Ho(o,t),vs(t),p&4&&W9(t);break;case 21:break;default:Ho(o,t),vs(t)}}function vs(t){var o=t.flags;if(o&2){try{e:{for(var c=t.return;c!==null;){if(Hg(c)){var p=c;break e}c=c.return}throw Error(mt(160))}switch(p.tag){case 5:var _=p.stateNode;p.flags&32&&(l2(_,""),p.flags&=-33);var x=Z9(t);K6(t,x,_);break;case 3:case 4:var E=p.stateNode.containerInfo,s=Z9(t);X6(t,s,E);break;default:throw Error(mt(161))}}catch(C){wr(t,t.return,C)}t.flags&=-3}o&4096&&(t.flags&=-4097)}function zT(t,o,c){Ft=t,Yg(t)}function Yg(t,o,c){for(var p=(t.mode&1)!==0;Ft!==null;){var _=Ft,x=_.child;if(_.tag===22&&p){var E=_.memoizedState!==null||w3;if(!E){var s=_.alternate,C=s!==null&&s.memoizedState!==null||di;s=w3;var D=di;if(w3=E,(di=C)&&!D)for(Ft=_;Ft!==null;)E=Ft,C=E.child,E.tag===22&&E.memoizedState!==null?X9(_):C!==null?(C.return=E,Ft=C):X9(_);for(;x!==null;)Ft=x,Yg(x),x=x.sibling;Ft=_,w3=s,di=D}q9(t)}else _.subtreeFlags&8772&&x!==null?(x.return=_,Ft=x):q9(t)}}function q9(t){for(;Ft!==null;){var o=Ft;if(o.flags&8772){var c=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:di||B5(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!di)if(c===null)p.componentDidMount();else{var _=o.elementType===o.type?c.memoizedProps:Xo(o.type,c.memoizedProps);p.componentDidUpdate(_,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var x=o.updateQueue;x!==null&&k9(o,x,p);break;case 3:var E=o.updateQueue;if(E!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}k9(o,E,c)}break;case 5:var s=o.stateNode;if(c===null&&o.flags&4){c=s;var C=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&c.focus();break;case"img":C.src&&(c.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var D=o.alternate;if(D!==null){var N=D.memoizedState;if(N!==null){var U=N.dehydrated;U!==null&&d2(U)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(mt(163))}di||o.flags&512&&H6(o)}catch(G){wr(o,o.return,G)}}if(o===t){Ft=null;break}if(c=o.sibling,c!==null){c.return=o.return,Ft=c;break}Ft=o.return}}function H9(t){for(;Ft!==null;){var o=Ft;if(o===t){Ft=null;break}var c=o.sibling;if(c!==null){c.return=o.return,Ft=c;break}Ft=o.return}}function X9(t){for(;Ft!==null;){var o=Ft;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{B5(4,o)}catch(C){wr(o,c,C)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var _=o.return;try{p.componentDidMount()}catch(C){wr(o,_,C)}}var x=o.return;try{H6(o)}catch(C){wr(o,x,C)}break;case 5:var E=o.return;try{H6(o)}catch(C){wr(o,E,C)}}}catch(C){wr(o,o.return,C)}if(o===t){Ft=null;break}var s=o.sibling;if(s!==null){s.return=o.return,Ft=s;break}Ft=o.return}}var DT=Math.ceil,u5=ia.ReactCurrentDispatcher,Kp=ia.ReactCurrentOwner,Mo=ia.ReactCurrentBatchConfig,wn=0,$r=null,Ar=null,Yr=0,Ji=0,kc=al(0),Rr=0,T2=null,l1=0,O5=0,Yp=0,i2=null,Fi=null,Jp=0,Hc=1/0,qs=null,h5=!1,Y6=null,Ja=null,b3=!1,Za=null,d5=0,o2=0,J6=null,O3=-1,U3=0;function xi(){return wn&6?Er():O3!==-1?O3:O3=Er()}function Qa(t){return t.mode&1?wn&2&&Yr!==0?Yr&-Yr:gT.transition!==null?(U3===0&&(U3=R_()),U3):(t=Vn,t!==0||(t=window.event,t=t===void 0?16:V_(t.type)),t):1}function ts(t,o,c,p){if(50<o2)throw o2=0,J6=null,Error(mt(185));k2(t,c,p),(!(wn&2)||t!==$r)&&(t===$r&&(!(wn&2)&&(O5|=c),Rr===4&&Ga(t,Yr)),Ni(t,p),c===1&&wn===0&&!(o.mode&1)&&(Hc=Er()+500,D5&&ll()))}function Ni(t,o){var c=t.callbackNode;gb(t,o);var p=X3(t,t===$r?Yr:0);if(p===0)c!==null&&i9(c),t.callbackNode=null,t.callbackPriority=0;else if(o=p&-p,t.callbackPriority!==o){if(c!=null&&i9(c),o===1)t.tag===0?_T(K9.bind(null,t)):ag(K9.bind(null,t)),dT(function(){!(wn&6)&&ll()}),c=null;else{switch(F_(p)){case 1:c=Ep;break;case 4:c=z_;break;case 16:c=H3;break;case 536870912:c=D_;break;default:c=H3}c=oy(c,Jg.bind(null,t))}t.callbackPriority=o,t.callbackNode=c}}function Jg(t,o){if(O3=-1,U3=0,wn&6)throw Error(mt(327));var c=t.callbackNode;if(Oc()&&t.callbackNode!==c)return null;var p=X3(t,t===$r?Yr:0);if(p===0)return null;if(p&30||p&t.expiredLanes||o)o=p5(t,p);else{o=p;var _=wn;wn|=2;var x=ey();($r!==t||Yr!==o)&&(qs=null,Hc=Er()+500,r1(t,o));do try{BT();break}catch(s){Qg(t,s)}while(1);Bp(),u5.current=x,wn=_,Ar!==null?o=0:($r=null,Yr=0,o=Rr)}if(o!==0){if(o===2&&(_=S6(t),_!==0&&(p=_,o=Q6(t,_))),o===1)throw c=T2,r1(t,0),Ga(t,p),Ni(t,Er()),c;if(o===6)Ga(t,p);else{if(_=t.current.alternate,!(p&30)&&!RT(_)&&(o=p5(t,p),o===2&&(x=S6(t),x!==0&&(p=x,o=Q6(t,x))),o===1))throw c=T2,r1(t,0),Ga(t,p),Ni(t,Er()),c;switch(t.finishedWork=_,t.finishedLanes=p,o){case 0:case 1:throw Error(mt(345));case 2:Kl(t,Fi,qs);break;case 3:if(Ga(t,p),(p&130023424)===p&&(o=Jp+500-Er(),10<o)){if(X3(t,0)!==0)break;if(_=t.suspendedLanes,(_&p)!==p){xi(),t.pingedLanes|=t.suspendedLanes&_;break}t.timeoutHandle=z6(Kl.bind(null,t,Fi,qs),o);break}Kl(t,Fi,qs);break;case 4:if(Ga(t,p),(p&4194240)===p)break;for(o=t.eventTimes,_=-1;0<p;){var E=31-es(p);x=1<<E,E=o[E],E>_&&(_=E),p&=~x}if(p=_,p=Er()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*DT(p/1960))-p,10<p){t.timeoutHandle=z6(Kl.bind(null,t,Fi,qs),p);break}Kl(t,Fi,qs);break;case 5:Kl(t,Fi,qs);break;default:throw Error(mt(329))}}}return Ni(t,Er()),t.callbackNode===c?Jg.bind(null,t):null}function Q6(t,o){var c=i2;return t.current.memoizedState.isDehydrated&&(r1(t,o).flags|=256),t=p5(t,o),t!==2&&(o=Fi,Fi=c,o!==null&&ep(o)),t}function ep(t){Fi===null?Fi=t:Fi.push.apply(Fi,t)}function RT(t){for(var o=t;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var _=c[p],x=_.getSnapshot;_=_.value;try{if(!ns(x(),_))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ga(t,o){for(o&=~Yp,o&=~O5,t.suspendedLanes|=o,t.pingedLanes&=~o,t=t.expirationTimes;0<o;){var c=31-es(o),p=1<<c;t[c]=-1,o&=~p}}function K9(t){if(wn&6)throw Error(mt(327));Oc();var o=X3(t,0);if(!(o&1))return Ni(t,Er()),null;var c=p5(t,o);if(t.tag!==0&&c===2){var p=S6(t);p!==0&&(o=p,c=Q6(t,p))}if(c===1)throw c=T2,r1(t,0),Ga(t,o),Ni(t,Er()),c;if(c===6)throw Error(mt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=o,Kl(t,Fi,qs),Ni(t,Er()),null}function Qp(t,o){var c=wn;wn|=1;try{return t(o)}finally{wn=c,wn===0&&(Hc=Er()+500,D5&&ll())}}function c1(t){Za!==null&&Za.tag===0&&!(wn&6)&&Oc();var o=wn;wn|=1;var c=Mo.transition,p=Vn;try{if(Mo.transition=null,Vn=1,t)return t()}finally{Vn=p,Mo.transition=c,wn=o,!(wn&6)&&ll()}}function e7(){Ji=kc.current,er(kc)}function r1(t,o){t.finishedWork=null,t.finishedLanes=0;var c=t.timeoutHandle;if(c!==-1&&(t.timeoutHandle=-1,hT(c)),Ar!==null)for(c=Ar.return;c!==null;){var p=c;switch(Dp(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&e5();break;case 3:Wc(),er(Oi),er(pi),Gp();break;case 5:Vp(p);break;case 4:Wc();break;case 13:er(mr);break;case 19:er(mr);break;case 10:Op(p.type._context);break;case 22:case 23:e7()}c=c.return}if($r=t,Ar=t=el(t.current,null),Yr=Ji=o,Rr=0,T2=null,Yp=O5=l1=0,Fi=i2=null,e1!==null){for(o=0;o<e1.length;o++)if(c=e1[o],p=c.interleaved,p!==null){c.interleaved=null;var _=p.next,x=c.pending;if(x!==null){var E=x.next;x.next=_,p.next=E}c.pending=p}e1=null}return t}function Qg(t,o){do{var c=Ar;try{if(Bp(),R3.current=c5,l5){for(var p=_r.memoizedState;p!==null;){var _=p.queue;_!==null&&(_.pending=null),p=p.next}l5=!1}if(a1=0,Gr=Dr=_r=null,n2=!1,x2=0,Kp.current=null,c===null||c.return===null){Rr=1,T2=o,Ar=null;break}e:{var x=t,E=c.return,s=c,C=o;if(o=Yr,s.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var D=C,N=s,U=N.tag;if(!(N.mode&1)&&(U===0||U===11||U===15)){var G=N.alternate;G?(N.updateQueue=G.updateQueue,N.memoizedState=G.memoizedState,N.lanes=G.lanes):(N.updateQueue=null,N.memoizedState=null)}var ce=B9(E);if(ce!==null){ce.flags&=-257,O9(ce,E,s,x,o),ce.mode&1&&F9(x,D,o),o=ce,C=D;var ge=o.updateQueue;if(ge===null){var xe=new Set;xe.add(C),o.updateQueue=xe}else ge.add(C);break e}else{if(!(o&1)){F9(x,D,o),t7();break e}C=Error(mt(426))}}else if(or&&s.mode&1){var $e=B9(E);if($e!==null){!($e.flags&65536)&&($e.flags|=256),O9($e,E,s,x,o),Rp(qc(C,s));break e}}x=C=qc(C,s),Rr!==4&&(Rr=2),i2===null?i2=[x]:i2.push(x),x=E;do{switch(x.tag){case 3:x.flags|=65536,o&=-o,x.lanes|=o;var ne=Fg(x,C,o);I9(x,ne);break e;case 1:s=C;var ee=x.type,oe=x.stateNode;if(!(x.flags&128)&&(typeof ee.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(Ja===null||!Ja.has(oe)))){x.flags|=65536,o&=-o,x.lanes|=o;var Te=Bg(x,s,o);I9(x,Te);break e}}x=x.return}while(x!==null)}ny(c)}catch(Oe){o=Oe,Ar===c&&c!==null&&(Ar=c=c.return);continue}break}while(1)}function ey(){var t=u5.current;return u5.current=c5,t===null?c5:t}function t7(){(Rr===0||Rr===3||Rr===2)&&(Rr=4),$r===null||!(l1&268435455)&&!(O5&268435455)||Ga($r,Yr)}function p5(t,o){var c=wn;wn|=2;var p=ey();($r!==t||Yr!==o)&&(qs=null,r1(t,o));do try{FT();break}catch(_){Qg(t,_)}while(1);if(Bp(),wn=c,u5.current=p,Ar!==null)throw Error(mt(261));return $r=null,Yr=0,Rr}function FT(){for(;Ar!==null;)ty(Ar)}function BT(){for(;Ar!==null&&!lb();)ty(Ar)}function ty(t){var o=iy(t.alternate,t,Ji);t.memoizedProps=t.pendingProps,o===null?ny(t):Ar=o,Kp.current=null}function ny(t){var o=t;do{var c=o.alternate;if(t=o.return,o.flags&32768){if(c=IT(c,o),c!==null){c.flags&=32767,Ar=c;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rr=6,Ar=null;return}}else if(c=AT(c,o,Ji),c!==null){Ar=c;return}if(o=o.sibling,o!==null){Ar=o;return}Ar=o=t}while(o!==null);Rr===0&&(Rr=5)}function Kl(t,o,c){var p=Vn,_=Mo.transition;try{Mo.transition=null,Vn=1,OT(t,o,c,p)}finally{Mo.transition=_,Vn=p}return null}function OT(t,o,c,p){do Oc();while(Za!==null);if(wn&6)throw Error(mt(327));c=t.finishedWork;var _=t.finishedLanes;if(c===null)return null;if(t.finishedWork=null,t.finishedLanes=0,c===t.current)throw Error(mt(177));t.callbackNode=null,t.callbackPriority=0;var x=c.lanes|c.childLanes;if(yb(t,x),t===$r&&(Ar=$r=null,Yr=0),!(c.subtreeFlags&2064)&&!(c.flags&2064)||b3||(b3=!0,oy(H3,function(){return Oc(),null})),x=(c.flags&15990)!==0,c.subtreeFlags&15990||x){x=Mo.transition,Mo.transition=null;var E=Vn;Vn=1;var s=wn;wn|=4,Kp.current=null,LT(t,c),Kg(c,t),iT(k6),K3=!!I6,k6=I6=null,t.current=c,zT(c),cb(),wn=s,Vn=E,Mo.transition=x}else t.current=c;if(b3&&(b3=!1,Za=t,d5=_),x=t.pendingLanes,x===0&&(Ja=null),db(c.stateNode),Ni(t,Er()),o!==null)for(p=t.onRecoverableError,c=0;c<o.length;c++)_=o[c],p(_.value,{componentStack:_.stack,digest:_.digest});if(h5)throw h5=!1,t=Y6,Y6=null,t;return d5&1&&t.tag!==0&&Oc(),x=t.pendingLanes,x&1?t===J6?o2++:(o2=0,J6=t):o2=0,ll(),null}function Oc(){if(Za!==null){var t=F_(d5),o=Mo.transition,c=Vn;try{if(Mo.transition=null,Vn=16>t?16:t,Za===null)var p=!1;else{if(t=Za,Za=null,d5=0,wn&6)throw Error(mt(331));var _=wn;for(wn|=4,Ft=t.current;Ft!==null;){var x=Ft,E=x.child;if(Ft.flags&16){var s=x.deletions;if(s!==null){for(var C=0;C<s.length;C++){var D=s[C];for(Ft=D;Ft!==null;){var N=Ft;switch(N.tag){case 0:case 11:case 15:r2(8,N,x)}var U=N.child;if(U!==null)U.return=N,Ft=U;else for(;Ft!==null;){N=Ft;var G=N.sibling,ce=N.return;if(qg(N),N===D){Ft=null;break}if(G!==null){G.return=ce,Ft=G;break}Ft=ce}}}var ge=x.alternate;if(ge!==null){var xe=ge.child;if(xe!==null){ge.child=null;do{var $e=xe.sibling;xe.sibling=null,xe=$e}while(xe!==null)}}Ft=x}}if(x.subtreeFlags&2064&&E!==null)E.return=x,Ft=E;else e:for(;Ft!==null;){if(x=Ft,x.flags&2048)switch(x.tag){case 0:case 11:case 15:r2(9,x,x.return)}var ne=x.sibling;if(ne!==null){ne.return=x.return,Ft=ne;break e}Ft=x.return}}var ee=t.current;for(Ft=ee;Ft!==null;){E=Ft;var oe=E.child;if(E.subtreeFlags&2064&&oe!==null)oe.return=E,Ft=oe;else e:for(E=ee;Ft!==null;){if(s=Ft,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:B5(9,s)}}catch(Oe){wr(s,s.return,Oe)}if(s===E){Ft=null;break e}var Te=s.sibling;if(Te!==null){Te.return=s.return,Ft=Te;break e}Ft=s.return}}if(wn=_,ll(),bs&&typeof bs.onPostCommitFiberRoot=="function")try{bs.onPostCommitFiberRoot(A5,t)}catch{}p=!0}return p}finally{Vn=c,Mo.transition=o}}return!1}function Y9(t,o,c){o=qc(c,o),o=Fg(t,o,1),t=Ya(t,o,1),o=xi(),t!==null&&(k2(t,1,o),Ni(t,o))}function wr(t,o,c){if(t.tag===3)Y9(t,t,c);else for(;o!==null;){if(o.tag===3){Y9(o,t,c);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ja===null||!Ja.has(p))){t=qc(c,t),t=Bg(o,t,1),o=Ya(o,t,1),t=xi(),o!==null&&(k2(o,1,t),Ni(o,t));break}}o=o.return}}function UT(t,o,c){var p=t.pingCache;p!==null&&p.delete(o),o=xi(),t.pingedLanes|=t.suspendedLanes&c,$r===t&&(Yr&c)===c&&(Rr===4||Rr===3&&(Yr&130023424)===Yr&&500>Er()-Jp?r1(t,0):Yp|=c),Ni(t,o)}function ry(t,o){o===0&&(t.mode&1?(o=d3,d3<<=1,!(d3&130023424)&&(d3=4194304)):o=1);var c=xi();t=na(t,o),t!==null&&(k2(t,o,c),Ni(t,c))}function NT(t){var o=t.memoizedState,c=0;o!==null&&(c=o.retryLane),ry(t,c)}function jT(t,o){var c=0;switch(t.tag){case 13:var p=t.stateNode,_=t.memoizedState;_!==null&&(c=_.retryLane);break;case 19:p=t.stateNode;break;default:throw Error(mt(314))}p!==null&&p.delete(o),ry(t,c)}var iy;iy=function(t,o,c){if(t!==null)if(t.memoizedProps!==o.pendingProps||Oi.current)Bi=!0;else{if(!(t.lanes&c)&&!(o.flags&128))return Bi=!1,PT(t,o,c);Bi=!!(t.flags&131072)}else Bi=!1,or&&o.flags&1048576&&lg(o,r5,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;B3(t,o),t=o.pendingProps;var _=Gc(o,pi.current);Bc(o,c),_=Zp(null,o,p,t,_,c);var x=Wp();return o.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Ui(p)?(x=!0,t5(o)):x=!1,o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Np(o),_.updater=F5,o.stateNode=_,_._reactInternals=o,N6(o,p,t,c),o=G6(null,o,p,!0,x,c)):(o.tag=0,or&&x&&zp(o),yi(null,o,_,c),o=o.child),o;case 16:p=o.elementType;e:{switch(B3(t,o),t=o.pendingProps,_=p._init,p=_(p._payload),o.type=p,_=o.tag=GT(p),t=Xo(p,t),_){case 0:o=V6(null,o,p,t,c);break e;case 1:o=j9(null,o,p,t,c);break e;case 11:o=U9(null,o,p,t,c);break e;case 14:o=N9(null,o,p,Xo(p.type,t),c);break e}throw Error(mt(306,p,""))}return o;case 0:return p=o.type,_=o.pendingProps,_=o.elementType===p?_:Xo(p,_),V6(t,o,p,_,c);case 1:return p=o.type,_=o.pendingProps,_=o.elementType===p?_:Xo(p,_),j9(t,o,p,_,c);case 3:e:{if(jg(o),t===null)throw Error(mt(387));p=o.pendingProps,x=o.memoizedState,_=x.element,fg(t,o),s5(o,p,null,c);var E=o.memoizedState;if(p=E.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){_=qc(Error(mt(423)),o),o=V9(t,o,p,c,_);break e}else if(p!==_){_=qc(Error(mt(424)),o),o=V9(t,o,p,c,_);break e}else for(no=Ka(o.stateNode.containerInfo.firstChild),ro=o,or=!0,Jo=null,c=dg(o,null,p,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if($c(),p===_){o=ra(t,o,c);break e}yi(t,o,p,c)}o=o.child}return o;case 5:return mg(o),t===null&&B6(o),p=o.type,_=o.pendingProps,x=t!==null?t.memoizedProps:null,E=_.children,L6(p,_)?E=null:x!==null&&L6(p,x)&&(o.flags|=32),Ng(t,o),yi(t,o,E,c),o.child;case 6:return t===null&&B6(o),null;case 13:return Vg(t,o,c);case 4:return jp(o,o.stateNode.containerInfo),p=o.pendingProps,t===null?o.child=Zc(o,null,p,c):yi(t,o,p,c),o.child;case 11:return p=o.type,_=o.pendingProps,_=o.elementType===p?_:Xo(p,_),U9(t,o,p,_,c);case 7:return yi(t,o,o.pendingProps,c),o.child;case 8:return yi(t,o,o.pendingProps.children,c),o.child;case 12:return yi(t,o,o.pendingProps.children,c),o.child;case 10:e:{if(p=o.type._context,_=o.pendingProps,x=o.memoizedProps,E=_.value,Kn(i5,p._currentValue),p._currentValue=E,x!==null)if(ns(x.value,E)){if(x.children===_.children&&!Oi.current){o=ra(t,o,c);break e}}else for(x=o.child,x!==null&&(x.return=o);x!==null;){var s=x.dependencies;if(s!==null){E=x.child;for(var C=s.firstContext;C!==null;){if(C.context===p){if(x.tag===1){C=Js(-1,c&-c),C.tag=2;var D=x.updateQueue;if(D!==null){D=D.shared;var N=D.pending;N===null?C.next=C:(C.next=N.next,N.next=C),D.pending=C}}x.lanes|=c,C=x.alternate,C!==null&&(C.lanes|=c),O6(x.return,c,o),s.lanes|=c;break}C=C.next}}else if(x.tag===10)E=x.type===o.type?null:x.child;else if(x.tag===18){if(E=x.return,E===null)throw Error(mt(341));E.lanes|=c,s=E.alternate,s!==null&&(s.lanes|=c),O6(E,c,o),E=x.sibling}else E=x.child;if(E!==null)E.return=x;else for(E=x;E!==null;){if(E===o){E=null;break}if(x=E.sibling,x!==null){x.return=E.return,E=x;break}E=E.return}x=E}yi(t,o,_.children,c),o=o.child}return o;case 9:return _=o.type,p=o.pendingProps.children,Bc(o,c),_=Po(_),p=p(_),o.flags|=1,yi(t,o,p,c),o.child;case 14:return p=o.type,_=Xo(p,o.pendingProps),_=Xo(p.type,_),N9(t,o,p,_,c);case 15:return Og(t,o,o.type,o.pendingProps,c);case 17:return p=o.type,_=o.pendingProps,_=o.elementType===p?_:Xo(p,_),B3(t,o),o.tag=1,Ui(p)?(t=!0,t5(o)):t=!1,Bc(o,c),Rg(o,p,_),N6(o,p,_,c),G6(null,o,p,!0,t,c);case 19:return Gg(t,o,c);case 22:return Ug(t,o,c)}throw Error(mt(156,o.tag))};function oy(t,o){return L_(t,o)}function VT(t,o,c,p){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function So(t,o,c,p){return new VT(t,o,c,p)}function n7(t){return t=t.prototype,!(!t||!t.isReactComponent)}function GT(t){if(typeof t=="function")return n7(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wp)return 11;if(t===bp)return 14}return 2}function el(t,o){var c=t.alternate;return c===null?(c=So(t.tag,o,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=o,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&14680064,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,o=t.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c}function N3(t,o,c,p,_,x){var E=2;if(p=t,typeof t=="function")n7(t)&&(E=1);else if(typeof t=="string")E=5;else e:switch(t){case wc:return i1(c.children,_,x,o);case xp:E=8,_|=8;break;case u6:return t=So(12,c,o,_|2),t.elementType=u6,t.lanes=x,t;case h6:return t=So(13,c,o,_),t.elementType=h6,t.lanes=x,t;case d6:return t=So(19,c,o,_),t.elementType=d6,t.lanes=x,t;case m_:return U5(c,_,x,o);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case p_:E=10;break e;case f_:E=9;break e;case wp:E=11;break e;case bp:E=14;break e;case Na:E=16,p=null;break e}throw Error(mt(130,t==null?t:typeof t,""))}return o=So(E,c,o,_),o.elementType=t,o.type=p,o.lanes=x,o}function i1(t,o,c,p){return t=So(7,t,p,o),t.lanes=c,t}function U5(t,o,c,p){return t=So(22,t,p,o),t.elementType=m_,t.lanes=c,t.stateNode={isHidden:!1},t}function Y4(t,o,c){return t=So(6,t,null,o),t.lanes=c,t}function J4(t,o,c){return o=So(4,t.children!==null?t.children:[],t.key,o),o.lanes=c,o.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},o}function $T(t,o,c,p,_){this.tag=o,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=L4(0),this.expirationTimes=L4(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L4(0),this.identifierPrefix=p,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function r7(t,o,c,p,_,x,E,s,C){return t=new $T(t,o,c,s,C),o===1?(o=1,x===!0&&(o|=8)):o=0,x=So(3,null,null,o),t.current=x,x.stateNode=t,x.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Np(x),t}function ZT(t,o,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xc,key:p==null?null:""+p,children:t,containerInfo:o,implementation:c}}function sy(t){if(!t)return rl;t=t._reactInternals;e:{if(d1(t)!==t||t.tag!==1)throw Error(mt(170));var o=t;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Ui(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(mt(171))}if(t.tag===1){var c=t.type;if(Ui(c))return sg(t,c,o)}return o}function ay(t,o,c,p,_,x,E,s,C){return t=r7(c,p,!0,t,_,x,E,s,C),t.context=sy(null),c=t.current,p=xi(),_=Qa(c),x=Js(p,_),x.callback=o??null,Ya(c,x,_),t.current.lanes=_,k2(t,_,p),Ni(t,p),t}function N5(t,o,c,p){var _=o.current,x=xi(),E=Qa(_);return c=sy(c),o.context===null?o.context=c:o.pendingContext=c,o=Js(x,E),o.payload={element:t},p=p===void 0?null:p,p!==null&&(o.callback=p),t=Ya(_,o,E),t!==null&&(ts(t,_,E,x),D3(t,_,E)),E}function f5(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function J9(t,o){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<o?c:o}}function i7(t,o){J9(t,o),(t=t.alternate)&&J9(t,o)}function WT(){return null}var ly=typeof reportError=="function"?reportError:function(t){console.error(t)};function o7(t){this._internalRoot=t}j5.prototype.render=o7.prototype.render=function(t){var o=this._internalRoot;if(o===null)throw Error(mt(409));N5(t,o,null,null)};j5.prototype.unmount=o7.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var o=t.containerInfo;c1(function(){N5(null,t,null,null)}),o[ta]=null}};function j5(t){this._internalRoot=t}j5.prototype.unstable_scheduleHydration=function(t){if(t){var o=U_();t={blockedOn:null,target:t,priority:o};for(var c=0;c<Va.length&&o!==0&&o<Va[c].priority;c++);Va.splice(c,0,t),c===0&&j_(t)}};function s7(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function V5(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Q9(){}function qT(t,o,c,p,_){if(_){if(typeof p=="function"){var x=p;p=function(){var D=f5(E);x.call(D)}}var E=ay(o,p,t,0,null,!1,!1,"",Q9);return t._reactRootContainer=E,t[ta]=E.current,m2(t.nodeType===8?t.parentNode:t),c1(),E}for(;_=t.lastChild;)t.removeChild(_);if(typeof p=="function"){var s=p;p=function(){var D=f5(C);s.call(D)}}var C=r7(t,0,!1,null,null,!1,!1,"",Q9);return t._reactRootContainer=C,t[ta]=C.current,m2(t.nodeType===8?t.parentNode:t),c1(function(){N5(o,C,c,p)}),C}function G5(t,o,c,p,_){var x=c._reactRootContainer;if(x){var E=x;if(typeof _=="function"){var s=_;_=function(){var C=f5(E);s.call(C)}}N5(o,E,t,_)}else E=qT(c,o,t,_,p);return f5(E)}B_=function(t){switch(t.tag){case 3:var o=t.stateNode;if(o.current.memoizedState.isDehydrated){var c=q0(o.pendingLanes);c!==0&&(Sp(o,c|1),Ni(o,Er()),!(wn&6)&&(Hc=Er()+500,ll()))}break;case 13:c1(function(){var p=na(t,1);if(p!==null){var _=xi();ts(p,t,1,_)}}),i7(t,1)}};Mp=function(t){if(t.tag===13){var o=na(t,134217728);if(o!==null){var c=xi();ts(o,t,134217728,c)}i7(t,134217728)}};O_=function(t){if(t.tag===13){var o=Qa(t),c=na(t,o);if(c!==null){var p=xi();ts(c,t,o,p)}i7(t,o)}};U_=function(){return Vn};N_=function(t,o){var c=Vn;try{return Vn=t,o()}finally{Vn=c}};b6=function(t,o,c){switch(o){case"input":if(m6(t,c),o=c.name,c.type==="radio"&&o!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var p=c[o];if(p!==t&&p.form===t.form){var _=z5(p);if(!_)throw Error(mt(90));g_(p),m6(p,_)}}}break;case"textarea":v_(t,c);break;case"select":o=c.value,o!=null&&zc(t,!!c.multiple,o,!1)}};M_=Qp;C_=c1;var HT={usingClientEntryPoint:!1,Events:[z2,Sc,z5,E_,S_,Qp]},U0={findFiberByHostInstance:Ql,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XT={bundleType:U0.bundleType,version:U0.version,rendererPackageName:U0.rendererPackageName,rendererConfig:U0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ia.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=I_(t),t===null?null:t.stateNode},findFiberByHostInstance:U0.findFiberByHostInstance||WT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var T3=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!T3.isDisabled&&T3.supportsFiber)try{A5=T3.inject(XT),bs=T3}catch{}}oo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HT;oo.createPortal=function(t,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s7(o))throw Error(mt(200));return ZT(t,o,null,c)};oo.createRoot=function(t,o){if(!s7(t))throw Error(mt(299));var c=!1,p="",_=ly;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),o=r7(t,1,!1,null,null,c,!1,p,_),t[ta]=o.current,m2(t.nodeType===8?t.parentNode:t),new o7(o)};oo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var o=t._reactInternals;if(o===void 0)throw typeof t.render=="function"?Error(mt(188)):(t=Object.keys(t).join(","),Error(mt(268,t)));return t=I_(o),t=t===null?null:t.stateNode,t};oo.flushSync=function(t){return c1(t)};oo.hydrate=function(t,o,c){if(!V5(o))throw Error(mt(200));return G5(null,t,o,!0,c)};oo.hydrateRoot=function(t,o,c){if(!s7(t))throw Error(mt(405));var p=c!=null&&c.hydratedSources||null,_=!1,x="",E=ly;if(c!=null&&(c.unstable_strictMode===!0&&(_=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(E=c.onRecoverableError)),o=ay(o,null,t,1,c??null,_,!1,x,E),t[ta]=o.current,m2(t),p)for(t=0;t<p.length;t++)c=p[t],_=c._getVersion,_=_(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,_]:o.mutableSourceEagerHydrationData.push(c,_);return new j5(o)};oo.render=function(t,o,c){if(!V5(o))throw Error(mt(200));return G5(null,t,o,!1,c)};oo.unmountComponentAtNode=function(t){if(!V5(t))throw Error(mt(40));return t._reactRootContainer?(c1(function(){G5(null,null,t,!1,function(){t._reactRootContainer=null,t[ta]=null})}),!0):!1};oo.unstable_batchedUpdates=Qp;oo.unstable_renderSubtreeIntoContainer=function(t,o,c,p){if(!V5(c))throw Error(mt(200));if(t==null||t._reactInternals===void 0)throw Error(mt(38));return G5(t,o,c,!1,p)};oo.version="18.3.1-next-f1338f8080-20240426";function cy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cy)}catch(t){console.error(t)}}cy(),c_.exports=oo;var R2=c_.exports;const KT=ol(R2),YT=dp({__proto__:null,default:KT},[R2]);var em=R2;H8.createRoot=em.createRoot,H8.hydrateRoot=em.hydrateRoot;/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ir(){return ir=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var c=arguments[o];for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(t[p]=c[p])}return t},ir.apply(this,arguments)}var Tr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Tr||(Tr={}));const tm="popstate";function JT(t){t===void 0&&(t={});function o(p,_){let{pathname:x,search:E,hash:s}=p.location;return E2("",{pathname:x,search:E,hash:s},_.state&&_.state.usr||null,_.state&&_.state.key||"default")}function c(p,_){return typeof _=="string"?_:u1(_)}return eE(o,c,null,t)}function mn(t,o){if(t===!1||t===null||typeof t>"u")throw new Error(o)}function Xc(t,o){if(!t){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function QT(){return Math.random().toString(36).substr(2,8)}function nm(t,o){return{usr:t.state,key:t.key,idx:o}}function E2(t,o,c,p){return c===void 0&&(c=null),ir({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof o=="string"?oa(o):o,{state:c,key:o&&o.key||p||QT()})}function u1(t){let{pathname:o="/",search:c="",hash:p=""}=t;return c&&c!=="?"&&(o+=c.charAt(0)==="?"?c:"?"+c),p&&p!=="#"&&(o+=p.charAt(0)==="#"?p:"#"+p),o}function oa(t){let o={};if(t){let c=t.indexOf("#");c>=0&&(o.hash=t.substr(c),t=t.substr(0,c));let p=t.indexOf("?");p>=0&&(o.search=t.substr(p),t=t.substr(0,p)),t&&(o.pathname=t)}return o}function eE(t,o,c,p){p===void 0&&(p={});let{window:_=document.defaultView,v5Compat:x=!1}=p,E=_.history,s=Tr.Pop,C=null,D=N();D==null&&(D=0,E.replaceState(ir({},E.state,{idx:D}),""));function N(){return(E.state||{idx:null}).idx}function U(){s=Tr.Pop;let $e=N(),ne=$e==null?null:$e-D;D=$e,C&&C({action:s,location:xe.location,delta:ne})}function G($e,ne){s=Tr.Push;let ee=E2(xe.location,$e,ne);c&&c(ee,$e),D=N()+1;let oe=nm(ee,D),Te=xe.createHref(ee);try{E.pushState(oe,"",Te)}catch(Oe){if(Oe instanceof DOMException&&Oe.name==="DataCloneError")throw Oe;_.location.assign(Te)}x&&C&&C({action:s,location:xe.location,delta:1})}function ce($e,ne){s=Tr.Replace;let ee=E2(xe.location,$e,ne);c&&c(ee,$e),D=N();let oe=nm(ee,D),Te=xe.createHref(ee);E.replaceState(oe,"",Te),x&&C&&C({action:s,location:xe.location,delta:0})}function ge($e){let ne=_.location.origin!=="null"?_.location.origin:_.location.href,ee=typeof $e=="string"?$e:u1($e);return ee=ee.replace(/ $/,"%20"),mn(ne,"No window.location.(origin|href) available to create URL for href: "+ee),new URL(ee,ne)}let xe={get action(){return s},get location(){return t(_,E)},listen($e){if(C)throw new Error("A history only accepts one active listener");return _.addEventListener(tm,U),C=$e,()=>{_.removeEventListener(tm,U),C=null}},createHref($e){return o(_,$e)},createURL:ge,encodeLocation($e){let ne=ge($e);return{pathname:ne.pathname,search:ne.search,hash:ne.hash}},push:G,replace:ce,go($e){return E.go($e)}};return xe}var jn;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(jn||(jn={}));const tE=new Set(["lazy","caseSensitive","path","id","index","children"]);function nE(t){return t.index===!0}function m5(t,o,c,p){return c===void 0&&(c=[]),p===void 0&&(p={}),t.map((_,x)=>{let E=[...c,String(x)],s=typeof _.id=="string"?_.id:E.join("-");if(mn(_.index!==!0||!_.children,"Cannot specify children on an index route"),mn(!p[s],'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),nE(_)){let C=ir({},_,o(_),{id:s});return p[s]=C,C}else{let C=ir({},_,o(_),{id:s,children:void 0});return p[s]=C,_.children&&(C.children=m5(_.children,o,E,p)),C}})}function Yl(t,o,c){return c===void 0&&(c="/"),j3(t,o,c,!1)}function j3(t,o,c,p){let _=typeof o=="string"?oa(o):o,x=ru(_.pathname||"/",c);if(x==null)return null;let E=uy(t);iE(E);let s=null;for(let C=0;s==null&&C<E.length;++C){let D=mE(x);s=pE(E[C],D,p)}return s}function rE(t,o){let{route:c,pathname:p,params:_}=t;return{id:c.id,pathname:p,params:_,data:o[c.id],handle:c.handle}}function uy(t,o,c,p){o===void 0&&(o=[]),c===void 0&&(c=[]),p===void 0&&(p="");let _=(x,E,s)=>{let C={relativePath:s===void 0?x.path||"":s,caseSensitive:x.caseSensitive===!0,childrenIndex:E,route:x};C.relativePath.startsWith("/")&&(mn(C.relativePath.startsWith(p),'Absolute route path "'+C.relativePath+'" nested under path '+('"'+p+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),C.relativePath=C.relativePath.slice(p.length));let D=Qs([p,C.relativePath]),N=c.concat(C);x.children&&x.children.length>0&&(mn(x.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+D+'".')),uy(x.children,o,N,D)),!(x.path==null&&!x.index)&&o.push({path:D,score:hE(D,x.index),routesMeta:N})};return t.forEach((x,E)=>{var s;if(x.path===""||!((s=x.path)!=null&&s.includes("?")))_(x,E);else for(let C of hy(x.path))_(x,E,C)}),o}function hy(t){let o=t.split("/");if(o.length===0)return[];let[c,...p]=o,_=c.endsWith("?"),x=c.replace(/\?$/,"");if(p.length===0)return _?[x,""]:[x];let E=hy(p.join("/")),s=[];return s.push(...E.map(C=>C===""?x:[x,C].join("/"))),_&&s.push(...E),s.map(C=>t.startsWith("/")&&C===""?"/":C)}function iE(t){t.sort((o,c)=>o.score!==c.score?c.score-o.score:dE(o.routesMeta.map(p=>p.childrenIndex),c.routesMeta.map(p=>p.childrenIndex)))}const oE=/^:[\w-]+$/,sE=3,aE=2,lE=1,cE=10,uE=-2,rm=t=>t==="*";function hE(t,o){let c=t.split("/"),p=c.length;return c.some(rm)&&(p+=uE),o&&(p+=aE),c.filter(_=>!rm(_)).reduce((_,x)=>_+(oE.test(x)?sE:x===""?lE:cE),p)}function dE(t,o){return t.length===o.length&&t.slice(0,-1).every((p,_)=>p===o[_])?t[t.length-1]-o[o.length-1]:0}function pE(t,o,c){c===void 0&&(c=!1);let{routesMeta:p}=t,_={},x="/",E=[];for(let s=0;s<p.length;++s){let C=p[s],D=s===p.length-1,N=x==="/"?o:o.slice(x.length)||"/",U=im({path:C.relativePath,caseSensitive:C.caseSensitive,end:D},N),G=C.route;if(!U&&D&&c&&!p[p.length-1].route.index&&(U=im({path:C.relativePath,caseSensitive:C.caseSensitive,end:!1},N)),!U)return null;Object.assign(_,U.params),E.push({params:_,pathname:Qs([x,U.pathname]),pathnameBase:yE(Qs([x,U.pathnameBase])),route:G}),U.pathnameBase!=="/"&&(x=Qs([x,U.pathnameBase]))}return E}function im(t,o){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[c,p]=fE(t.path,t.caseSensitive,t.end),_=o.match(c);if(!_)return null;let x=_[0],E=x.replace(/(.)\/+$/,"$1"),s=_.slice(1);return{params:p.reduce((D,N,U)=>{let{paramName:G,isOptional:ce}=N;if(G==="*"){let xe=s[U]||"";E=x.slice(0,x.length-xe.length).replace(/(.)\/+$/,"$1")}const ge=s[U];return ce&&!ge?D[G]=void 0:D[G]=(ge||"").replace(/%2F/g,"/"),D},{}),pathname:x,pathnameBase:E,pattern:t}}function fE(t,o,c){o===void 0&&(o=!1),c===void 0&&(c=!0),Xc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let p=[],_="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(E,s,C)=>(p.push({paramName:s,isOptional:C!=null}),C?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(p.push({paramName:"*"}),_+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?_+="\\/*$":t!==""&&t!=="/"&&(_+="(?:(?=\\/|$))"),[new RegExp(_,o?void 0:"i"),p]}function mE(t){try{return t.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return Xc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+o+").")),t}}function ru(t,o){if(o==="/")return t;if(!t.toLowerCase().startsWith(o.toLowerCase()))return null;let c=o.endsWith("/")?o.length-1:o.length,p=t.charAt(c);return p&&p!=="/"?null:t.slice(c)||"/"}function _E(t,o){o===void 0&&(o="/");let{pathname:c,search:p="",hash:_=""}=typeof t=="string"?oa(t):t;return{pathname:c?c.startsWith("/")?c:gE(c,o):o,search:vE(p),hash:xE(_)}}function gE(t,o){let c=o.replace(/\/+$/,"").split("/");return t.split("/").forEach(_=>{_===".."?c.length>1&&c.pop():_!=="."&&c.push(_)}),c.length>1?c.join("/"):"/"}function Q4(t,o,c,p){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+o+"` field ["+JSON.stringify(p)+"].  Please separate it out to the ")+("`to."+c+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dy(t){return t.filter((o,c)=>c===0||o.route.path&&o.route.path.length>0)}function a7(t,o){let c=dy(t);return o?c.map((p,_)=>_===c.length-1?p.pathname:p.pathnameBase):c.map(p=>p.pathnameBase)}function l7(t,o,c,p){p===void 0&&(p=!1);let _;typeof t=="string"?_=oa(t):(_=ir({},t),mn(!_.pathname||!_.pathname.includes("?"),Q4("?","pathname","search",_)),mn(!_.pathname||!_.pathname.includes("#"),Q4("#","pathname","hash",_)),mn(!_.search||!_.search.includes("#"),Q4("#","search","hash",_)));let x=t===""||_.pathname==="",E=x?"/":_.pathname,s;if(E==null)s=c;else{let U=o.length-1;if(!p&&E.startsWith("..")){let G=E.split("/");for(;G[0]==="..";)G.shift(),U-=1;_.pathname=G.join("/")}s=U>=0?o[U]:"/"}let C=_E(_,s),D=E&&E!=="/"&&E.endsWith("/"),N=(x||E===".")&&c.endsWith("/");return!C.pathname.endsWith("/")&&(D||N)&&(C.pathname+="/"),C}const Qs=t=>t.join("/").replace(/\/\/+/g,"/"),yE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),vE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class _5{constructor(o,c,p,_){_===void 0&&(_=!1),this.status=o,this.statusText=c||"",this.internal=_,p instanceof Error?(this.data=p.toString(),this.error=p):this.data=p}}function S2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const py=["post","put","patch","delete"],wE=new Set(py),bE=["get",...py],TE=new Set(bE),EE=new Set([301,302,303,307,308]),SE=new Set([307,308]),e6={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ME={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},N0={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},c7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CE=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),fy="remix-router-transitions";function PE(t){const o=t.window?t.window:typeof window<"u"?window:void 0,c=typeof o<"u"&&typeof o.document<"u"&&typeof o.document.createElement<"u",p=!c;mn(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let _;if(t.mapRouteProperties)_=t.mapRouteProperties;else if(t.detectErrorBoundary){let K=t.detectErrorBoundary;_=_e=>({hasErrorBoundary:K(_e)})}else _=CE;let x={},E=m5(t.routes,_,void 0,x),s,C=t.basename||"/",D=t.dataStrategy||LE,N=t.patchRoutesOnNavigation,U=ir({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),G=null,ce=new Set,ge=null,xe=null,$e=null,ne=t.hydrationData!=null,ee=Yl(E,t.history.location,C),oe=!1,Te=null;if(ee==null&&!N){let K=Ri(404,{pathname:t.history.location.pathname}),{matches:_e,route:Me}=mm(E);ee=_e,Te={[Me.id]:K}}ee&&!t.hydrationData&&ye(ee,E,t.history.location.pathname).active&&(ee=null);let Oe;if(ee)if(ee.some(K=>K.route.lazy))Oe=!1;else if(!ee.some(K=>K.route.loader))Oe=!0;else if(U.v7_partialHydration){let K=t.hydrationData?t.hydrationData.loaderData:null,_e=t.hydrationData?t.hydrationData.errors:null;if(_e){let Me=ee.findIndex(Ue=>_e[Ue.route.id]!==void 0);Oe=ee.slice(0,Me+1).every(Ue=>!np(Ue.route,K,_e))}else Oe=ee.every(Me=>!np(Me.route,K,_e))}else Oe=t.hydrationData!=null;else if(Oe=!1,ee=[],U.v7_partialHydration){let K=ye(null,E,t.history.location.pathname);K.active&&K.matches&&(oe=!0,ee=K.matches)}let rt,we={historyAction:t.history.action,location:t.history.location,matches:ee,initialized:Oe,navigation:e6,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||Te,fetchers:new Map,blockers:new Map},Ye=Tr.Pop,ze=!1,gt,Qt=!1,St=new Map,$t=null,He=!1,Ve=!1,Je=[],it=new Set,Ee=new Map,ct=0,yt=-1,kt=new Map,Nt=new Set,Zt=new Map,cn=new Map,Zn=new Set,Bn=new Map,On=new Map,Ti;function Io(){if(G=t.history.listen(K=>{let{action:_e,location:Me,delta:Ue}=K;if(Ti){Ti(),Ti=void 0;return}Xc(On.size===0||Ue!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let tt=j({currentLocation:we.location,nextLocation:Me,historyAction:_e});if(tt&&Ue!=null){let ft=new Promise(It=>{Ti=It});t.history.go(Ue*-1),se(tt,{state:"blocked",location:Me,proceed(){se(tt,{state:"proceeding",proceed:void 0,reset:void 0,location:Me}),ft.then(()=>t.history.go(Ue))},reset(){let It=new Map(we.blockers);It.set(tt,N0),tr({blockers:It})}});return}return vr(_e,Me)}),c){WE(o,St);let K=()=>qE(o,St);o.addEventListener("pagehide",K),$t=()=>o.removeEventListener("pagehide",K)}return we.initialized||vr(Tr.Pop,we.location,{initialHydration:!0}),rt}function rs(){G&&G(),$t&&$t(),ce.clear(),gt&&gt.abort(),we.fetchers.forEach((K,_e)=>Vi(_e)),we.blockers.forEach((K,_e)=>As(_e))}function on(K){return ce.add(K),()=>ce.delete(K)}function tr(K,_e){_e===void 0&&(_e={}),we=ir({},we,K);let Me=[],Ue=[];U.v7_fetcherPersist&&we.fetchers.forEach((tt,ft)=>{tt.state==="idle"&&(Zn.has(ft)?Ue.push(ft):Me.push(ft))}),Zn.forEach(tt=>{!we.fetchers.has(tt)&&!Ee.has(tt)&&Ue.push(tt)}),[...ce].forEach(tt=>tt(we,{deletedFetchers:Ue,viewTransitionOpts:_e.viewTransitionOpts,flushSync:_e.flushSync===!0})),U.v7_fetcherPersist?(Me.forEach(tt=>we.fetchers.delete(tt)),Ue.forEach(tt=>Vi(tt))):Ue.forEach(tt=>Zn.delete(tt))}function yr(K,_e,Me){var Ue,tt;let{flushSync:ft}=Me===void 0?{}:Me,It=we.actionData!=null&&we.navigation.formMethod!=null&&Yo(we.navigation.formMethod)&&we.navigation.state==="loading"&&((Ue=K.state)==null?void 0:Ue._isRedirect)!==!0,Tt;_e.actionData?Object.keys(_e.actionData).length>0?Tt=_e.actionData:Tt=null:It?Tt=we.actionData:Tt=null;let Mt=_e.loaderData?pm(we.loaderData,_e.loaderData,_e.matches||[],_e.errors):we.loaderData,wt=we.blockers;wt.size>0&&(wt=new Map(wt),wt.forEach((Wt,Hn)=>wt.set(Hn,N0)));let zt=ze===!0||we.navigation.formMethod!=null&&Yo(we.navigation.formMethod)&&((tt=K.state)==null?void 0:tt._isRedirect)!==!0;s&&(E=s,s=void 0),He||Ye===Tr.Pop||(Ye===Tr.Push?t.history.push(K,K.state):Ye===Tr.Replace&&t.history.replace(K,K.state));let Vt;if(Ye===Tr.Pop){let Wt=St.get(we.location.pathname);Wt&&Wt.has(K.pathname)?Vt={currentLocation:we.location,nextLocation:K}:St.has(K.pathname)&&(Vt={currentLocation:K,nextLocation:we.location})}else if(Qt){let Wt=St.get(we.location.pathname);Wt?Wt.add(K.pathname):(Wt=new Set([K.pathname]),St.set(we.location.pathname,Wt)),Vt={currentLocation:we.location,nextLocation:K}}tr(ir({},_e,{actionData:Tt,loaderData:Mt,historyAction:Ye,location:K,initialized:!0,navigation:e6,revalidation:"idle",restoreScrollPosition:Ce(K,_e.matches||we.matches),preventScrollReset:zt,blockers:wt}),{viewTransitionOpts:Vt,flushSync:ft===!0}),Ye=Tr.Pop,ze=!1,Qt=!1,He=!1,Ve=!1,Je=[]}async function is(K,_e){if(typeof K=="number"){t.history.go(K);return}let Me=tp(we.location,we.matches,C,U.v7_prependBasename,K,U.v7_relativeSplatPath,_e==null?void 0:_e.fromRouteId,_e==null?void 0:_e.relative),{path:Ue,submission:tt,error:ft}=om(U.v7_normalizeFormMethod,!1,Me,_e),It=we.location,Tt=E2(we.location,Ue,_e&&_e.state);Tt=ir({},Tt,t.history.encodeLocation(Tt));let Mt=_e&&_e.replace!=null?_e.replace:void 0,wt=Tr.Push;Mt===!0?wt=Tr.Replace:Mt===!1||tt!=null&&Yo(tt.formMethod)&&tt.formAction===we.location.pathname+we.location.search&&(wt=Tr.Replace);let zt=_e&&"preventScrollReset"in _e?_e.preventScrollReset===!0:void 0,Vt=(_e&&_e.flushSync)===!0,Wt=j({currentLocation:It,nextLocation:Tt,historyAction:wt});if(Wt){se(Wt,{state:"blocked",location:Tt,proceed(){se(Wt,{state:"proceeding",proceed:void 0,reset:void 0,location:Tt}),is(K,_e)},reset(){let Hn=new Map(we.blockers);Hn.set(Wt,N0),tr({blockers:Hn})}});return}return await vr(wt,Tt,{submission:tt,pendingError:ft,preventScrollReset:zt,replace:_e&&_e.replace,enableViewTransition:_e&&_e.viewTransition,flushSync:Vt})}function Un(){if(Br(),tr({revalidation:"loading"}),we.navigation.state!=="submitting"){if(we.navigation.state==="idle"){vr(we.historyAction,we.location,{startUninterruptedRevalidation:!0});return}vr(Ye||we.historyAction,we.navigation.location,{overrideNavigation:we.navigation,enableViewTransition:Qt===!0})}}async function vr(K,_e,Me){gt&&gt.abort(),gt=null,Ye=K,He=(Me&&Me.startUninterruptedRevalidation)===!0,Pe(we.location,we.matches),ze=(Me&&Me.preventScrollReset)===!0,Qt=(Me&&Me.enableViewTransition)===!0;let Ue=s||E,tt=Me&&Me.overrideNavigation,ft=Me!=null&&Me.initialHydration&&we.matches&&we.matches.length>0&&!oe?we.matches:Yl(Ue,_e,C),It=(Me&&Me.flushSync)===!0,Tt=ye(ft,Ue,_e.pathname);if(Tt.active&&Tt.matches&&(ft=Tt.matches),!ft){let{error:Dn,notFoundMatches:gn,route:jt}=V(_e.pathname);yr(_e,{matches:gn,loaderData:{},errors:{[jt.id]:Dn}},{flushSync:It});return}if(we.initialized&&!Ve&&OE(we.location,_e)&&!(Me&&Me.submission&&Yo(Me.submission.formMethod))){yr(_e,{matches:ft},{flushSync:It});return}gt=new AbortController;let Mt=pc(t.history,_e,gt.signal,Me&&Me.submission),wt;if(Me&&Me.pendingError)wt=[Jl(ft).route.id,{type:jn.error,error:Me.pendingError}];else if(Me&&Me.submission&&Yo(Me.submission.formMethod)){let Dn=await sa(Mt,_e,Me.submission,ft,Tt.active,{replace:Me.replace,flushSync:It});if(Dn.shortCircuited)return;if(Dn.pendingActionResult){let[gn,jt]=Dn.pendingActionResult;if(Qi(jt)&&S2(jt.error)&&jt.error.status===404){gt=null,yr(_e,{matches:Dn.matches,loaderData:{},errors:{[gn]:jt.error}});return}}ft=Dn.matches||ft,wt=Dn.pendingActionResult,tt=t6(_e,Me.submission),It=!1,Tt.active=!1,Mt=pc(t.history,Mt.url,Mt.signal)}let{shortCircuited:zt,matches:Vt,loaderData:Wt,errors:Hn}=await ji(Mt,_e,ft,Tt.active,tt,Me&&Me.submission,Me&&Me.fetcherSubmission,Me&&Me.replace,Me&&Me.initialHydration===!0,It,wt);zt||(gt=null,yr(_e,ir({matches:Vt||ft},fm(wt),{loaderData:Wt,errors:Hn})))}async function sa(K,_e,Me,Ue,tt,ft){ft===void 0&&(ft={}),Br();let It=$E(_e,Me);if(tr({navigation:It},{flushSync:ft.flushSync===!0}),tt){let wt=await Re(Ue,_e.pathname,K.signal);if(wt.type==="aborted")return{shortCircuited:!0};if(wt.type==="error"){let zt=Jl(wt.partialMatches).route.id;return{matches:wt.partialMatches,pendingActionResult:[zt,{type:jn.error,error:wt.error}]}}else if(wt.matches)Ue=wt.matches;else{let{notFoundMatches:zt,error:Vt,route:Wt}=V(_e.pathname);return{matches:zt,pendingActionResult:[Wt.id,{type:jn.error,error:Vt}]}}}let Tt,Mt=X0(Ue,_e);if(!Mt.route.action&&!Mt.route.lazy)Tt={type:jn.error,error:Ri(405,{method:K.method,pathname:_e.pathname,routeId:Mt.route.id})};else if(Tt=(await lo("action",we,K,[Mt],Ue,null))[Mt.route.id],K.signal.aborted)return{shortCircuited:!0};if(n1(Tt)){let wt;return ft&&ft.replace!=null?wt=ft.replace:wt=um(Tt.response.headers.get("Location"),new URL(K.url),C)===we.location.pathname+we.location.search,await Qr(K,Tt,!0,{submission:Me,replace:wt}),{shortCircuited:!0}}if(Wa(Tt))throw Ri(400,{type:"defer-action"});if(Qi(Tt)){let wt=Jl(Ue,Mt.route.id);return(ft&&ft.replace)!==!0&&(Ye=Tr.Push),{matches:Ue,pendingActionResult:[wt.route.id,Tt]}}return{matches:Ue,pendingActionResult:[Mt.route.id,Tt]}}async function ji(K,_e,Me,Ue,tt,ft,It,Tt,Mt,wt,zt){let Vt=tt||t6(_e,ft),Wt=ft||It||gm(Vt),Hn=!He&&(!U.v7_partialHydration||!Mt);if(Ue){if(Hn){let Rn=Fr(zt);tr(ir({navigation:Vt},Rn!==void 0?{actionData:Rn}:{}),{flushSync:wt})}let sn=await Re(Me,_e.pathname,K.signal);if(sn.type==="aborted")return{shortCircuited:!0};if(sn.type==="error"){let Rn=Jl(sn.partialMatches).route.id;return{matches:sn.partialMatches,loaderData:{},errors:{[Rn]:sn.error}}}else if(sn.matches)Me=sn.matches;else{let{error:Rn,notFoundMatches:je,route:Hr}=V(_e.pathname);return{matches:je,loaderData:{},errors:{[Hr.id]:Rn}}}}let Dn=s||E,[gn,jt]=am(t.history,we,Me,Wt,_e,U.v7_partialHydration&&Mt===!0,U.v7_skipActionErrorRevalidation,Ve,Je,it,Zn,Zt,Nt,Dn,C,zt);if(ie(sn=>!(Me&&Me.some(Rn=>Rn.route.id===sn))||gn&&gn.some(Rn=>Rn.route.id===sn)),yt=++ct,gn.length===0&&jt.length===0){let sn=uo();return yr(_e,ir({matches:Me,loaderData:{},errors:zt&&Qi(zt[1])?{[zt[0]]:zt[1].error}:null},fm(zt),sn?{fetchers:new Map(we.fetchers)}:{}),{flushSync:wt}),{shortCircuited:!0}}if(Hn){let sn={};if(!Ue){sn.navigation=Vt;let Rn=Fr(zt);Rn!==void 0&&(sn.actionData=Rn)}jt.length>0&&(sn.fetchers=Ss(jt)),tr(sn,{flushSync:wt})}jt.forEach(sn=>{Or(sn.key),sn.controller&&Ee.set(sn.key,sn.controller)});let po=()=>jt.forEach(sn=>Or(sn.key));gt&&gt.signal.addEventListener("abort",po);let{loaderResults:$i,fetcherResults:fi}=await Cs(we,Me,gn,jt,K);if(K.signal.aborted)return{shortCircuited:!0};gt&&gt.signal.removeEventListener("abort",po),jt.forEach(sn=>Ee.delete(sn.key));let Wr=E3($i);if(Wr)return await Qr(K,Wr.result,!0,{replace:Tt}),{shortCircuited:!0};if(Wr=E3(fi),Wr)return Nt.add(Wr.key),await Qr(K,Wr.result,!0,{replace:Tt}),{shortCircuited:!0};let{loaderData:ei,errors:qr}=dm(we,Me,$i,zt,jt,fi,Bn);Bn.forEach((sn,Rn)=>{sn.subscribe(je=>{(je||sn.done)&&Bn.delete(Rn)})}),U.v7_partialHydration&&Mt&&we.errors&&(qr=ir({},we.errors,qr));let Zi=uo(),as=ho(yt),Ei=Zi||as||jt.length>0;return ir({matches:Me,loaderData:ei,errors:qr},Ei?{fetchers:new Map(we.fetchers)}:{})}function Fr(K){if(K&&!Qi(K[1]))return{[K[0]]:K[1].data};if(we.actionData)return Object.keys(we.actionData).length===0?null:we.actionData}function Ss(K){return K.forEach(_e=>{let Me=we.fetchers.get(_e.key),Ue=j0(void 0,Me?Me.data:void 0);we.fetchers.set(_e.key,Ue)}),new Map(we.fetchers)}function os(K,_e,Me,Ue){if(p)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Or(K);let tt=(Ue&&Ue.flushSync)===!0,ft=s||E,It=tp(we.location,we.matches,C,U.v7_prependBasename,Me,U.v7_relativeSplatPath,_e,Ue==null?void 0:Ue.relative),Tt=Yl(ft,It,C),Mt=ye(Tt,ft,It);if(Mt.active&&Mt.matches&&(Tt=Mt.matches),!Tt){Zr(K,_e,Ri(404,{pathname:It}),{flushSync:tt});return}let{path:wt,submission:zt,error:Vt}=om(U.v7_normalizeFormMethod,!0,It,Ue);if(Vt){Zr(K,_e,Vt,{flushSync:tt});return}let Wt=X0(Tt,wt),Hn=(Ue&&Ue.preventScrollReset)===!0;if(zt&&Yo(zt.formMethod)){Ms(K,_e,wt,Wt,Tt,Mt.active,tt,Hn,zt);return}Zt.set(K,{routeId:_e,path:wt}),ao(K,_e,wt,Wt,Tt,Mt.active,tt,Hn,zt)}async function Ms(K,_e,Me,Ue,tt,ft,It,Tt,Mt){Br(),Zt.delete(K);function wt(an){if(!an.route.action&&!an.route.lazy){let Wn=Ri(405,{method:Mt.formMethod,pathname:Me,routeId:_e});return Zr(K,_e,Wn,{flushSync:It}),!0}return!1}if(!ft&&wt(Ue))return;let zt=we.fetchers.get(K);Ir(K,ZE(Mt,zt),{flushSync:It});let Vt=new AbortController,Wt=pc(t.history,Me,Vt.signal,Mt);if(ft){let an=await Re(tt,new URL(Wt.url).pathname,Wt.signal);if(an.type==="aborted")return;if(an.type==="error"){Zr(K,_e,an.error,{flushSync:It});return}else if(an.matches){if(tt=an.matches,Ue=X0(tt,Me),wt(Ue))return}else{Zr(K,_e,Ri(404,{pathname:Me}),{flushSync:It});return}}Ee.set(K,Vt);let Hn=ct,gn=(await lo("action",we,Wt,[Ue],tt,K))[Ue.route.id];if(Wt.signal.aborted){Ee.get(K)===Vt&&Ee.delete(K);return}if(U.v7_fetcherPersist&&Zn.has(K)){if(n1(gn)||Qi(gn)){Ir(K,Ua(void 0));return}}else{if(n1(gn))if(Ee.delete(K),yt>Hn){Ir(K,Ua(void 0));return}else return Nt.add(K),Ir(K,j0(Mt)),Qr(Wt,gn,!1,{fetcherSubmission:Mt,preventScrollReset:Tt});if(Qi(gn)){Zr(K,_e,gn.error);return}}if(Wa(gn))throw Ri(400,{type:"defer-action"});let jt=we.navigation.location||we.location,po=pc(t.history,jt,Vt.signal),$i=s||E,fi=we.navigation.state!=="idle"?Yl($i,we.navigation.location,C):we.matches;mn(fi,"Didn't find any matches after fetcher action");let Wr=++ct;kt.set(K,Wr);let ei=j0(Mt,gn.data);we.fetchers.set(K,ei);let[qr,Zi]=am(t.history,we,fi,Mt,jt,!1,U.v7_skipActionErrorRevalidation,Ve,Je,it,Zn,Zt,Nt,$i,C,[Ue.route.id,gn]);Zi.filter(an=>an.key!==K).forEach(an=>{let Wn=an.key,cl=we.fetchers.get(Wn),Si=j0(void 0,cl?cl.data:void 0);we.fetchers.set(Wn,Si),Or(Wn),an.controller&&Ee.set(Wn,an.controller)}),tr({fetchers:new Map(we.fetchers)});let as=()=>Zi.forEach(an=>Or(an.key));Vt.signal.addEventListener("abort",as);let{loaderResults:Ei,fetcherResults:sn}=await Cs(we,fi,qr,Zi,po);if(Vt.signal.aborted)return;Vt.signal.removeEventListener("abort",as),kt.delete(K),Ee.delete(K),Zi.forEach(an=>Ee.delete(an.key));let Rn=E3(Ei);if(Rn)return Qr(po,Rn.result,!1,{preventScrollReset:Tt});if(Rn=E3(sn),Rn)return Nt.add(Rn.key),Qr(po,Rn.result,!1,{preventScrollReset:Tt});let{loaderData:je,errors:Hr}=dm(we,fi,Ei,void 0,Zi,sn,Bn);if(we.fetchers.has(K)){let an=Ua(gn.data);we.fetchers.set(K,an)}ho(Wr),we.navigation.state==="loading"&&Wr>yt?(mn(Ye,"Expected pending action"),gt&&gt.abort(),yr(we.navigation.location,{matches:fi,loaderData:je,errors:Hr,fetchers:new Map(we.fetchers)})):(tr({errors:Hr,loaderData:pm(we.loaderData,je,fi,Hr),fetchers:new Map(we.fetchers)}),Ve=!1)}async function ao(K,_e,Me,Ue,tt,ft,It,Tt,Mt){let wt=we.fetchers.get(K);Ir(K,j0(Mt,wt?wt.data:void 0),{flushSync:It});let zt=new AbortController,Vt=pc(t.history,Me,zt.signal);if(ft){let gn=await Re(tt,new URL(Vt.url).pathname,Vt.signal);if(gn.type==="aborted")return;if(gn.type==="error"){Zr(K,_e,gn.error,{flushSync:It});return}else if(gn.matches)tt=gn.matches,Ue=X0(tt,Me);else{Zr(K,_e,Ri(404,{pathname:Me}),{flushSync:It});return}}Ee.set(K,zt);let Wt=ct,Dn=(await lo("loader",we,Vt,[Ue],tt,K))[Ue.route.id];if(Wa(Dn)&&(Dn=await u7(Dn,Vt.signal,!0)||Dn),Ee.get(K)===zt&&Ee.delete(K),!Vt.signal.aborted){if(Zn.has(K)){Ir(K,Ua(void 0));return}if(n1(Dn))if(yt>Wt){Ir(K,Ua(void 0));return}else{Nt.add(K),await Qr(Vt,Dn,!1,{preventScrollReset:Tt});return}if(Qi(Dn)){Zr(K,_e,Dn.error);return}mn(!Wa(Dn),"Unhandled fetcher deferred data"),Ir(K,Ua(Dn.data))}}async function Qr(K,_e,Me,Ue){let{submission:tt,fetcherSubmission:ft,preventScrollReset:It,replace:Tt}=Ue===void 0?{}:Ue;_e.response.headers.has("X-Remix-Revalidate")&&(Ve=!0);let Mt=_e.response.headers.get("Location");mn(Mt,"Expected a Location header on the redirect Response"),Mt=um(Mt,new URL(K.url),C);let wt=E2(we.location,Mt,{_isRedirect:!0});if(c){let gn=!1;if(_e.response.headers.has("X-Remix-Reload-Document"))gn=!0;else if(c7.test(Mt)){const jt=t.history.createURL(Mt);gn=jt.origin!==o.location.origin||ru(jt.pathname,C)==null}if(gn){Tt?o.location.replace(Mt):o.location.assign(Mt);return}}gt=null;let zt=Tt===!0||_e.response.headers.has("X-Remix-Replace")?Tr.Replace:Tr.Push,{formMethod:Vt,formAction:Wt,formEncType:Hn}=we.navigation;!tt&&!ft&&Vt&&Wt&&Hn&&(tt=gm(we.navigation));let Dn=tt||ft;if(SE.has(_e.response.status)&&Dn&&Yo(Dn.formMethod))await vr(zt,wt,{submission:ir({},Dn,{formAction:Mt}),preventScrollReset:It||ze,enableViewTransition:Me?Qt:void 0});else{let gn=t6(wt,tt);await vr(zt,wt,{overrideNavigation:gn,fetcherSubmission:ft,preventScrollReset:It||ze,enableViewTransition:Me?Qt:void 0})}}async function lo(K,_e,Me,Ue,tt,ft){let It,Tt={};try{It=await zE(D,K,_e,Me,Ue,tt,ft,x,_)}catch(Mt){return Ue.forEach(wt=>{Tt[wt.route.id]={type:jn.error,error:Mt}}),Tt}for(let[Mt,wt]of Object.entries(It))if(UE(wt)){let zt=wt.result;Tt[Mt]={type:jn.redirect,response:FE(zt,Me,Mt,tt,C,U.v7_relativeSplatPath)}}else Tt[Mt]=await RE(wt);return Tt}async function Cs(K,_e,Me,Ue,tt){let ft=K.matches,It=lo("loader",K,tt,Me,_e,null),Tt=Promise.all(Ue.map(async zt=>{if(zt.matches&&zt.match&&zt.controller){let Wt=(await lo("loader",K,pc(t.history,zt.path,zt.controller.signal),[zt.match],zt.matches,zt.key))[zt.match.route.id];return{[zt.key]:Wt}}else return Promise.resolve({[zt.key]:{type:jn.error,error:Ri(404,{pathname:zt.path})}})})),Mt=await It,wt=(await Tt).reduce((zt,Vt)=>Object.assign(zt,Vt),{});return await Promise.all([VE(_e,Mt,tt.signal,ft,K.loaderData),GE(_e,wt,Ue)]),{loaderResults:Mt,fetcherResults:wt}}function Br(){Ve=!0,Je.push(...ie()),Zt.forEach((K,_e)=>{Ee.has(_e)&&it.add(_e),Or(_e)})}function Ir(K,_e,Me){Me===void 0&&(Me={}),we.fetchers.set(K,_e),tr({fetchers:new Map(we.fetchers)},{flushSync:(Me&&Me.flushSync)===!0})}function Zr(K,_e,Me,Ue){Ue===void 0&&(Ue={});let tt=Jl(we.matches,_e);Vi(K),tr({errors:{[tt.route.id]:Me},fetchers:new Map(we.fetchers)},{flushSync:(Ue&&Ue.flushSync)===!0})}function co(K){return cn.set(K,(cn.get(K)||0)+1),Zn.has(K)&&Zn.delete(K),we.fetchers.get(K)||ME}function Vi(K){let _e=we.fetchers.get(K);Ee.has(K)&&!(_e&&_e.state==="loading"&&kt.has(K))&&Or(K),Zt.delete(K),kt.delete(K),Nt.delete(K),U.v7_fetcherPersist&&Zn.delete(K),it.delete(K),we.fetchers.delete(K)}function Ps(K){let _e=(cn.get(K)||0)-1;_e<=0?(cn.delete(K),Zn.add(K),U.v7_fetcherPersist||Vi(K)):cn.set(K,_e),tr({fetchers:new Map(we.fetchers)})}function Or(K){let _e=Ee.get(K);_e&&(_e.abort(),Ee.delete(K))}function Gi(K){for(let _e of K){let Me=co(_e),Ue=Ua(Me.data);we.fetchers.set(_e,Ue)}}function uo(){let K=[],_e=!1;for(let Me of Nt){let Ue=we.fetchers.get(Me);mn(Ue,"Expected fetcher: "+Me),Ue.state==="loading"&&(Nt.delete(Me),K.push(Me),_e=!0)}return Gi(K),_e}function ho(K){let _e=[];for(let[Me,Ue]of kt)if(Ue<K){let tt=we.fetchers.get(Me);mn(tt,"Expected fetcher: "+Me),tt.state==="loading"&&(Or(Me),kt.delete(Me),_e.push(Me))}return Gi(_e),_e.length>0}function ss(K,_e){let Me=we.blockers.get(K)||N0;return On.get(K)!==_e&&On.set(K,_e),Me}function As(K){we.blockers.delete(K),On.delete(K)}function se(K,_e){let Me=we.blockers.get(K)||N0;mn(Me.state==="unblocked"&&_e.state==="blocked"||Me.state==="blocked"&&_e.state==="blocked"||Me.state==="blocked"&&_e.state==="proceeding"||Me.state==="blocked"&&_e.state==="unblocked"||Me.state==="proceeding"&&_e.state==="unblocked","Invalid blocker state transition: "+Me.state+" -> "+_e.state);let Ue=new Map(we.blockers);Ue.set(K,_e),tr({blockers:Ue})}function j(K){let{currentLocation:_e,nextLocation:Me,historyAction:Ue}=K;if(On.size===0)return;On.size>1&&Xc(!1,"A router only supports one blocker at a time");let tt=Array.from(On.entries()),[ft,It]=tt[tt.length-1],Tt=we.blockers.get(ft);if(!(Tt&&Tt.state==="proceeding")&&It({currentLocation:_e,nextLocation:Me,historyAction:Ue}))return ft}function V(K){let _e=Ri(404,{pathname:K}),Me=s||E,{matches:Ue,route:tt}=mm(Me);return ie(),{notFoundMatches:Ue,route:tt,error:_e}}function ie(K){let _e=[];return Bn.forEach((Me,Ue)=>{(!K||K(Ue))&&(Me.cancel(),_e.push(Ue),Bn.delete(Ue))}),_e}function de(K,_e,Me){if(ge=K,$e=_e,xe=Me||null,!ne&&we.navigation===e6){ne=!0;let Ue=Ce(we.location,we.matches);Ue!=null&&tr({restoreScrollPosition:Ue})}return()=>{ge=null,$e=null,xe=null}}function ve(K,_e){return xe&&xe(K,_e.map(Ue=>rE(Ue,we.loaderData)))||K.key}function Pe(K,_e){if(ge&&$e){let Me=ve(K,_e);ge[Me]=$e()}}function Ce(K,_e){if(ge){let Me=ve(K,_e),Ue=ge[Me];if(typeof Ue=="number")return Ue}return null}function ye(K,_e,Me){if(N)if(K){if(Object.keys(K[0].params).length>0)return{active:!0,matches:j3(_e,Me,C,!0)}}else return{active:!0,matches:j3(_e,Me,C,!0)||[]};return{active:!1,matches:null}}async function Re(K,_e,Me){if(!N)return{type:"success",matches:K};let Ue=K;for(;;){let tt=s==null,ft=s||E,It=x;try{await N({signal:Me,path:_e,matches:Ue,patch:(wt,zt)=>{Me.aborted||cm(wt,zt,ft,It,_)}})}catch(wt){return{type:"error",error:wt,partialMatches:Ue}}finally{tt&&!Me.aborted&&(E=[...E])}if(Me.aborted)return{type:"aborted"};let Tt=Yl(ft,_e,C);if(Tt)return{type:"success",matches:Tt};let Mt=j3(ft,_e,C,!0);if(!Mt||Ue.length===Mt.length&&Ue.every((wt,zt)=>wt.route.id===Mt[zt].route.id))return{type:"success",matches:null};Ue=Mt}}function ht(K){x={},s=m5(K,_,void 0,x)}function pt(K,_e){let Me=s==null;cm(K,_e,s||E,x,_),Me&&(E=[...E],tr({}))}return rt={get basename(){return C},get future(){return U},get state(){return we},get routes(){return E},get window(){return o},initialize:Io,subscribe:on,enableScrollRestoration:de,navigate:is,fetch:os,revalidate:Un,createHref:K=>t.history.createHref(K),encodeLocation:K=>t.history.encodeLocation(K),getFetcher:co,deleteFetcher:Ps,dispose:rs,getBlocker:ss,deleteBlocker:As,patchRoutes:pt,_internalFetchControllers:Ee,_internalActiveDeferreds:Bn,_internalSetRoutes:ht},rt}function AE(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function tp(t,o,c,p,_,x,E,s){let C,D;if(E){C=[];for(let U of o)if(C.push(U),U.route.id===E){D=U;break}}else C=o,D=o[o.length-1];let N=l7(_||".",a7(C,x),ru(t.pathname,c)||t.pathname,s==="path");if(_==null&&(N.search=t.search,N.hash=t.hash),(_==null||_===""||_===".")&&D){let U=h7(N.search);if(D.route.index&&!U)N.search=N.search?N.search.replace(/^\?/,"?index&"):"?index";else if(!D.route.index&&U){let G=new URLSearchParams(N.search),ce=G.getAll("index");G.delete("index"),ce.filter(xe=>xe).forEach(xe=>G.append("index",xe));let ge=G.toString();N.search=ge?"?"+ge:""}}return p&&c!=="/"&&(N.pathname=N.pathname==="/"?c:Qs([c,N.pathname])),u1(N)}function om(t,o,c,p){if(!p||!AE(p))return{path:c};if(p.formMethod&&!jE(p.formMethod))return{path:c,error:Ri(405,{method:p.formMethod})};let _=()=>({path:c,error:Ri(400,{type:"invalid-body"})}),x=p.formMethod||"get",E=t?x.toUpperCase():x.toLowerCase(),s=gy(c);if(p.body!==void 0){if(p.formEncType==="text/plain"){if(!Yo(E))return _();let G=typeof p.body=="string"?p.body:p.body instanceof FormData||p.body instanceof URLSearchParams?Array.from(p.body.entries()).reduce((ce,ge)=>{let[xe,$e]=ge;return""+ce+xe+"="+$e+`
`},""):String(p.body);return{path:c,submission:{formMethod:E,formAction:s,formEncType:p.formEncType,formData:void 0,json:void 0,text:G}}}else if(p.formEncType==="application/json"){if(!Yo(E))return _();try{let G=typeof p.body=="string"?JSON.parse(p.body):p.body;return{path:c,submission:{formMethod:E,formAction:s,formEncType:p.formEncType,formData:void 0,json:G,text:void 0}}}catch{return _()}}}mn(typeof FormData=="function","FormData is not available in this environment");let C,D;if(p.formData)C=rp(p.formData),D=p.formData;else if(p.body instanceof FormData)C=rp(p.body),D=p.body;else if(p.body instanceof URLSearchParams)C=p.body,D=hm(C);else if(p.body==null)C=new URLSearchParams,D=new FormData;else try{C=new URLSearchParams(p.body),D=hm(C)}catch{return _()}let N={formMethod:E,formAction:s,formEncType:p&&p.formEncType||"application/x-www-form-urlencoded",formData:D,json:void 0,text:void 0};if(Yo(N.formMethod))return{path:c,submission:N};let U=oa(c);return o&&U.search&&h7(U.search)&&C.append("index",""),U.search="?"+C,{path:u1(U),submission:N}}function sm(t,o,c){c===void 0&&(c=!1);let p=t.findIndex(_=>_.route.id===o);return p>=0?t.slice(0,c?p+1:p):t}function am(t,o,c,p,_,x,E,s,C,D,N,U,G,ce,ge,xe){let $e=xe?Qi(xe[1])?xe[1].error:xe[1].data:void 0,ne=t.createURL(o.location),ee=t.createURL(_),oe=c;x&&o.errors?oe=sm(c,Object.keys(o.errors)[0],!0):xe&&Qi(xe[1])&&(oe=sm(c,xe[0]));let Te=xe?xe[1].statusCode:void 0,Oe=E&&Te&&Te>=400,rt=oe.filter((Ye,ze)=>{let{route:gt}=Ye;if(gt.lazy)return!0;if(gt.loader==null)return!1;if(x)return np(gt,o.loaderData,o.errors);if(IE(o.loaderData,o.matches[ze],Ye)||C.some($t=>$t===Ye.route.id))return!0;let Qt=o.matches[ze],St=Ye;return lm(Ye,ir({currentUrl:ne,currentParams:Qt.params,nextUrl:ee,nextParams:St.params},p,{actionResult:$e,actionStatus:Te,defaultShouldRevalidate:Oe?!1:s||ne.pathname+ne.search===ee.pathname+ee.search||ne.search!==ee.search||my(Qt,St)}))}),we=[];return U.forEach((Ye,ze)=>{if(x||!c.some(He=>He.route.id===Ye.routeId)||N.has(ze))return;let gt=Yl(ce,Ye.path,ge);if(!gt){we.push({key:ze,routeId:Ye.routeId,path:Ye.path,matches:null,match:null,controller:null});return}let Qt=o.fetchers.get(ze),St=X0(gt,Ye.path),$t=!1;G.has(ze)?$t=!1:D.has(ze)?(D.delete(ze),$t=!0):Qt&&Qt.state!=="idle"&&Qt.data===void 0?$t=s:$t=lm(St,ir({currentUrl:ne,currentParams:o.matches[o.matches.length-1].params,nextUrl:ee,nextParams:c[c.length-1].params},p,{actionResult:$e,actionStatus:Te,defaultShouldRevalidate:Oe?!1:s})),$t&&we.push({key:ze,routeId:Ye.routeId,path:Ye.path,matches:gt,match:St,controller:new AbortController})}),[rt,we]}function np(t,o,c){if(t.lazy)return!0;if(!t.loader)return!1;let p=o!=null&&o[t.id]!==void 0,_=c!=null&&c[t.id]!==void 0;return!p&&_?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!p&&!_}function IE(t,o,c){let p=!o||c.route.id!==o.route.id,_=t[c.route.id]===void 0;return p||_}function my(t,o){let c=t.route.path;return t.pathname!==o.pathname||c!=null&&c.endsWith("*")&&t.params["*"]!==o.params["*"]}function lm(t,o){if(t.route.shouldRevalidate){let c=t.route.shouldRevalidate(o);if(typeof c=="boolean")return c}return o.defaultShouldRevalidate}function cm(t,o,c,p,_){var x;let E;if(t){let D=p[t];mn(D,"No route found to patch children into: routeId = "+t),D.children||(D.children=[]),E=D.children}else E=c;let s=o.filter(D=>!E.some(N=>_y(D,N))),C=m5(s,_,[t||"_","patch",String(((x=E)==null?void 0:x.length)||"0")],p);E.push(...C)}function _y(t,o){return"id"in t&&"id"in o&&t.id===o.id?!0:t.index===o.index&&t.path===o.path&&t.caseSensitive===o.caseSensitive?(!t.children||t.children.length===0)&&(!o.children||o.children.length===0)?!0:t.children.every((c,p)=>{var _;return(_=o.children)==null?void 0:_.some(x=>_y(c,x))}):!1}async function kE(t,o,c){if(!t.lazy)return;let p=await t.lazy();if(!t.lazy)return;let _=c[t.id];mn(_,"No route found in manifest");let x={};for(let E in p){let C=_[E]!==void 0&&E!=="hasErrorBoundary";Xc(!C,'Route "'+_.id+'" has a static property "'+E+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+E+'" will be ignored.')),!C&&!tE.has(E)&&(x[E]=p[E])}Object.assign(_,x),Object.assign(_,ir({},o(_),{lazy:void 0}))}async function LE(t){let{matches:o}=t,c=o.filter(_=>_.shouldLoad);return(await Promise.all(c.map(_=>_.resolve()))).reduce((_,x,E)=>Object.assign(_,{[c[E].route.id]:x}),{})}async function zE(t,o,c,p,_,x,E,s,C,D){let N=x.map(ce=>ce.route.lazy?kE(ce.route,C,s):void 0),U=x.map((ce,ge)=>{let xe=N[ge],$e=_.some(ee=>ee.route.id===ce.route.id);return ir({},ce,{shouldLoad:$e,resolve:async ee=>(ee&&p.method==="GET"&&(ce.route.lazy||ce.route.loader)&&($e=!0),$e?DE(o,p,ce,xe,ee,D):Promise.resolve({type:jn.data,result:void 0}))})}),G=await t({matches:U,request:p,params:x[0].params,fetcherKey:E,context:D});try{await Promise.all(N)}catch{}return G}async function DE(t,o,c,p,_,x){let E,s,C=D=>{let N,U=new Promise((ge,xe)=>N=xe);s=()=>N(),o.signal.addEventListener("abort",s);let G=ge=>typeof D!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+c.route.id+"]"))):D({request:o,params:c.params,context:x},...ge!==void 0?[ge]:[]),ce=(async()=>{try{return{type:"data",result:await(_?_(xe=>G(xe)):G())}}catch(ge){return{type:"error",result:ge}}})();return Promise.race([ce,U])};try{let D=c.route[t];if(p)if(D){let N,[U]=await Promise.all([C(D).catch(G=>{N=G}),p]);if(N!==void 0)throw N;E=U}else if(await p,D=c.route[t],D)E=await C(D);else if(t==="action"){let N=new URL(o.url),U=N.pathname+N.search;throw Ri(405,{method:o.method,pathname:U,routeId:c.route.id})}else return{type:jn.data,result:void 0};else if(D)E=await C(D);else{let N=new URL(o.url),U=N.pathname+N.search;throw Ri(404,{pathname:U})}mn(E.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+c.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(D){return{type:jn.error,result:D}}finally{s&&o.signal.removeEventListener("abort",s)}return E}async function RE(t){let{result:o,type:c}=t;if(yy(o)){let U;try{let G=o.headers.get("Content-Type");G&&/\bapplication\/json\b/.test(G)?o.body==null?U=null:U=await o.json():U=await o.text()}catch(G){return{type:jn.error,error:G}}return c===jn.error?{type:jn.error,error:new _5(o.status,o.statusText,U),statusCode:o.status,headers:o.headers}:{type:jn.data,data:U,statusCode:o.status,headers:o.headers}}if(c===jn.error){if(_m(o)){var p,_;if(o.data instanceof Error){var x,E;return{type:jn.error,error:o.data,statusCode:(x=o.init)==null?void 0:x.status,headers:(E=o.init)!=null&&E.headers?new Headers(o.init.headers):void 0}}return{type:jn.error,error:new _5(((p=o.init)==null?void 0:p.status)||500,void 0,o.data),statusCode:S2(o)?o.status:void 0,headers:(_=o.init)!=null&&_.headers?new Headers(o.init.headers):void 0}}return{type:jn.error,error:o,statusCode:S2(o)?o.status:void 0}}if(NE(o)){var s,C;return{type:jn.deferred,deferredData:o,statusCode:(s=o.init)==null?void 0:s.status,headers:((C=o.init)==null?void 0:C.headers)&&new Headers(o.init.headers)}}if(_m(o)){var D,N;return{type:jn.data,data:o.data,statusCode:(D=o.init)==null?void 0:D.status,headers:(N=o.init)!=null&&N.headers?new Headers(o.init.headers):void 0}}return{type:jn.data,data:o}}function FE(t,o,c,p,_,x){let E=t.headers.get("Location");if(mn(E,"Redirects returned/thrown from loaders/actions must have a Location header"),!c7.test(E)){let s=p.slice(0,p.findIndex(C=>C.route.id===c)+1);E=tp(new URL(o.url),s,_,!0,E,x),t.headers.set("Location",E)}return t}function um(t,o,c){if(c7.test(t)){let p=t,_=p.startsWith("//")?new URL(o.protocol+p):new URL(p),x=ru(_.pathname,c)!=null;if(_.origin===o.origin&&x)return _.pathname+_.search+_.hash}return t}function pc(t,o,c,p){let _=t.createURL(gy(o)).toString(),x={signal:c};if(p&&Yo(p.formMethod)){let{formMethod:E,formEncType:s}=p;x.method=E.toUpperCase(),s==="application/json"?(x.headers=new Headers({"Content-Type":s}),x.body=JSON.stringify(p.json)):s==="text/plain"?x.body=p.text:s==="application/x-www-form-urlencoded"&&p.formData?x.body=rp(p.formData):x.body=p.formData}return new Request(_,x)}function rp(t){let o=new URLSearchParams;for(let[c,p]of t.entries())o.append(c,typeof p=="string"?p:p.name);return o}function hm(t){let o=new FormData;for(let[c,p]of t.entries())o.append(c,p);return o}function BE(t,o,c,p,_){let x={},E=null,s,C=!1,D={},N=c&&Qi(c[1])?c[1].error:void 0;return t.forEach(U=>{if(!(U.route.id in o))return;let G=U.route.id,ce=o[G];if(mn(!n1(ce),"Cannot handle redirect results in processLoaderData"),Qi(ce)){let ge=ce.error;if(N!==void 0&&(ge=N,N=void 0),E=E||{},_)E[G]=ge;else{let xe=Jl(t,G);E[xe.route.id]==null&&(E[xe.route.id]=ge)}x[G]=void 0,C||(C=!0,s=S2(ce.error)?ce.error.status:500),ce.headers&&(D[G]=ce.headers)}else Wa(ce)?(p.set(G,ce.deferredData),x[G]=ce.deferredData.data,ce.statusCode!=null&&ce.statusCode!==200&&!C&&(s=ce.statusCode),ce.headers&&(D[G]=ce.headers)):(x[G]=ce.data,ce.statusCode&&ce.statusCode!==200&&!C&&(s=ce.statusCode),ce.headers&&(D[G]=ce.headers))}),N!==void 0&&c&&(E={[c[0]]:N},x[c[0]]=void 0),{loaderData:x,errors:E,statusCode:s||200,loaderHeaders:D}}function dm(t,o,c,p,_,x,E){let{loaderData:s,errors:C}=BE(o,c,p,E,!1);return _.forEach(D=>{let{key:N,match:U,controller:G}=D,ce=x[N];if(mn(ce,"Did not find corresponding fetcher result"),!(G&&G.signal.aborted))if(Qi(ce)){let ge=Jl(t.matches,U==null?void 0:U.route.id);C&&C[ge.route.id]||(C=ir({},C,{[ge.route.id]:ce.error})),t.fetchers.delete(N)}else if(n1(ce))mn(!1,"Unhandled fetcher revalidation redirect");else if(Wa(ce))mn(!1,"Unhandled fetcher deferred data");else{let ge=Ua(ce.data);t.fetchers.set(N,ge)}}),{loaderData:s,errors:C}}function pm(t,o,c,p){let _=ir({},o);for(let x of c){let E=x.route.id;if(o.hasOwnProperty(E)?o[E]!==void 0&&(_[E]=o[E]):t[E]!==void 0&&x.route.loader&&(_[E]=t[E]),p&&p.hasOwnProperty(E))break}return _}function fm(t){return t?Qi(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Jl(t,o){return(o?t.slice(0,t.findIndex(p=>p.route.id===o)+1):[...t]).reverse().find(p=>p.route.hasErrorBoundary===!0)||t[0]}function mm(t){let o=t.length===1?t[0]:t.find(c=>c.index||!c.path||c.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:o}],route:o}}function Ri(t,o){let{pathname:c,routeId:p,method:_,type:x,message:E}=o===void 0?{}:o,s="Unknown Server Error",C="Unknown @remix-run/router error";return t===400?(s="Bad Request",_&&c&&p?C="You made a "+_+' request to "'+c+'" but '+('did not provide a `loader` for route "'+p+'", ')+"so there is no way to handle the request.":x==="defer-action"?C="defer() is not supported in actions":x==="invalid-body"&&(C="Unable to encode submission body")):t===403?(s="Forbidden",C='Route "'+p+'" does not match URL "'+c+'"'):t===404?(s="Not Found",C='No route matches URL "'+c+'"'):t===405&&(s="Method Not Allowed",_&&c&&p?C="You made a "+_.toUpperCase()+' request to "'+c+'" but '+('did not provide an `action` for route "'+p+'", ')+"so there is no way to handle the request.":_&&(C='Invalid request method "'+_.toUpperCase()+'"')),new _5(t||500,s,new Error(C),!0)}function E3(t){let o=Object.entries(t);for(let c=o.length-1;c>=0;c--){let[p,_]=o[c];if(n1(_))return{key:p,result:_}}}function gy(t){let o=typeof t=="string"?oa(t):t;return u1(ir({},o,{hash:""}))}function OE(t,o){return t.pathname!==o.pathname||t.search!==o.search?!1:t.hash===""?o.hash!=="":t.hash===o.hash?!0:o.hash!==""}function UE(t){return yy(t.result)&&EE.has(t.result.status)}function Wa(t){return t.type===jn.deferred}function Qi(t){return t.type===jn.error}function n1(t){return(t&&t.type)===jn.redirect}function _m(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function NE(t){let o=t;return o&&typeof o=="object"&&typeof o.data=="object"&&typeof o.subscribe=="function"&&typeof o.cancel=="function"&&typeof o.resolveData=="function"}function yy(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function jE(t){return TE.has(t.toLowerCase())}function Yo(t){return wE.has(t.toLowerCase())}async function VE(t,o,c,p,_){let x=Object.entries(o);for(let E=0;E<x.length;E++){let[s,C]=x[E],D=t.find(G=>(G==null?void 0:G.route.id)===s);if(!D)continue;let N=p.find(G=>G.route.id===D.route.id),U=N!=null&&!my(N,D)&&(_&&_[D.route.id])!==void 0;Wa(C)&&U&&await u7(C,c,!1).then(G=>{G&&(o[s]=G)})}}async function GE(t,o,c){for(let p=0;p<c.length;p++){let{key:_,routeId:x,controller:E}=c[p],s=o[_];t.find(D=>(D==null?void 0:D.route.id)===x)&&Wa(s)&&(mn(E,"Expected an AbortController for revalidating fetcher deferred result"),await u7(s,E.signal,!0).then(D=>{D&&(o[_]=D)}))}}async function u7(t,o,c){if(c===void 0&&(c=!1),!await t.deferredData.resolveData(o)){if(c)try{return{type:jn.data,data:t.deferredData.unwrappedData}}catch(_){return{type:jn.error,error:_}}return{type:jn.data,data:t.deferredData.data}}}function h7(t){return new URLSearchParams(t).getAll("index").some(o=>o==="")}function X0(t,o){let c=typeof o=="string"?oa(o).search:o.search;if(t[t.length-1].route.index&&h7(c||""))return t[t.length-1];let p=dy(t);return p[p.length-1]}function gm(t){let{formMethod:o,formAction:c,formEncType:p,text:_,formData:x,json:E}=t;if(!(!o||!c||!p)){if(_!=null)return{formMethod:o,formAction:c,formEncType:p,formData:void 0,json:void 0,text:_};if(x!=null)return{formMethod:o,formAction:c,formEncType:p,formData:x,json:void 0,text:void 0};if(E!==void 0)return{formMethod:o,formAction:c,formEncType:p,formData:void 0,json:E,text:void 0}}}function t6(t,o){return o?{state:"loading",location:t,formMethod:o.formMethod,formAction:o.formAction,formEncType:o.formEncType,formData:o.formData,json:o.json,text:o.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function $E(t,o){return{state:"submitting",location:t,formMethod:o.formMethod,formAction:o.formAction,formEncType:o.formEncType,formData:o.formData,json:o.json,text:o.text}}function j0(t,o){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:o}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:o}}function ZE(t,o){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:o?o.data:void 0}}function Ua(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function WE(t,o){try{let c=t.sessionStorage.getItem(fy);if(c){let p=JSON.parse(c);for(let[_,x]of Object.entries(p||{}))x&&Array.isArray(x)&&o.set(_,new Set(x||[]))}}catch{}}function qE(t,o){if(o.size>0){let c={};for(let[p,_]of o)c[p]=[..._];try{t.sessionStorage.setItem(fy,JSON.stringify(c))}catch(p){Xc(!1,"Failed to save applied view transitions in sessionStorage ("+p+").")}}}/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function M2(){return M2=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var c=arguments[o];for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(t[p]=c[p])}return t},M2.apply(this,arguments)}const $5=Ne.createContext(null),vy=Ne.createContext(null),p1=Ne.createContext(null),Z5=Ne.createContext(null),f1=Ne.createContext({outlet:null,matches:[],isDataRoute:!1}),xy=Ne.createContext(null);function HE(t,o){let{relative:c}=o===void 0?{}:o;F2()||mn(!1);let{basename:p,navigator:_}=Ne.useContext(p1),{hash:x,pathname:E,search:s}=by(t,{relative:c}),C=E;return p!=="/"&&(C=E==="/"?p:Qs([p,E])),_.createHref({pathname:C,search:s,hash:x})}function F2(){return Ne.useContext(Z5)!=null}function W5(){return F2()||mn(!1),Ne.useContext(Z5).location}function wy(t){Ne.useContext(p1).static||Ne.useLayoutEffect(t)}function XE(){let{isDataRoute:t}=Ne.useContext(f1);return t?aS():KE()}function KE(){F2()||mn(!1);let t=Ne.useContext($5),{basename:o,future:c,navigator:p}=Ne.useContext(p1),{matches:_}=Ne.useContext(f1),{pathname:x}=W5(),E=JSON.stringify(a7(_,c.v7_relativeSplatPath)),s=Ne.useRef(!1);return wy(()=>{s.current=!0}),Ne.useCallback(function(D,N){if(N===void 0&&(N={}),!s.current)return;if(typeof D=="number"){p.go(D);return}let U=l7(D,JSON.parse(E),x,N.relative==="path");t==null&&o!=="/"&&(U.pathname=U.pathname==="/"?o:Qs([o,U.pathname])),(N.replace?p.replace:p.push)(U,N.state,N)},[o,p,E,x,t])}function by(t,o){let{relative:c}=o===void 0?{}:o,{future:p}=Ne.useContext(p1),{matches:_}=Ne.useContext(f1),{pathname:x}=W5(),E=JSON.stringify(a7(_,p.v7_relativeSplatPath));return Ne.useMemo(()=>l7(t,JSON.parse(E),x,c==="path"),[t,E,x,c])}function YE(t,o,c,p){F2()||mn(!1);let{navigator:_,static:x}=Ne.useContext(p1),{matches:E}=Ne.useContext(f1),s=E[E.length-1],C=s?s.params:{};s&&s.pathname;let D=s?s.pathnameBase:"/";s&&s.route;let N=W5(),U;if(o){var G;let ne=typeof o=="string"?oa(o):o;D==="/"||(G=ne.pathname)!=null&&G.startsWith(D)||mn(!1),U=ne}else U=N;let ce=U.pathname||"/",ge=ce;if(D!=="/"){let ne=D.replace(/^\//,"").split("/");ge="/"+ce.replace(/^\//,"").split("/").slice(ne.length).join("/")}let xe=!x&&c&&c.matches&&c.matches.length>0?c.matches:Yl(t,{pathname:ge}),$e=nS(xe&&xe.map(ne=>Object.assign({},ne,{params:Object.assign({},C,ne.params),pathname:Qs([D,_.encodeLocation?_.encodeLocation(ne.pathname).pathname:ne.pathname]),pathnameBase:ne.pathnameBase==="/"?D:Qs([D,_.encodeLocation?_.encodeLocation(ne.pathnameBase).pathname:ne.pathnameBase])})),E,c,p);return o&&$e?Ne.createElement(Z5.Provider,{value:{location:M2({pathname:"/",search:"",hash:"",state:null,key:"default"},U),navigationType:Tr.Pop}},$e):$e}function JE(){let t=sS(),o=S2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),c=t instanceof Error?t.stack:null,_={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},x=null;return Ne.createElement(Ne.Fragment,null,Ne.createElement("h2",null,"Unexpected Application Error!"),Ne.createElement("h3",{style:{fontStyle:"italic"}},o),c?Ne.createElement("pre",{style:_},c):null,x)}const QE=Ne.createElement(JE,null);class eS extends Ne.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,c){return c.location!==o.location||c.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:c.error,location:c.location,revalidation:o.revalidation||c.revalidation}}componentDidCatch(o,c){console.error("React Router caught the following error during render",o,c)}render(){return this.state.error!==void 0?Ne.createElement(f1.Provider,{value:this.props.routeContext},Ne.createElement(xy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tS(t){let{routeContext:o,match:c,children:p}=t,_=Ne.useContext($5);return _&&_.static&&_.staticContext&&(c.route.errorElement||c.route.ErrorBoundary)&&(_.staticContext._deepestRenderedBoundaryId=c.route.id),Ne.createElement(f1.Provider,{value:o},p)}function nS(t,o,c,p){var _;if(o===void 0&&(o=[]),c===void 0&&(c=null),p===void 0&&(p=null),t==null){var x;if(!c)return null;if(c.errors)t=c.matches;else if((x=p)!=null&&x.v7_partialHydration&&o.length===0&&!c.initialized&&c.matches.length>0)t=c.matches;else return null}let E=t,s=(_=c)==null?void 0:_.errors;if(s!=null){let N=E.findIndex(U=>U.route.id&&(s==null?void 0:s[U.route.id])!==void 0);N>=0||mn(!1),E=E.slice(0,Math.min(E.length,N+1))}let C=!1,D=-1;if(c&&p&&p.v7_partialHydration)for(let N=0;N<E.length;N++){let U=E[N];if((U.route.HydrateFallback||U.route.hydrateFallbackElement)&&(D=N),U.route.id){let{loaderData:G,errors:ce}=c,ge=U.route.loader&&G[U.route.id]===void 0&&(!ce||ce[U.route.id]===void 0);if(U.route.lazy||ge){C=!0,D>=0?E=E.slice(0,D+1):E=[E[0]];break}}}return E.reduceRight((N,U,G)=>{let ce,ge=!1,xe=null,$e=null;c&&(ce=s&&U.route.id?s[U.route.id]:void 0,xe=U.route.errorElement||QE,C&&(D<0&&G===0?(lS("route-fallback",!1),ge=!0,$e=null):D===G&&(ge=!0,$e=U.route.hydrateFallbackElement||null)));let ne=o.concat(E.slice(0,G+1)),ee=()=>{let oe;return ce?oe=xe:ge?oe=$e:U.route.Component?oe=Ne.createElement(U.route.Component,null):U.route.element?oe=U.route.element:oe=N,Ne.createElement(tS,{match:U,routeContext:{outlet:N,matches:ne,isDataRoute:c!=null},children:oe})};return c&&(U.route.ErrorBoundary||U.route.errorElement||G===0)?Ne.createElement(eS,{location:c.location,revalidation:c.revalidation,component:xe,error:ce,children:ee(),routeContext:{outlet:null,matches:ne,isDataRoute:!0}}):ee()},null)}var Ty=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Ty||{}),g5=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(g5||{});function rS(t){let o=Ne.useContext($5);return o||mn(!1),o}function iS(t){let o=Ne.useContext(vy);return o||mn(!1),o}function oS(t){let o=Ne.useContext(f1);return o||mn(!1),o}function Ey(t){let o=oS(),c=o.matches[o.matches.length-1];return c.route.id||mn(!1),c.route.id}function sS(){var t;let o=Ne.useContext(xy),c=iS(g5.UseRouteError),p=Ey(g5.UseRouteError);return o!==void 0?o:(t=c.errors)==null?void 0:t[p]}function aS(){let{router:t}=rS(Ty.UseNavigateStable),o=Ey(g5.UseNavigateStable),c=Ne.useRef(!1);return wy(()=>{c.current=!0}),Ne.useCallback(function(_,x){x===void 0&&(x={}),c.current&&(typeof _=="number"?t.navigate(_):t.navigate(_,M2({fromRouteId:o},x)))},[t,o])}const ym={};function lS(t,o,c){!o&&!ym[t]&&(ym[t]=!0)}function cS(t,o){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!o||o.v7_relativeSplatPath),o&&(o.v7_fetcherPersist,o.v7_normalizeFormMethod,o.v7_partialHydration,o.v7_skipActionErrorRevalidation)}function uS(t){let{basename:o="/",children:c=null,location:p,navigationType:_=Tr.Pop,navigator:x,static:E=!1,future:s}=t;F2()&&mn(!1);let C=o.replace(/^\/*/,"/"),D=Ne.useMemo(()=>({basename:C,navigator:x,static:E,future:M2({v7_relativeSplatPath:!1},s)}),[C,s,x,E]);typeof p=="string"&&(p=oa(p));let{pathname:N="/",search:U="",hash:G="",state:ce=null,key:ge="default"}=p,xe=Ne.useMemo(()=>{let $e=ru(N,C);return $e==null?null:{location:{pathname:$e,search:U,hash:G,state:ce,key:ge},navigationType:_}},[C,N,U,G,ce,ge,_]);return xe==null?null:Ne.createElement(p1.Provider,{value:D},Ne.createElement(Z5.Provider,{children:c,value:xe}))}new Promise(()=>{});function hS(t){let o={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(o,{element:Ne.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(o,{hydrateFallbackElement:Ne.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(o,{errorElement:Ne.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),o}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function C2(){return C2=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var c=arguments[o];for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(t[p]=c[p])}return t},C2.apply(this,arguments)}function dS(t,o){if(t==null)return{};var c={},p=Object.keys(t),_,x;for(x=0;x<p.length;x++)_=p[x],!(o.indexOf(_)>=0)&&(c[_]=t[_]);return c}function pS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fS(t,o){return t.button===0&&(!o||o==="_self")&&!pS(t)}const mS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_S="6";try{window.__reactRouterVersion=_S}catch{}function BC(t,o){return PE({basename:o==null?void 0:o.basename,future:C2({},o==null?void 0:o.future,{v7_prependBasename:!0}),history:JT({window:o==null?void 0:o.window}),hydrationData:(o==null?void 0:o.hydrationData)||gS(),routes:t,mapRouteProperties:hS,dataStrategy:o==null?void 0:o.dataStrategy,patchRoutesOnNavigation:o==null?void 0:o.patchRoutesOnNavigation,window:o==null?void 0:o.window}).initialize()}function gS(){var t;let o=(t=window)==null?void 0:t.__staticRouterHydrationData;return o&&o.errors&&(o=C2({},o,{errors:yS(o.errors)})),o}function yS(t){if(!t)return null;let o=Object.entries(t),c={};for(let[p,_]of o)if(_&&_.__type==="RouteErrorResponse")c[p]=new _5(_.status,_.statusText,_.data,_.internal===!0);else if(_&&_.__type==="Error"){if(_.__subType){let x=window[_.__subType];if(typeof x=="function")try{let E=new x(_.message);E.stack="",c[p]=E}catch{}}if(c[p]==null){let x=new Error(_.message);x.stack="",c[p]=x}}else c[p]=_;return c}const vS=Ne.createContext({isTransitioning:!1}),xS=Ne.createContext(new Map),wS="startTransition",vm=Uw[wS],bS="flushSync",xm=YT[bS];function TS(t){vm?vm(t):t()}function V0(t){xm?xm(t):t()}class ES{constructor(){this.status="pending",this.promise=new Promise((o,c)=>{this.resolve=p=>{this.status==="pending"&&(this.status="resolved",o(p))},this.reject=p=>{this.status==="pending"&&(this.status="rejected",c(p))}})}}function OC(t){let{fallbackElement:o,router:c,future:p}=t,[_,x]=Ne.useState(c.state),[E,s]=Ne.useState(),[C,D]=Ne.useState({isTransitioning:!1}),[N,U]=Ne.useState(),[G,ce]=Ne.useState(),[ge,xe]=Ne.useState(),$e=Ne.useRef(new Map),{v7_startTransition:ne}=p||{},ee=Ne.useCallback(Ye=>{ne?TS(Ye):Ye()},[ne]),oe=Ne.useCallback((Ye,ze)=>{let{deletedFetchers:gt,flushSync:Qt,viewTransitionOpts:St}=ze;Ye.fetchers.forEach((He,Ve)=>{He.data!==void 0&&$e.current.set(Ve,He.data)}),gt.forEach(He=>$e.current.delete(He));let $t=c.window==null||c.window.document==null||typeof c.window.document.startViewTransition!="function";if(!St||$t){Qt?V0(()=>x(Ye)):ee(()=>x(Ye));return}if(Qt){V0(()=>{G&&(N&&N.resolve(),G.skipTransition()),D({isTransitioning:!0,flushSync:!0,currentLocation:St.currentLocation,nextLocation:St.nextLocation})});let He=c.window.document.startViewTransition(()=>{V0(()=>x(Ye))});He.finished.finally(()=>{V0(()=>{U(void 0),ce(void 0),s(void 0),D({isTransitioning:!1})})}),V0(()=>ce(He));return}G?(N&&N.resolve(),G.skipTransition(),xe({state:Ye,currentLocation:St.currentLocation,nextLocation:St.nextLocation})):(s(Ye),D({isTransitioning:!0,flushSync:!1,currentLocation:St.currentLocation,nextLocation:St.nextLocation}))},[c.window,G,N,$e,ee]);Ne.useLayoutEffect(()=>c.subscribe(oe),[c,oe]),Ne.useEffect(()=>{C.isTransitioning&&!C.flushSync&&U(new ES)},[C]),Ne.useEffect(()=>{if(N&&E&&c.window){let Ye=E,ze=N.promise,gt=c.window.document.startViewTransition(async()=>{ee(()=>x(Ye)),await ze});gt.finished.finally(()=>{U(void 0),ce(void 0),s(void 0),D({isTransitioning:!1})}),ce(gt)}},[ee,E,N,c.window]),Ne.useEffect(()=>{N&&E&&_.location.key===E.location.key&&N.resolve()},[N,G,_.location,E]),Ne.useEffect(()=>{!C.isTransitioning&&ge&&(s(ge.state),D({isTransitioning:!0,flushSync:!1,currentLocation:ge.currentLocation,nextLocation:ge.nextLocation}),xe(void 0))},[C.isTransitioning,ge]),Ne.useEffect(()=>{},[]);let Te=Ne.useMemo(()=>({createHref:c.createHref,encodeLocation:c.encodeLocation,go:Ye=>c.navigate(Ye),push:(Ye,ze,gt)=>c.navigate(Ye,{state:ze,preventScrollReset:gt==null?void 0:gt.preventScrollReset}),replace:(Ye,ze,gt)=>c.navigate(Ye,{replace:!0,state:ze,preventScrollReset:gt==null?void 0:gt.preventScrollReset})}),[c]),Oe=c.basename||"/",rt=Ne.useMemo(()=>({router:c,navigator:Te,static:!1,basename:Oe}),[c,Te,Oe]),we=Ne.useMemo(()=>({v7_relativeSplatPath:c.future.v7_relativeSplatPath}),[c.future.v7_relativeSplatPath]);return Ne.useEffect(()=>cS(p,c.future),[p,c.future]),Ne.createElement(Ne.Fragment,null,Ne.createElement($5.Provider,{value:rt},Ne.createElement(vy.Provider,{value:_},Ne.createElement(xS.Provider,{value:$e.current},Ne.createElement(vS.Provider,{value:C},Ne.createElement(uS,{basename:Oe,location:_.location,navigationType:_.historyAction,navigator:Te,future:we},_.initialized||c.future.v7_partialHydration?Ne.createElement(SS,{routes:c.routes,future:c.future,state:_}):o))))),null)}const SS=Ne.memo(MS);function MS(t){let{routes:o,future:c,state:p}=t;return YE(o,void 0,p,c)}const CS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UC=Ne.forwardRef(function(o,c){let{onClick:p,relative:_,reloadDocument:x,replace:E,state:s,target:C,to:D,preventScrollReset:N,viewTransition:U}=o,G=dS(o,mS),{basename:ce}=Ne.useContext(p1),ge,xe=!1;if(typeof D=="string"&&PS.test(D)&&(ge=D,CS))try{let oe=new URL(window.location.href),Te=D.startsWith("//")?new URL(oe.protocol+D):new URL(D),Oe=ru(Te.pathname,ce);Te.origin===oe.origin&&Oe!=null?D=Oe+Te.search+Te.hash:xe=!0}catch{}let $e=HE(D,{relative:_}),ne=AS(D,{replace:E,state:s,target:C,preventScrollReset:N,relative:_,viewTransition:U});function ee(oe){p&&p(oe),oe.defaultPrevented||ne(oe)}return Ne.createElement("a",C2({},G,{href:ge||$e,onClick:xe||x?p:ee,ref:c,target:C}))});var wm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(wm||(wm={}));var bm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(bm||(bm={}));function AS(t,o){let{target:c,replace:p,state:_,preventScrollReset:x,relative:E,viewTransition:s}=o===void 0?{}:o,C=XE(),D=W5(),N=by(t,{relative:E});return Ne.useCallback(U=>{if(fS(U,c)){U.preventDefault();let G=p!==void 0?p:u1(D)===u1(N);C(t,{replace:G,state:_,preventScrollReset:x,relative:E,viewTransition:s})}},[D,C,N,p,_,c,t,x,E,s])}var Sy={exports:{}},IS="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kS=IS,LS=kS;function My(){}function Cy(){}Cy.resetWarningCache=My;var zS=function(){function t(p,_,x,E,s,C){if(C!==LS){var D=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw D.name="Invariant Violation",D}}t.isRequired=t;function o(){return t}var c={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:o,element:t,elementType:t,instanceOf:o,node:t,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:Cy,resetWarningCache:My};return c.PropTypes=c,c};Sy.exports=zS();var DS=Sy.exports;const xn=ol(DS);var RS=typeof Element<"u",FS=typeof Map=="function",BS=typeof Set=="function",OS=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function V3(t,o){if(t===o)return!0;if(t&&o&&typeof t=="object"&&typeof o=="object"){if(t.constructor!==o.constructor)return!1;var c,p,_;if(Array.isArray(t)){if(c=t.length,c!=o.length)return!1;for(p=c;p--!==0;)if(!V3(t[p],o[p]))return!1;return!0}var x;if(FS&&t instanceof Map&&o instanceof Map){if(t.size!==o.size)return!1;for(x=t.entries();!(p=x.next()).done;)if(!o.has(p.value[0]))return!1;for(x=t.entries();!(p=x.next()).done;)if(!V3(p.value[1],o.get(p.value[0])))return!1;return!0}if(BS&&t instanceof Set&&o instanceof Set){if(t.size!==o.size)return!1;for(x=t.entries();!(p=x.next()).done;)if(!o.has(p.value[0]))return!1;return!0}if(OS&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(o)){if(c=t.length,c!=o.length)return!1;for(p=c;p--!==0;)if(t[p]!==o[p])return!1;return!0}if(t.constructor===RegExp)return t.source===o.source&&t.flags===o.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof o.valueOf=="function")return t.valueOf()===o.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof o.toString=="function")return t.toString()===o.toString();if(_=Object.keys(t),c=_.length,c!==Object.keys(o).length)return!1;for(p=c;p--!==0;)if(!Object.prototype.hasOwnProperty.call(o,_[p]))return!1;if(RS&&t instanceof Element)return!1;for(p=c;p--!==0;)if(!((_[p]==="_owner"||_[p]==="__v"||_[p]==="__o")&&t.$$typeof)&&!V3(t[_[p]],o[_[p]]))return!1;return!0}return t!==t&&o!==o}var US=function(o,c){try{return V3(o,c)}catch(p){if((p.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw p}};const NS=ol(US);var jS=function(t,o,c,p,_,x,E,s){if(!t){var C;if(o===void 0)C=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var D=[c,p,_,x,E,s],N=0;C=new Error(o.replace(/%s/g,function(){return D[N++]})),C.name="Invariant Violation"}throw C.framesToPop=1,C}},VS=jS;const Tm=ol(VS);var GS=function(o,c,p,_){var x=p?p.call(_,o,c):void 0;if(x!==void 0)return!!x;if(o===c)return!0;if(typeof o!="object"||!o||typeof c!="object"||!c)return!1;var E=Object.keys(o),s=Object.keys(c);if(E.length!==s.length)return!1;for(var C=Object.prototype.hasOwnProperty.bind(c),D=0;D<E.length;D++){var N=E[D];if(!C(N))return!1;var U=o[N],G=c[N];if(x=p?p.call(_,U,G,N):void 0,x===!1||x===void 0&&U!==G)return!1}return!0};const $S=ol(GS);function br(){return br=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var c=arguments[o];for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(t[p]=c[p])}return t},br.apply(this,arguments)}function d7(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,ip(t,o)}function ip(t,o){return ip=Object.setPrototypeOf||function(c,p){return c.__proto__=p,c},ip(t,o)}function Em(t,o){if(t==null)return{};var c,p,_={},x=Object.keys(t);for(p=0;p<x.length;p++)o.indexOf(c=x[p])>=0||(_[c]=t[c]);return _}var Jt={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title",FRAGMENT:"Symbol(react.fragment)"},ZS={rel:["amphtml","canonical","alternate"]},WS={type:["application/ld+json"]},qS={charset:"",name:["robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},Sm=Object.keys(Jt).map(function(t){return Jt[t]}),y5={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},HS=Object.keys(y5).reduce(function(t,o){return t[y5[o]]=o,t},{}),Uc=function(t,o){for(var c=t.length-1;c>=0;c-=1){var p=t[c];if(Object.prototype.hasOwnProperty.call(p,o))return p[o]}return null},XS=function(t){var o=Uc(t,Jt.TITLE),c=Uc(t,"titleTemplate");if(Array.isArray(o)&&(o=o.join("")),c&&o)return c.replace(/%s/g,function(){return o});var p=Uc(t,"defaultTitle");return o||p||void 0},KS=function(t){return Uc(t,"onChangeClientState")||function(){}},n6=function(t,o){return o.filter(function(c){return c[t]!==void 0}).map(function(c){return c[t]}).reduce(function(c,p){return br({},c,p)},{})},YS=function(t,o){return o.filter(function(c){return c[Jt.BASE]!==void 0}).map(function(c){return c[Jt.BASE]}).reverse().reduce(function(c,p){if(!c.length)for(var _=Object.keys(p),x=0;x<_.length;x+=1){var E=_[x].toLowerCase();if(t.indexOf(E)!==-1&&p[E])return c.concat(p)}return c},[])},G0=function(t,o,c){var p={};return c.filter(function(_){return!!Array.isArray(_[t])||(_[t]!==void 0&&console&&typeof console.warn=="function"&&console.warn("Helmet: "+t+' should be of type "Array". Instead found type "'+typeof _[t]+'"'),!1)}).map(function(_){return _[t]}).reverse().reduce(function(_,x){var E={};x.filter(function(U){for(var G,ce=Object.keys(U),ge=0;ge<ce.length;ge+=1){var xe=ce[ge],$e=xe.toLowerCase();o.indexOf($e)===-1||G==="rel"&&U[G].toLowerCase()==="canonical"||$e==="rel"&&U[$e].toLowerCase()==="stylesheet"||(G=$e),o.indexOf(xe)===-1||xe!=="innerHTML"&&xe!=="cssText"&&xe!=="itemprop"||(G=xe)}if(!G||!U[G])return!1;var ne=U[G].toLowerCase();return p[G]||(p[G]={}),E[G]||(E[G]={}),!p[G][ne]&&(E[G][ne]=!0,!0)}).reverse().forEach(function(U){return _.push(U)});for(var s=Object.keys(E),C=0;C<s.length;C+=1){var D=s[C],N=br({},p[D],E[D]);p[D]=N}return _},[]).reverse()},JS=function(t,o){if(Array.isArray(t)&&t.length){for(var c=0;c<t.length;c+=1)if(t[c][o])return!0}return!1},Py=function(t){return Array.isArray(t)?t.join(""):t},r6=function(t,o){return Array.isArray(t)?t.reduce(function(c,p){return function(_,x){for(var E=Object.keys(_),s=0;s<E.length;s+=1)if(x[E[s]]&&x[E[s]].includes(_[E[s]]))return!0;return!1}(p,o)?c.priority.push(p):c.default.push(p),c},{priority:[],default:[]}):{default:t}},Mm=function(t,o){var c;return br({},t,((c={})[o]=void 0,c))},QS=[Jt.NOSCRIPT,Jt.SCRIPT,Jt.STYLE],i6=function(t,o){return o===void 0&&(o=!0),o===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},Cm=function(t){return Object.keys(t).reduce(function(o,c){var p=t[c]!==void 0?c+'="'+t[c]+'"':""+c;return o?o+" "+p:p},"")},Pm=function(t,o){return o===void 0&&(o={}),Object.keys(t).reduce(function(c,p){return c[y5[p]||p]=t[p],c},o)},G3=function(t,o){return o.map(function(c,p){var _,x=((_={key:p})["data-rh"]=!0,_);return Object.keys(c).forEach(function(E){var s=y5[E]||E;s==="innerHTML"||s==="cssText"?x.dangerouslySetInnerHTML={__html:c.innerHTML||c.cssText}:x[s]=c[E]}),Xs.createElement(t,x)})},bo=function(t,o,c){switch(t){case Jt.TITLE:return{toComponent:function(){return _=o.titleAttributes,(x={key:p=o.title})["data-rh"]=!0,E=Pm(_,x),[Xs.createElement(Jt.TITLE,E,p)];var p,_,x,E},toString:function(){return function(p,_,x,E){var s=Cm(x),C=Py(_);return s?"<"+p+' data-rh="true" '+s+">"+i6(C,E)+"</"+p+">":"<"+p+' data-rh="true">'+i6(C,E)+"</"+p+">"}(t,o.title,o.titleAttributes,c)}};case"bodyAttributes":case"htmlAttributes":return{toComponent:function(){return Pm(o)},toString:function(){return Cm(o)}};default:return{toComponent:function(){return G3(t,o)},toString:function(){return function(p,_,x){return _.reduce(function(E,s){var C=Object.keys(s).filter(function(U){return!(U==="innerHTML"||U==="cssText")}).reduce(function(U,G){var ce=s[G]===void 0?G:G+'="'+i6(s[G],x)+'"';return U?U+" "+ce:ce},""),D=s.innerHTML||s.cssText||"",N=QS.indexOf(p)===-1;return E+"<"+p+' data-rh="true" '+C+(N?"/>":">"+D+"</"+p+">")},"")}(t,o,c)}}}},op=function(t){var o=t.baseTag,c=t.bodyAttributes,p=t.encode,_=t.htmlAttributes,x=t.noscriptTags,E=t.styleTags,s=t.title,C=s===void 0?"":s,D=t.titleAttributes,N=t.linkTags,U=t.metaTags,G=t.scriptTags,ce={toComponent:function(){},toString:function(){return""}};if(t.prioritizeSeoTags){var ge=function(xe){var $e=xe.linkTags,ne=xe.scriptTags,ee=xe.encode,oe=r6(xe.metaTags,qS),Te=r6($e,ZS),Oe=r6(ne,WS);return{priorityMethods:{toComponent:function(){return[].concat(G3(Jt.META,oe.priority),G3(Jt.LINK,Te.priority),G3(Jt.SCRIPT,Oe.priority))},toString:function(){return bo(Jt.META,oe.priority,ee)+" "+bo(Jt.LINK,Te.priority,ee)+" "+bo(Jt.SCRIPT,Oe.priority,ee)}},metaTags:oe.default,linkTags:Te.default,scriptTags:Oe.default}}(t);ce=ge.priorityMethods,N=ge.linkTags,U=ge.metaTags,G=ge.scriptTags}return{priority:ce,base:bo(Jt.BASE,o,p),bodyAttributes:bo("bodyAttributes",c,p),htmlAttributes:bo("htmlAttributes",_,p),link:bo(Jt.LINK,N,p),meta:bo(Jt.META,U,p),noscript:bo(Jt.NOSCRIPT,x,p),script:bo(Jt.SCRIPT,G,p),style:bo(Jt.STYLE,E,p),title:bo(Jt.TITLE,{title:C,titleAttributes:D},p)}},S3=[],sp=function(t,o){var c=this;o===void 0&&(o=typeof document<"u"),this.instances=[],this.value={setHelmet:function(p){c.context.helmet=p},helmetInstances:{get:function(){return c.canUseDOM?S3:c.instances},add:function(p){(c.canUseDOM?S3:c.instances).push(p)},remove:function(p){var _=(c.canUseDOM?S3:c.instances).indexOf(p);(c.canUseDOM?S3:c.instances).splice(_,1)}}},this.context=t,this.canUseDOM=o,o||(t.helmet=op({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))},Ay=Xs.createContext({}),eM=xn.shape({setHelmet:xn.func,helmetInstances:xn.shape({get:xn.func,add:xn.func,remove:xn.func})}),tM=typeof document<"u",K0=function(t){function o(c){var p;return(p=t.call(this,c)||this).helmetData=new sp(p.props.context,o.canUseDOM),p}return d7(o,t),o.prototype.render=function(){return Xs.createElement(Ay.Provider,{value:this.helmetData.value},this.props.children)},o}(Ne.Component);K0.canUseDOM=tM,K0.propTypes={context:xn.shape({helmet:xn.shape()}),children:xn.node.isRequired},K0.defaultProps={context:{}},K0.displayName="HelmetProvider";var fc=function(t,o){var c,p=document.head||document.querySelector(Jt.HEAD),_=p.querySelectorAll(t+"[data-rh]"),x=[].slice.call(_),E=[];return o&&o.length&&o.forEach(function(s){var C=document.createElement(t);for(var D in s)Object.prototype.hasOwnProperty.call(s,D)&&(D==="innerHTML"?C.innerHTML=s.innerHTML:D==="cssText"?C.styleSheet?C.styleSheet.cssText=s.cssText:C.appendChild(document.createTextNode(s.cssText)):C.setAttribute(D,s[D]===void 0?"":s[D]));C.setAttribute("data-rh","true"),x.some(function(N,U){return c=U,C.isEqualNode(N)})?x.splice(c,1):E.push(C)}),x.forEach(function(s){return s.parentNode.removeChild(s)}),E.forEach(function(s){return p.appendChild(s)}),{oldTags:x,newTags:E}},o6=function(t,o){var c=document.getElementsByTagName(t)[0];if(c){for(var p=c.getAttribute("data-rh"),_=p?p.split(","):[],x=[].concat(_),E=Object.keys(o),s=0;s<E.length;s+=1){var C=E[s],D=o[C]||"";c.getAttribute(C)!==D&&c.setAttribute(C,D),_.indexOf(C)===-1&&_.push(C);var N=x.indexOf(C);N!==-1&&x.splice(N,1)}for(var U=x.length-1;U>=0;U-=1)c.removeAttribute(x[U]);_.length===x.length?c.removeAttribute("data-rh"):c.getAttribute("data-rh")!==E.join(",")&&c.setAttribute("data-rh",E.join(","))}},Am=function(t,o){var c=t.baseTag,p=t.htmlAttributes,_=t.linkTags,x=t.metaTags,E=t.noscriptTags,s=t.onChangeClientState,C=t.scriptTags,D=t.styleTags,N=t.title,U=t.titleAttributes;o6(Jt.BODY,t.bodyAttributes),o6(Jt.HTML,p),function(xe,$e){xe!==void 0&&document.title!==xe&&(document.title=Py(xe)),o6(Jt.TITLE,$e)}(N,U);var G={baseTag:fc(Jt.BASE,c),linkTags:fc(Jt.LINK,_),metaTags:fc(Jt.META,x),noscriptTags:fc(Jt.NOSCRIPT,E),scriptTags:fc(Jt.SCRIPT,C),styleTags:fc(Jt.STYLE,D)},ce={},ge={};Object.keys(G).forEach(function(xe){var $e=G[xe],ne=$e.newTags,ee=$e.oldTags;ne.length&&(ce[xe]=ne),ee.length&&(ge[xe]=G[xe].oldTags)}),o&&o(),s(t,ce,ge)},$0=null,v5=function(t){function o(){for(var p,_=arguments.length,x=new Array(_),E=0;E<_;E++)x[E]=arguments[E];return(p=t.call.apply(t,[this].concat(x))||this).rendered=!1,p}d7(o,t);var c=o.prototype;return c.shouldComponentUpdate=function(p){return!$S(p,this.props)},c.componentDidUpdate=function(){this.emitChange()},c.componentWillUnmount=function(){this.props.context.helmetInstances.remove(this),this.emitChange()},c.emitChange=function(){var p,_,x=this.props.context,E=x.setHelmet,s=null,C=(p=x.helmetInstances.get().map(function(D){var N=br({},D.props);return delete N.context,N}),{baseTag:YS(["href"],p),bodyAttributes:n6("bodyAttributes",p),defer:Uc(p,"defer"),encode:Uc(p,"encodeSpecialCharacters"),htmlAttributes:n6("htmlAttributes",p),linkTags:G0(Jt.LINK,["rel","href"],p),metaTags:G0(Jt.META,["name","charset","http-equiv","property","itemprop"],p),noscriptTags:G0(Jt.NOSCRIPT,["innerHTML"],p),onChangeClientState:KS(p),scriptTags:G0(Jt.SCRIPT,["src","innerHTML"],p),styleTags:G0(Jt.STYLE,["cssText"],p),title:XS(p),titleAttributes:n6("titleAttributes",p),prioritizeSeoTags:JS(p,"prioritizeSeoTags")});K0.canUseDOM?(_=C,$0&&cancelAnimationFrame($0),_.defer?$0=requestAnimationFrame(function(){Am(_,function(){$0=null})}):(Am(_),$0=null)):op&&(s=op(C)),E(s)},c.init=function(){this.rendered||(this.rendered=!0,this.props.context.helmetInstances.add(this),this.emitChange())},c.render=function(){return this.init(),null},o}(Ne.Component);v5.propTypes={context:eM.isRequired},v5.displayName="HelmetDispatcher";var nM=["children"],rM=["children"],s6=function(t){function o(){return t.apply(this,arguments)||this}d7(o,t);var c=o.prototype;return c.shouldComponentUpdate=function(p){return!NS(Mm(this.props,"helmetData"),Mm(p,"helmetData"))},c.mapNestedChildrenToProps=function(p,_){if(!_)return null;switch(p.type){case Jt.SCRIPT:case Jt.NOSCRIPT:return{innerHTML:_};case Jt.STYLE:return{cssText:_};default:throw new Error("<"+p.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")}},c.flattenArrayTypeChildren=function(p){var _,x=p.child,E=p.arrayTypeChildren;return br({},E,((_={})[x.type]=[].concat(E[x.type]||[],[br({},p.newChildProps,this.mapNestedChildrenToProps(x,p.nestedChildren))]),_))},c.mapObjectTypeChildren=function(p){var _,x,E=p.child,s=p.newProps,C=p.newChildProps,D=p.nestedChildren;switch(E.type){case Jt.TITLE:return br({},s,((_={})[E.type]=D,_.titleAttributes=br({},C),_));case Jt.BODY:return br({},s,{bodyAttributes:br({},C)});case Jt.HTML:return br({},s,{htmlAttributes:br({},C)});default:return br({},s,((x={})[E.type]=br({},C),x))}},c.mapArrayTypeChildrenToProps=function(p,_){var x=br({},_);return Object.keys(p).forEach(function(E){var s;x=br({},x,((s={})[E]=p[E],s))}),x},c.warnOnInvalidChildren=function(p,_){return Tm(Sm.some(function(x){return p.type===x}),typeof p.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":"Only elements types "+Sm.join(", ")+" are allowed. Helmet does not support rendering <"+p.type+"> elements. Refer to our API for more information."),Tm(!_||typeof _=="string"||Array.isArray(_)&&!_.some(function(x){return typeof x!="string"}),"Helmet expects a string as a child of <"+p.type+">. Did you forget to wrap your children in braces? ( <"+p.type+">{``}</"+p.type+"> ) Refer to our API for more information."),!0},c.mapChildrenToProps=function(p,_){var x=this,E={};return Xs.Children.forEach(p,function(s){if(s&&s.props){var C=s.props,D=C.children,N=Em(C,nM),U=Object.keys(N).reduce(function(ce,ge){return ce[HS[ge]||ge]=N[ge],ce},{}),G=s.type;switch(typeof G=="symbol"?G=G.toString():x.warnOnInvalidChildren(s,D),G){case Jt.FRAGMENT:_=x.mapChildrenToProps(D,_);break;case Jt.LINK:case Jt.META:case Jt.NOSCRIPT:case Jt.SCRIPT:case Jt.STYLE:E=x.flattenArrayTypeChildren({child:s,arrayTypeChildren:E,newChildProps:U,nestedChildren:D});break;default:_=x.mapObjectTypeChildren({child:s,newProps:_,newChildProps:U,nestedChildren:D})}}}),this.mapArrayTypeChildrenToProps(E,_)},c.render=function(){var p=this.props,_=p.children,x=Em(p,rM),E=br({},x),s=x.helmetData;return _&&(E=this.mapChildrenToProps(_,E)),!s||s instanceof sp||(s=new sp(s.context,s.instances)),s?Xs.createElement(v5,br({},E,{context:s.value,helmetData:void 0})):Xs.createElement(Ay.Consumer,null,function(C){return Xs.createElement(v5,br({},E,{context:C}))})},o}(Ne.Component);s6.propTypes={base:xn.object,bodyAttributes:xn.object,children:xn.oneOfType([xn.arrayOf(xn.node),xn.node]),defaultTitle:xn.string,defer:xn.bool,encodeSpecialCharacters:xn.bool,htmlAttributes:xn.object,link:xn.arrayOf(xn.object),meta:xn.arrayOf(xn.object),noscript:xn.arrayOf(xn.object),onChangeClientState:xn.func,script:xn.arrayOf(xn.object),style:xn.arrayOf(xn.object),title:xn.string,titleAttributes:xn.object,titleTemplate:xn.string,prioritizeSeoTags:xn.bool,helmetData:xn.object},s6.defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1},s6.displayName="Helmet";var Iy={exports:{}};(function(t){var o={};function c(x){return Math.floor(Math.abs(x)+.5)*(x>=0?1:-1)}function p(x,E,s){x=c(x*s),E=c(E*s);var C=(x-E)*2;C<0&&(C=-C-1);for(var D="";C>=32;)D+=String.fromCharCode((32|C&31)+63),C/=32;return D+=String.fromCharCode((C|0)+63),D}o.decode=function(x,E){for(var s=0,C=0,D=0,N=[],U=0,G=0,ce=null,ge,xe,$e=Math.pow(10,Number.isInteger(E)?E:5);s<x.length;){ce=null,U=1,G=0;do ce=x.charCodeAt(s++)-63,G+=(ce&31)*U,U*=32;while(ce>=32);ge=G&1?(-G-1)/2:G/2,U=1,G=0;do ce=x.charCodeAt(s++)-63,G+=(ce&31)*U,U*=32;while(ce>=32);xe=G&1?(-G-1)/2:G/2,C+=ge,D+=xe,N.push([C/$e,D/$e])}return N},o.encode=function(x,E){if(!x.length)return"";for(var s=Math.pow(10,Number.isInteger(E)?E:5),C=p(x[0][0],0,s)+p(x[0][1],0,s),D=1;D<x.length;D++){var N=x[D],U=x[D-1];C+=p(N[0],U[0],s),C+=p(N[1],U[1],s)}return C};function _(x){for(var E=[],s=0;s<x.length;s++){var C=x[s].slice();E.push([C[1],C[0]])}return E}o.fromGeoJSON=function(x,E){if(x&&x.type==="Feature"&&(x=x.geometry),!x||x.type!=="LineString")throw new Error("Input must be a GeoJSON LineString");return o.encode(_(x.coordinates),E)},o.toGeoJSON=function(x,E){var s=o.decode(x,E);return{type:"LineString",coordinates:_(s)}},t.exports&&(t.exports=o)})(Iy);var NC=Iy.exports;/* @preserve
 * gcoord 0.3.2, geographic coordinate library
 * Copyright (c) 2021 Jiulong Hu <me@hujiulong.com>
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var x5=function(){return x5=Object.assign||function(o){for(var c,p=1,_=arguments.length;p<_;p++){c=arguments[p];for(var x in c)Object.prototype.hasOwnProperty.call(c,x)&&(o[x]=c[x])}return o},x5.apply(this,arguments)},eo=Math.sin,iM=Math.cos,p7=Math.sqrt,w5=Math.abs,vi=Math.PI,Im=6378245,km=.006693421622965823;function ky(t,o){return t>=72.004&&t<=137.8347&&o>=.8293&&o<=55.8271}function oM(t,o){var c=-100+2*t+3*o+.2*o*o+.1*t*o+.2*p7(w5(t));return c+=(20*eo(6*t*vi)+20*eo(2*t*vi))*2/3,c+=(20*eo(o*vi)+40*eo(o/3*vi))*2/3,c+=(160*eo(o/12*vi)+320*eo(o*vi/30))*2/3,c}function sM(t,o){var c=300+t+2*o+.1*t*t+.1*t*o+.1*p7(w5(t));return c+=(20*eo(6*t*vi)+20*eo(2*t*vi))*2/3,c+=(20*eo(t*vi)+40*eo(t/3*vi))*2/3,c+=(150*eo(t/12*vi)+300*eo(t/30*vi))*2/3,c}function aM(t,o){var c=sM(t-105,o-35),p=oM(t-105,o-35),_=o/180*vi,x=eo(_);x=1-km*x*x;var E=p7(x);return c=c*180/(Im/E*iM(_)*vi),p=p*180/(Im*(1-km)/(x*E)*vi),[c,p]}function tl(t){var o=t[0],c=t[1];if(!ky(o,c))return[o,c];var p=aM(o,c);return[o+p[0],c+p[1]]}function Kc(t){var o=t[0],c=t[1];if(!ky(o,c))return[o,c];for(var p=[o,c],_=p[0],x=p[1],E=tl([_,x]),s=E[0]-o,C=E[1]-c;w5(s)>1e-6||w5(C)>1e-6;)_-=s,x-=C,E=tl([_,x]),s=E[0]-o,C=E[1]-c;return[_,x]}var b5=Math.sin,T5=Math.cos,Ly=Math.atan2,zy=Math.sqrt,lM=Math.PI,E5=lM*3e3/180;function Nc(t){var o=t[0],c=t[1],p=o-.0065,_=c-.006,x=zy(p*p+_*_)-2e-5*b5(_*E5),E=Ly(_,p)-3e-6*T5(p*E5),s=x*T5(E),C=x*b5(E);return[s,C]}function Yc(t){var o=t[0],c=t[1],p=o,_=c,x=zy(p*p+_*_)+2e-5*b5(_*E5),E=Ly(_,p)+3e-6*T5(p*E5),s=x*T5(E)+.0065,C=x*b5(E)+.006;return[s,C]}var Lm=180/Math.PI,zm=Math.PI/180,S5=6378137,Ba=20037508342789244e-9;function M3(t){return[t[0]*Lm/S5,(Math.PI*.5-2*Math.atan(Math.exp(-t[1]/S5)))*Lm]}function q5(t){var o=Math.abs(t[0])<=180?t[0]:t[0]-(t[0]<0?-1:1)*360,c=[S5*o*zm,S5*Math.log(Math.tan(Math.PI*.25+.5*t[1]*zm))];return c[0]>Ba&&(c[0]=Ba),c[0]<-Ba&&(c[0]=-Ba),c[1]>Ba&&(c[1]=Ba),c[1]<-Ba&&(c[1]=-Ba),c}var ap=Math.abs,Dm=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],Rm=[75,60,45,30,15,0],cM=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],uM=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];function Dy(t,o,c){var p=ap(o)/c[9],_=c[0]+c[1]*ap(t),x=c[2]+c[3]*p+c[4]*Math.pow(p,2)+c[5]*Math.pow(p,3)+c[6]*Math.pow(p,4)+c[7]*Math.pow(p,5)+c[8]*Math.pow(p,6);return _*=t<0?-1:1,x*=o<0?-1:1,[_,x]}function H5(t){for(var o=t[0],c=t[1],p=[],_=0;_<Rm.length;_++)if(ap(c)>Rm[_]){p=uM[_];break}return Dy(o,c,p)}function C3(t){for(var o=t[0],c=t[1],p=[],_=0;_<Dm.length;_++)if(c>=Dm[_]){p=cM[_];break}return Dy(o,c,p)}function Oa(t,o){if(!t)throw new Error(o)}function Ry(t){return!!t&&Object.prototype.toString.call(t)==="[object Array]"}function Fm(t){return!isNaN(Number(t))&&t!==null&&!Ry(t)}function Co(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var c=t.length-1;return function(){for(var p=[],_=0;_<arguments.length;_++)p[_]=arguments[_];for(var x=c,E=t[c].apply(null,p);x--;)E=t[x].call(null,E);return E}}function Fy(t,o,c){if(c===void 0&&(c=!1),t!==null)for(var p,_,x,E,s,C,D,N=0,U=0,G,ce=t.type,ge=ce==="FeatureCollection",xe=ce==="Feature",$e=ge?t.features.length:1,ne=0;ne<$e;ne++){D=ge?t.features[ne].geometry:xe?t.geometry:t,G=D?D.type==="GeometryCollection":!1,s=G?D.geometries.length:1;for(var ee=0;ee<s;ee++){var oe=0,Te=0;if(E=G?D.geometries[ee]:D,E!==null){var Oe=E.type;switch(N=c&&(Oe==="Polygon"||Oe==="MultiPolygon")?1:0,Oe){case null:break;case"Point":if(C=E.coordinates,o(C,U,ne,oe,Te)===!1)return!1;U++,oe++;break;case"LineString":case"MultiPoint":for(C=E.coordinates,p=0;p<C.length;p++){if(o(C[p],U,ne,oe,Te)===!1)return!1;U++,Oe==="MultiPoint"&&oe++}Oe==="LineString"&&oe++;break;case"Polygon":case"MultiLineString":for(C=E.coordinates,p=0;p<C.length;p++){for(_=0;_<C[p].length-N;_++){if(o(C[p][_],U,ne,oe,Te)===!1)return!1;U++}Oe==="MultiLineString"&&oe++,Oe==="Polygon"&&Te++}Oe==="Polygon"&&oe++;break;case"MultiPolygon":for(C=E.coordinates,p=0;p<C.length;p++){for(Te=0,_=0;_<C[p].length;_++){for(x=0;x<C[p][_].length-N;x++){if(o(C[p][_][x],U,ne,oe,Te)===!1)return!1;U++}Te++}oe++}break;case"GeometryCollection":for(p=0;p<E.geometries.length;p++)if(Fy(E.geometries[p],o,c)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var mc,_c,gc,yc,vc,sr;(function(t){t.WGS84="WGS84",t.WGS1984="WGS84",t.EPSG4326="WGS84",t.GCJ02="GCJ02",t.AMap="GCJ02",t.BD09="BD09",t.BD09LL="BD09",t.Baidu="BD09",t.BMap="BD09",t.BD09MC="BD09MC",t.BD09Meter="BD09MC",t.EPSG3857="EPSG3857",t.EPSG900913="EPSG3857",t.EPSG102100="EPSG3857",t.WebMercator="EPSG3857",t.WM="EPSG3857"})(sr||(sr={}));var hM={to:(mc={},mc[sr.GCJ02]=tl,mc[sr.BD09]=Co(Yc,tl),mc[sr.BD09MC]=Co(H5,Yc,tl),mc[sr.EPSG3857]=q5,mc)},dM={to:(_c={},_c[sr.WGS84]=Kc,_c[sr.BD09]=Yc,_c[sr.BD09MC]=Co(H5,Yc),_c[sr.EPSG3857]=Co(q5,Kc),_c)},pM={to:(gc={},gc[sr.WGS84]=Co(Kc,Nc),gc[sr.GCJ02]=Nc,gc[sr.EPSG3857]=Co(q5,Kc,Nc),gc[sr.BD09MC]=H5,gc)},fM={to:(yc={},yc[sr.WGS84]=M3,yc[sr.GCJ02]=Co(tl,M3),yc[sr.BD09]=Co(Yc,tl,M3),yc[sr.BD09MC]=Co(H5,Yc,tl,M3),yc)},mM={to:(vc={},vc[sr.WGS84]=Co(Kc,Nc,C3),vc[sr.GCJ02]=Co(Nc,C3),vc[sr.EPSG3857]=Co(q5,Kc,Nc,C3),vc[sr.BD09]=C3,vc)},_M={WGS84:hM,GCJ02:dM,BD09:pM,EPSG3857:fM,BD09MC:mM};function gM(t,o,c){if(Oa(!!t,"The args[0] input coordinate is required"),Oa(!!o,"The args[1] original coordinate system is required"),Oa(!!c,"The args[2] target coordinate system is required"),o===c)return t;var p=_M[o];Oa(!!p,"Invalid original coordinate system: "+o);var _=p.to[c];Oa(!!_,"Invalid target coordinate system: "+c);var x=typeof t;if(Oa(x==="string"||x==="object","Invalid input coordinate type: "+x),x==="string")try{t=JSON.parse(t)}catch{throw new Error("Invalid input coordinate: "+t)}var E=!1;Ry(t)&&(Oa(t.length>=2,"Invalid input coordinate: "+t),Oa(Fm(t[0])&&Fm(t[1]),"Invalid input coordinate: "+t),t=t.map(Number),E=!0);var s=_;return E?s(t):(Fy(t,function(C){var D;D=s(C),C[0]=D[0],C[1]=D[1]}),t)}var yM=x5(x5({},sr),{CRSTypes:sr,transform:gM});const jC=yM;function P2(t){"@babel/helpers - typeof";return P2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},P2(t)}function vM(t,o){if(P2(t)!="object"||!t)return t;var c=t[Symbol.toPrimitive];if(c!==void 0){var p=c.call(t,o||"default");if(P2(p)!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(t)}function xM(t){var o=vM(t,"string");return P2(o)=="symbol"?o:o+""}function fr(t,o,c){return(o=xM(o))in t?Object.defineProperty(t,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[o]=c,t}var hi=1e-6,Jc=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,o=arguments.length;o--;)t+=arguments[o]*arguments[o];return Math.sqrt(t)});function wM(){var t=new Jc(4);return Jc!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function bM(t,o,c){return t[0]=o[0]*c,t[1]=o[1]*c,t[2]=o[2]*c,t[3]=o[3]*c,t}function TM(t,o,c){var p=o[0],_=o[1],x=o[2],E=o[3];return t[0]=c[0]*p+c[4]*_+c[8]*x+c[12]*E,t[1]=c[1]*p+c[5]*_+c[9]*x+c[13]*E,t[2]=c[2]*p+c[6]*_+c[10]*x+c[14]*E,t[3]=c[3]*p+c[7]*_+c[11]*x+c[15]*E,t}(function(){var t=wM();return function(o,c,p,_,x,E){var s,C;for(c||(c=4),p||(p=0),_?C=Math.min(_*c+p,o.length):C=o.length,s=p;s<C;s+=c)t[0]=o[s],t[1]=o[s+1],t[2]=o[s+2],t[3]=o[s+3],x(t,t,E),o[s]=t[0],o[s+1]=t[1],o[s+2]=t[2],o[s+3]=t[3];return o}})();function $3(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function jc(t,o){const c=TM([],o,t);return bM(c,c,1/c[3]),c}function lp(t,o,c){return t<o?o:t>c?c:t}function EM(t){return Math.log(t)*Math.LOG2E}const SM=Math.log2||EM;function MM(t,o){var c=o[0],p=o[1],_=o[2],x=o[3],E=o[4],s=o[5],C=o[6],D=o[7],N=o[8],U=o[9],G=o[10],ce=o[11],ge=o[12],xe=o[13],$e=o[14],ne=o[15],ee=c*s-p*E,oe=c*C-_*E,Te=c*D-x*E,Oe=p*C-_*s,rt=p*D-x*s,we=_*D-x*C,Ye=N*xe-U*ge,ze=N*$e-G*ge,gt=N*ne-ce*ge,Qt=U*$e-G*xe,St=U*ne-ce*xe,$t=G*ne-ce*$e,He=ee*$t-oe*St+Te*Qt+Oe*gt-rt*ze+we*Ye;return He?(He=1/He,t[0]=(s*$t-C*St+D*Qt)*He,t[1]=(_*St-p*$t-x*Qt)*He,t[2]=(xe*we-$e*rt+ne*Oe)*He,t[3]=(G*rt-U*we-ce*Oe)*He,t[4]=(C*gt-E*$t-D*ze)*He,t[5]=(c*$t-_*gt+x*ze)*He,t[6]=($e*Te-ge*we-ne*oe)*He,t[7]=(N*we-G*Te+ce*oe)*He,t[8]=(E*St-s*gt+D*Ye)*He,t[9]=(p*gt-c*St-x*Ye)*He,t[10]=(ge*rt-xe*Te+ne*ee)*He,t[11]=(U*Te-N*rt-ce*ee)*He,t[12]=(s*ze-E*Qt-C*Ye)*He,t[13]=(c*Qt-p*ze+_*Ye)*He,t[14]=(xe*oe-ge*Oe-$e*ee)*He,t[15]=(N*Oe-U*oe+G*ee)*He,t):null}function a6(t,o,c){var p=o[0],_=o[1],x=o[2],E=o[3],s=o[4],C=o[5],D=o[6],N=o[7],U=o[8],G=o[9],ce=o[10],ge=o[11],xe=o[12],$e=o[13],ne=o[14],ee=o[15],oe=c[0],Te=c[1],Oe=c[2],rt=c[3];return t[0]=oe*p+Te*s+Oe*U+rt*xe,t[1]=oe*_+Te*C+Oe*G+rt*$e,t[2]=oe*x+Te*D+Oe*ce+rt*ne,t[3]=oe*E+Te*N+Oe*ge+rt*ee,oe=c[4],Te=c[5],Oe=c[6],rt=c[7],t[4]=oe*p+Te*s+Oe*U+rt*xe,t[5]=oe*_+Te*C+Oe*G+rt*$e,t[6]=oe*x+Te*D+Oe*ce+rt*ne,t[7]=oe*E+Te*N+Oe*ge+rt*ee,oe=c[8],Te=c[9],Oe=c[10],rt=c[11],t[8]=oe*p+Te*s+Oe*U+rt*xe,t[9]=oe*_+Te*C+Oe*G+rt*$e,t[10]=oe*x+Te*D+Oe*ce+rt*ne,t[11]=oe*E+Te*N+Oe*ge+rt*ee,oe=c[12],Te=c[13],Oe=c[14],rt=c[15],t[12]=oe*p+Te*s+Oe*U+rt*xe,t[13]=oe*_+Te*C+Oe*G+rt*$e,t[14]=oe*x+Te*D+Oe*ce+rt*ne,t[15]=oe*E+Te*N+Oe*ge+rt*ee,t}function cp(t,o,c){var p=c[0],_=c[1],x=c[2],E,s,C,D,N,U,G,ce,ge,xe,$e,ne;return o===t?(t[12]=o[0]*p+o[4]*_+o[8]*x+o[12],t[13]=o[1]*p+o[5]*_+o[9]*x+o[13],t[14]=o[2]*p+o[6]*_+o[10]*x+o[14],t[15]=o[3]*p+o[7]*_+o[11]*x+o[15]):(E=o[0],s=o[1],C=o[2],D=o[3],N=o[4],U=o[5],G=o[6],ce=o[7],ge=o[8],xe=o[9],$e=o[10],ne=o[11],t[0]=E,t[1]=s,t[2]=C,t[3]=D,t[4]=N,t[5]=U,t[6]=G,t[7]=ce,t[8]=ge,t[9]=xe,t[10]=$e,t[11]=ne,t[12]=E*p+N*_+ge*x+o[12],t[13]=s*p+U*_+xe*x+o[13],t[14]=C*p+G*_+$e*x+o[14],t[15]=D*p+ce*_+ne*x+o[15]),t}function By(t,o,c){var p=c[0],_=c[1],x=c[2];return t[0]=o[0]*p,t[1]=o[1]*p,t[2]=o[2]*p,t[3]=o[3]*p,t[4]=o[4]*_,t[5]=o[5]*_,t[6]=o[6]*_,t[7]=o[7]*_,t[8]=o[8]*x,t[9]=o[9]*x,t[10]=o[10]*x,t[11]=o[11]*x,t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15],t}function CM(t,o,c){var p=Math.sin(c),_=Math.cos(c),x=o[4],E=o[5],s=o[6],C=o[7],D=o[8],N=o[9],U=o[10],G=o[11];return o!==t&&(t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15]),t[4]=x*_+D*p,t[5]=E*_+N*p,t[6]=s*_+U*p,t[7]=C*_+G*p,t[8]=D*_-x*p,t[9]=N*_-E*p,t[10]=U*_-s*p,t[11]=G*_-C*p,t}function PM(t,o,c){var p=Math.sin(c),_=Math.cos(c),x=o[0],E=o[1],s=o[2],C=o[3],D=o[4],N=o[5],U=o[6],G=o[7];return o!==t&&(t[8]=o[8],t[9]=o[9],t[10]=o[10],t[11]=o[11],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15]),t[0]=x*_+D*p,t[1]=E*_+N*p,t[2]=s*_+U*p,t[3]=C*_+G*p,t[4]=D*_-x*p,t[5]=N*_-E*p,t[6]=U*_-s*p,t[7]=G*_-C*p,t}function AM(t,o,c,p,_){var x=1/Math.tan(o/2),E;return t[0]=x/c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=x,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,_!=null&&_!==1/0?(E=1/(p-_),t[10]=(_+p)*E,t[14]=2*_*p*E):(t[10]=-1,t[14]=-2*p),t}var IM=AM;function Bm(t,o){var c=t[0],p=t[1],_=t[2],x=t[3],E=t[4],s=t[5],C=t[6],D=t[7],N=t[8],U=t[9],G=t[10],ce=t[11],ge=t[12],xe=t[13],$e=t[14],ne=t[15],ee=o[0],oe=o[1],Te=o[2],Oe=o[3],rt=o[4],we=o[5],Ye=o[6],ze=o[7],gt=o[8],Qt=o[9],St=o[10],$t=o[11],He=o[12],Ve=o[13],Je=o[14],it=o[15];return Math.abs(c-ee)<=hi*Math.max(1,Math.abs(c),Math.abs(ee))&&Math.abs(p-oe)<=hi*Math.max(1,Math.abs(p),Math.abs(oe))&&Math.abs(_-Te)<=hi*Math.max(1,Math.abs(_),Math.abs(Te))&&Math.abs(x-Oe)<=hi*Math.max(1,Math.abs(x),Math.abs(Oe))&&Math.abs(E-rt)<=hi*Math.max(1,Math.abs(E),Math.abs(rt))&&Math.abs(s-we)<=hi*Math.max(1,Math.abs(s),Math.abs(we))&&Math.abs(C-Ye)<=hi*Math.max(1,Math.abs(C),Math.abs(Ye))&&Math.abs(D-ze)<=hi*Math.max(1,Math.abs(D),Math.abs(ze))&&Math.abs(N-gt)<=hi*Math.max(1,Math.abs(N),Math.abs(gt))&&Math.abs(U-Qt)<=hi*Math.max(1,Math.abs(U),Math.abs(Qt))&&Math.abs(G-St)<=hi*Math.max(1,Math.abs(G),Math.abs(St))&&Math.abs(ce-$t)<=hi*Math.max(1,Math.abs(ce),Math.abs($t))&&Math.abs(ge-He)<=hi*Math.max(1,Math.abs(ge),Math.abs(He))&&Math.abs(xe-Ve)<=hi*Math.max(1,Math.abs(xe),Math.abs(Ve))&&Math.abs($e-Je)<=hi*Math.max(1,Math.abs($e),Math.abs(Je))&&Math.abs(ne-it)<=hi*Math.max(1,Math.abs(ne),Math.abs(it))}function kM(){var t=new Jc(2);return Jc!=Float32Array&&(t[0]=0,t[1]=0),t}function Om(t,o,c){return t[0]=o[0]+c[0],t[1]=o[1]+c[1],t}function LM(t,o){return t[0]=-o[0],t[1]=-o[1],t}function Oy(t,o,c,p){var _=o[0],x=o[1];return t[0]=_+p*(c[0]-_),t[1]=x+p*(c[1]-x),t}(function(){var t=kM();return function(o,c,p,_,x,E){var s,C;for(c||(c=2),p||(p=0),_?C=Math.min(_*c+p,o.length):C=o.length,s=p;s<C;s+=c)t[0]=o[s],t[1]=o[s+1],x(t,t,E),o[s]=t[0],o[s+1]=t[1];return o}})();function zM(){var t=new Jc(3);return Jc!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function DM(t,o,c){return t[0]=o[0]+c[0],t[1]=o[1]+c[1],t[2]=o[2]+c[2],t}function RM(t,o,c){return t[0]=o[0]*c[0],t[1]=o[1]*c[1],t[2]=o[2]*c[2],t}function FM(t,o){return t[0]=-o[0],t[1]=-o[1],t[2]=-o[2],t}var BM=RM;(function(){var t=zM();return function(o,c,p,_,x,E){var s,C;for(c||(c=3),p||(p=0),_?C=Math.min(_*c+p,o.length):C=o.length,s=p;s<C;s+=c)t[0]=o[s],t[1]=o[s+1],t[2]=o[s+2],x(t,t,E),o[s]=t[0],o[s+1]=t[1],o[s+2]=t[2];return o}})();function il(t,o){if(!t)throw new Error(o||"@math.gl/web-mercator: assertion failed.")}const Qo=Math.PI,Uy=Qo/4,Es=Qo/180,up=180/Qo,A2=512,Um=4003e4,P3=85.051129,Ny=1.5;function OM(t){return Math.pow(2,t)}function Lc(t){const[o,c]=t;il(Number.isFinite(o)),il(Number.isFinite(c)&&c>=-90&&c<=90,"invalid latitude");const p=o*Es,_=c*Es,x=A2*(p+Qo)/(2*Qo),E=A2*(Qo+Math.log(Math.tan(Uy+_*.5)))/(2*Qo);return[x,E]}function s2(t){const[o,c]=t,p=o/A2*(2*Qo)-Qo,_=2*(Math.atan(Math.exp(c/A2*(2*Qo)-Qo))-Uy);return[p*up,_*up]}function UM(t){const{latitude:o,longitude:c,highPrecision:p=!1}=t;il(Number.isFinite(o)&&Number.isFinite(c));const _=A2,x=Math.cos(o*Es),E=_/360,s=E/x,C=_/Um/x,D={unitsPerMeter:[C,C,C],metersPerUnit:[1/C,1/C,1/C],unitsPerDegree:[E,s,C],degreesPerUnit:[1/E,1/s,1/C]};if(p){const N=Es*Math.tan(o*Es)/x,U=E*N/2,G=_/Um*N,ce=G/s*C;D.unitsPerDegree2=[0,U,G],D.unitsPerMeter2=[ce,0,ce]}return D}function NM(t){const{height:o,pitch:c,bearing:p,altitude:_,scale:x,center:E}=t,s=$3();cp(s,s,[0,0,-_]),CM(s,s,-c*Es),PM(s,s,p*Es);const C=x/o;return By(s,s,[C,C,C]),E&&cp(s,s,FM([],E)),s}function jM(t){const{width:o,height:c,altitude:p,pitch:_=0,offset:x,center:E,scale:s,nearZMultiplier:C=1,farZMultiplier:D=1}=t;let{fovy:N=M5(Ny)}=t;p!==void 0&&(N=M5(p));const U=N*Es,G=_*Es,ce=jy(N);let ge=ce;E&&(ge+=E[2]*s/Math.cos(G)/c);const xe=U*(.5+(x?x[1]:0)/c),$e=Math.sin(xe)*ge/Math.sin(lp(Math.PI/2-G-xe,.01,Math.PI-.01)),ne=Math.sin(G)*$e+ge,ee=ge*10,oe=Math.min(ne*D,ee);return{fov:U,aspect:o/c,focalDistance:ce,near:C,far:oe}}function VM(t){const{fov:o,aspect:c,near:p,far:_}=jM(t);return IM([],o,c,p,_)}function M5(t){return 2*Math.atan(.5/t)*up}function jy(t){return .5/Math.tan(.5*t*Es)}function GM(t,o){const[c,p,_=0]=t;return il(Number.isFinite(c)&&Number.isFinite(p)&&Number.isFinite(_)),jc(o,[c,p,_,1])}function Nm(t,o,c=0){const[p,_,x]=t;if(il(Number.isFinite(p)&&Number.isFinite(_),"invalid pixel coordinate"),Number.isFinite(x))return jc(o,[p,_,x,1]);const E=jc(o,[p,_,0,1]),s=jc(o,[p,_,1,1]),C=E[2],D=s[2],N=C===D?0:((c||0)-C)/(D-C);return Oy([],E,s,N)}function $M(t){const{width:o,height:c,bounds:p,minExtent:_=0,maxZoom:x=24,offset:E=[0,0]}=t,[[s,C],[D,N]]=p,U=ZM(t.padding),G=Lc([s,lp(N,-P3,P3)]),ce=Lc([D,lp(C,-P3,P3)]),ge=[Math.max(Math.abs(ce[0]-G[0]),_),Math.max(Math.abs(ce[1]-G[1]),_)],xe=[o-U.left-U.right-Math.abs(E[0])*2,c-U.top-U.bottom-Math.abs(E[1])*2];il(xe[0]>0&&xe[1]>0);const $e=xe[0]/ge[0],ne=xe[1]/ge[1],ee=(U.right-U.left)/2/$e,oe=(U.top-U.bottom)/2/ne,Te=[(ce[0]+G[0])/2+ee,(ce[1]+G[1])/2+oe],Oe=s2(Te),rt=Math.min(x,SM(Math.abs(Math.min($e,ne))));return il(Number.isFinite(rt)),{longitude:Oe[0],latitude:Oe[1],zoom:rt}}function ZM(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(il(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const jm=Math.PI/180;function WM(t,o=0){const{width:c,height:p,unproject:_}=t,x={targetZ:o},E=_([0,p],x),s=_([c,p],x);let C,D;const N=t.fovy?.5*t.fovy*jm:Math.atan(.5/t.altitude),U=(90-t.pitch)*jm;return N>U-.01?(C=Vm(t,0,o),D=Vm(t,c,o)):(C=_([0,0],x),D=_([c,0],x)),[E,s,D,C]}function Vm(t,o,c){const{pixelUnprojectionMatrix:p}=t,_=jc(p,[o,0,1,1]),x=jc(p,[o,t.height,1,1]),s=(c*t.distanceScales.unitsPerMeter[2]-_[2])/(x[2]-_[2]),C=Oy([],_,x,s),D=s2(C);return D.push(c),D}class hp{constructor(o={width:1,height:1}){fr(this,"latitude",void 0),fr(this,"longitude",void 0),fr(this,"zoom",void 0),fr(this,"pitch",void 0),fr(this,"bearing",void 0),fr(this,"altitude",void 0),fr(this,"fovy",void 0),fr(this,"meterOffset",void 0),fr(this,"center",void 0),fr(this,"width",void 0),fr(this,"height",void 0),fr(this,"scale",void 0),fr(this,"distanceScales",void 0),fr(this,"viewMatrix",void 0),fr(this,"projectionMatrix",void 0),fr(this,"viewProjectionMatrix",void 0),fr(this,"pixelProjectionMatrix",void 0),fr(this,"pixelUnprojectionMatrix",void 0),fr(this,"equals",ne=>ne instanceof hp?ne.width===this.width&&ne.height===this.height&&Bm(ne.projectionMatrix,this.projectionMatrix)&&Bm(ne.viewMatrix,this.viewMatrix):!1),fr(this,"project",(ne,ee={})=>{const{topLeft:oe=!0}=ee,Te=this.projectPosition(ne),Oe=GM(Te,this.pixelProjectionMatrix),[rt,we]=Oe,Ye=oe?we:this.height-we;return ne.length===2?[rt,Ye]:[rt,Ye,Oe[2]]}),fr(this,"unproject",(ne,ee={})=>{const{topLeft:oe=!0,targetZ:Te=void 0}=ee,[Oe,rt,we]=ne,Ye=oe?rt:this.height-rt,ze=Te&&Te*this.distanceScales.unitsPerMeter[2],gt=Nm([Oe,Ye,we],this.pixelUnprojectionMatrix,ze),[Qt,St,$t]=this.unprojectPosition(gt);return Number.isFinite(we)?[Qt,St,$t]:Number.isFinite(Te)?[Qt,St,Te]:[Qt,St]}),fr(this,"projectPosition",ne=>{const[ee,oe]=Lc(ne),Te=(ne[2]||0)*this.distanceScales.unitsPerMeter[2];return[ee,oe,Te]}),fr(this,"unprojectPosition",ne=>{const[ee,oe]=s2(ne),Te=(ne[2]||0)*this.distanceScales.metersPerUnit[2];return[ee,oe,Te]});let{width:c,height:p,altitude:_=null,fovy:x=null}=o;const{latitude:E=0,longitude:s=0,zoom:C=0,pitch:D=0,bearing:N=0,position:U=null,nearZMultiplier:G=.02,farZMultiplier:ce=1.01}=o;c=c||1,p=p||1,x===null&&_===null?(_=Ny,x=M5(_)):x===null?x=M5(_):_===null&&(_=jy(x));const ge=OM(C);_=Math.max(.75,_);const xe=UM({longitude:s,latitude:E}),$e=Lc([s,E]);$e.push(0),U&&DM($e,$e,BM([],U,xe.unitsPerMeter)),this.projectionMatrix=VM({width:c,height:p,scale:ge,center:$e,pitch:D,fovy:x,nearZMultiplier:G,farZMultiplier:ce}),this.viewMatrix=NM({height:p,scale:ge,center:$e,pitch:D,bearing:N,altitude:_}),this.width=c,this.height=p,this.scale=ge,this.latitude=E,this.longitude=s,this.zoom=C,this.pitch=D,this.bearing=N,this.altitude=_,this.fovy=x,this.center=$e,this.meterOffset=U||[0,0,0],this.distanceScales=xe,this._initMatrices(),Object.freeze(this)}_initMatrices(){const{width:o,height:c,projectionMatrix:p,viewMatrix:_}=this,x=$3();a6(x,x,p),a6(x,x,_),this.viewProjectionMatrix=x;const E=$3();By(E,E,[o/2,-c/2,1]),cp(E,E,[1,-1,0]),a6(E,E,x);const s=MM($3(),E);if(!s)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=E,this.pixelUnprojectionMatrix=s}projectFlat(o){return Lc(o)}unprojectFlat(o){return s2(o)}getMapCenterByLngLatPosition({lngLat:o,pos:c}){const p=Nm(c,this.pixelUnprojectionMatrix),_=Lc(o),x=Om([],_,LM([],p)),E=Om([],this.center,x);return s2(E)}fitBounds(o,c={}){const{width:p,height:_}=this,{longitude:x,latitude:E,zoom:s}=$M(Object.assign({width:p,height:_,bounds:o},c));return new hp({width:p,height:_,longitude:x,latitude:E,zoom:s})}getBounds(o){const c=this.getBoundingRegion(o),p=Math.min(...c.map(s=>s[0])),_=Math.max(...c.map(s=>s[0])),x=Math.min(...c.map(s=>s[1])),E=Math.max(...c.map(s=>s[1]));return[[p,x],[_,E]]}getBoundingRegion(o={}){return WM(this,o.z||0)}getLocationAtPoint({lngLat:o,pos:c}){return this.getMapCenterByLngLatPosition({lngLat:o,pos:c})}}const qM="FeatureCollection",HM=[{type:"Feature",properties:{name:"津巴布韦",full_name:"津巴布韦共和国",iso_a2:"ZW",iso_a3:"ZWE",iso_n3:"716"},geometry:{type:"Polygon",coordinates:[[[31.287891,-22.402051],[32.429785,-21.29707],[32.492383,-20.659766],[32.992773,-19.984863],[32.699707,-18.940918],[32.993066,-18.35957],[32.948047,-16.712305],[31.23623,-16.023633],[30.437793,-15.995313],[30.396094,-15.643066],[29.487305,-15.696777],[28.913086,-15.987793],[28.760547,-16.532129],[27.932227,-16.896191],[27.020801,-17.958398],[25.258789,-17.793555],[26.168066,-19.538281],[27.178223,-20.100977],[27.280762,-20.478711],[27.679297,-20.503027],[27.669434,-21.064258],[28.014063,-21.554199],[29.025586,-21.796875],[29.364844,-22.193945],[31.287891,-22.402051]]]}},{type:"Feature",properties:{name:"赞比亚",full_name:"赞比亚共和国",iso_a2:"ZM",iso_a3:"ZMB",iso_n3:"894"},geometry:{type:"Polygon",coordinates:[[[30.396094,-15.643066],[30.231836,-14.990332],[33.201758,-14.013379],[32.67041,-13.59043],[33.021582,-12.630469],[33.512305,-12.347754],[33.252344,-12.112598],[33.261328,-10.893359],[33.661523,-10.553125],[32.919922,-9.407422],[31.033398,-8.597656],[30.751172,-8.193652],[28.898145,-8.485449],[28.400684,-9.224805],[28.645508,-10.550195],[28.383398,-11.566699],[29.064355,-12.348828],[29.485547,-12.418457],[29.795117,-12.155469],[29.775195,-13.438086],[29.554199,-13.248926],[29.014258,-13.368848],[28.412891,-12.518066],[27.573828,-12.227051],[27.15918,-11.579199],[26.824023,-11.965234],[26.025977,-11.890137],[25.349414,-11.623047],[25.28877,-11.212402],[24.37793,-11.41709],[24.365723,-11.129883],[23.966504,-10.871777],[23.962988,-12.988477],[21.978906,-13.000977],[22.040234,-16.262793],[23.380664,-17.640625],[24.73291,-17.517773],[25.258789,-17.793555],[27.020801,-17.958398],[27.932227,-16.896191],[28.760547,-16.532129],[28.913086,-15.987793],[29.487305,-15.696777],[30.396094,-15.643066]]]}},{type:"Feature",properties:{name:"也门",full_name:"也门共和国",iso_a2:"YE",iso_a3:"YEM",iso_n3:"887"},geometry:{type:"MultiPolygon",coordinates:[[[[53.085645,16.648389],[51.977637,18.996143],[49.041992,18.581787],[48.172168,18.156934],[47.143555,16.94668],[46.727637,17.265576],[43.916992,17.324707],[43.417969,17.51626],[43.190918,17.359375],[43.165039,16.689404],[42.799316,16.371777],[42.657812,15.232812],[42.936426,14.938574],[43.231934,13.26709],[43.487598,12.698828],[44.005859,12.607666],[45.038672,12.815869],[45.657324,13.338721],[46.788867,13.465576],[47.989941,14.048096],[48.668359,14.050146],[49.349902,14.637793],[52.21748,15.655518],[52.327734,16.293555],[53.085645,16.648389]]],[[[53.763184,12.636816],[53.31582,12.533154],[53.718848,12.318994],[54.511133,12.552783],[53.763184,12.636816]]]]}},{type:"Feature",properties:{name:"越南",full_name:"越南社会主义共和国",iso_a2:"VN",iso_a3:"VNM",iso_n3:"704"},geometry:{type:"MultiPolygon",coordinates:[[[[104.063965,10.39082],[103.849512,10.371094],[104.018457,10.029199],[104.063965,10.39082]]],[[[107.972656,21.507959],[106.663574,21.978906],[106.550391,22.501367],[106.780273,22.778906],[105.842969,22.922803],[105.275391,23.345215],[103.941504,22.540088],[103.32666,22.769775],[102.981934,22.448242],[102.470898,22.750928],[102.127441,22.379199],[102.662012,21.676025],[102.949609,21.681348],[102.851172,21.265918],[103.104492,20.89165],[103.635059,20.69707],[104.101367,20.945508],[104.583203,20.64668],[104.367773,20.441406],[104.92793,20.018115],[104.587891,19.61875],[104.032031,19.675146],[103.891602,19.30498],[105.146484,18.650977],[105.114551,18.405273],[106.502246,16.954102],[106.656445,16.492627],[107.396387,16.043018],[107.165918,15.80249],[107.653125,15.255225],[107.519434,14.705078],[107.331445,14.126611],[107.605469,13.437793],[107.506445,12.364551],[106.413867,11.948438],[106.399219,11.687012],[105.851465,11.63501],[106.163965,10.794922],[105.755078,10.98999],[105.045703,10.911377],[104.850586,10.534473],[104.426367,10.41123],[105.084473,9.995703],[104.77041,8.597656],[105.114355,8.629199],[106.168359,9.396729],[105.830957,10.000732],[106.484082,9.559424],[106.136426,10.22168],[106.595605,9.859863],[106.785254,10.116455],[106.464063,10.298291],[106.757422,10.295801],[106.605859,10.464941],[106.947461,10.400342],[107.006641,10.660547],[107.261523,10.398389],[108.001367,10.720361],[108.986719,11.336377],[109.198633,11.724854],[109.423926,12.955957],[108.821289,15.37793],[106.370508,17.746875],[106.499023,17.946436],[105.621777,18.966309],[105.984082,19.939062],[106.572852,20.392188],[106.683398,21.000293],[107.164746,20.94873],[107.972656,21.507959]]]]}},{type:"Feature",properties:{name:"委内瑞拉",full_name:"委内瑞拉玻利瓦尔共和国",iso_a2:"VE",iso_a3:"VEN",iso_n3:"862"},geometry:{type:"MultiPolygon",coordinates:[[[[-63.849365,11.131006],[-64.402344,10.981592],[-63.917627,10.887549],[-63.849365,11.131006]]],[[[-60.017529,8.549316],[-61.304004,8.4104],[-61.618701,8.597461],[-61.247266,8.600342],[-60.79248,9.360742],[-61.588867,9.894531],[-61.735938,9.631201],[-62.0771,9.975049],[-62.32041,9.783057],[-62.550342,10.200439],[-62.740576,10.056152],[-62.913574,10.531494],[-61.879492,10.741016],[-64.298193,10.635156],[-63.731885,10.503418],[-65.129102,10.070068],[-65.851758,10.257764],[-66.247217,10.632227],[-68.139941,10.492725],[-68.398633,11.160986],[-68.827979,11.431738],[-69.631592,11.479932],[-70.003955,12.177881],[-70.286523,11.886035],[-69.804785,11.474219],[-71.469531,10.96416],[-71.494238,10.533203],[-71.052686,9.705811],[-71.241406,9.160449],[-71.619531,9.047949],[-72.112842,9.815576],[-71.594336,10.657373],[-71.956934,11.569922],[-71.319727,11.861914],[-71.958105,11.666406],[-72.690088,10.83584],[-73.366211,9.194141],[-72.796387,9.108984],[-72.390332,8.287061],[-72.471973,7.524268],[-72.006641,7.032617],[-70.129199,6.953613],[-69.427148,6.123975],[-67.481982,6.180273],[-67.855273,4.506885],[-67.311133,3.415869],[-67.859082,2.793604],[-67.21084,2.390137],[-66.876025,1.223047],[-66.347119,.767188],[-65.681445,.983447],[-65.473389,.69126],[-64.205029,1.529492],[-64.008496,1.931592],[-63.43252,2.155566],[-63.389258,2.411914],[-64.046582,2.502393],[-64.221094,3.587402],[-64.788672,4.276025],[-64.021484,3.929102],[-63.338672,3.943896],[-62.856982,3.593457],[-62.712109,4.01792],[-61.002832,4.535254],[-60.603857,4.949365],[-60.742139,5.202051],[-61.39082,5.93877],[-61.128711,6.214307],[-61.145605,6.694531],[-60.3521,7.002881],[-60.718652,7.535937],[-59.849072,8.248682],[-60.017529,8.549316]]]]}},{type:"Feature",properties:{name:"梵蒂冈",full_name:"梵蒂冈城国",iso_a2:"VA",iso_a3:"VAT",iso_n3:"336"},geometry:{type:"Polygon",coordinates:[[[12.43916,41.898389],[12.430566,41.905469],[12.430566,41.897559],[12.43916,41.898389]]]}},{type:"Feature",properties:{name:"瓦努阿图",full_name:"瓦努阿图共和国",iso_a2:"VU",iso_a3:"VUT",iso_n3:"548"},geometry:{type:"MultiPolygon",coordinates:[[[[166.745801,-14.826855],[166.567383,-14.641797],[166.631055,-15.406055],[166.758301,-15.631152],[167.093945,-15.580859],[167.075586,-14.935645],[166.810156,-15.157422],[166.745801,-14.826855]]],[[[167.4125,-16.095898],[167.199512,-15.885059],[167.449316,-16.55498],[167.836621,-16.449707],[167.4125,-16.095898]]],[[[168.29668,-16.336523],[168.163867,-16.081641],[167.929004,-16.228711],[168.29668,-16.336523]]],[[[168.445801,-17.542188],[168.158203,-17.710547],[168.524609,-17.798047],[168.445801,-17.542188]]],[[[167.911328,-15.435938],[168.002539,-15.283203],[167.674219,-15.451562],[167.911328,-15.435938]]],[[[169.491309,-19.540137],[169.247461,-19.344727],[169.347266,-19.623535],[169.491309,-19.540137]]],[[[169.334375,-18.940234],[169.01582,-18.64375],[168.986914,-18.871289],[169.334375,-18.940234]]]]}},{type:"Feature",properties:{name:"乌兹别克斯坦",full_name:"乌兹别克斯坦共和国",iso_a2:"UZ",iso_a3:"UZB",iso_n3:"860"},geometry:{type:"Polygon",coordinates:[[[70.946777,42.248682],[69.153613,41.425244],[68.572656,40.622656],[68.291895,40.656104],[67.935742,41.196582],[66.709668,41.17915],[66.498633,41.994873],[66.00957,42.004883],[66.100293,42.99082],[65.803027,42.876953],[64.905469,43.714697],[61.990234,43.492139],[61.00791,44.393799],[58.555273,45.555371],[55.975684,44.994922],[55.977441,41.322217],[57.017969,41.263477],[56.964063,41.856543],[58.028906,42.487646],[58.474414,42.299365],[58.151563,42.628076],[58.589063,42.778467],[59.985156,42.211719],[60.089648,41.399414],[61.902832,41.093701],[62.483203,39.975635],[63.763672,39.160547],[65.612891,38.238574],[66.60625,37.986719],[66.522266,37.348486],[67.758984,37.172217],[68.350293,38.211035],[68.13252,38.927637],[67.357617,39.216699],[67.426172,39.465576],[68.463281,39.536719],[68.97207,40.089941],[68.630664,40.16709],[69.274902,40.198096],[69.357227,40.767383],[69.712891,40.656982],[70.401953,41.035107],[70.751074,40.721777],[70.371582,40.384131],[70.958008,40.238867],[71.69248,40.152344],[73.136914,40.810645],[72.187305,41.025928],[71.664941,41.541211],[71.393066,41.123389],[70.200879,41.514453],[71.228516,42.162891],[70.946777,42.248682]]]}},{type:"Feature",properties:{name:"乌拉圭",full_name:"乌拉圭东岸共和国",iso_a2:"UY",iso_a3:"URY",iso_n3:"858"},geometry:{type:"Polygon",coordinates:[[[-53.370605,-33.742188],[-53.531348,-33.170898],[-53.125586,-32.736719],[-53.761719,-32.056836],[-55.603027,-30.850781],[-56.004687,-31.079199],[-56.044824,-30.777637],[-56.832715,-30.107227],[-57.608887,-30.187793],[-58.201172,-32.47168],[-58.092676,-32.967383],[-58.363525,-33.182324],[-58.438135,-33.719141],[-57.829102,-34.477344],[-57.170703,-34.452344],[-56.249951,-34.90127],[-54.902295,-34.932813],[-53.785303,-34.380371],[-53.370605,-33.742188]]]}},{type:"Feature",properties:{name:"密克罗尼西亚",full_name:"密克罗尼西亚联邦",iso_a2:"FM",iso_a3:"FSM",iso_n3:"583"},geometry:{type:"Polygon",coordinates:[[[158.314844,6.813672],[158.294629,6.951074],[158.134766,6.944824],[158.314844,6.813672]]]}},{type:"Feature",properties:{name:"马绍尔群岛",full_name:"马绍尔群岛共和国",iso_a2:"MH",iso_a3:"MHL",iso_n3:"584"},geometry:{type:"Polygon",coordinates:[[[171.101953,7.138232],[171.035742,7.156104],[171.235352,7.06875],[171.39375,7.110938],[171.101953,7.138232]]]}},{type:"Feature",properties:{name:"北马里亚纳群岛",full_name:"北马里亚纳群岛联邦（美国）",iso_a2:"MP",iso_a3:"MNP",iso_n3:"580"},geometry:{type:"Polygon",coordinates:[[[145.751953,15.133154],[145.821875,15.265381],[145.713184,15.215283],[145.751953,15.133154]]]}},{type:"Feature",properties:{name:"美属维尔京群岛",full_name:"美属维尔京群岛",iso_a2:"VI",iso_a3:"VIR",iso_n3:"850"},geometry:{type:"Polygon",coordinates:[[[-64.765625,17.794336],[-64.889111,17.701709],[-64.580469,17.750195],[-64.765625,17.794336]]]}},{type:"Feature",properties:{name:"关岛",full_name:"关岛",iso_a2:"GU",iso_a3:"GUM",iso_n3:"316"},geometry:{type:"Polygon",coordinates:[[[144.741797,13.259277],[144.875391,13.614648],[144.649316,13.428711],[144.741797,13.259277]]]}},{type:"Feature",properties:{name:"美属萨摩亚",full_name:"美属萨摩亚",iso_a2:"AS",iso_a3:"ASM",iso_n3:"016"},geometry:{type:"Polygon",coordinates:[[[-170.72627,-14.351172],[-170.568115,-14.266797],[-170.820508,-14.312109],[-170.72627,-14.351172]]]}},{type:"Feature",properties:{name:"波多黎各",full_name:"波多黎各自由邦",iso_a2:"PR",iso_a3:"PRI",iso_n3:"630"},geometry:{type:"Polygon",coordinates:[[[-66.129395,18.444922],[-67.158643,18.499219],[-67.196875,17.994189],[-65.970801,17.974365],[-65.62085,18.242334],[-66.129395,18.444922]]]}},{type:"Feature",properties:{name:"美国",full_name:"美利坚合众国",iso_a2:"US",iso_a3:"USA",iso_n3:"840"},geometry:{type:"MultiPolygon",coordinates:[[[[-171.463037,63.640039],[-171.631836,63.351221],[-170.848389,63.444385],[-169.676367,62.956104],[-168.761328,63.21377],[-170.299365,63.680615],[-171.463037,63.640039]]],[[[-166.135449,60.383545],[-167.436426,60.206641],[-166.14873,59.764111],[-165.591797,59.913135],[-166.135449,60.383545]]],[[[-152.898047,57.823926],[-153.841553,57.862842],[-153.687695,57.305127],[-154.116162,57.651221],[-154.673193,57.446094],[-154.338965,56.920898],[-154.24375,57.143018],[-153.793213,56.989502],[-154.027344,56.777979],[-152.679053,57.345117],[-152.940771,57.498096],[-152.216211,57.577002],[-152.898047,57.823926]]],[[[-130.025098,55.888232],[-130.097852,56.109277],[-131.824268,56.58999],[-133.401123,58.410889],[-135.475928,59.793262],[-137.438574,58.903125],[-139.185156,60.083594],[-139.079248,60.343701],[-141.002148,60.300244],[-141.002148,64.975537],[-141.002148,69.650781],[-143.218311,70.11626],[-145.197363,70.008691],[-149.269434,70.500781],[-151.944678,70.4521],[-152.491211,70.880957],[-154.195215,70.801123],[-155.166846,71.099219],[-155.973535,70.841992],[-155.579443,71.121094],[-156.470215,71.407666],[-157.909375,70.860107],[-159.680908,70.786768],[-159.865674,70.278857],[-160.117139,70.591211],[-162.073877,70.161963],[-161.880957,70.331738],[-163.86792,69.03667],[-166.209082,68.885352],[-166.786279,68.359619],[-164.125195,67.606738],[-163.531836,67.102588],[-161.719922,67.020557],[-161.856689,66.700342],[-160.360889,66.6125],[-160.231689,66.420264],[-161.591016,66.459521],[-162.361621,66.947314],[-161.916895,66.411816],[-161.034277,66.188818],[-163.695361,66.083838],[-163.638232,66.574658],[-164.460498,66.588428],[-168.088379,65.657764],[-166.157031,65.28584],[-166.928418,65.15708],[-166.142773,64.582764],[-163.144336,64.423828],[-163.203906,64.652002],[-162.807031,64.374219],[-161.759375,64.81626],[-160.855908,64.755615],[-161.490723,64.433789],[-160.778564,63.818945],[-161.099707,63.55791],[-162.282812,63.529199],[-163.287842,63.046436],[-164.409033,63.215039],[-164.757861,62.496729],[-166.078809,61.803125],[-165.565869,61.102344],[-165.273633,61.274854],[-164.868994,61.111768],[-165.114844,60.932812],[-163.749023,60.969727],[-163.420947,60.757422],[-164.372363,60.591846],[-164.805176,60.892041],[-165.353809,60.541211],[-163.680371,59.801514],[-162.570752,59.989746],[-162.684961,60.268945],[-161.962012,60.695361],[-162.421338,60.283984],[-161.828711,59.588623],[-161.981055,59.146143],[-161.644385,59.109668],[-162.144922,58.644238],[-160.363135,59.051172],[-158.950684,58.404541],[-158.809473,58.973877],[-158.080518,58.977441],[-158.503174,58.850342],[-158.190918,58.614258],[-156.808887,59.134277],[-157.523633,58.421338],[-157.193701,58.194189],[-157.610889,58.05083],[-157.461914,57.506201],[-158.320947,57.2979],[-158.675146,56.794873],[-160.302051,56.314111],[-160.291699,55.805078],[-161.697314,55.907227],[-163.278809,55.121826],[-163.335303,54.83916],[-163.131104,54.916553],[-163.119629,55.064697],[-162.674365,54.996582],[-162.630371,55.24668],[-162.073975,55.139307],[-161.516943,55.618408],[-161.381934,55.371289],[-159.771387,55.841113],[-159.659668,55.625928],[-158.275635,56.19624],[-158.414404,56.43584],[-156.629004,57.009961],[-156.435889,57.359961],[-154.247021,58.159424],[-153.437598,58.754834],[-154.17832,59.155566],[-152.660107,59.997217],[-153.025,60.295654],[-152.540918,60.26543],[-151.593506,60.979639],[-149.433545,61.500781],[-150.053271,61.171094],[-149.075098,60.876416],[-150.44126,61.023584],[-151.356445,60.722949],[-151.853223,59.78208],[-151.046484,59.771826],[-151.884619,59.386328],[-151.738184,59.188525],[-150.934521,59.249121],[-149.713867,59.91958],[-149.598047,59.770459],[-149.395264,60.105762],[-148.430713,59.989111],[-147.964111,60.484863],[-148.640137,60.489453],[-148.256738,60.675293],[-148.556152,60.827002],[-147.751855,61.218945],[-147.891113,60.889893],[-146.284912,61.112646],[-146.570459,60.72915],[-145.674902,60.651123],[-145.898877,60.478174],[-145.248291,60.380127],[-144.691113,60.669092],[-144.901318,60.335156],[-144.147217,60.016406],[-141.40874,60.117676],[-141.408301,59.902783],[-140.419824,59.710742],[-139.431445,60.012256],[-138.988086,59.83501],[-139.286719,59.610938],[-139.512305,59.953564],[-139.773291,59.527295],[-136.607422,58.243994],[-136.061475,58.452734],[-136.989014,59.034473],[-136.22583,58.765479],[-136.150049,59.048096],[-135.897559,58.400195],[-135.090234,58.24585],[-135.363672,59.419434],[-134.776123,58.453857],[-134.208838,58.232959],[-133.876758,58.518164],[-134.031104,58.072168],[-133.194336,57.877686],[-133.535205,57.832959],[-133.117041,57.566211],[-133.64873,57.642285],[-133.465869,57.172168],[-131.551367,56.206787],[-132.15542,55.599561],[-131.032764,56.088086],[-130.748193,55.318018],[-131.047852,55.157666],[-130.575342,54.769678],[-130.214062,55.025879],[-130.025098,55.888232]]],[[[-163.476025,54.980713],[-164.478613,54.906836],[-164.823438,54.419092],[-163.083252,54.668994],[-163.378955,54.815527],[-163.476025,54.980713]]],[[[-133.305078,55.54375],[-133.737109,55.496924],[-133.650195,55.269287],[-133.305078,55.54375]]],[[[-131.339746,55.079834],[-131.56543,55.264111],[-131.329541,54.887744],[-131.339746,55.079834]]],[[[-132.112354,56.109375],[-132.379834,56.498779],[-132.659912,56.078174],[-132.287305,55.929395],[-132.112354,56.109375]]],[[[-130.97915,55.48916],[-131.269238,55.955371],[-131.7625,55.16582],[-131.447559,55.408789],[-131.187891,55.206299],[-130.97915,55.48916]]],[[[-133.366211,57.003516],[-133.979443,57.00957],[-133.48418,56.451758],[-133.158154,56.495166],[-133.328955,56.830078],[-132.95918,56.677051],[-133.366211,57.003516]]],[[[-132.862256,54.894434],[-133.429053,55.303809],[-132.705811,54.68418],[-132.862256,54.894434]]],[[[-160.684912,55.314795],[-160.795068,55.145215],[-160.487549,55.184863],[-160.684912,55.314795]]],[[[-177.148193,51.716748],[-177.110059,51.92876],[-177.670215,51.701074],[-177.148193,51.716748]]],[[[-134.969775,57.351416],[-135.448682,57.534375],[-135.812305,57.009521],[-135.454932,57.249414],[-134.681885,56.216162],[-134.969775,57.351416]]],[[[-134.680273,58.16167],[-134.923486,58.354639],[-134.516016,57.042578],[-133.911133,57.352539],[-134.292334,58.044727],[-133.822754,57.628662],[-134.240088,58.143994],[-134.680273,58.16167]]],[[[-135.730371,58.244238],[-136.568604,57.972168],[-135.910791,57.446582],[-135.564209,57.666406],[-134.931494,57.481152],[-135.338477,57.768652],[-134.954688,58.015332],[-135.613232,57.991846],[-135.730371,58.244238]]],[[[-133.566113,56.339209],[-133.742529,55.964844],[-133.241504,55.920801],[-133.680176,55.785156],[-133.033398,55.589697],[-133.118555,55.327637],[-132.064746,54.713135],[-131.976416,55.208594],[-132.631299,55.473193],[-132.172705,55.480615],[-133.566113,56.339209]]],[[[-133.9896,56.844971],[-134.373682,56.838672],[-134.1896,56.076953],[-133.738379,56.650439],[-133.9896,56.844971]]],[[[-152.416943,58.360205],[-152.841113,58.416406],[-153.381348,58.087207],[-152.068896,58.17793],[-152.416943,58.360205]]],[[[-167.964355,53.345117],[-167.828076,53.507959],[-168.287695,53.500146],[-169.088916,52.832031],[-167.964355,53.345117]]],[[[-166.615332,53.900928],[-167.038086,53.942188],[-166.808984,53.646143],[-167.780859,53.300244],[-166.354541,53.673535],[-166.230859,53.932617],[-166.615332,53.900928]]],[[[-173.55332,52.136279],[-173.99248,52.12334],[-173.0229,52.07915],[-173.55332,52.136279]]],[[[-174.677393,52.03501],[-174.045605,52.367236],[-175.295557,52.022168],[-174.677393,52.03501]]],[[[-176.593311,51.866699],[-176.961621,51.603662],[-176.452344,51.735693],[-176.593311,51.866699]]],[[[-177.879053,51.649707],[-177.644482,51.82627],[-178.168262,51.903027],[-177.879053,51.649707]]],[[[172.811816,53.012988],[172.494824,52.937891],[172.935156,52.7521],[173.436035,52.852051],[172.811816,53.012988]]],[[[-155.581348,19.012012],[-154.804199,19.524463],[-155.831641,20.27583],[-156.048682,19.749951],[-155.881299,19.070508],[-155.581348,19.012012]]],[[[-156.486816,20.932568],[-156.697754,20.949072],[-156.408789,20.605176],[-155.989844,20.757129],[-156.486816,20.932568]]],[[[-157.799365,21.456641],[-157.9625,21.701367],[-158.273145,21.585254],[-158.110352,21.318604],[-157.6354,21.307617],[-157.799365,21.456641]]],[[[-159.372754,21.932373],[-159.352051,22.21958],[-159.78916,22.041797],[-159.372754,21.932373]]],[[[-74.708887,45.003857],[-76.151172,44.303955],[-76.819971,43.628809],[-78.72041,43.624951],[-79.171875,43.466553],[-79.036719,42.802344],[-82.690039,41.675195],[-83.149658,42.141943],[-82.545312,42.624707],[-82.137842,43.570898],[-82.551074,45.347363],[-83.592676,45.817139],[-83.615967,46.116846],[-83.977783,46.084912],[-84.149463,46.542773],[-84.561768,46.457373],[-84.875977,46.899902],[-88.378174,48.303076],[-89.455664,47.99624],[-90.916064,48.209131],[-91.518311,48.058301],[-92.99624,48.611816],[-94.620898,48.742627],[-95.155273,49.369678],[-95.162061,48.991748],[-97.529834,48.993164],[-106.483838,48.993115],[-114.585107,48.993066],[-122.78877,48.993018],[-122.241992,48.010742],[-122.353809,47.371582],[-122.701953,47.110889],[-123.027588,47.138916],[-122.577881,47.293164],[-122.532812,47.919727],[-123.139062,47.386084],[-122.656641,47.881152],[-122.778613,48.137598],[-124.709961,48.380371],[-124.139258,46.954688],[-123.842871,46.963184],[-124.112549,46.862695],[-124.072754,46.279443],[-123.220605,46.153613],[-123.989307,46.219385],[-124.14873,43.691748],[-124.539648,42.812891],[-124.071924,41.459521],[-124.324023,40.251953],[-122.998779,37.988623],[-122.521338,37.826416],[-122.393359,38.144824],[-121.525342,38.055908],[-122.314258,38.007324],[-122.070508,37.478271],[-122.445605,37.797998],[-122.499219,37.542627],[-121.807422,36.851221],[-121.877393,36.331055],[-120.659082,35.122412],[-120.644678,34.57998],[-118.506201,34.017383],[-118.410449,33.743945],[-117.467432,33.295508],[-117.128271,32.53335],[-114.724756,32.715332],[-114.835938,32.508301],[-111.041992,31.324219],[-108.214453,31.329443],[-108.211816,31.779346],[-106.44541,31.768408],[-104.978809,30.645947],[-104.110596,29.386133],[-103.168311,28.998193],[-102.614941,29.752344],[-101.440381,29.776855],[-99.505322,27.54834],[-99.107764,26.446924],[-97.14624,25.961475],[-97.485107,27.237402],[-97.768457,27.45752],[-97.439111,27.328271],[-97.156494,28.144336],[-96.421094,28.457324],[-96.640039,28.708789],[-96.011035,28.631934],[-96.234521,28.488965],[-95.273486,28.963867],[-94.888281,29.370557],[-95.022852,29.702344],[-94.52627,29.547949],[-94.759619,29.384277],[-93.890479,29.689355],[-93.841455,29.979736],[-93.826465,29.725146],[-92.26084,29.556836],[-91.893164,29.836035],[-91.248828,29.564209],[-91.290137,29.288965],[-90.751025,29.130859],[-90.379199,29.295117],[-90.212793,29.104932],[-90.159082,29.537158],[-89.376123,28.981348],[-89.015723,29.202881],[-89.720898,29.619287],[-89.354443,29.820215],[-89.400732,30.046045],[-90.175342,30.029102],[-90.331982,30.277588],[-88.135449,30.366602],[-88.011328,30.694189],[-87.790283,30.291797],[-88.005957,30.230908],[-87.281055,30.339258],[-86.997559,30.570312],[-87.201172,30.339258],[-86.257373,30.493018],[-86.454443,30.399121],[-85.603516,30.286768],[-85.318945,29.680225],[-84.309668,30.064746],[-83.694385,29.925977],[-82.651465,28.8875],[-82.843506,27.845996],[-82.405762,27.862891],[-82.7146,27.499609],[-82.441357,27.059668],[-82.242871,26.848877],[-82.013281,26.961572],[-81.715479,25.983154],[-80.94043,25.264209],[-81.110498,25.138037],[-80.484668,25.229834],[-80.126367,25.833496],[-80.050049,26.807715],[-80.838184,28.757666],[-80.456885,27.900684],[-80.524121,28.486084],[-81.249512,29.793799],[-81.516211,30.801807],[-81.380957,31.353271],[-80.694238,32.215723],[-80.802539,32.448047],[-80.579346,32.287305],[-80.63418,32.511719],[-79.940723,32.667139],[-78.841455,33.724072],[-78.01333,33.911816],[-77.953271,34.168994],[-77.927832,33.939746],[-77.412256,34.730811],[-76.439795,34.84292],[-76.974951,35.025195],[-77.070264,35.154639],[-76.77915,34.990332],[-76.512939,35.27041],[-77.03999,35.527393],[-76.173828,35.35415],[-75.758838,35.843262],[-76.083594,35.690527],[-76.069775,35.970312],[-76.726221,35.957617],[-76.733643,36.22915],[-76.559375,36.015332],[-76.147852,36.279297],[-75.820068,36.112842],[-75.946484,36.659082],[-75.53418,35.819092],[-75.999414,36.912646],[-76.487842,36.897021],[-77.250879,37.329199],[-76.283301,37.052686],[-76.757715,37.50542],[-76.453906,37.273535],[-76.305566,37.571484],[-76.549463,37.669141],[-77.111084,38.165674],[-76.49248,37.682227],[-76.344141,37.675684],[-76.264258,37.893555],[-77.273242,38.351758],[-77.2604,38.6],[-77.030371,38.889258],[-77.23252,38.407715],[-76.341162,38.087012],[-76.668555,38.5375],[-76.394092,38.368994],[-76.57041,39.269336],[-75.958936,39.585059],[-76.341162,38.709668],[-76.016943,38.625098],[-76.264648,38.436426],[-75.858691,38.362061],[-75.659277,37.953955],[-75.934375,37.151904],[-75.03877,38.426367],[-75.187109,38.591113],[-75.088672,38.777539],[-75.392188,39.092773],[-75.587598,39.640771],[-75.07417,39.983496],[-75.524219,39.490186],[-74.897021,39.145459],[-74.954297,38.949951],[-74.794482,39.001904],[-74.0646,39.993115],[-74.079932,39.788135],[-73.972266,40.400342],[-74.264209,40.528613],[-73.969922,41.249707],[-73.987109,40.751367],[-72.924707,41.285156],[-71.522852,41.378955],[-71.390137,41.795312],[-71.168555,41.489404],[-69.948633,41.677148],[-69.977881,41.961279],[-70.108936,42.07832],[-70.001416,41.826172],[-70.42666,41.757275],[-71.046191,42.331104],[-70.612939,42.623242],[-70.733105,43.07002],[-70.178809,43.766357],[-69.226074,43.986475],[-68.762695,44.570752],[-68.53252,44.258643],[-68.450586,44.507617],[-68.056641,44.384326],[-67.19126,44.675586],[-67.124854,45.169434],[-67.802246,45.727539],[-67.806787,47.082812],[-68.235498,47.345947],[-68.937207,47.21123],[-69.242871,47.462988],[-70.865039,45.270703],[-71.327295,45.290088],[-71.517529,45.007568],[-74.708887,45.003857]],[[-122.572754,48.156641],[-122.628613,48.384229],[-122.383154,47.923193],[-122.572754,48.156641]]],[[[-72.509766,40.986035],[-72.274121,41.153027],[-73.573828,40.919629],[-74.014893,40.581201],[-71.903223,41.060693],[-72.509766,40.986035]]],[[[-80.381836,25.142285],[-80.25708,25.347607],[-80.580566,24.954248],[-80.381836,25.142285]]],[[[-84.90791,29.642627],[-84.737158,29.732422],[-85.116748,29.632812],[-84.90791,29.642627]]]]}},{type:"Feature",properties:{name:"南乔治亚和南桑威奇群岛",full_name:"南乔治亚和南桑威奇群岛（英国）",iso_a2:"GS",iso_a3:"SGS",iso_n3:"239"},geometry:{type:"Polygon",coordinates:[[[-37.10332,-54.065625],[-38.017432,-54.008008],[-36.085498,-54.866797],[-35.798584,-54.763477],[-36.326465,-54.251172],[-37.10332,-54.065625]]]}},{type:"Feature",properties:{name:"英属印度洋领地",full_name:"英属印度洋领地",iso_a2:"IO",iso_a3:"IOT",iso_n3:"086"},geometry:{type:"Polygon",coordinates:[[[72.491992,-7.377441],[72.445605,-7.22041],[72.447266,-7.395703],[72.349707,-7.263379],[72.429102,-7.435352],[72.491992,-7.377441]]]}},{type:"Feature",properties:{name:"圣赫勒拿",full_name:"圣赫勒拿岛（英国）",iso_a2:"SH",iso_a3:"SHN",iso_n3:"654"},geometry:{type:"Polygon",coordinates:[[[-5.692139,-15.997754],[-5.707861,-15.906152],[-5.78252,-16.004004],[-5.692139,-15.997754]]]}},{type:"Feature",properties:{name:"皮特凯恩群岛",full_name:"皮特凯恩群岛（英国）",iso_a2:"PN",iso_a3:"PCN",iso_n3:"612"},geometry:{type:"Polygon",coordinates:[[[-128.290088,-24.397363],[-128.330127,-24.323242],[-128.342188,-24.370703],[-128.290088,-24.397363]]]}},{type:"Feature",properties:{name:"安圭拉",full_name:"安圭拉",iso_a2:"AI",iso_a3:"AIA",iso_n3:"660"},geometry:{type:"Polygon",coordinates:[[[-63.001221,18.221777],[-63.026025,18.269727],[-63.16001,18.171387],[-63.001221,18.221777]]]}},{type:"Feature",properties:{name:"马尔维纳斯群岛（福克兰）",full_name:"马尔维纳斯群岛（福克兰）",iso_a2:"FK",iso_a3:"FLK",iso_n3:"238"},geometry:{type:"MultiPolygon",coordinates:[[[[-58.850195,-51.269922],[-59.570801,-51.925391],[-59.395654,-52.308008],[-59.19585,-52.017676],[-58.652783,-52.099219],[-57.791797,-51.636133],[-57.976514,-51.384375],[-58.271582,-51.574707],[-58.850195,-51.269922]]],[[[-60.28623,-51.461914],[-60.568457,-51.357812],[-60.245166,-51.638867],[-60.58252,-51.712695],[-60.238477,-51.771973],[-60.961426,-52.057324],[-60.686377,-52.188379],[-59.268066,-51.427539],[-60.28623,-51.461914]]]]}},{type:"Feature",properties:{name:"开曼群岛",full_name:"开曼群岛",iso_a2:"KY",iso_a3:"CYM",iso_n3:"136"},geometry:{type:"Polygon",coordinates:[[[-81.369531,19.348877],[-81.404785,19.278418],[-81.107129,19.305176],[-81.369531,19.348877]]]}},{type:"Feature",properties:{name:"百慕大",full_name:"百慕大",iso_a2:"BM",iso_a3:"BMU",iso_n3:"060"},geometry:{type:"Polygon",coordinates:[[[-64.730273,32.293457],[-64.668311,32.381934],[-64.862842,32.273877],[-64.730273,32.293457]]]}},{type:"Feature",properties:{name:"英属维尔京群岛",full_name:"英属维尔京群岛",iso_a2:"VG",iso_a3:"VGB",iso_n3:"092"},geometry:{type:"Polygon",coordinates:[[[-64.395215,18.4646],[-64.324658,18.51748],[-64.426074,18.513086],[-64.395215,18.4646]]]}},{type:"Feature",properties:{name:"特克斯和凯科斯群岛",full_name:"特克斯和凯科斯群岛",iso_a2:"TC",iso_a3:"TCA",iso_n3:"796"},geometry:{type:"Polygon",coordinates:[[[-71.661426,21.765234],[-71.668359,21.833447],[-71.847656,21.843457],[-71.661426,21.765234]]]}},{type:"Feature",properties:{name:"蒙特塞拉特",full_name:"蒙特塞拉特",iso_a2:"MS",iso_a3:"MSR",iso_n3:"500"},geometry:{type:"Polygon",coordinates:[[[-62.148438,16.740332],[-62.191357,16.804395],[-62.221631,16.699512],[-62.148438,16.740332]]]}},{type:"Feature",properties:{name:"泽西岛",full_name:"泽西岛",iso_a2:"JE",iso_a3:"JEY",iso_n3:"832"},geometry:{type:"Polygon",coordinates:[[[-2.018652,49.23125],[-2.220508,49.266357],[-2.23584,49.176367],[-2.018652,49.23125]]]}},{type:"Feature",properties:{name:"根西岛",full_name:"根西岛",iso_a2:"GG",iso_a3:"GGY",iso_n3:"831"},geometry:{type:"Polygon",coordinates:[[[-2.512305,49.494531],[-2.639014,49.450928],[-2.547363,49.428711],[-2.512305,49.494531]]]}},{type:"Feature",properties:{name:"马恩岛",full_name:"马恩岛",iso_a2:"IM",iso_a3:"IMN",iso_n3:"833"},geometry:{type:"Polygon",coordinates:[[[-4.412061,54.185352],[-4.424707,54.407178],[-4.785352,54.073047],[-4.412061,54.185352]]]}},{type:"Feature",properties:{name:"英国",full_name:"大不列颠及北爱尔兰联合王国",iso_a2:"GB",iso_a3:"GBR",iso_n3:"826"},geometry:{type:"MultiPolygon",coordinates:[[[[-2.667676,51.622998],[-2.433057,51.740723],[-3.135986,51.205029],[-4.188184,51.188525],[-5.622119,50.050684],[-4.19458,50.393311],[-3.679785,50.239941],[-2.999414,50.716602],[-2.03584,50.603076],[-1.416455,50.896875],[.205078,50.763037],[.960156,50.925879],[1.414941,51.363281],[.424512,51.465625],[1.274414,51.845361],[1.743359,52.578516],[1.271289,52.924561],[.045898,52.905615],[.270996,53.335498],[-.659912,53.724023],[.115332,53.609277],[-.084375,54.118066],[-1.232422,54.703711],[-1.655371,55.570361],[-2.599316,56.027295],[-3.789062,56.095215],[-2.674268,56.253418],[-3.309961,56.363477],[-2.592676,56.561572],[-1.77793,57.49375],[-2.074072,57.702393],[-4.134521,57.577734],[-3.053076,58.634814],[-4.924658,58.588379],[-5.413184,58.069727],[-5.157227,57.881348],[-5.744922,57.668311],[-5.561914,57.232715],[-5.730615,56.853076],[-6.132764,56.718018],[-5.652441,56.531982],[-5.188379,56.758057],[-5.768213,55.362646],[-4.996973,56.23335],[-5.228223,55.886328],[-4.800293,56.15835],[-4.584082,55.938672],[-5.135498,54.85752],[-4.91123,54.689453],[-3.03623,54.953076],[-3.592041,54.564355],[-3.165967,54.12793],[-2.867578,54.177246],[-3.0646,53.512842],[-2.749512,53.310205],[-4.268555,53.144531],[-4.683057,52.806152],[-4.101465,52.915479],[-4.149365,52.32627],[-5.262305,51.880176],[-3.562354,51.413818],[-2.667676,51.622998]]],[[[-4.196777,53.321436],[-4.567871,53.386475],[-4.373047,53.13418],[-4.196777,53.321436]]],[[[-1.308105,60.5375],[-1.66377,60.28252],[-1.299463,59.878662],[-1.308105,60.5375]]],[[[-3.057422,59.029639],[-3.310352,59.130811],[-2.793018,58.906934],[-3.057422,59.029639]]],[[[-5.777881,56.344336],[-6.286328,56.611865],[-6.313428,56.293652],[-5.777881,56.344336]]],[[[-6.198682,58.363281],[-7.085254,58.182178],[-6.983105,57.75],[-6.198682,58.363281]]],[[[-6.144727,57.50498],[-6.305957,57.671973],[-6.761133,57.442383],[-5.949072,57.045166],[-5.672461,57.252686],[-6.135547,57.314258],[-6.144727,57.50498]]],[[[-6.218018,54.088721],[-5.47041,54.500195],[-6.035791,55.144531],[-7.218652,55.091992],[-8.118262,54.414258],[-7.606543,54.143848],[-7.007715,54.406689],[-6.649805,54.058643],[-6.218018,54.088721]]]]}},{type:"Feature",properties:{name:"阿联酋",full_name:"阿拉伯联合酋长国",iso_a2:"AE",iso_a3:"ARE",iso_n3:"784"},geometry:{type:"Polygon",coordinates:[[[56.297852,25.650684],[56.080469,26.062646],[54.147949,24.171191],[52.118555,23.971094],[51.568359,24.286182],[52.555078,22.932812],[55.18584,22.704102],[55.468457,23.941113],[55.985156,24.063379],[55.76084,24.242676],[55.795703,24.868115],[56.000586,24.953223],[56.063867,24.73877],[56.387988,24.979199],[56.297852,25.650684]]]}},{type:"Feature",properties:{name:"乌克兰",full_name:"乌克兰",iso_a2:"UA",iso_a3:"UKR",iso_n3:"804"},geometry:{type:"Polygon",coordinates:[[[38.214355,47.091455],[38.368848,47.609961],[39.778711,47.887549],[39.95791,48.268896],[39.644727,48.591211],[40.003613,48.82207],[39.686523,49.00791],[40.108789,49.251562],[40.080664,49.576855],[38.258594,50.052344],[38.046875,49.92002],[37.422852,50.411475],[36.619434,50.209229],[35.591113,50.36875],[35.311914,51.043896],[34.213867,51.255371],[34.397852,51.78042],[33.735254,52.344775],[31.763379,52.101074],[30.755273,51.895166],[30.544531,51.265039],[30.160742,51.477881],[29.346484,51.382568],[29.102051,51.627539],[28.73125,51.433398],[27.7,51.477979],[27.141992,51.752051],[25.267188,51.937744],[23.605273,51.51792],[24.089941,50.530469],[22.706152,49.606201],[22.852051,49.062744],[22.538672,49.072705],[22.131836,48.405322],[22.87666,47.947266],[23.202637,48.084521],[24.979102,47.724121],[26.618945,48.259863],[27.549219,48.477734],[29.125391,47.964551],[29.134863,47.489697],[30.131055,46.423096],[28.958398,46.458496],[28.947754,46.049951],[28.2125,45.450439],[29.705859,45.259912],[29.628418,45.722461],[30.219043,45.866748],[30.796289,46.552002],[31.563379,46.777295],[31.872852,46.649756],[31.75918,47.212842],[32.044336,46.64248],[32.578027,46.615625],[31.554883,46.554297],[32.008496,46.42998],[31.83125,46.281689],[33.594141,46.09624],[33.806667,46.208288],[35.001674,45.733383],[34.849609,46.189893],[35.230371,46.440625],[35.014551,46.106006],[35.827148,46.624316],[38.214355,47.091455]]]}},{type:"Feature",properties:{name:"乌干达",full_name:"乌干达共和国",iso_a2:"UG",iso_a3:"UGA",iso_n3:"800"},geometry:{type:"Polygon",coordinates:[[[33.903223,-1.002051],[33.943164,.173779],[34.978223,1.773633],[34.437695,3.650586],[33.976074,4.220215],[33.489355,3.755078],[32.997266,3.880176],[32.135938,3.519727],[31.798047,3.802637],[31.152344,3.785596],[30.838574,3.490723],[30.728613,2.455371],[31.252734,2.04458],[29.942871,.819238],[29.576953,-1.387891],[29.930078,-1.469922],[30.509961,-1.067285],[33.903223,-1.002051]]]}},{type:"Feature",properties:{name:"土库曼斯坦",full_name:"土库曼斯坦",iso_a2:"TM",iso_a3:"TKM",iso_n3:"795"},geometry:{type:"Polygon",coordinates:[[[55.977441,41.322217],[55.434375,41.296289],[54.120996,42.335205],[53.055859,42.147754],[52.493848,41.780371],[52.850391,41.200293],[52.97002,41.976221],[53.804688,42.117627],[54.703711,41.071143],[54.377344,40.693262],[53.87002,40.648682],[52.943457,41.038086],[52.733691,40.39873],[53.035547,39.774414],[52.9875,39.987598],[53.487305,39.909375],[53.603125,39.546973],[53.235645,39.608545],[53.156641,39.26499],[53.70459,39.20957],[53.868652,38.949268],[53.91416,37.343555],[54.699414,37.470166],[55.380859,38.051123],[57.193555,38.216406],[58.261621,37.66582],[59.301758,37.510645],[60.341309,36.637646],[61.119629,36.642578],[61.262012,35.61958],[62.307813,35.170801],[62.688086,35.255322],[63.056641,35.445801],[63.12998,35.846191],[64.511035,36.340674],[64.816309,37.13208],[65.55498,37.251172],[65.765039,37.569141],[66.522266,37.348486],[66.60625,37.986719],[65.612891,38.238574],[63.763672,39.160547],[62.483203,39.975635],[61.902832,41.093701],[60.089648,41.399414],[59.985156,42.211719],[58.589063,42.778467],[58.151563,42.628076],[58.474414,42.299365],[58.028906,42.487646],[56.964063,41.856543],[57.017969,41.263477],[55.977441,41.322217]]]}},{type:"Feature",properties:{name:"土耳其",full_name:"土耳其共和国",iso_a2:"TR",iso_a3:"TUR",iso_n3:"792"},geometry:{type:"MultiPolygon",coordinates:[[[[41.510059,41.51748],[40.265234,40.961328],[39.426367,41.106445],[38.381055,40.924512],[36.405371,41.274609],[36.051758,41.682568],[35.297754,41.728516],[35.006445,42.063281],[33.381348,42.017578],[31.254883,41.107617],[29.148145,41.221045],[29.113867,40.937842],[29.849219,40.760107],[28.958008,40.630566],[29.007129,40.389746],[26.738086,40.400244],[26.181348,39.990088],[26.113086,39.467383],[26.899219,39.549658],[26.681836,39.292236],[27.013672,38.886865],[26.763672,38.709619],[27.144238,38.451953],[26.674219,38.335742],[26.441309,38.641211],[26.290723,38.277197],[27.232422,37.978662],[27.067969,37.65791],[27.535059,37.163867],[27.262988,36.976562],[28.242383,37.029053],[27.453906,36.712158],[28.969629,36.715332],[29.689062,36.156689],[30.446094,36.269873],[30.644043,36.865674],[31.240625,36.821729],[32.794824,36.035889],[33.694727,36.181982],[34.703613,36.816797],[35.393164,36.575195],[36.048926,36.910596],[35.892676,35.916553],[36.153613,35.833887],[36.636719,36.233984],[36.658594,36.802539],[37.436328,36.643311],[38.191699,36.901562],[39.356641,36.681592],[40.705664,37.097705],[42.202734,37.297266],[42.358984,37.108594],[42.774609,37.371875],[44.114453,37.301855],[44.281836,36.978027],[44.765137,37.142432],[44.589941,37.710352],[44.211328,37.908057],[44.449902,38.334229],[44.023242,39.377441],[44.389355,39.422119],[44.587109,39.768555],[44.817188,39.650439],[44.768262,39.703516],[43.666211,40.126367],[43.439453,41.107129],[42.754102,41.578906],[41.510059,41.51748]]],[[[28.014453,41.969043],[27.011719,42.058643],[26.320898,41.716553],[26.624902,41.401758],[26.038965,40.726758],[26.79209,40.626611],[26.202734,40.075391],[27.499414,40.973145],[28.95625,41.008203],[29.057227,41.229736],[28.197852,41.554492],[28.014453,41.969043]]]]}},{type:"Feature",properties:{name:"突尼斯",full_name:"突尼斯共和国",iso_a2:"TN",iso_a3:"TUN",iso_n3:"788"},geometry:{type:"Polygon",coordinates:[[[11.50459,33.181934],[10.049023,34.056299],[11.120117,35.240283],[10.476562,36.175146],[11.053906,37.07251],[10.412305,36.731836],[10.196387,37.205859],[9.830273,37.135352],[9.687988,37.340381],[8.576563,36.937207],[8.207617,36.518945],[8.245605,34.734082],[7.500195,33.832471],[8.333398,32.543604],[9.044043,32.072363],[9.51875,30.229395],[10.216406,30.783203],[10.274609,31.684961],[11.50498,32.413672],[11.50459,33.181934]]]}},{type:"Feature",properties:{name:"特立尼达和多巴哥",full_name:"特立尼达和多巴哥共和国",iso_a2:"TT",iso_a3:"TTO",iso_n3:"780"},geometry:{type:"Polygon",coordinates:[[[-61.012109,10.134326],[-60.917627,10.840234],[-61.651172,10.718066],[-61.499316,10.268555],[-61.906104,10.069141],[-61.012109,10.134326]]]}},{type:"Feature",properties:{name:"汤加",full_name:"汤加王国",iso_a2:"TO",iso_a3:"TON",iso_n3:"776"},geometry:{type:"Polygon",coordinates:[[[-175.161914,-21.169336],[-175.362354,-21.106836],[-175.156592,-21.263672],[-175.161914,-21.169336]]]}},{type:"Feature",properties:{name:"多哥",full_name:"多哥共和国",iso_a2:"TG",iso_a3:"TGO",iso_n3:"768"},geometry:{type:"Polygon",coordinates:[[[.900488,10.993262],[-.068604,11.115625],[-.086328,10.673047],[.380859,10.291846],[.233398,9.463525],[.525684,9.398486],[.372559,8.759277],[.686328,8.354883],[.525586,6.850928],[1.187207,6.089404],[1.622656,6.216797],[1.77793,6.294629],[1.530957,6.992432],[1.600195,9.050049],[1.330078,9.996973],[.763379,10.38667],[.900488,10.993262]]]}},{type:"Feature",properties:{name:"东帝汶",full_name:"东帝汶民主共和国",iso_a2:"TL",iso_a3:"TLS",iso_n3:"626"},geometry:{type:"MultiPolygon",coordinates:[[[[125.068164,-9.511914],[127.296094,-8.424512],[125.381836,-8.575391],[124.922266,-8.94248],[125.149023,-9.042578],[124.960156,-9.21377],[125.068164,-9.511914]]],[[[124.036328,-9.341602],[124.282324,-9.42793],[124.444434,-9.190332],[124.036328,-9.341602]]]]}},{type:"Feature",properties:{name:"泰国",full_name:"泰王国",iso_a2:"TH",iso_a3:"THA",iso_n3:"764"},geometry:{type:"MultiPolygon",coordinates:[[[[98.409082,7.902051],[98.32207,8.166309],[98.296289,7.776074],[98.409082,7.902051]]],[[[100.122461,20.31665],[99.458887,20.363037],[99.485938,20.149854],[99.074219,20.099365],[98.916699,19.7729],[98.015039,19.749512],[97.745898,18.588184],[97.373926,18.517969],[98.660742,16.33042],[98.888281,16.351904],[98.202148,14.975928],[99.136816,13.716699],[99.123926,13.030762],[99.614746,11.781201],[98.757227,10.660937],[98.702539,10.190381],[98.241797,8.767871],[98.305469,8.226221],[98.703516,8.256738],[100.119141,6.441992],[100.261426,6.682715],[101.053516,6.242578],[101.113965,5.636768],[101.556055,5.907764],[101.873633,5.825293],[102.101074,6.242236],[101.497949,6.865283],[100.423535,7.187842],[100.160742,7.599268],[100.256641,7.774902],[100.545215,7.226904],[100.279395,8.268506],[99.835547,9.288379],[99.253906,9.265234],[99.165039,10.319824],[99.989062,12.170801],[99.990527,13.243457],[100.235645,13.484473],[100.962695,13.431982],[100.897754,12.653809],[101.835742,12.640381],[102.594141,12.203027],[102.933887,11.706689],[102.336328,13.560303],[103.199414,14.332617],[105.183301,14.34624],[105.497363,14.590674],[105.641016,15.656543],[104.819336,16.466064],[104.739648,17.46167],[103.949609,18.318994],[103.366992,18.42334],[102.680078,17.824121],[102.101465,18.210645],[100.955859,17.541113],[101.211914,19.54834],[100.513574,19.553467],[100.519531,20.17793],[100.122461,20.31665]]]]}},{type:"Feature",properties:{name:"坦桑尼亚",full_name:"坦桑尼亚联合共和国",iso_a2:"TZ",iso_a3:"TZA",iso_n3:"834"},geometry:{type:"MultiPolygon",coordinates:[[[[39.496484,-6.174609],[39.308984,-5.721973],[39.182324,-6.172559],[39.480957,-6.453711],[39.496484,-6.174609]]],[[[39.865039,-4.906152],[39.673438,-4.927051],[39.749316,-5.443848],[39.865039,-4.906152]]],[[[32.919922,-9.407422],[33.888867,-9.670117],[33.995605,-9.49541],[34.320898,-9.731543],[34.60791,-11.080469],[34.959473,-11.578125],[35.911328,-11.454688],[36.305664,-11.706348],[37.372852,-11.710449],[37.920215,-11.294727],[38.491797,-11.413281],[40.463574,-10.464355],[39.725195,-10.000488],[39.304004,-8.443848],[39.288477,-7.517871],[39.546094,-7.024023],[38.804688,-6.070117],[39.221777,-4.692383],[37.608203,-3.49707],[37.643848,-3.04541],[33.903223,-1.002051],[30.509961,-1.067285],[30.876562,-2.143359],[30.553613,-2.400098],[30.433496,-2.874512],[30.780273,-2.984863],[30.790234,-3.274609],[29.947266,-4.307324],[29.403223,-4.449316],[29.54082,-6.313867],[30.212695,-7.037891],[30.751172,-8.193652],[31.033398,-8.597656],[32.919922,-9.407422]]]]}},{type:"Feature",properties:{name:"塔吉克斯坦",full_name:"塔吉克斯坦共和国",iso_a2:"TJ",iso_a3:"TJK",iso_n3:"762"},geometry:{type:"Polygon",coordinates:[[[67.758984,37.172217],[68.067773,36.949805],[68.911816,37.333936],[69.303906,37.116943],[69.49209,37.553076],[70.188672,37.582471],[70.214648,37.924414],[70.878906,38.456396],[71.255859,38.306982],[71.278516,37.918408],[71.582227,37.910107],[71.43291,37.127539],[71.665625,36.696924],[73.38291,37.462256],[73.720605,37.41875],[73.653516,37.239355],[74.349023,37.41875],[74.891309,37.231641],[75.11875,37.385693],[74.812305,38.460303],[73.80166,38.606885],[73.631641,39.448877],[72.22998,39.20752],[71.470312,39.603662],[70.799316,39.394727],[70.501172,39.587354],[69.297656,39.524805],[69.530273,40.097314],[69.966797,40.202246],[70.515137,39.949902],[70.958008,40.238867],[70.371582,40.384131],[70.751074,40.721777],[70.401953,41.035107],[69.712891,40.656982],[69.357227,40.767383],[69.274902,40.198096],[68.630664,40.16709],[68.97207,40.089941],[68.463281,39.536719],[67.426172,39.465576],[67.357617,39.216699],[68.13252,38.927637],[68.350293,38.211035],[67.758984,37.172217]]]}},{type:"Feature",properties:{name:"叙利亚",full_name:"阿拉伯叙利亚共和国",iso_a2:"SY",iso_a3:"SYR",iso_n3:"760"},geometry:{type:"Polygon",coordinates:[[[35.892676,35.916553],[35.97627,34.629199],[36.383887,34.65791],[36.584961,34.22124],[35.869141,33.431738],[35.816125,33.361879],[35.787305,32.734912],[36.818359,32.317285],[38.773535,33.372217],[40.987012,34.429053],[41.295996,36.38335],[42.358984,37.108594],[42.202734,37.297266],[40.705664,37.097705],[39.356641,36.681592],[38.191699,36.901562],[37.436328,36.643311],[36.658594,36.802539],[36.636719,36.233984],[36.153613,35.833887],[35.892676,35.916553]]]}},{type:"Feature",properties:{name:"瑞士",full_name:"瑞士联邦",iso_a2:"CH",iso_a3:"CHE",iso_n3:"756"},geometry:{type:"Polygon",coordinates:[[[9.524023,47.524219],[8.572656,47.775635],[8.454004,47.596191],[7.615625,47.592725],[6.968359,47.453223],[5.97002,46.214697],[6.758105,46.415771],[7.021094,45.925781],[7.787891,45.921826],[8.422559,46.446045],[9.02373,45.845703],[9.260156,46.475195],[10.12832,46.238232],[10.452832,46.864941],[9.580273,47.057373],[9.487695,47.062256],[9.527539,47.270752],[9.524023,47.524219]]]}},{type:"Feature",properties:{name:"瑞典",full_name:"瑞典",iso_a2:"SE",iso_a3:"SWE",iso_n3:"752"},geometry:{type:"MultiPolygon",coordinates:[[[[19.076465,57.835938],[18.136523,57.556641],[18.146387,56.920508],[19.076465,57.835938]]],[[[11.388281,59.036523],[11.248242,58.369141],[12.883691,56.617725],[12.80166,56.263916],[12.471191,56.290527],[12.88584,55.411377],[14.17373,55.396631],[14.401953,55.976758],[15.82666,56.124951],[16.34873,56.709277],[16.923828,58.492578],[16.214258,58.63667],[18.285352,59.109375],[18.560254,59.394482],[17.964258,59.359375],[18.970508,59.757227],[17.955762,60.589795],[17.250977,60.700781],[17.410254,62.508398],[20.762695,63.867822],[21.519629,64.463086],[21.410352,65.317432],[22.400977,65.862109],[24.155469,65.805273],[23.638867,67.954395],[20.622168,69.036865],[20.116699,69.020898],[19.969824,68.356396],[18.303027,68.55542],[17.916699,67.964893],[17.324609,68.103809],[16.783594,67.89502],[15.483789,66.305957],[14.543262,66.129346],[14.479688,65.301465],[13.650293,64.581543],[14.141211,64.173535],[12.792773,64],[12.175195,63.595947],[12.155371,61.720752],[12.880762,61.352295],[12.294141,61.002686],[12.486133,60.106787],[11.680762,59.592285],[11.642773,58.926074],[11.388281,59.036523]]]]}},{type:"Feature",properties:{name:"斯威士兰",full_name:"斯威士兰王国",iso_a2:"SZ",iso_a3:"SWZ",iso_n3:"748"},geometry:{type:"Polygon",coordinates:[[[31.948242,-25.957617],[31.207324,-25.843359],[30.794336,-26.764258],[31.469531,-27.295508],[31.958398,-27.305859],[32.112891,-26.839453],[31.948242,-25.957617]]]}},{type:"Feature",properties:{name:"苏里南",full_name:"苏里南共和国",iso_a2:"SR",iso_a3:"SUR",iso_n3:"740"},geometry:{type:"Polygon",coordinates:[[[-54.155957,5.358984],[-54.054199,5.80791],[-54.833691,5.98833],[-55.828174,5.96167],[-55.897607,5.699316],[-56.969824,5.992871],[-57.194775,5.548438],[-57.331006,5.020166],[-57.917041,4.82041],[-58.054297,4.10166],[-57.646729,3.394531],[-57.303662,3.3771],[-57.197363,2.853271],[-56.482812,1.942139],[-55.929639,1.8875],[-56.137695,2.259033],[-55.957471,2.520459],[-54.978662,2.597656],[-54.61626,2.326758],[-54.00957,3.448535],[-54.479688,4.836523],[-54.155957,5.358984]]]}},{type:"Feature",properties:{name:"南苏丹",full_name:"南苏丹共和国",iso_a2:"SS",iso_a3:"SSD",iso_n3:"728"},geometry:{type:"Polygon",coordinates:[[[33.976074,4.220215],[35.268359,5.492285],[34.710645,6.660303],[33.902441,7.509521],[32.998926,7.899512],[33.281055,8.437256],[34.072754,8.545264],[34.078125,9.461523],[33.871484,9.506152],[33.907031,10.181445],[33.130078,10.745947],[33.199316,12.217285],[32.721875,12.223096],[32.736719,12.009668],[32.072266,12.006738],[32.420801,11.089111],[31.224902,9.799268],[30.755371,9.731201],[30.003027,10.277393],[28.844531,9.326074],[28.048926,9.328613],[27.880859,9.601611],[26.658691,9.484131],[25.858203,10.406494],[25.211719,10.329932],[24.531934,8.886914],[24.147363,8.665625],[24.291406,8.291406],[24.85332,8.137549],[25.278906,7.42749],[26.361816,6.635303],[26.514258,6.069238],[27.143945,5.722949],[27.40332,5.10918],[28.19209,4.350244],[29.676855,4.586914],[30.838574,3.490723],[31.152344,3.785596],[31.798047,3.802637],[32.135938,3.519727],[32.997266,3.880176],[33.489355,3.755078],[33.976074,4.220215]]]}},{type:"Feature",properties:{name:"苏丹",full_name:"苏丹共和国",iso_a2:"SD",iso_a3:"SDN",iso_n3:"729"},geometry:{type:"Polygon",coordinates:[[[34.078125,9.461523],[34.343945,10.658643],[34.931445,10.864795],[35.112305,11.816553],[35.670215,12.62373],[36.125195,12.757031],[36.524316,14.256836],[36.426758,15.13208],[37.008984,17.058887],[37.411035,17.061719],[38.609473,18.005078],[37.471289,18.820117],[37.258594,21.108545],[36.871387,21.996729],[31.434473,21.99585],[31.400293,22.202441],[31.092676,21.994873],[24.980273,21.99585],[24.979492,20.002588],[23.980273,19.995947],[23.980273,19.496631],[23.970801,15.721533],[22.933887,15.533105],[22.932324,15.162109],[22.381543,14.550488],[22.538574,14.161865],[22.106445,13.799805],[22.228125,13.32959],[21.825293,12.790527],[22.352344,12.660449],[22.591113,11.579883],[22.922656,11.344873],[22.860059,10.919678],[23.646289,9.8229],[23.537305,8.81582],[24.147363,8.665625],[24.531934,8.886914],[25.211719,10.329932],[25.858203,10.406494],[26.658691,9.484131],[27.880859,9.601611],[28.048926,9.328613],[28.844531,9.326074],[30.003027,10.277393],[30.755371,9.731201],[31.224902,9.799268],[32.420801,11.089111],[32.072266,12.006738],[32.736719,12.009668],[32.721875,12.223096],[33.199316,12.217285],[33.130078,10.745947],[33.907031,10.181445],[33.871484,9.506152],[34.078125,9.461523]]]}},{type:"Feature",properties:{name:"斯里兰卡",full_name:"斯里兰卡民主社会主义共和国",iso_a2:"LK",iso_a3:"LKA",iso_n3:"144"},geometry:{type:"Polygon",coordinates:[[[79.982324,9.812695],[80.42832,9.480957],[80.086328,9.577832],[79.783496,8.018457],[79.712988,8.182324],[79.859375,6.829297],[80.095313,6.153174],[80.724121,5.979053],[81.637402,6.425146],[81.874121,7.28833],[80.711133,9.366357],[79.982324,9.812695]]]}},{type:"Feature",properties:{name:"西班牙",full_name:"西班牙王国",iso_a2:"ES",iso_a3:"ESP",iso_n3:"724"},geometry:{type:"MultiPolygon",coordinates:[[[[3.145313,39.790088],[3.158691,39.970508],[2.37002,39.57207],[3.072852,39.30127],[3.461816,39.697754],[3.145313,39.790088]]],[[[1.445215,38.918701],[1.564453,39.121045],[1.22334,38.903857],[1.445215,38.918701]]],[[[-1.794043,43.407324],[-4.523047,43.415723],[-8.004687,43.694385],[-9.178076,43.174023],[-8.777148,41.941064],[-8.266064,42.137402],[-8.15249,41.811963],[-6.618262,41.942383],[-6.2125,41.532031],[-6.928467,41.009131],[-6.975391,39.798389],[-7.535693,39.661572],[-6.997949,39.056445],[-7.343018,38.457422],[-6.957568,38.187891],[-7.443945,37.728271],[-7.406152,37.179443],[-6.86377,37.278906],[-6.216797,36.913574],[-6.384131,36.637012],[-5.625488,36.025928],[-4.366846,36.718115],[-2.111523,36.77666],[-1.640967,37.386963],[-.721582,37.631055],[-.520801,38.317285],[.201563,38.75918],[-.327002,39.519873],[.891113,40.722363],[.714648,40.822852],[3.004883,41.767432],[3.211426,42.431152],[1.706055,42.50332],[1.448828,42.437451],[1.42832,42.595898],[.696875,42.845117],[.631641,42.6896],[-.586426,42.798975],[-1.46084,43.051758],[-1.794043,43.407324]]],[[[-16.334473,28.379932],[-16.123633,28.575977],[-16.905322,28.3396],[-16.658008,28.007178],[-16.334473,28.379932]]],[[[-14.196777,28.169287],[-13.928027,28.253467],[-13.857227,28.738037],[-14.491797,28.100928],[-14.196777,28.169287]]],[[[-15.400586,28.147363],[-15.682764,28.154053],[-15.710303,27.784082],[-15.436768,27.810693],[-15.400586,28.147363]]]]}},{type:"Feature",properties:{name:"韩国",full_name:"大韩民国",iso_a2:"KR",iso_a3:"KOR",iso_n3:"410"},geometry:{type:"MultiPolygon",coordinates:[[[[126.633887,37.781836],[126.976855,36.939404],[126.487012,37.007471],[126.160547,36.771924],[126.487695,36.693799],[126.753027,35.871973],[126.291113,35.15415],[126.593359,34.824365],[126.264453,34.673242],[126.531445,34.314258],[127.24707,34.755127],[127.324609,34.463281],[127.714844,34.954688],[128.443945,34.870361],[128.510938,35.100977],[129.076758,35.122705],[129.419141,35.497852],[129.418262,37.059033],[128.374609,38.623438],[128.038965,38.308545],[127.090332,38.283887],[126.633887,37.781836]]],[[[128.741016,34.798535],[128.667969,35.008789],[128.489258,34.865283],[128.741016,34.798535]]],[[[126.326953,33.223633],[126.901172,33.515137],[126.337695,33.4604],[126.326953,33.223633]]]]}},{type:"Feature",properties:{name:"南非",full_name:"南非共和国",iso_a2:"ZA",iso_a3:"ZAF",iso_n3:"710"},geometry:{type:"Polygon",coordinates:[[[29.364844,-22.193945],[28.210156,-22.693652],[27.085547,-23.57793],[26.835059,-24.24082],[25.912109,-24.747461],[25.443652,-25.714453],[24.748145,-25.817383],[23.05752,-25.312305],[22.597656,-26.132715],[21.646289,-26.854199],[20.685059,-26.822461],[20.793164,-25.915625],[19.980469,-24.776758],[19.980469,-28.45127],[19.161719,-28.93877],[18.102734,-28.87168],[17.447949,-28.698145],[17.05625,-28.031055],[16.447559,-28.617578],[18.21084,-31.74248],[18.325293,-32.50498],[17.851074,-32.827441],[18.433008,-33.717285],[18.410352,-34.295605],[18.752148,-34.082617],[18.831348,-34.364062],[20.020605,-34.785742],[20.529883,-34.463086],[21.788965,-34.372656],[22.553809,-34.010059],[25.574219,-34.035352],[25.805859,-33.737109],[26.613672,-33.707422],[27.860645,-33.053906],[29.971191,-31.32207],[31.335156,-29.378125],[32.285742,-28.621484],[32.886133,-26.849316],[32.112891,-26.839453],[31.958398,-27.305859],[31.469531,-27.295508],[30.794336,-26.764258],[31.207324,-25.843359],[31.948242,-25.957617],[31.98584,-24.460645],[31.287891,-22.402051],[29.364844,-22.193945]],[[28.736914,-30.101953],[28.39209,-30.147559],[28.056836,-30.631055],[27.753125,-30.6],[27.056934,-29.625586],[27.735547,-28.940039],[28.625781,-28.581738],[29.390723,-29.269727],[29.098047,-29.919043],[28.736914,-30.101953]]]}},{type:"Feature",properties:{name:"索马里",full_name:"索马里联邦共和国",iso_a2:"SO",iso_a3:"SOM",iso_n3:"706"},geometry:{type:"Polygon",coordinates:[[[41.532715,-1.695312],[43.717578,.857861],[46.878809,3.285645],[47.975293,4.497021],[49.049316,6.173633],[49.852051,7.962549],[50.825,9.428174],[50.930078,10.335547],[51.390234,10.422607],[51.031836,10.444775],[51.254883,11.830713],[50.792285,11.983691],[50.110059,11.529297],[48.938574,11.258447],[48.938086,9.451758],[47.978223,7.99707],[44.940527,4.912012],[43.583496,4.85498],[41.883984,3.977734],[40.964453,2.814648],[40.978711,-.870313],[41.532715,-1.695312]]]}},{type:"Feature",properties:{name:"索马里兰",full_name:"索马里兰",iso_a2:"-99",iso_a3:"-99",iso_n3:"-99"},geometry:{type:"Polygon",coordinates:[[[48.938574,11.258447],[47.40498,11.174023],[46.565039,10.745996],[45.816699,10.835889],[44.386523,10.430225],[43.245996,11.499805],[42.922754,10.999316],[42.656445,10.6],[42.841602,10.203076],[43.983789,9.008838],[46.978223,7.99707],[47.978223,7.99707],[48.938086,9.451758],[48.938574,11.258447]]]}},{type:"Feature",properties:{name:"所罗门群岛",full_name:"所罗门群岛",iso_a2:"SB",iso_a3:"SLB",iso_n3:"090"},geometry:{type:"MultiPolygon",coordinates:[[[[157.763477,-8.242188],[157.490625,-7.965723],[157.217578,-8.262793],[157.558008,-8.269922],[157.819336,-8.612012],[157.763477,-8.242188]]],[[[157.388965,-8.713477],[157.379492,-8.420898],[157.212305,-8.565039],[157.388965,-8.713477]]],[[[156.687891,-7.923047],[156.809082,-7.722852],[156.560938,-7.574023],[156.687891,-7.923047]]],[[[159.750391,-9.272656],[159.612305,-9.470703],[159.802734,-9.763477],[160.818945,-9.862793],[160.35459,-9.421582],[159.750391,-9.272656]]],[[[159.879102,-8.534277],[159.431445,-8.029004],[158.457422,-7.544727],[159.879102,-8.534277]]],[[[157.486719,-7.330371],[156.452539,-6.638281],[157.101562,-7.323633],[157.486719,-7.330371]]],[[[160.749414,-8.313965],[160.59043,-8.372754],[160.77207,-8.963867],[161.367383,-9.61123],[160.749414,-8.313965]]],[[[161.715332,-10.387305],[161.304785,-10.204395],[161.786816,-10.716895],[162.37334,-10.823242],[162.105371,-10.453809],[161.715332,-10.387305]]]]}},{type:"Feature",properties:{name:"斯洛伐克",full_name:"斯洛伐克共和国",iso_a2:"SK",iso_a3:"SVK",iso_n3:"703"},geometry:{type:"Polygon",coordinates:[[[22.538672,49.072705],[21.639648,49.411963],[20.362988,49.385254],[20.057617,49.181299],[19.441602,49.597705],[19.149414,49.4],[18.832227,49.510791],[16.953125,48.598828],[17.147363,48.005957],[17.761914,47.770166],[18.724219,47.787158],[18.791895,48.000293],[19.950391,48.146631],[20.490039,48.526904],[22.131836,48.405322],[22.538672,49.072705]]]}},{type:"Feature",properties:{name:"斯洛文尼亚",full_name:"斯洛文尼亚共和国",iso_a2:"SI",iso_a3:"SVN",iso_n3:"705"},geometry:{type:"Polygon",coordinates:[[[16.516211,46.499902],[16.093066,46.863281],[14.549805,46.399707],[13.7,46.520264],[13.378223,46.261621],[13.719824,45.587598],[13.57793,45.516895],[14.568848,45.657227],[15.339453,45.467041],[15.635938,46.200732],[16.516211,46.499902]]]}},{type:"Feature",properties:{name:"新加坡",full_name:"新加坡共和国",iso_a2:"SG",iso_a3:"SGP",iso_n3:"702"},geometry:{type:"Polygon",coordinates:[[[103.969727,1.331445],[103.817969,1.44707],[103.650195,1.325537],[103.969727,1.331445]]]}},{type:"Feature",properties:{name:"塞拉利昂",full_name:"塞拉利昂共和国",iso_a2:"SL",iso_a3:"SLE",iso_n3:"694"},geometry:{type:"MultiPolygon",coordinates:[[[[-10.283203,8.485156],[-10.712109,8.335254],[-10.500537,8.687549],[-10.690527,9.314258],[-11.273633,9.996533],[-12.427979,9.898145],[-13.292676,9.049219],[-13.059473,8.881152],[-13.181836,8.576904],[-12.894092,8.629785],[-13.272754,8.429736],[-12.850879,7.818701],[-12.480273,7.753271],[-12.485645,7.386279],[-11.50752,6.906543],[-10.647461,7.759375],[-10.283203,8.485156]]],[[[-12.526074,7.436328],[-12.615234,7.637207],[-12.951611,7.57085],[-12.526074,7.436328]]]]}},{type:"Feature",properties:{name:"塞舌尔",full_name:"塞舌尔共和国",iso_a2:"SC",iso_a3:"SYC",iso_n3:"690"},geometry:{type:"Polygon",coordinates:[[[55.540332,-4.693066],[55.383398,-4.609277],[55.542969,-4.785547],[55.540332,-4.693066]]]}},{type:"Feature",properties:{name:"塞尔维亚",full_name:"塞尔维亚共和国",iso_a2:"RS",iso_a3:"SRB",iso_n3:"688"},geometry:{type:"Polygon",coordinates:[[[22.705078,44.237793],[22.64209,44.650977],[22.093066,44.541943],[21.360059,44.82666],[21.490234,45.1479],[20.241797,46.108594],[18.905371,45.931738],[19.004688,45.399512],[19.4,45.2125],[19.007129,44.869189],[19.348633,44.880908],[19.118457,44.359961],[19.583789,44.043457],[19.24502,43.965039],[19.495117,43.642871],[19.194336,43.533301],[20.344336,42.82793],[20.063965,42.547266],[20.566211,41.873682],[21.5625,42.24751],[22.344043,42.313965],[22.466797,42.84248],[22.967969,43.142041],[22.369629,43.781299],[22.705078,44.237793]]]}},{type:"Feature",properties:{name:"塞内加尔",full_name:"塞内加尔共和国",iso_a2:"SN",iso_a3:"SEN",iso_n3:"686"},geometry:{type:"Polygon",coordinates:[[[-12.280615,14.809033],[-13.409668,16.05918],[-14.53374,16.655957],[-16.239014,16.531299],[-16.535254,15.838379],[-17.147168,14.922021],[-17.535645,14.755127],[-16.618115,14.040527],[-16.766943,13.904932],[-16.562305,13.587305],[-15.509668,13.58623],[-15.10835,13.812109],[-13.826709,13.407812],[-14.246777,13.23584],[-15.151123,13.556494],[-15.834277,13.156445],[-16.76333,13.06416],[-16.743896,12.585449],[-16.442871,12.609473],[-16.760303,12.525781],[-16.711816,12.354834],[-15.196094,12.679932],[-13.729248,12.673926],[-12.399072,12.340088],[-11.389404,12.404395],[-11.390381,12.941992],[-12.054199,13.633057],[-12.280615,14.809033]]]}},{type:"Feature",properties:{name:"沙特阿拉伯",full_name:"沙特阿拉伯王国",iso_a2:"SA",iso_a3:"SAU",iso_n3:"682"},geometry:{type:"MultiPolygon",coordinates:[[[[41.987695,16.715625],[41.860449,17.002539],[41.801563,16.77876],[42.157812,16.570703],[41.987695,16.715625]]],[[[51.977637,18.996143],[54.977344,19.995947],[55.641016,22.001855],[55.18584,22.704102],[52.555078,22.932812],[51.568359,24.286182],[51.267969,24.607227],[50.804395,24.789258],[50.081055,25.961377],[50.149805,26.662646],[48.797168,27.724316],[48.44248,28.54292],[47.671289,28.533154],[47.433203,28.989551],[46.531445,29.09624],[44.69082,29.202344],[42.074414,31.080371],[40.369336,31.938965],[39.14541,32.124512],[36.958594,31.491504],[37.980078,30.5],[37.469238,29.995068],[36.755273,29.866016],[36.068457,29.200537],[34.950781,29.353516],[34.625,28.064502],[35.180469,28.034863],[37.148828,25.291113],[37.543066,24.29165],[38.46416,23.711865],[39.062012,22.592188],[38.987891,21.881738],[39.276074,20.973975],[39.72832,20.390332],[40.75918,19.755469],[41.229492,18.678418],[42.293945,17.434961],[42.799316,16.371777],[43.165039,16.689404],[43.190918,17.359375],[43.417969,17.51626],[43.916992,17.324707],[46.727637,17.265576],[47.143555,16.94668],[48.172168,18.156934],[49.041992,18.581787],[51.977637,18.996143]]]]}},{type:"Feature",properties:{name:"圣多美和普林西比",full_name:"圣多美和普林西比民主共和国",iso_a2:"ST",iso_a3:"STP",iso_n3:"678"},geometry:{type:"Polygon",coordinates:[[[6.659961,.120654],[6.686914,.404395],[6.468164,.227344],[6.659961,.120654]]]}},{type:"Feature",properties:{name:"圣马力诺",full_name:"圣马力诺共和国",iso_a2:"SM",iso_a3:"SMR",iso_n3:"674"},geometry:{type:"Polygon",coordinates:[[[12.485254,43.901416],[12.503711,43.989746],[12.396875,43.93457],[12.485254,43.901416]]]}},{type:"Feature",properties:{name:"萨摩亚",full_name:"萨摩亚独立国",iso_a2:"WS",iso_a3:"WSM",iso_n3:"882"},geometry:{type:"Polygon",coordinates:[[[-172.333496,-13.465234],[-172.778516,-13.516797],[-172.224951,-13.804297],[-172.333496,-13.465234]]]}},{type:"Feature",properties:{name:"圣文森特和格林纳丁斯",full_name:"圣文森特和格林纳丁斯",iso_a2:"VC",iso_a3:"VCT",iso_n3:"670"},geometry:{type:"Polygon",coordinates:[[[-61.174512,13.158105],[-61.138965,13.35874],[-61.268457,13.287695],[-61.174512,13.158105]]]}},{type:"Feature",properties:{name:"圣卢西亚",full_name:"圣卢西亚",iso_a2:"LC",iso_a3:"LCA",iso_n3:"662"},geometry:{type:"Polygon",coordinates:[[[-60.895215,13.821973],[-60.908105,14.093359],[-61.073145,13.865576],[-60.895215,13.821973]]]}},{type:"Feature",properties:{name:"圣基茨和尼维斯",full_name:"圣基茨和尼维斯联邦",iso_a2:"KN",iso_a3:"KNA",iso_n3:"659"},geometry:{type:"Polygon",coordinates:[[[-62.630664,17.23999],[-62.827051,17.386426],[-62.838916,17.339258],[-62.630664,17.23999]]]}},{type:"Feature",properties:{name:"卢旺达",full_name:"卢旺达共和国",iso_a2:"RW",iso_a3:"RWA",iso_n3:"646"},geometry:{type:"Polygon",coordinates:[[[29.576953,-1.387891],[28.876367,-2.400293],[29.014355,-2.720215],[29.698047,-2.794727],[29.930176,-2.339551],[30.553613,-2.400098],[30.876562,-2.143359],[30.509961,-1.067285],[29.930078,-1.469922],[29.576953,-1.387891]]]}},{type:"Feature",properties:{name:"俄罗斯",full_name:"俄罗斯联邦",iso_a2:"RU",iso_a3:"RUS",iso_n3:"643"},geometry:{type:"MultiPolygon",coordinates:[[[[-179.798535,68.94043],[-180,68.738672],[-180,68.493896],[-180,68.249121],[-180,68.004395],[-180,67.759619],[-180,67.514844],[-180,67.270117],[-180,67.025342],[-180,66.780566],[-180,66.53584],[-180,66.291064],[-180,66.046289],[-180,65.801562],[-180,65.556787],[-180,65.311963],[-180,65.067236],[-179.3521,65.516748],[-179.683301,66.184131],[-178.526562,66.401562],[-178.939062,66.032764],[-178.4125,65.495557],[-176.093262,65.471045],[-175.395117,64.802393],[-173.729736,64.364502],[-173.32749,64.539551],[-173.275488,64.289648],[-172.903174,64.526074],[-172.401465,64.413916],[-173.085791,64.817334],[-172.213184,65.048145],[-172.783301,65.681055],[-171.105859,65.511035],[-171.421533,65.810352],[-170.666309,65.621533],[-169.777881,66.143115],[-170.604443,66.248926],[-171.795557,66.931738],[-173.00752,67.064893],[-172.520117,66.95249],[-173.258936,66.840088],[-173.679688,67.144775],[-174.550098,67.090625],[-173.773975,66.434668],[-174.065039,66.22959],[-174.084766,66.473096],[-174.394092,66.344238],[-174.924902,66.623145],[-175.345215,67.678076],[-178.373047,68.565674],[-178.055811,68.264893],[-179.798535,68.94043]]],[[[130.687305,42.302539],[130.709375,42.656396],[131.158301,42.626025],[131.938965,43.301953],[131.866602,43.095166],[132.30957,43.313525],[132.303809,42.883301],[133.159961,42.696973],[135.131055,43.525732],[137.685449,45.818359],[140.170605,48.523682],[140.520898,50.800195],[141.485254,52.178516],[140.839648,53.087891],[141.18125,53.015283],[141.37373,53.292773],[139.707422,54.277148],[138.657227,54.29834],[138.450684,53.537012],[138.52793,53.959863],[137.950488,53.603564],[137.253711,53.546143],[137.834766,53.946729],[137.339258,54.100537],[137.666016,54.283301],[137.141602,54.182227],[137.155371,53.82168],[136.718848,53.804102],[136.797266,54.620996],[135.851562,54.583936],[135.2625,54.943311],[137.691504,56.139355],[142.580273,59.240137],[145.55459,59.413525],[146.049512,59.170557],[146.537207,59.456982],[148.72666,59.25791],[148.79707,59.532324],[149.642578,59.77041],[152.260645,59.223584],[151.121094,59.08252],[151.326758,58.875098],[152.817871,58.92627],[153.361133,59.214795],[155.160449,59.190137],[154.971289,59.449609],[154.149805,59.528516],[154.293066,59.83335],[157.08418,61.675684],[160.309375,61.894385],[159.79043,60.956641],[160.378906,61.025488],[160.173633,60.638428],[162.392578,61.662109],[163.085254,61.570557],[163.331738,62.550928],[164.418359,62.704639],[165.417383,62.44707],[164.207227,62.292236],[163.709961,60.916797],[162.068164,60.466406],[158.275195,58.008984],[156.829883,57.779639],[156.848828,57.290186],[155.98252,56.695215],[155.620312,54.864551],[156.847461,51.006592],[158.103516,51.809619],[158.47207,53.032373],[160.025098,53.12959],[160.074414,54.18916],[162.105566,54.752148],[161.723926,55.496143],[162.084961,56.089648],[162.671484,56.490088],[163.038379,56.521875],[162.628125,56.232275],[162.840332,56.065625],[163.335547,56.23252],[163.256543,56.688037],[162.791113,56.875391],[163.225781,57.790381],[162.654297,57.948242],[162.391406,57.717236],[161.960059,58.076904],[163.743848,60.028027],[164.953711,59.843604],[166.352148,60.484814],[166.273047,59.85625],[167.226758,60.406299],[169.226758,60.595947],[170.350977,59.965527],[170.608203,60.434912],[172.856543,61.469189],[177.159473,62.560986],[177.023535,62.777246],[179.120703,62.320361],[179.570508,62.6875],[178.44043,63.605566],[178.381445,64.260889],[177.6875,64.304736],[177.427441,64.763379],[176.140918,64.58584],[176.056543,64.904736],[174.548828,64.683887],[176.061133,64.960889],[177.06875,64.78667],[177.037305,64.999658],[176.341016,65.047314],[176.880859,65.081934],[178.519531,64.602979],[180,65.067236],[180,68.983447],[179.272656,69.259668],[175.921484,69.895312],[173.277441,69.823828],[170.486816,70.107568],[170.160938,69.626562],[170.99541,69.045312],[169.609863,68.786035],[167.856836,69.728223],[166.820312,69.499561],[163.201367,69.714746],[161.536914,69.379541],[161.565625,68.905176],[160.856055,68.53833],[161.309863,68.982275],[160.910742,69.606348],[159.729395,69.870215],[160.006445,70.309668],[159.350684,70.790723],[156.68457,71.09375],[152.508789,70.834473],[151.582422,71.286963],[150.097656,71.226562],[150.599805,71.520117],[148.968164,71.690479],[150.016895,71.895654],[149.501563,72.164307],[147.261816,72.327881],[146.073242,71.80835],[145.188574,71.695801],[145.758594,72.225879],[146.113281,71.944971],[146.831836,72.29541],[144.294922,72.192627],[146.25293,72.442236],[140.808203,72.890967],[141.079297,72.586914],[139.14082,72.329736],[140.187695,72.191309],[139.359277,71.951367],[139.98418,71.491504],[138.23418,71.596338],[137.939648,71.133398],[136.090332,71.61958],[133.688867,71.434229],[132.653906,71.925977],[131.021582,70.746094],[129.761914,71.119531],[128.843262,71.663477],[129.210254,71.916943],[128.911426,71.755322],[127.841406,72.308252],[129.410645,72.166309],[128.418262,72.535156],[129.250391,72.705176],[128.599023,72.895166],[129.100586,73.112354],[127.740332,73.481543],[126.552539,73.334912],[124.541211,73.75127],[123.491113,73.666357],[123.622266,73.193262],[122.260156,72.880566],[119.750391,72.979102],[118.430273,73.246533],[118.870898,73.537891],[115.337695,73.702588],[113.510352,73.50498],[113.664551,72.634521],[113.032813,73.913867],[112.147266,73.708936],[111.550586,74.028516],[110.261426,74.017432],[109.706738,73.74375],[110.868164,73.730713],[109.855273,73.472461],[105.143945,72.777051],[112.924902,75.015039],[113.726172,75.450635],[112.453027,75.830176],[113.567578,75.568408],[113.272656,76.25166],[112.65625,76.053564],[111.39248,76.68667],[106.413574,76.512256],[107.429785,76.926562],[104.202441,77.101807],[106.05957,77.390527],[104.014551,77.73042],[100.989941,76.990479],[101.597754,76.439209],[98.805664,76.480664],[99.540723,75.798584],[98.662012,76.242676],[96.49707,75.891211],[95.65332,75.892188],[95.578711,76.137305],[93.259277,76.098779],[92.89043,75.909961],[94.075195,75.912891],[87.005957,75.169824],[87.041797,74.778857],[85.791016,74.645117],[87.229688,74.363867],[86.001367,74.316016],[87.571191,73.810742],[85.938965,73.456494],[86.677051,73.106787],[85.792578,73.43833],[86.892969,73.887109],[80.583203,73.568457],[80.827051,72.488281],[83.534375,71.683936],[83.15127,71.103613],[83.735938,70.546484],[83.080762,70.093018],[82.869141,70.954834],[82.221191,70.395703],[82.163184,70.598145],[83.233594,71.668164],[81.661621,71.715967],[79.42207,72.380762],[77.471582,72.192139],[78.232422,71.952295],[77.777539,71.836426],[76.871387,72.033008],[76.032422,71.9104],[76.433398,71.55249],[78.942187,70.933789],[75.332031,71.341748],[75.741406,72.29624],[75.152441,72.852734],[74.992188,72.144824],[73.08623,71.444922],[74.343359,70.578711],[73.578125,69.802979],[73.836035,69.143213],[76.000977,69.235059],[77.650684,68.903027],[77.588281,67.751904],[78.922461,67.589111],[77.174414,67.778516],[77.238477,68.46958],[76.10752,68.975732],[74.57959,68.751221],[74.769531,67.766357],[72.321582,66.332129],[70.339453,66.342383],[69.194336,66.578662],[69.217773,66.828613],[70.690723,66.745312],[70.724902,66.519434],[71.539551,66.683105],[71.365234,66.961523],[73.066797,67.766943],[73.591699,68.481885],[72.576758,68.968701],[72.704492,70.963232],[71.867285,71.457373],[72.812109,72.691406],[69.611816,72.981934],[68.269238,71.682812],[66.639648,71.081396],[67.284766,70.738721],[66.89668,69.553809],[67.624121,69.584424],[68.542773,68.96709],[69.140527,68.950635],[68.371191,68.314258],[64.19043,69.534668],[60.909082,69.847119],[60.170605,69.590918],[60.933594,68.986768],[59.725684,68.351611],[59.099023,68.444336],[59.057324,69.006055],[57.126855,68.554004],[55.418066,68.567822],[54.861328,68.201855],[53.260547,68.26748],[53.930859,68.435547],[53.797656,68.907471],[54.491211,68.992334],[53.801953,68.995898],[52.344043,68.608154],[52.39668,68.351709],[51.994727,68.53877],[48.754297,67.895947],[48.833203,67.681494],[47.874707,67.58418],[47.655859,66.975928],[46.492383,66.800195],[44.902148,67.413135],[45.528711,67.757568],[46.69043,67.848828],[45.891992,68.479688],[43.333203,68.673389],[44.204688,68.25376],[44.104395,66.008594],[42.210547,66.519678],[39.816504,65.597949],[40.444922,64.778711],[39.758008,64.577051],[36.882812,65.172363],[36.624219,64.750537],[38.062207,64.091016],[37.442188,63.813379],[35.035352,64.440234],[34.406445,65.395752],[34.691797,65.951855],[31.895313,67.161426],[34.482617,66.550342],[38.653906,66.069043],[40.10332,66.299951],[41.188965,66.826172],[40.966406,67.713477],[35.85791,69.191748],[33.684375,69.310254],[33.141211,69.068701],[33.454297,69.428174],[32.377734,69.479102],[32.176758,69.674023],[33.007812,69.722119],[31.98457,69.953662],[31.546973,69.696924],[30.869727,69.783447],[30.860742,69.538428],[30.180176,69.63584],[28.96582,69.021973],[28.414062,68.90415],[28.685156,68.189795],[29.988086,67.668262],[29.066211,66.891748],[30.102734,65.72627],[29.604199,64.968408],[30.51377,64.2],[29.991504,63.735156],[31.533984,62.8854],[27.797656,60.536133],[28.512793,60.677295],[29.069141,60.191455],[30.172656,59.957129],[28.058008,59.781543],[28.0125,59.484277],[27.43418,58.787256],[27.778516,57.870703],[27.351953,57.528125],[27.828613,57.293311],[27.639453,56.845654],[28.147949,56.14292],[29.375,55.938721],[29.482227,55.68457],[30.233594,55.845215],[30.906836,55.57002],[30.798828,54.783252],[31.754199,53.810449],[32.706445,53.419434],[32.141992,53.091162],[31.417871,53.196045],[31.258789,53.016699],[31.763379,52.101074],[33.735254,52.344775],[34.397852,51.78042],[34.213867,51.255371],[35.311914,51.043896],[35.591113,50.36875],[36.619434,50.209229],[37.422852,50.411475],[38.046875,49.92002],[38.258594,50.052344],[40.080664,49.576855],[40.108789,49.251562],[39.686523,49.00791],[40.003613,48.82207],[39.644727,48.591211],[39.95791,48.268896],[39.778711,47.887549],[38.368848,47.609961],[38.214355,47.091455],[39.02373,47.272217],[39.293457,47.105762],[38.500977,46.663672],[37.766504,46.636133],[38.492285,46.090527],[37.933105,46.001709],[37.647168,45.377197],[36.865918,45.427051],[36.627637,45.151318],[38.717285,44.288086],[39.97832,43.419824],[40.648047,43.533887],[41.580566,43.219238],[42.760645,43.16958],[43.825977,42.571533],[44.870996,42.756396],[45.705273,42.498096],[45.638574,42.205078],[46.429883,41.890967],[47.791016,41.199268],[48.572852,41.844482],[47.463184,43.035059],[47.646484,43.884619],[47.462793,43.555029],[47.307031,44.103125],[46.707227,44.50332],[47.463281,45.679688],[48.72959,45.896826],[49.232227,46.337158],[48.541211,46.605615],[48.959375,46.774609],[48.166992,47.708789],[47.292383,47.740918],[46.660938,48.412256],[47.031348,49.150293],[46.889551,49.696973],[47.429199,50.357959],[48.334961,49.858252],[48.758984,49.92832],[48.625098,50.612695],[50.793945,51.729199],[51.344531,51.475342],[52.219141,51.709375],[53.338086,51.482373],[54.555273,50.535791],[54.641602,51.011572],[55.68623,50.582861],[56.491406,51.019531],[57.442188,50.888867],[57.838867,51.09165],[59.523047,50.492871],[60.058594,50.850293],[60.942285,50.695508],[61.389453,50.861035],[61.554688,51.324609],[60.030273,51.933252],[60.994531,52.336865],[60.774414,52.675781],[61.047461,52.972461],[62.082715,53.00542],[61.199219,53.287158],[61.534961,53.523291],[60.979492,53.621729],[61.231055,54.019482],[65.088379,54.340186],[65.476953,54.623291],[68.155859,54.976709],[68.977246,55.3896],[70.182422,55.162451],[70.738086,55.305176],[71.093164,54.212207],[72.186035,54.325635],[72.446777,53.941846],[72.622266,54.134326],[73.712402,54.042383],[73.406934,53.447559],[73.858984,53.619727],[74.351562,53.487646],[76.837305,54.442383],[76.484766,54.022559],[77.859961,53.269189],[79.98623,50.774561],[80.735254,51.293408],[81.465918,50.739844],[82.493945,50.727588],[83.357324,50.99458],[84.323242,50.23916],[84.989453,50.061426],[85.232617,49.61582],[86.180859,49.499316],[86.675488,49.777295],[87.322852,49.085791],[87.814258,49.162305],[88.192578,49.451709],[89.395605,49.611523],[90.053711,50.09375],[92.354785,50.86416],[94.251074,50.556396],[94.614746,50.02373],[97.359766,49.741455],[98.250293,50.302441],[97.835742,51.05166],[98.893164,52.117285],[102.111523,51.353467],[102.288379,50.585107],[103.304395,50.200293],[105.383594,50.47373],[106.711133,50.312598],[107.233301,49.989404],[107.916602,49.947803],[108.613672,49.322803],[110.709766,49.142969],[112.806445,49.523584],[114.29707,50.274414],[115.429199,49.896484],[116.216797,50.009277],[116.683301,49.823779],[117.873438,49.513477],[119.259863,50.066406],[119.163672,50.406006],[120.749805,52.096533],[120.656152,52.56665],[120.094531,52.787207],[120.985449,53.28457],[123.607813,53.546533],[125.649023,53.042285],[127.590234,50.208984],[127.550781,49.801807],[129.498145,49.388818],[130.553125,48.861182],[130.961914,47.709326],[132.47627,47.71499],[133.144043,48.105664],[134.293359,48.373438],[135.083406,48.436324],[134.665234,48.253906],[134.752344,47.71543],[134.167676,47.302197],[133.113477,45.130713],[131.851855,45.326855],[130.981641,44.844336],[131.257324,43.378076],[131.068555,42.902246],[130.424805,42.727051],[130.526953,42.5354],[130.687305,42.302539]]],[[[47.441992,80.853662],[44.90498,80.611279],[46.141406,80.446729],[47.705273,80.765186],[48.683594,80.633252],[47.441992,80.853662]]],[[[50.278125,80.927246],[49.087793,80.515771],[46.644434,80.300342],[47.737305,80.081689],[51.703613,80.687646],[50.278125,80.927246]]],[[[67.765332,76.237598],[68.941699,76.707666],[67.651855,77.011572],[64.463477,76.378174],[61.20166,76.282031],[58.88125,75.854785],[57.606836,75.34126],[55.810059,75.124902],[56.49873,74.95708],[55.582227,74.627686],[56.137109,74.496094],[53.762891,73.766162],[54.299902,73.350977],[56.963867,73.366553],[58.534668,74.498926],[59.674023,74.610156],[61.355957,75.314844],[67.765332,76.237598]]],[[[55.319824,73.308301],[53.251172,73.182959],[51.511328,71.648096],[53.411621,71.530127],[54.155664,71.125488],[53.383594,70.873535],[57.145898,70.589111],[57.625391,70.728809],[55.297852,71.935352],[56.42959,73.201172],[55.319824,73.308301]]],[[[96.526563,81.075586],[95.15957,81.270996],[92.710352,80.872168],[91.523828,80.358545],[93.654688,80.009619],[97.298438,80.272754],[97.869922,80.763281],[96.526563,81.075586]]],[[[97.674512,80.158252],[94.987305,80.096826],[93.070801,79.495312],[95.02041,79.052686],[98.411133,78.787793],[99.929297,78.961426],[99.041797,79.293018],[100.06123,79.7771],[98.596484,80.052197],[97.65166,79.760645],[97.674512,80.158252]]],[[[102.884766,79.253955],[101.590625,79.350439],[99.500293,77.976074],[105.312598,78.499902],[103.800781,79.149268],[102.412305,78.835449],[102.884766,79.253955]]],[[[140.04873,75.828955],[138.919531,76.196729],[138.207617,76.114941],[136.947656,75.325537],[139.099121,74.656543],[139.68125,74.964062],[142.472754,74.82041],[143.12793,74.970312],[142.30791,75.691699],[144.019727,75.044678],[145.359961,75.530469],[141.485449,76.137158],[140.815918,75.630713],[140.04873,75.828955]]],[[[146.795215,75.370752],[146.5375,75.581787],[146.148535,75.198291],[148.296875,74.800439],[150.646289,74.94458],[150.822363,75.156543],[146.795215,75.370752]]],[[[178.861523,70.826416],[180,70.993018],[180,71.537744],[178.683887,71.105664],[178.861523,70.826416]]],[[[142.761035,54.393945],[142.334961,54.280713],[142.705957,53.895703],[142.526172,53.447461],[141.823535,53.339502],[141.66084,52.272949],[142.206738,51.222559],[141.866309,48.750098],[142.181738,48.013379],[141.830371,46.451074],[142.077148,45.917041],[142.578027,46.700781],[143.282324,46.558984],[143.431641,46.028662],[143.580664,46.360693],[142.556934,47.737891],[143.10498,49.198828],[144.04873,49.24917],[144.71377,48.640283],[143.299512,51.632373],[143.324707,52.963086],[142.761035,54.393945]]],[[[-178.876465,71.577051],[-179.999951,71.537744],[-179.999951,70.993018],[-177.523584,71.166895],[-178.876465,71.577051]]],[[[52.90332,71.36499],[52.249609,71.284912],[53.022656,70.968701],[52.90332,71.36499]]],[[[96.285449,77.02666],[96.528418,77.205518],[95.270312,77.018848],[96.285449,77.02666]]],[[[74.660547,72.873438],[74.961523,73.0625],[74.198535,73.109082],[74.660547,72.873438]]],[[[58.622363,81.04165],[57.210938,81.01709],[58.285645,80.764893],[58.622363,81.04165]]],[[[50.265234,69.185596],[48.844922,69.494727],[48.439062,68.804883],[49.62627,68.859717],[50.265234,69.185596]]],[[[63.373828,80.700098],[65.437402,80.930713],[64.802051,81.197266],[62.592578,80.853027],[63.373828,80.700098]]],[[[57.95625,80.123242],[59.255469,80.343213],[57.075,80.493945],[57.95625,80.123242]]],[[[62.167773,80.834766],[59.592285,80.816504],[59.649805,80.43125],[61.05127,80.418604],[62.167773,80.834766]]],[[[61.14082,80.950342],[61.457422,81.103955],[60.07832,80.99917],[61.14082,80.950342]]],[[[53.521387,80.185205],[52.853906,80.402393],[52.343555,80.213232],[53.521387,80.185205]]],[[[57.078711,80.350928],[55.811621,80.087158],[56.986914,80.071484],[57.078711,80.350928]]],[[[57.810254,81.546045],[55.716699,81.188477],[57.769727,81.169727],[57.810254,81.546045]]],[[[54.718945,81.115967],[54.668164,80.738672],[57.580371,80.755469],[54.718945,81.115967]]],[[[92.683496,79.685205],[93.803125,79.904541],[91.229297,80.030713],[92.683496,79.685205]]],[[[141.010254,73.999463],[141.038574,74.242725],[140.193555,74.236719],[140.409473,73.92168],[141.010254,73.999463]]],[[[142.184863,73.895898],[141.084766,73.865869],[139.785547,73.355225],[143.451465,73.231299],[142.184863,73.895898]]],[[[137.940527,55.092627],[137.577344,55.197021],[137.23291,54.790576],[137.721484,54.663232],[138.206152,55.033545],[137.940527,55.092627]]],[[[169.200781,69.580469],[169.374805,69.882617],[167.864746,69.901074],[169.200781,69.580469]]],[[[163.635156,58.603369],[164.615723,58.885596],[164.572656,59.221143],[163.760938,59.015039],[163.635156,58.603369]]],[[[166.650293,54.839062],[166.275781,55.311963],[165.751074,55.294531],[166.650293,54.839062]]],[[[155.921094,50.302197],[156.096875,50.771875],[155.243066,50.094629],[155.921094,50.302197]]],[[[152.002051,46.897168],[152.288867,47.142188],[151.723438,46.828809],[152.002051,46.897168]]],[[[149.687695,45.642041],[150.553125,46.208545],[149.44707,45.593359],[149.687695,45.642041]]],[[[148.599512,45.317627],[148.812207,45.51001],[148.324219,45.282422],[147.924023,45.383301],[146.897461,44.404297],[148.599512,45.317627]]],[[[146.207617,44.497656],[145.461719,43.870898],[145.555859,43.6646],[146.567773,44.44043],[146.207617,44.497656]]],[[[113.387207,74.400439],[112.084473,74.548975],[111.503418,74.353076],[112.782422,74.095068],[113.387207,74.400439]]],[[[70.673926,73.09502],[71.626172,73.173975],[70.940234,73.514404],[69.995898,73.359375],[70.040723,73.037158],[70.673926,73.09502]]],[[[77.63252,72.29126],[78.365137,72.482422],[77.748535,72.631201],[76.871094,72.317041],[77.63252,72.29126]]],[[[79.501465,72.721924],[79.164258,73.094336],[78.633203,72.850732],[79.501465,72.721924]]],[[[60.450488,69.934863],[59.048047,70.460498],[58.519922,70.318311],[59.637012,69.721045],[60.440234,69.725928],[60.450488,69.934863]]],[[[20.957813,55.278906],[20.899805,55.28667],[19.604395,54.45918],[22.766211,54.356787],[22.567285,55.059131],[21.235742,55.264111],[20.995898,54.902686],[20.594824,54.982373],[20.957813,55.278906]]],[[[33.594141,46.09624],[32.508008,45.403809],[33.555176,45.097656],[33.450684,44.553662],[33.755664,44.398926],[35.472559,45.098486],[36.393359,45.065381],[36.575,45.393555],[35.45752,45.316309],[35.001674,45.733383],[33.806667,46.208288],[33.594141,46.09624]]]]}},{type:"Feature",properties:{name:"罗马尼亚",full_name:"罗马尼亚",iso_a2:"RO",iso_a3:"ROU",iso_n3:"642"},geometry:{type:"Polygon",coordinates:[[[28.2125,45.450439],[28.071777,46.978418],[26.618945,48.259863],[24.979102,47.724121],[23.202637,48.084521],[22.87666,47.947266],[21.999707,47.505029],[21.12168,46.282422],[20.241797,46.108594],[21.490234,45.1479],[21.360059,44.82666],[22.093066,44.541943],[22.64209,44.650977],[22.705078,44.237793],[23.028516,44.077979],[22.919043,43.834473],[25.49707,43.670801],[27.086914,44.167383],[28.585352,43.742236],[28.891504,44.918652],[29.55752,44.843408],[29.705859,45.259912],[28.2125,45.450439]]]}},{type:"Feature",properties:{name:"卡塔尔",full_name:"卡塔尔国",iso_a2:"QA",iso_a3:"QAT",iso_n3:"634"},geometry:{type:"Polygon",coordinates:[[[51.267969,24.607227],[51.608887,25.052881],[51.543066,25.902393],[51.262305,26.153271],[50.762891,25.444727],[50.804395,24.789258],[51.267969,24.607227]]]}},{type:"Feature",properties:{name:"葡萄牙",full_name:"葡萄牙共和国",iso_a2:"PT",iso_a3:"PRT",iso_n3:"620"},geometry:{type:"MultiPolygon",coordinates:[[[[-17.190869,32.868604],[-17.018262,32.662793],[-16.693262,32.758008],[-17.190869,32.868604]]],[[[-8.777148,41.941064],[-8.684619,40.752539],[-9.479736,38.798779],[-9.356738,38.6979],[-9.135791,38.742773],[-8.791602,39.078174],[-9.021484,38.746875],[-9.250391,38.656738],[-9.213281,38.448096],[-8.798877,38.518164],[-8.668311,38.424316],[-8.881104,38.44668],[-8.81416,37.430811],[-8.997803,37.032275],[-7.406152,37.179443],[-7.443945,37.728271],[-6.957568,38.187891],[-7.343018,38.457422],[-6.997949,39.056445],[-7.535693,39.661572],[-6.975391,39.798389],[-6.928467,41.009131],[-6.2125,41.532031],[-6.618262,41.942383],[-8.15249,41.811963],[-8.266064,42.137402],[-8.777148,41.941064]]]]}},{type:"Feature",properties:{name:"波兰",full_name:"波兰共和国",iso_a2:"PL",iso_a3:"POL",iso_n3:"616"},geometry:{type:"Polygon",coordinates:[[[23.605273,51.51792],[23.652441,52.040381],[23.175098,52.286621],[23.91543,52.770264],[23.484668,53.939795],[22.766211,54.356787],[19.604395,54.45918],[18.836426,54.36958],[18.43623,54.744727],[18.759277,54.68457],[18.323438,54.838184],[17.842969,54.816699],[14.211426,53.950342],[14.213672,53.870752],[14.583496,53.639355],[14.258887,53.729639],[14.128613,52.878223],[14.619434,52.528516],[15.016602,51.252734],[14.809375,50.858984],[14.99375,51.014355],[16.282227,50.655615],[16.63916,50.102148],[16.880078,50.427051],[17.702246,50.307178],[17.627051,50.116406],[18.562402,49.879346],[18.832227,49.510791],[19.149414,49.4],[19.441602,49.597705],[20.057617,49.181299],[20.362988,49.385254],[21.639648,49.411963],[22.538672,49.072705],[22.852051,49.062744],[22.706152,49.606201],[24.089941,50.530469],[23.605273,51.51792]]]}},{type:"Feature",properties:{name:"菲律宾",full_name:"菲律宾共和国",iso_a2:"PH",iso_a3:"PHL",iso_n3:"608"},geometry:{type:"MultiPolygon",coordinates:[[[[121.101562,18.615283],[120.599707,18.507861],[120.36875,16.10957],[119.772559,16.255127],[120.082129,14.851074],[120.43877,14.453369],[120.583691,14.88125],[120.941309,14.645068],[120.637109,13.804492],[121.344141,13.649121],[121.77793,13.937646],[122.599902,13.194141],[122.595215,13.907617],[123.310938,13.044092],[123.948535,12.916406],[124.059766,12.56709],[124.142773,13.035791],[123.785156,13.110547],[123.549609,13.645752],[123.815723,13.837109],[123.320312,14.06167],[123.101953,13.750244],[122.627148,14.317529],[122.199707,14.148047],[122.211719,13.930176],[121.766602,14.168066],[121.392285,15.324414],[121.595313,15.933252],[122.135156,16.184814],[122.519141,17.124854],[122.152344,17.664404],[122.265527,18.458838],[121.845605,18.29541],[121.101562,18.615283]]],[[[117.311133,8.4396],[119.686914,10.500342],[119.55332,11.313525],[119.223828,10.477295],[117.349902,8.713574],[117.311133,8.4396]]],[[[122.496191,11.615088],[121.916016,11.854346],[122.103516,11.64292],[121.954004,10.444385],[122.769922,10.823828],[123.119531,11.286816],[123.158301,11.535547],[122.496191,11.615088]]],[[[123.130859,9.064111],[123.320508,9.272949],[123.162012,9.864258],[123.567578,10.780762],[123.256641,10.993945],[122.983301,10.886621],[122.855566,10.086914],[122.399512,9.823047],[123.130859,9.064111]]],[[[124.574609,11.343066],[124.330664,11.535205],[124.445508,10.923584],[124.786719,10.781396],[124.780762,10.168066],[125.026563,10.033105],[124.9875,10.367578],[125.268457,10.307715],[125.026563,11.211719],[124.574609,11.343066]]],[[[125.239551,12.527881],[124.294727,12.569336],[124.445703,12.152783],[124.99502,11.764941],[125.034277,11.34126],[125.735645,11.049609],[125.535645,12.191406],[125.239551,12.527881]]],[[[120.704395,13.479492],[120.338477,13.412354],[121.236719,12.218799],[121.540625,12.638184],[121.522754,13.131201],[121.202734,13.432324],[120.704395,13.479492]]],[[[126.005957,9.320947],[125.471289,9.756787],[125.49873,9.014746],[124.868945,8.972266],[124.731152,8.562988],[124.404883,8.599854],[123.799414,8.049121],[123.849219,8.432715],[123.43457,8.70332],[122.911133,8.156445],[122.243359,7.945117],[121.964258,6.968213],[122.616211,7.763135],[123.390918,7.40752],[123.66582,7.817773],[124.206641,7.396436],[123.985254,6.993701],[124.078125,6.404443],[124.927344,5.875342],[125.231543,6.069531],[125.346484,5.598975],[125.667969,5.978662],[125.380664,6.689941],[125.689258,7.263037],[125.824414,7.333301],[126.189355,6.309668],[126.19209,6.852539],[126.581543,7.247754],[126.458691,8.202832],[126.139551,8.595654],[126.30459,8.952051],[126.005957,9.320947]]],[[[123.370313,9.449609],[124.00498,10.400098],[124.038867,11.273535],[123.38623,9.96709],[123.370313,9.449609]]],[[[121.159375,6.075635],[120.876367,5.952637],[121.411035,5.939844],[121.159375,6.075635]]],[[[120.1,12.167676],[119.885742,12.299854],[120.010547,12.008252],[120.314551,12.012402],[120.1,12.167676]]],[[[124.593848,9.787207],[124.335742,10.159912],[123.817187,9.817383],[124.122461,9.599316],[124.593848,9.787207]]],[[[122.092871,6.42832],[122.323535,6.602246],[121.832031,6.664062],[122.092871,6.42832]]],[[[125.690234,9.914453],[125.666797,10.440137],[125.494824,10.118701],[125.690234,9.914453]]],[[[121.914844,13.540332],[122.004883,13.20498],[122.114551,13.463184],[121.914844,13.540332]]],[[[122.094043,12.354883],[122.14502,12.652637],[122.013965,12.105615],[122.094043,12.354883]]],[[[123.281836,12.853418],[122.95752,13.107178],[123.367188,12.70083],[123.281836,12.853418]]],[[[123.716602,12.287354],[123.236426,12.583496],[123.157813,11.925635],[123.47373,12.21665],[124.045508,11.752441],[123.716602,12.287354]]],[[[124.353613,13.632227],[124.224902,14.077588],[124.038867,13.663135],[124.353613,13.632227]]],[[[122.033496,15.005029],[121.839844,15.038135],[121.933008,14.656055],[122.033496,15.005029]]]]}},{type:"Feature",properties:{name:"秘鲁",full_name:"秘鲁共和国",iso_a2:"PE",iso_a3:"PER",iso_n3:"604"},geometry:{type:"Polygon",coordinates:[[[-69.965918,-4.235938],[-70.339502,-3.814355],[-70.735107,-3.781543],[-70.09585,-2.658203],[-70.968555,-2.206836],[-72.941113,-2.394043],[-73.664307,-1.248828],[-74.246387,-.970605],[-74.801758,-.200098],[-75.284473,-.106543],[-75.62627,-.122852],[-75.259375,-.590137],[-75.570557,-1.53125],[-76.679102,-2.562598],[-77.860596,-2.981641],[-78.158496,-3.465137],[-78.345361,-3.397363],[-78.686035,-4.562402],[-79.033301,-4.969141],[-79.330957,-4.927832],[-79.638525,-4.454883],[-80.478564,-4.430078],[-80.490137,-4.010059],[-80.179248,-3.877734],[-80.324658,-3.387891],[-81.283203,-4.322266],[-81.336621,-4.669531],[-80.881934,-5.635059],[-81.142041,-6.056738],[-79.994971,-6.768945],[-78.762256,-8.616992],[-77.633203,-11.287793],[-76.223633,-13.371191],[-76.289014,-14.133105],[-75.104248,-15.411914],[-72.467676,-16.708105],[-70.418262,-18.345605],[-69.926367,-18.206055],[-69.8521,-17.703809],[-69.510938,-17.506055],[-69.624854,-17.200195],[-68.842773,-16.337891],[-69.217578,-16.149121],[-69.420898,-15.640625],[-69.172461,-15.236621],[-69.359473,-14.795312],[-68.870898,-14.169727],[-69.074121,-13.682813],[-68.978613,-12.880078],[-68.685254,-12.501953],[-69.578613,-10.951758],[-70.642334,-11.010254],[-70.541113,-9.4375],[-71.237939,-9.966016],[-72.142969,-10.005176],[-72.379053,-9.510156],[-73.209424,-9.411426],[-72.974023,-8.993164],[-74.002051,-7.556055],[-73.72041,-7.309277],[-73.758105,-6.905762],[-73.137354,-6.46582],[-73.235547,-6.098438],[-72.887061,-5.122754],[-70.799512,-4.17334],[-69.965918,-4.235938]]]}},{type:"Feature",properties:{name:"巴拉圭",full_name:"巴拉圭共和国",iso_a2:"PY",iso_a3:"PRY",iso_n3:"600"},geometry:{type:"Polygon",coordinates:[[[-58.159766,-20.164648],[-58.180176,-19.817871],[-59.090527,-19.28623],[-61.756836,-19.645312],[-62.276318,-20.5625],[-62.650977,-22.233691],[-61.03291,-23.755664],[-59.89248,-24.093555],[-57.643896,-25.328418],[-58.604834,-27.314355],[-56.437158,-27.553809],[-56.164062,-27.321484],[-55.714648,-27.414844],[-54.825488,-26.652246],[-54.615869,-25.576074],[-54.241797,-24.047266],[-54.625488,-23.8125],[-55.415918,-23.951367],[-55.84917,-22.307617],[-56.447803,-22.076172],[-56.937256,-22.271289],[-57.955908,-22.10918],[-57.830225,-20.997949],[-58.159766,-20.164648]]]}},{type:"Feature",properties:{name:"巴布亚新几内亚",full_name:"巴布亚新几内亚独立国",iso_a2:"PG",iso_a3:"PNG",iso_n3:"598"},geometry:{type:"MultiPolygon",coordinates:[[[[152.96582,-4.756348],[153.016797,-4.105664],[152.03291,-3.251367],[150.825391,-2.572949],[150.746094,-2.738867],[152.279395,-3.582422],[152.96582,-4.756348]]],[[[151.915625,-4.296777],[151.593066,-4.200781],[151.671191,-4.883301],[150.900293,-5.447168],[150.183105,-5.523633],[150.090039,-5.011816],[149.831445,-5.524121],[148.432031,-5.471777],[148.337207,-5.669434],[149.652539,-6.29043],[150.473535,-6.263379],[151.515137,-5.552344],[152.077051,-5.458301],[151.983691,-5.074414],[152.351172,-4.822168],[152.405664,-4.340723],[151.915625,-4.296777]]],[[[140.976172,-9.11875],[142.647168,-9.327832],[143.366211,-8.961035],[143.111816,-8.474512],[142.206836,-8.195801],[143.61377,-8.200391],[143.518164,-8.000684],[143.942285,-7.944238],[143.654883,-7.460352],[144.142871,-7.757227],[144.509863,-7.567383],[146.033203,-8.076367],[147.768652,-10.070117],[149.754102,-10.353027],[150.319922,-10.654883],[150.647168,-10.517969],[150.446094,-10.307324],[150.849512,-10.236035],[149.874414,-10.012988],[149.76123,-9.805859],[150.011035,-9.688184],[149.263184,-9.497852],[149.19834,-9.03125],[148.583105,-9.051758],[148.126758,-8.103613],[147.190039,-7.378125],[146.953613,-6.834082],[147.845508,-6.662402],[147.566699,-6.056934],[145.745215,-5.402441],[145.766992,-4.823047],[144.477734,-3.825293],[140.973438,-2.609766],[140.976172,-9.11875]]],[[[151.080957,-10.020117],[150.776074,-9.709082],[151.230859,-10.194727],[151.296484,-9.956738],[151.080957,-10.020117]]],[[[150.34541,-9.493848],[150.208301,-9.206348],[150.109766,-9.361914],[150.34541,-9.493848]]],[[[147.067578,-1.960156],[146.65625,-1.974023],[146.546484,-2.208594],[147.438086,-2.058984],[147.067578,-1.960156]]],[[[150.436621,-2.661816],[150.227148,-2.38418],[149.961621,-2.473828],[150.436621,-2.661816]]],[[[150.528418,-9.346582],[150.43623,-9.624609],[150.894043,-9.66748],[150.528418,-9.346582]]],[[[153.536133,-11.476172],[153.203613,-11.324121],[153.759863,-11.586328],[153.536133,-11.476172]]],[[[155.957617,-6.686816],[154.729297,-5.444434],[154.759277,-5.931348],[155.344043,-6.72168],[155.719336,-6.862793],[155.957617,-6.686816]]]]}},{type:"Feature",properties:{name:"巴拿马",full_name:"巴拿马共和国",iso_a2:"PA",iso_a3:"PAN",iso_n3:"591"},geometry:{type:"Polygon",coordinates:[[[-77.374219,8.658301],[-78.082764,9.236279],[-79.577295,9.597852],[-81.354785,8.780566],[-81.894482,9.14043],[-81.780225,8.957227],[-82.244189,9.031494],[-82.563574,9.57666],[-82.939844,9.44917],[-82.727832,8.916064],[-83.027344,8.337744],[-82.879346,8.070654],[-82.781152,8.303516],[-82.235449,8.311035],[-81.727637,8.137549],[-81.268408,7.625488],[-81.063867,7.899756],[-80.845557,7.220068],[-80.438867,7.274951],[-80.01123,7.500049],[-80.458984,8.213867],[-79.50708,8.970068],[-79.086377,8.997168],[-78.409863,8.355322],[-78.099463,8.496973],[-77.760547,8.133252],[-78.141895,8.386084],[-78.421582,8.060986],[-77.901172,7.229346],[-77.761914,7.698828],[-77.538281,7.56626],[-77.195996,7.972461],[-77.374219,8.658301]]]}},{type:"Feature",properties:{name:"帕劳",full_name:"帕劳共和国",iso_a2:"PW",iso_a3:"PLW",iso_n3:"585"},geometry:{type:"Polygon",coordinates:[[[134.59541,7.382031],[134.651172,7.712109],[134.515723,7.525781],[134.59541,7.382031]]]}},{type:"Feature",properties:{name:"巴基斯坦",full_name:"巴基斯坦伊斯兰共和国",iso_a2:"PK",iso_a3:"PAK",iso_n3:"586"},geometry:{type:"Polygon",coordinates:[[[76.766895,35.661719],[75.912305,36.048975],[75.772168,36.694922],[74.541406,37.022168],[72.249805,36.734717],[71.23291,36.121777],[71.620508,35.183008],[70.965625,34.530371],[71.051563,34.049707],[69.889648,34.007275],[70.261133,33.289014],[69.501562,33.020068],[69.279297,31.936816],[68.868945,31.634229],[68.161035,31.802979],[67.452832,31.234619],[66.829297,31.263672],[66.346875,30.802783],[66.23125,29.865723],[64.09873,29.391943],[62.476562,29.40835],[60.843359,29.858691],[61.889844,28.546533],[62.758008,28.243555],[62.762988,27.250195],[63.301563,27.151465],[63.157812,26.649756],[61.842383,26.225928],[61.587891,25.202344],[64.059375,25.40293],[64.658984,25.184082],[66.467676,25.445312],[66.131152,25.493262],[66.324219,25.601807],[66.698633,25.226318],[66.703027,24.860938],[67.171484,24.756104],[67.563086,23.881836],[68.165039,23.857324],[68.724121,23.964697],[68.781152,24.313721],[69.805176,24.165234],[71.044043,24.400098],[70.648438,25.666943],[70.100195,25.910059],[70.147656,26.506445],[69.506934,26.742676],[69.537012,27.122949],[70.403711,28.025049],[70.797949,27.709619],[71.870313,27.9625],[72.341895,28.751904],[72.90332,29.02876],[73.381641,29.934375],[73.80918,30.093359],[74.632812,31.034668],[74.555566,31.818555],[75.333496,32.279199],[74.685742,32.493799],[74.663281,32.757666],[74.35459,32.768701],[74.003809,33.189453],[73.976465,33.721289],[74.250879,33.946094],[73.904102,34.075684],[73.96123,34.653467],[75.70918,34.503076],[77.048633,35.109912],[76.766895,35.661719]]]}},{type:"Feature",properties:{name:"阿曼",full_name:"阿曼苏丹国",iso_a2:"OM",iso_a3:"OMN",iso_n3:"512"},geometry:{type:"MultiPolygon",coordinates:[[[[53.085645,16.648389],[54.068164,17.005518],[55.06416,17.038916],[55.479102,17.843262],[56.383496,17.987988],[56.825977,18.753516],[57.811621,19.01709],[57.861816,20.244141],[58.169434,20.589502],[58.474219,20.406885],[59.8,22.219922],[59.823242,22.508984],[59.429395,22.66084],[58.773047,23.517188],[57.123047,23.980713],[56.387988,24.979199],[56.063867,24.73877],[56.000586,24.953223],[55.795703,24.868115],[55.76084,24.242676],[55.985156,24.063379],[55.468457,23.941113],[55.18584,22.704102],[55.641016,22.001855],[54.977344,19.995947],[51.977637,18.996143],[53.085645,16.648389]]],[[[56.297852,25.650684],[56.413086,26.351172],[56.080469,26.062646],[56.297852,25.650684]]]]}},{type:"Feature",properties:{name:"挪威",full_name:"挪威王国",iso_a2:"NO",iso_a3:"NOR",iso_n3:"578"},geometry:{type:"MultiPolygon",coordinates:[[[[20.622168,69.036865],[21.59375,69.273584],[22.410938,68.719873],[23.854004,68.805908],[24.941406,68.593262],[26.072461,69.691553],[27.747852,70.064844],[29.141602,69.671436],[28.96582,69.021973],[30.180176,69.63584],[30.860742,69.538428],[30.869727,69.783447],[29.79209,69.727881],[28.804297,70.092529],[30.944141,70.274414],[30.065137,70.702979],[28.831543,70.863965],[28.192969,70.248584],[28.392285,70.975293],[27.59707,71.091309],[26.989355,70.511377],[26.585059,70.41001],[26.661328,70.939746],[25.043848,70.109033],[25.768164,70.853174],[24.658008,71.001025],[23.353906,69.983398],[22.68457,70.374756],[21.355762,70.233398],[21.974707,69.83457],[20.62207,69.913916],[20.739453,69.520508],[20.054492,69.332666],[20.324219,69.945312],[19.641504,69.424023],[19.722461,69.781641],[19.197266,69.747852],[18.915918,69.335596],[18.259766,69.470605],[18.101465,69.156299],[16.514355,68.532568],[17.552832,68.42627],[16.203809,68.316748],[16.312305,67.881445],[16.00791,68.228711],[14.798926,67.809326],[15.594434,67.348535],[14.961914,67.574268],[14.441699,67.271387],[15.415723,67.202441],[14.108789,67.119238],[13.211426,66.64082],[13.118848,66.230664],[14.03418,66.297559],[12.783789,66.100439],[12.133887,65.27915],[12.915527,65.339258],[11.489355,64.97583],[9.567285,63.706152],[10.055078,63.512695],[11.306641,64.048877],[11.370703,63.804834],[10.020996,63.39082],[9.696875,63.624561],[9.156055,63.459326],[8.576172,63.601172],[8.158008,63.161523],[8.623145,62.84624],[7.571875,63.099512],[6.734961,62.720703],[8.045508,62.77124],[7.653125,62.564014],[6.35293,62.611133],[6.136133,62.407471],[6.580078,62.407275],[5.143164,62.159912],[5.266895,61.935596],[6.730762,61.869775],[4.930078,61.87832],[5.106738,61.187549],[7.173535,61.165967],[7.442578,61.434619],[7.604492,61.210547],[7.038672,60.95293],[6.777832,61.142432],[5.008594,61.038184],[5.11582,60.635986],[5.64834,60.687988],[5.137109,60.445605],[5.688574,60.123193],[5.205664,60.087939],[5.145801,59.638818],[6.15332,60.34624],[6.995703,60.511963],[5.730469,59.863086],[6.216602,59.818359],[5.242188,59.564307],[5.173242,59.162549],[6.415332,59.547119],[5.88916,59.097949],[6.363281,59.000928],[5.555566,58.975195],[5.706836,58.523633],[7.004883,58.024219],[8.166113,58.145312],[9.557227,59.112695],[10.179395,59.009277],[10.595312,59.764551],[10.834473,59.183936],[11.388281,59.036523],[11.642773,58.926074],[11.680762,59.592285],[12.486133,60.106787],[12.294141,61.002686],[12.880762,61.352295],[12.155371,61.720752],[12.175195,63.595947],[12.792773,64],[14.141211,64.173535],[13.650293,64.581543],[14.479688,65.301465],[14.543262,66.129346],[15.483789,66.305957],[16.783594,67.89502],[17.324609,68.103809],[17.916699,67.964893],[18.303027,68.55542],[19.969824,68.356396],[20.116699,69.020898],[20.622168,69.036865]]],[[[23.440527,70.815771],[21.994531,70.657129],[22.829102,70.541553],[23.440527,70.815771]]],[[[15.207129,68.943115],[14.404688,68.663232],[15.22207,68.616309],[15.207129,68.943115]]],[[[19.255078,70.066406],[19.132715,70.244141],[18.129883,69.557861],[19.334766,69.820264],[19.255078,70.066406]]],[[[17.503027,69.59624],[17.08252,69.013672],[17.950684,69.198145],[17.503027,69.59624]]],[[[15.760352,68.56123],[16.048047,69.302051],[15.412598,68.61582],[14.25752,68.190771],[15.975293,68.40249],[16.328906,68.876318],[15.760352,68.56123]]],[[[32.525977,80.119141],[33.629297,80.217432],[31.481934,80.10791],[32.525977,80.119141]]],[[[21.608105,78.595703],[20.22793,78.477832],[21.653125,77.923535],[20.928125,77.459668],[22.685352,77.553516],[22.553711,77.26665],[24.901855,77.756592],[23.116699,77.991504],[21.608105,78.595703]]],[[[20.897852,80.249951],[19.733301,80.477832],[19.343359,80.116406],[17.916895,80.143115],[18.725,79.760742],[20.784082,79.748584],[20.128223,79.4896],[23.947754,79.194287],[25.641211,79.403027],[26.86084,80.16001],[24.297559,80.3604],[23.114551,80.186963],[23.008008,80.473975],[22.289746,80.049219],[20.897852,80.249951]]],[[[16.786719,79.906738],[16.245703,80.049463],[16.34375,78.976123],[14.593652,79.79873],[14.02959,79.344141],[12.555371,79.569482],[13.692871,79.860986],[10.804004,79.798779],[10.737598,79.520166],[13.150195,78.2375],[14.638281,78.4146],[14.689258,78.720947],[15.417383,78.473242],[16.782617,78.663623],[17.00293,78.369385],[13.680566,78.028125],[14.089941,77.771387],[16.914062,77.897998],[13.995703,77.508203],[16.700488,76.579297],[19.676758,78.60957],[21.38877,78.74043],[18.677832,79.261719],[18.397363,79.605176],[17.66875,79.385938],[16.786719,79.906738]]],[[[11.250293,78.610693],[10.558203,78.90293],[12.116406,78.232568],[11.250293,78.610693]]]]}},{type:"Feature",properties:{name:"朝鲜",full_name:"朝鲜民主主义人民共和国",iso_a2:"KP",iso_a3:"PRK",iso_n3:"408"},geometry:{type:"Polygon",coordinates:[[[128.374609,38.623438],[127.394531,39.20791],[127.568164,39.781982],[129.708691,40.857324],[129.756348,41.712256],[130.687305,42.302539],[130.526953,42.5354],[129.898242,42.998145],[129.697852,42.448145],[128.923438,42.038232],[128.045215,41.9875],[128.149414,41.387744],[126.743066,41.724854],[125.989062,40.904639],[124.362109,40.004053],[124.638281,39.615088],[124.775293,39.758057],[125.36084,39.526611],[125.168848,38.805518],[125.554492,38.68623],[124.690918,38.129199],[125.206738,38.081543],[124.98877,37.931445],[125.357813,37.724805],[125.769141,37.985352],[126.116699,37.74292],[126.633887,37.781836],[127.090332,38.283887],[128.038965,38.308545],[128.374609,38.623438]]]}},{type:"Feature",properties:{name:"尼日利亚",full_name:"尼日利亚联邦共和国",iso_a2:"NG",iso_a3:"NGA",iso_n3:"566"},geometry:{type:"Polygon",coordinates:[[[13.606348,13.70459],[12.463184,13.09375],[10.475879,13.330225],[9.615918,12.810645],[8.750586,12.908154],[7.830469,13.340918],[7.005078,12.995557],[6.299805,13.658789],[5.491992,13.872852],[4.664844,13.733203],[4.147559,13.457715],[4.03877,12.934668],[3.64668,12.52998],[3.59541,11.696289],[3.487793,11.39541],[3.834473,10.607422],[3.044922,9.083838],[2.774805,9.048535],[2.706445,6.369238],[3.716992,6.597949],[3.450781,6.427051],[4.431348,6.348584],[5.112402,5.641553],[5.456641,5.611719],[5.199219,5.533545],[5.549707,5.474219],[5.367969,5.337744],[5.493262,4.83877],[6.076563,4.290625],[6.860352,4.37334],[6.767676,4.724707],[6.923242,4.390674],[7.154688,4.514404],[7.076563,4.716162],[7.800781,4.522266],[8.293066,4.557617],[8.252734,4.923975],[8.555859,4.755225],[8.997168,5.917725],[9.779883,6.760156],[10.60625,7.063086],[11.237305,6.450537],[11.861426,7.116406],[12.233398,8.282324],[12.782227,8.817871],[13.699902,10.873145],[14.575391,11.532422],[14.619727,12.150977],[14.197461,12.383789],[14.063965,13.078516],[13.606348,13.70459]]]}},{type:"Feature",properties:{name:"尼日尔",full_name:"尼日尔共和国",iso_a2:"NE",iso_a3:"NER",iso_n3:"562"},geometry:{type:"Polygon",coordinates:[[[13.606348,13.70459],[13.448242,14.380664],[15.474316,16.908398],[15.735059,19.904053],[15.963184,20.346191],[15.181836,21.523389],[14.979004,22.996191],[14.215527,22.619678],[13.48125,23.180176],[11.967871,23.517871],[7.481738,20.873096],[5.836621,19.47915],[4.227637,19.142773],[4.234668,16.996387],[3.842969,15.701709],[3.504297,15.356348],[1.300195,15.272266],[.947461,14.982129],[.21748,14.911475],[.429199,13.972119],[1.201172,13.35752],[.988477,13.364844],[.987305,13.041895],[1.564941,12.6354],[2.10459,12.70127],[2.072949,12.309375],[2.38916,11.89707],[2.366016,12.221924],[2.805273,12.383838],[3.59541,11.696289],[3.64668,12.52998],[4.03877,12.934668],[4.147559,13.457715],[4.664844,13.733203],[5.491992,13.872852],[6.299805,13.658789],[7.005078,12.995557],[7.830469,13.340918],[8.750586,12.908154],[9.615918,12.810645],[10.475879,13.330225],[12.463184,13.09375],[13.606348,13.70459]]]}},{type:"Feature",properties:{name:"尼加拉瓜",full_name:"尼加拉瓜共和国",iso_a2:"NI",iso_a3:"NIC",iso_n3:"558"},geometry:{type:"Polygon",coordinates:[[[-83.15752,14.993066],[-84.453564,14.643701],[-84.985156,14.752441],[-85.733936,13.858691],[-86.040381,14.050146],[-86.733643,13.763477],[-86.729297,13.284375],[-87.337256,12.979248],[-87.667529,12.903564],[-85.744336,11.062109],[-84.63418,11.045605],[-83.919287,10.735352],[-83.641992,10.917236],[-83.867871,11.300049],[-83.651758,11.642041],[-83.754248,12.501953],[-83.593359,12.713086],[-83.510938,12.411816],[-83.567334,13.320312],[-83.187744,14.340088],[-83.413721,14.825342],[-83.15752,14.993066]]]}},{type:"Feature",properties:{name:"新西兰",full_name:"新西兰",iso_a2:"NZ",iso_a3:"NZL",iso_n3:"554"},geometry:{type:"MultiPolygon",coordinates:[[[[173.115332,-41.279297],[172.704395,-40.667773],[172.943652,-40.51875],[172.640625,-40.518262],[171.48623,-41.794727],[171.011719,-42.885059],[170.969922,-42.718359],[169.178906,-43.913086],[168.457422,-44.030566],[167.908984,-44.664746],[167.194531,-44.963477],[167.155664,-45.410938],[166.743066,-45.468457],[167.00332,-45.712109],[166.488281,-45.831836],[166.916699,-45.957227],[166.731543,-46.197852],[167.539453,-46.148535],[168.382129,-46.605371],[169.342285,-46.620508],[170.77627,-45.870898],[171.240723,-44.26416],[172.179785,-43.895996],[172.035547,-43.701758],[173.065625,-43.874609],[172.52666,-43.464746],[172.624023,-43.272461],[173.221191,-42.976562],[174.283105,-41.740625],[174.069336,-41.429492],[174.370117,-41.103711],[174.038574,-41.241895],[174.302539,-41.019531],[173.797852,-41.271973],[173.947168,-40.924121],[173.115332,-41.279297]]],[[[168.144922,-46.862207],[167.783984,-46.699805],[167.521973,-47.258691],[168.240918,-47.07002],[168.144922,-46.862207]]],[[[173.269434,-34.934766],[173.043945,-34.429102],[172.705957,-34.455176],[173.313965,-35.443359],[173.626172,-35.319141],[173.412207,-35.542578],[174.054688,-36.359766],[173.914453,-35.908691],[174.392773,-36.240039],[174.401562,-36.601953],[174.188867,-36.492285],[174.475586,-36.941895],[174.928906,-37.084766],[174.58584,-37.097754],[174.928027,-37.804492],[174.597363,-38.785059],[173.763672,-39.31875],[175.155957,-40.114941],[175.1625,-40.621582],[174.635352,-41.289453],[175.309766,-41.610645],[176.842188,-40.157812],[177.076758,-39.221777],[177.522949,-39.073828],[177.908789,-39.239551],[178.53623,-37.69209],[178.00918,-37.554883],[177.274023,-37.993457],[176.108398,-37.645117],[175.46084,-36.475684],[175.54248,-37.201367],[174.722461,-36.841211],[174.802148,-36.309473],[174.320312,-35.24668],[173.269434,-34.934766]]],[[[166.221094,-50.761523],[166.101367,-50.538965],[165.88916,-50.807715],[166.221094,-50.761523]]],[[[-176.177637,-43.740332],[-176.847656,-43.823926],[-176.515527,-44.116602],[-176.516553,-43.784766],[-176.177637,-43.740332]]]]}},{type:"Feature",properties:{name:"纽埃",full_name:"纽埃",iso_a2:"NU",iso_a3:"NIU",iso_n3:"570"},geometry:{type:"Polygon",coordinates:[[[-169.803418,-19.083008],[-169.834033,-18.966016],[-169.94834,-19.072852],[-169.803418,-19.083008]]]}},{type:"Feature",properties:{name:"库克群岛",full_name:"库克群岛",iso_a2:"CK",iso_a3:"COK",iso_n3:"184"},geometry:{type:"Polygon",coordinates:[[[-159.740527,-21.249219],[-159.768359,-21.188477],[-159.832031,-21.200488],[-159.740527,-21.249219]]]}},{type:"Feature",properties:{name:"荷兰",full_name:"荷兰王国",iso_a2:"NL",iso_a3:"NLD",iso_n3:"528"},geometry:{type:"MultiPolygon",coordinates:[[[[5.993945,50.750439],[5.94873,51.802686],[6.800391,51.967383],[7.035156,52.380225],[6.710742,52.617871],[7.033008,52.651367],[7.197266,53.282275],[6.062207,53.40708],[4.76875,52.941309],[3.946875,51.810547],[4.274121,51.471631],[3.448926,51.540771],[4.226172,51.386475],[5.030957,51.469092],[5.796484,51.153076],[5.639453,50.843604],[5.993945,50.750439]]],[[[4.226172,51.386475],[3.350098,51.377686],[3.902051,51.207666],[4.226172,51.386475]]]]}},{type:"Feature",properties:{name:"阿鲁巴",full_name:"阿鲁巴（荷兰）",iso_a2:"AW",iso_a3:"ABW",iso_n3:"533"},geometry:{type:"Polygon",coordinates:[[[-69.899121,12.452002],[-70.035107,12.614111],[-70.066113,12.546973],[-69.899121,12.452002]]]}},{type:"Feature",properties:{name:"库拉索",full_name:"库拉索岛（荷兰）",iso_a2:"CW",iso_a3:"CUW",iso_n3:"531"},geometry:{type:"Polygon",coordinates:[[[-68.751074,12.059766],[-69.158887,12.380273],[-68.995117,12.141846],[-68.751074,12.059766]]]}},{type:"Feature",properties:{name:"尼泊尔",full_name:"尼泊尔",iso_a2:"NP",iso_a3:"NPL",iso_n3:"524"},geometry:{type:"Polygon",coordinates:[[[88.109766,27.870605],[87.141406,27.83833],[86.137012,28.114355],[85.994531,27.9104],[85.67832,28.277441],[85.122461,28.315967],[85.159082,28.592236],[84.228711,28.911768],[84.101367,29.219971],[83.583496,29.183594],[82.043359,30.326758],[81.010254,30.164502],[80.401855,29.730273],[80.070703,28.830176],[82.733398,27.518994],[84.091016,27.491357],[85.794531,26.60415],[87.995117,26.382373],[88.109766,27.870605]]]}},{type:"Feature",properties:{name:"瑙鲁",full_name:"瑙鲁共和国",iso_a2:"NR",iso_a3:"NRU",iso_n3:"520"},geometry:{type:"Polygon",coordinates:[[[166.958398,-.516602],[166.907031,-.52373],[166.938965,-.550781],[166.958398,-.516602]]]}},{type:"Feature",properties:{name:"纳米比亚",full_name:"纳米比亚共和国",iso_a2:"NA",iso_a3:"NAM",iso_n3:"516"},geometry:{type:"Polygon",coordinates:[[[23.380664,-17.640625],[20.745508,-18.019727],[18.955273,-17.803516],[18.396387,-17.399414],[14.01748,-17.408887],[13.101172,-16.967676],[11.743066,-17.249219],[11.775879,-18.001758],[14.462793,-22.449121],[14.501562,-24.201953],[14.967773,-26.318066],[15.341504,-27.386523],[16.447559,-28.617578],[17.05625,-28.031055],[17.447949,-28.698145],[18.102734,-28.87168],[19.161719,-28.93877],[19.980469,-28.45127],[19.980469,-24.776758],[19.977344,-22.000195],[20.979492,-21.961914],[20.974121,-18.318848],[23.219336,-17.999707],[23.599707,-18.459961],[24.243945,-18.023438],[25.258789,-17.793555],[24.73291,-17.517773],[23.380664,-17.640625]]]}},{type:"Feature",properties:{name:"莫桑比克",full_name:"莫桑比克共和国",iso_a2:"MZ",iso_a3:"MOZ",iso_n3:"508"},geometry:{type:"Polygon",coordinates:[[[31.287891,-22.402051],[31.98584,-24.460645],[31.948242,-25.957617],[32.112891,-26.839453],[32.886133,-26.849316],[32.954883,-26.083594],[32.848828,-26.268066],[32.59043,-26.004102],[32.792188,-25.644336],[34.99209,-24.650586],[35.489648,-24.065527],[35.530078,-22.248145],[35.315723,-22.396875],[34.649414,-19.701367],[34.947852,-19.812695],[36.403711,-18.769727],[37.244531,-17.739941],[39.844629,-16.435645],[40.558984,-15.473438],[40.844531,-14.718652],[40.436816,-12.983105],[40.463574,-10.464355],[38.491797,-11.413281],[37.920215,-11.294727],[37.372852,-11.710449],[36.305664,-11.706348],[35.911328,-11.454688],[34.959473,-11.578125],[34.618555,-11.620215],[34.357813,-12.164746],[34.563672,-13.360156],[35.247461,-13.896875],[35.892773,-14.891797],[35.755273,-16.058301],[35.358496,-16.160547],[35.167188,-16.560254],[35.272559,-17.118457],[34.248242,-15.8875],[34.54082,-15.297266],[34.505273,-14.598145],[34.33252,-14.408594],[33.636426,-14.568164],[33.201758,-14.013379],[30.231836,-14.990332],[30.396094,-15.643066],[30.437793,-15.995313],[31.23623,-16.023633],[32.948047,-16.712305],[32.993066,-18.35957],[32.699707,-18.940918],[32.992773,-19.984863],[32.492383,-20.659766],[32.429785,-21.29707],[31.287891,-22.402051]]]}},{type:"Feature",properties:{name:"摩洛哥",full_name:"摩洛哥王国",iso_a2:"MA",iso_a3:"MAR",iso_n3:"504"},geometry:{type:"Polygon",coordinates:[[[-2.219629,35.104199],[-2.839941,35.127832],[-2.972217,35.407275],[-4.62832,35.206396],[-5.252686,35.614746],[-5.277832,35.902734],[-5.924805,35.785791],[-6.900977,33.969043],[-8.512842,33.252441],[-9.24585,32.572461],[-9.808691,31.424609],[-9.66709,30.109277],[-10.200586,29.380371],[-11.552686,28.310107],[-12.948926,27.91416],[-13.575781,26.735107],[-14.413867,26.253711],[-14.904297,24.719775],[-15.899316,23.844434],[-17.003076,21.420703],[-14.750977,21.500586],[-14.221191,22.310156],[-13.891113,23.691016],[-12.431152,24.830664],[-12.060986,25.99082],[-11.718213,26.104102],[-11.392578,26.883398],[-9.817871,26.850195],[-8.794873,27.120703],[-8.68335,27.656445],[-8.678418,28.689404],[-7.685156,29.349512],[-5.448779,29.956934],[-4.968262,30.465381],[-3.666797,30.964014],[-3.826758,31.661914],[-3.017383,31.834277],[-2.887207,32.068848],[-1.225928,32.107227],[-1.065527,32.468311],[-1.679199,33.318652],[-1.795605,34.751904],[-2.219629,35.104199]]]}},{type:"Feature",properties:{name:"西撒哈拉",full_name:"西撒哈拉",iso_a2:"EH",iso_a3:"ESH",iso_n3:"732"},geometry:{type:"Polygon",coordinates:[[[-8.68335,27.656445],[-8.794873,27.120703],[-9.817871,26.850195],[-11.392578,26.883398],[-11.718213,26.104102],[-12.060986,25.99082],[-12.431152,24.830664],[-13.891113,23.691016],[-14.221191,22.310156],[-14.750977,21.500586],[-17.003076,21.420703],[-17.048047,20.806152],[-16.964551,21.329248],[-13.016211,21.333936],[-13.153271,22.820508],[-12.023438,23.467578],[-12.016309,25.99541],[-8.682227,25.995508],[-8.68335,27.285938],[-8.68335,27.656445]]]}},{type:"Feature",properties:{name:"黑山",full_name:"黑山",iso_a2:"ME",iso_a3:"MNE",iso_n3:"499"},geometry:{type:"Polygon",coordinates:[[[19.194336,43.533301],[18.460156,42.9979],[18.436328,42.559717],[18.51748,42.43291],[19.342383,41.869092],[19.654492,42.628564],[20.063965,42.547266],[20.344336,42.82793],[19.194336,43.533301]]]}},{type:"Feature",properties:{name:"蒙古",full_name:"蒙古国",iso_a2:"MN",iso_a3:"MNG",iso_n3:"496"},geometry:{type:"Polygon",coordinates:[[[87.814258,49.162305],[87.979688,48.555127],[89.047656,48.002539],[90.02793,47.877686],[90.869922,46.954492],[90.877246,45.196094],[93.516211,44.944482],[95.350293,44.278076],[96.385449,42.720361],[101.495313,42.53877],[102.156641,42.158105],[103.711133,41.751318],[104.498242,41.877002],[104.498242,41.658691],[104.982031,41.595508],[106.77002,42.288721],[109.339844,42.438379],[110.400391,42.773682],[111.933203,43.711426],[111.402246,44.367285],[111.898047,45.064062],[113.587012,44.745703],[114.560156,45.38999],[115.681055,45.458252],[116.562598,46.289795],[117.333398,46.362012],[117.438086,46.58623],[119.867188,46.672168],[119.711133,47.15],[118.498438,47.983984],[117.768359,47.987891],[117.350781,47.652197],[116.760547,47.869775],[115.898242,47.686914],[115.616406,47.874805],[116.683301,49.823779],[116.216797,50.009277],[115.429199,49.896484],[114.29707,50.274414],[112.806445,49.523584],[110.709766,49.142969],[108.613672,49.322803],[107.916602,49.947803],[107.233301,49.989404],[106.711133,50.312598],[105.383594,50.47373],[103.304395,50.200293],[102.288379,50.585107],[102.111523,51.353467],[98.893164,52.117285],[97.835742,51.05166],[98.250293,50.302441],[97.359766,49.741455],[94.614746,50.02373],[94.251074,50.556396],[92.354785,50.86416],[90.053711,50.09375],[89.395605,49.611523],[88.192578,49.451709],[87.814258,49.162305]]]}},{type:"Feature",properties:{name:"摩尔多瓦",full_name:"摩尔多瓦共和国",iso_a2:"MD",iso_a3:"MDA",iso_n3:"498"},geometry:{type:"Polygon",coordinates:[[[26.618945,48.259863],[28.071777,46.978418],[28.2125,45.450439],[28.947754,46.049951],[28.958398,46.458496],[30.131055,46.423096],[29.134863,47.489697],[29.125391,47.964551],[27.549219,48.477734],[26.618945,48.259863]]]}},{type:"Feature",properties:{name:"摩纳哥",full_name:"摩纳哥公国",iso_a2:"MC",iso_a3:"MCO",iso_n3:"492"},geometry:{type:"Polygon",coordinates:[[[7.438672,43.750439],[7.39502,43.765332],[7.377734,43.731738],[7.438672,43.750439]]]}},{type:"Feature",properties:{name:"墨西哥",full_name:"墨西哥合众国",iso_a2:"MX",iso_a3:"MEX",iso_n3:"484"},geometry:{type:"MultiPolygon",coordinates:[[[[-117.128271,32.53335],[-115.673828,29.756396],[-114.048486,28.426172],[-114.265869,27.934473],[-114.069336,27.675684],[-114.300586,27.872998],[-114.993506,27.736035],[-113.598535,26.721289],[-113.155811,26.94624],[-113.020752,26.583252],[-112.377246,26.213916],[-112.069873,25.572852],[-112.072559,24.840039],[-110.362695,23.604932],[-110.00625,22.894043],[-109.495703,23.159814],[-109.42085,23.480127],[-110.262891,24.344531],[-110.367432,24.100488],[-110.659326,24.341455],[-111.569678,26.707617],[-111.795264,26.879688],[-111.699414,26.580957],[-111.862646,26.678516],[-112.734033,27.825977],[-112.87085,28.424219],[-114.550488,30.022266],[-114.933594,31.900732],[-113.046729,31.179248],[-113.057666,30.651025],[-112.161768,29.018896],[-111.121387,27.966992],[-110.529883,27.864209],[-110.377295,27.233301],[-109.27627,26.533887],[-109.116699,26.252734],[-109.425635,26.032568],[-109.384961,25.727148],[-108.886572,25.733447],[-109.028809,25.480469],[-108.051465,25.067041],[-108.280762,25.081543],[-107.951172,24.614893],[-107.511914,24.48916],[-107.764941,24.471924],[-105.791797,22.62749],[-105.649121,21.988086],[-105.208691,21.49082],[-105.51084,20.80874],[-105.260156,20.579053],[-105.669434,20.385596],[-104.938477,19.309375],[-103.912451,18.828467],[-103.441602,18.325391],[-101.918701,17.959766],[-100.847803,17.200488],[-97.754785,15.966846],[-96.213574,15.693066],[-94.799414,16.209668],[-95.02085,16.277637],[-94.858691,16.419727],[-94.587109,16.31582],[-94.661523,16.201904],[-94.00127,16.018945],[-94.37417,16.284766],[-93.166895,15.448047],[-92.235156,14.54541],[-92.204248,15.275],[-91.736572,16.070166],[-90.447168,16.072705],[-90.416992,16.391016],[-91.409619,17.255859],[-90.992969,17.252441],[-90.98916,17.816406],[-89.161475,17.814844],[-88.295654,18.472412],[-88.031738,18.838916],[-87.881982,18.273877],[-87.761816,18.446143],[-87.424756,19.58335],[-87.687695,19.637109],[-86.771777,21.150537],[-87.034766,21.592236],[-88.466699,21.569385],[-90.353125,21.009424],[-90.739258,19.352246],[-91.43667,18.889795],[-91.275244,18.624463],[-91.533984,18.456543],[-92.441016,18.675293],[-94.459766,18.16665],[-95.181836,18.700732],[-95.920361,18.81958],[-97.186328,20.717041],[-97.753809,22.02666],[-97.40918,21.272559],[-97.314502,21.564209],[-97.84248,22.510303],[-97.667676,24.38999],[-97.14624,25.961475],[-99.107764,26.446924],[-99.505322,27.54834],[-101.440381,29.776855],[-102.614941,29.752344],[-103.168311,28.998193],[-104.110596,29.386133],[-104.978809,30.645947],[-106.44541,31.768408],[-108.211816,31.779346],[-108.214453,31.329443],[-111.041992,31.324219],[-114.835938,32.508301],[-114.724756,32.715332],[-117.128271,32.53335]]],[[[-115.170605,28.069385],[-115.233545,28.368359],[-115.35293,28.103955],[-115.170605,28.069385]]],[[[-112.203076,29.005322],[-112.423535,29.203662],[-112.514062,28.847607],[-112.278418,28.769336],[-112.203076,29.005322]]],[[[-112.057275,24.545703],[-112.159424,25.285645],[-112.296777,24.789648],[-112.057275,24.545703]]]]}},{type:"Feature",properties:{name:"毛里求斯",full_name:"毛里求斯共和国",iso_a2:"MU",iso_a3:"MUS",iso_n3:"480"},geometry:{type:"Polygon",coordinates:[[[57.65127,-20.484863],[57.656543,-19.989941],[57.317676,-20.427637],[57.65127,-20.484863]]]}},{type:"Feature",properties:{name:"毛里塔尼亚",full_name:"毛里塔尼亚伊斯兰共和国",iso_a2:"MR",iso_a3:"MRT",iso_n3:"478"},geometry:{type:"Polygon",coordinates:[[[-12.280615,14.809033],[-11.940918,14.886914],[-11.502686,15.636816],[-10.895605,15.150488],[-10.696582,15.422656],[-9.446924,15.458203],[-9.350586,15.677393],[-9.176807,15.496094],[-5.5125,15.496289],[-5.359912,16.282861],[-5.628662,16.568652],[-5.941016,19.296191],[-6.594092,24.994629],[-4.822607,24.995605],[-8.68335,27.285938],[-8.682227,25.995508],[-12.016309,25.99541],[-12.023438,23.467578],[-13.153271,22.820508],[-13.016211,21.333936],[-16.964551,21.329248],[-17.048047,20.806152],[-16.92793,21.114795],[-16.210449,20.22793],[-16.514453,19.361963],[-16.213086,19.00332],[-16.030322,17.887939],[-16.535254,15.838379],[-16.239014,16.531299],[-14.53374,16.655957],[-13.409668,16.05918],[-12.280615,14.809033]]]}},{type:"Feature",properties:{name:"马耳他",full_name:"马耳他共和国",iso_a2:"MT",iso_a3:"MLT",iso_n3:"470"},geometry:{type:"Polygon",coordinates:[[[14.566211,35.852734],[14.35127,35.978418],[14.436426,35.82168],[14.566211,35.852734]]]}},{type:"Feature",properties:{name:"马里",full_name:"马里共和国",iso_a2:"ML",iso_a3:"MLI",iso_n3:"466"},geometry:{type:"Polygon",coordinates:[[[-11.389404,12.404395],[-11.502197,12.198633],[-11.305176,12.01543],[-10.933203,12.205176],[-10.709229,11.89873],[-10.274854,12.212646],[-9.754004,12.029932],[-9.358105,12.25542],[-9.395361,12.464648],[-9.043066,12.402344],[-8.822021,11.673242],[-8.398535,11.366553],[-8.666699,11.009473],[-8.337402,10.990625],[-7.990625,10.1625],[-7.497949,10.439795],[-7.01709,10.143262],[-6.65415,10.656445],[-6.261133,10.724072],[-6.196875,10.232129],[-5.523535,10.426025],[-5.288135,11.82793],[-4.428711,12.337598],[-4.151025,13.306201],[-3.301758,13.280762],[-3.248633,13.65835],[-2.95083,13.648438],[-2.586719,14.227588],[-2.113232,14.168457],[-1.973047,14.456543],[-.760449,15.047754],[.21748,14.911475],[.947461,14.982129],[1.300195,15.272266],[3.504297,15.356348],[3.842969,15.701709],[4.234668,16.996387],[4.227637,19.142773],[3.119727,19.103174],[3.130273,19.850195],[1.685449,20.378369],[1.145508,21.102246],[-4.822607,24.995605],[-6.594092,24.994629],[-5.941016,19.296191],[-5.628662,16.568652],[-5.359912,16.282861],[-5.5125,15.496289],[-9.176807,15.496094],[-9.350586,15.677393],[-9.446924,15.458203],[-10.696582,15.422656],[-10.895605,15.150488],[-11.502686,15.636816],[-11.940918,14.886914],[-12.280615,14.809033],[-12.054199,13.633057],[-11.390381,12.941992],[-11.389404,12.404395]]]}},{type:"Feature",properties:{name:"马尔代夫",full_name:"马尔代夫共和国",iso_a2:"MV",iso_a3:"MDV",iso_n3:"462"},geometry:{type:"Polygon",coordinates:[[[73.512207,4.164551],[73.517773,4.247656],[73.473047,4.170703],[73.512207,4.164551]]]}},{type:"Feature",properties:{name:"马来西亚",full_name:"马来西亚",iso_a2:"MY",iso_a3:"MYS",iso_n3:"458"},geometry:{type:"MultiPolygon",coordinates:[[[[100.119141,6.441992],[100.71543,3.966211],[101.299902,3.253271],[101.295508,2.885205],[103.480273,1.329492],[103.694531,1.449658],[103.991504,1.454785],[103.981445,1.623633],[104.250098,1.388574],[103.812207,2.580469],[103.439453,2.933105],[103.41582,4.850293],[103.09707,5.408447],[102.101074,6.242236],[101.873633,5.825293],[101.556055,5.907764],[101.113965,5.636768],[101.053516,6.242578],[100.261426,6.682715],[100.119141,6.441992]]],[[[117.574414,4.170605],[118.54834,4.379248],[118.260547,4.988867],[118.9125,5.0229],[119.266309,5.308105],[118.353125,5.806055],[117.973633,5.70625],[118.003809,6.05332],[117.501172,5.884668],[117.69375,6.35],[117.229883,6.93999],[116.788086,6.606104],[116.749805,6.9771],[115.877148,5.613525],[115.419043,5.413184],[115.554492,5.093555],[115.140039,4.899756],[115.290625,4.352588],[115.026758,4.899707],[114.74668,4.718066],[114.654102,4.037646],[114.063867,4.592676],[112.987891,3.161914],[111.5125,2.743018],[111.028711,1.557812],[111.223242,1.39585],[109.864844,1.764453],[109.628906,2.027539],[109.654004,1.614893],[110.505762,.861963],[111.808984,1.01167],[112.476172,1.559082],[113.622266,1.235938],[114.5125,1.452002],[114.786426,2.250488],[115.179102,2.523193],[115.117578,2.894873],[115.454395,3.034326],[115.678809,4.193018],[116.514746,4.370801],[117.574414,4.170605]]],[[[99.848047,6.465723],[99.646289,6.418359],[99.74375,6.263281],[99.848047,6.465723]]]]}},{type:"Feature",properties:{name:"马拉维",full_name:"马拉维共和国",iso_a2:"MW",iso_a3:"MWI",iso_n3:"454"},geometry:{type:"Polygon",coordinates:[[[33.201758,-14.013379],[33.636426,-14.568164],[34.33252,-14.408594],[34.505273,-14.598145],[34.54082,-15.297266],[34.248242,-15.8875],[35.272559,-17.118457],[35.167188,-16.560254],[35.358496,-16.160547],[35.755273,-16.058301],[35.892773,-14.891797],[35.247461,-13.896875],[34.563672,-13.360156],[34.357813,-12.164746],[34.618555,-11.620215],[34.959473,-11.578125],[34.60791,-11.080469],[34.320898,-9.731543],[33.995605,-9.49541],[33.888867,-9.670117],[32.919922,-9.407422],[33.661523,-10.553125],[33.261328,-10.893359],[33.252344,-12.112598],[33.512305,-12.347754],[33.021582,-12.630469],[32.67041,-13.59043],[33.201758,-14.013379]]]}},{type:"Feature",properties:{name:"马达加斯加",full_name:"马达加斯加共和国",iso_a2:"MG",iso_a3:"MDG",iso_n3:"450"},geometry:{type:"MultiPolygon",coordinates:[[[[49.538281,-12.432129],[49.207031,-12.07959],[48.786328,-12.470898],[48.796484,-13.26748],[48.255273,-13.719336],[47.941016,-13.662402],[47.77334,-14.369922],[47.96416,-14.672559],[47.47832,-15.009375],[47.351953,-14.766113],[47.099219,-15.43418],[46.942285,-15.219043],[46.475098,-15.513477],[46.399609,-15.924609],[46.15752,-15.738281],[44.476172,-16.217285],[43.979395,-17.391602],[44.404688,-19.92207],[43.501855,-21.356445],[43.264844,-22.383594],[44.035352,-24.995703],[45.205762,-25.570508],[46.728516,-25.149902],[47.177344,-24.787207],[49.362891,-18.336328],[49.449316,-17.240625],[49.839063,-16.486523],[49.664355,-15.521582],[49.892578,-15.457715],[50.208984,-15.960449],[50.482715,-15.385645],[49.9375,-13.072266],[49.538281,-12.432129]]],[[[49.936426,-16.90293],[50.023047,-16.695312],[49.824023,-17.086523],[49.936426,-16.90293]]]]}},{type:"Feature",properties:{name:"北马其顿",full_name:"北马其顿共和国",iso_a2:"MK",iso_a3:"MKD",iso_n3:"807"},geometry:{type:"Polygon",coordinates:[[[21.5625,42.24751],[20.566211,41.873682],[20.488965,41.272607],[20.964258,40.849902],[22.916016,41.336279],[23.003613,41.739844],[22.344043,42.313965],[21.5625,42.24751]]]}},{type:"Feature",properties:{name:"卢森堡",full_name:"卢森堡大公国",iso_a2:"LU",iso_a3:"LUX",iso_n3:"442"},geometry:{type:"Polygon",coordinates:[[[6.116504,50.120996],[5.744043,49.919629],[5.789746,49.538281],[6.344336,49.452734],[6.487305,49.798486],[6.116504,50.120996]]]}},{type:"Feature",properties:{name:"立陶宛",full_name:"立陶宛共和国",iso_a2:"LT",iso_a3:"LTU",iso_n3:"440"},geometry:{type:"MultiPolygon",coordinates:[[[[20.957813,55.278906],[21.114844,55.616504],[20.899805,55.28667],[20.957813,55.278906]]],[[[22.766211,54.356787],[23.484668,53.939795],[24.317969,53.892969],[25.461133,54.292773],[25.749219,54.156982],[25.780859,54.833252],[26.775684,55.273096],[26.457617,55.34248],[26.593555,55.667529],[24.841016,56.411182],[24.120703,56.264258],[22.08457,56.406738],[21.046094,56.070068],[21.235742,55.264111],[22.567285,55.059131],[22.766211,54.356787]]]]}},{type:"Feature",properties:{name:"列支敦士登",full_name:"列支敦士登公国",iso_a2:"LI",iso_a3:"LIE",iso_n3:"438"},geometry:{type:"Polygon",coordinates:[[[9.580273,47.057373],[9.527539,47.270752],[9.487695,47.062256],[9.580273,47.057373]]]}},{type:"Feature",properties:{name:"利比亚",full_name:"利比亚国",iso_a2:"LY",iso_a3:"LBY",iso_n3:"434"},geometry:{type:"Polygon",coordinates:[[[9.51875,30.229395],[9.310254,30.115234],[9.805273,29.176953],[9.916016,27.785693],[9.883203,26.630811],[9.448242,26.067139],[10.255859,24.591016],[11.507617,24.314355],[11.967871,23.517871],[13.48125,23.180176],[14.215527,22.619678],[14.979004,22.996191],[15.984082,23.445215],[20.147656,21.389258],[23.980273,19.496631],[23.980273,19.995947],[24.979492,20.002588],[24.980273,21.99585],[24.980273,29.181885],[24.703223,30.201074],[24.961426,30.678516],[24.852734,31.334814],[25.150488,31.65498],[24.878516,31.984277],[23.286328,32.213818],[23.090625,32.61875],[21.635938,32.937305],[20.121484,32.21875],[19.926367,31.817529],[20.111523,30.963721],[19.713281,30.488379],[19.12373,30.266113],[17.830469,30.927588],[15.705957,31.426416],[15.176563,32.391162],[13.283496,32.914648],[12.279883,32.858545],[11.50459,33.181934],[11.50498,32.413672],[10.274609,31.684961],[10.216406,30.783203],[9.51875,30.229395]]]}},{type:"Feature",properties:{name:"利比里亚",full_name:"利比里亚共和国",iso_a2:"LR",iso_a3:"LBR",iso_n3:"430"},geometry:{type:"Polygon",coordinates:[[[-11.50752,6.906543],[-9.132178,5.054639],[-7.544971,4.351318],[-7.454395,5.841309],[-8.603564,6.507812],[-8.302344,6.980957],[-8.486426,7.558496],[-8.659766,7.688379],[-9.117578,7.215918],[-9.463818,7.415869],[-9.518262,8.346094],[-10.283203,8.485156],[-10.647461,7.759375],[-11.50752,6.906543]]]}},{type:"Feature",properties:{name:"莱索托",full_name:"莱索托王国",iso_a2:"LS",iso_a3:"LSO",iso_n3:"426"},geometry:{type:"Polygon",coordinates:[[[28.736914,-30.101953],[29.098047,-29.919043],[29.390723,-29.269727],[28.625781,-28.581738],[27.735547,-28.940039],[27.056934,-29.625586],[27.753125,-30.6],[28.056836,-30.631055],[28.39209,-30.147559],[28.736914,-30.101953]]]}},{type:"Feature",properties:{name:"黎巴嫩",full_name:"黎巴嫩共和国",iso_a2:"LB",iso_a3:"LBN",iso_n3:"422"},geometry:{type:"Polygon",coordinates:[[[35.97627,34.629199],[35.108594,33.083691],[35.840723,33.415674],[35.869141,33.431738],[36.584961,34.22124],[36.383887,34.65791],[35.97627,34.629199]]]}},{type:"Feature",properties:{name:"拉脱维亚",full_name:"拉脱维亚共和国",iso_a2:"LV",iso_a3:"LVA",iso_n3:"428"},geometry:{type:"Polygon",coordinates:[[[26.593555,55.667529],[27.576758,55.798779],[28.147949,56.14292],[27.639453,56.845654],[27.828613,57.293311],[27.351953,57.528125],[26.462109,57.544482],[25.282617,58.048486],[24.322559,57.870605],[24.382617,57.250049],[23.647754,56.971045],[22.55459,57.724268],[21.728711,57.570996],[21.071289,56.82373],[21.046094,56.070068],[22.08457,56.406738],[24.120703,56.264258],[24.841016,56.411182],[26.593555,55.667529]]]}},{type:"Feature",properties:{name:"老挝",full_name:"老挝人民民主共和国",iso_a2:"LA",iso_a3:"LAO",iso_n3:"418"},geometry:{type:"Polygon",coordinates:[[[102.127441,22.379199],[101.73877,22.495264],[101.524512,22.253662],[101.800586,21.212598],[101.247852,21.197314],[101.138867,21.56748],[100.703125,21.251367],[100.622949,20.85957],[100.249316,20.730273],[100.122461,20.31665],[100.519531,20.17793],[100.513574,19.553467],[101.211914,19.54834],[100.955859,17.541113],[102.101465,18.210645],[102.680078,17.824121],[103.366992,18.42334],[103.949609,18.318994],[104.739648,17.46167],[104.819336,16.466064],[105.641016,15.656543],[105.497363,14.590674],[105.183301,14.34624],[106.066797,13.921191],[105.978906,14.343018],[106.501465,14.578223],[106.938086,14.327344],[107.519434,14.705078],[107.653125,15.255225],[107.165918,15.80249],[107.396387,16.043018],[106.656445,16.492627],[106.502246,16.954102],[105.114551,18.405273],[105.146484,18.650977],[103.891602,19.30498],[104.032031,19.675146],[104.587891,19.61875],[104.92793,20.018115],[104.367773,20.441406],[104.583203,20.64668],[104.101367,20.945508],[103.635059,20.69707],[103.104492,20.89165],[102.851172,21.265918],[102.949609,21.681348],[102.662012,21.676025],[102.127441,22.379199]]]}},{type:"Feature",properties:{name:"吉尔吉斯斯坦",full_name:"吉尔吉斯共和国",iso_a2:"KG",iso_a3:"KGZ",iso_n3:"417"},geometry:{type:"Polygon",coordinates:[[[70.958008,40.238867],[70.515137,39.949902],[69.966797,40.202246],[69.530273,40.097314],[69.297656,39.524805],[70.501172,39.587354],[70.799316,39.394727],[71.470312,39.603662],[72.22998,39.20752],[73.631641,39.448877],[73.991602,40.043115],[74.835156,40.482617],[75.555566,40.625195],[75.677148,40.305811],[76.318555,40.352246],[76.907715,41.02417],[78.123438,41.075635],[80.209375,42.190039],[79.12666,42.775732],[75.366211,42.836963],[74.209082,43.240381],[73.55625,43.002783],[73.492969,42.409033],[71.760547,42.821484],[71.256641,42.733545],[70.946777,42.248682],[71.228516,42.162891],[70.200879,41.514453],[71.393066,41.123389],[71.664941,41.541211],[72.187305,41.025928],[73.136914,40.810645],[71.69248,40.152344],[70.958008,40.238867]]]}},{type:"Feature",properties:{name:"科威特",full_name:"科威特国",iso_a2:"KW",iso_a3:"KWT",iso_n3:"414"},geometry:{type:"Polygon",coordinates:[[[48.44248,28.54292],[48.051465,29.355371],[47.722656,29.393018],[48.143457,29.572461],[47.978711,29.982812],[47.148242,30.000977],[46.531445,29.09624],[47.433203,28.989551],[47.671289,28.533154],[48.44248,28.54292]]]}},{type:"Feature",properties:{name:"基里巴斯",full_name:"基里巴斯共和国",iso_a2:"KI",iso_a3:"KIR",iso_n3:"296"},geometry:{type:"Polygon",coordinates:[[[-157.342139,1.855566],[-157.578955,1.902051],[-157.175781,1.739844],[-157.342139,1.855566]]]}},{type:"Feature",properties:{name:"肯尼亚",full_name:"肯尼亚共和国",iso_a2:"KE",iso_a3:"KEN",iso_n3:"404"},geometry:{type:"Polygon",coordinates:[[[33.903223,-1.002051],[37.643848,-3.04541],[37.608203,-3.49707],[39.221777,-4.692383],[40.11543,-3.250586],[40.222461,-2.688379],[41.532715,-1.695312],[40.978711,-.870313],[40.964453,2.814648],[41.883984,3.977734],[41.14043,3.962988],[40.765234,4.273047],[39.494434,3.456104],[38.086133,3.648828],[36.905566,4.411475],[36.021973,4.468115],[35.74502,5.343994],[35.268359,5.492285],[33.976074,4.220215],[34.437695,3.650586],[34.978223,1.773633],[33.943164,.173779],[33.903223,-1.002051]]]}},{type:"Feature",properties:{name:"哈萨克斯坦",full_name:"哈萨克斯坦共和国",iso_a2:"KZ",iso_a3:"KAZ",iso_n3:"398"},geometry:{type:"Polygon",coordinates:[[[70.946777,42.248682],[71.256641,42.733545],[71.760547,42.821484],[73.492969,42.409033],[73.55625,43.002783],[74.209082,43.240381],[75.366211,42.836963],[79.12666,42.775732],[80.209375,42.190039],[80.202246,42.734473],[80.785742,43.161572],[80.355273,44.097266],[80.481543,44.714648],[79.871875,44.883789],[81.691992,45.349365],[82.521484,45.125488],[82.315234,45.594922],[83.029492,47.185938],[84.786133,46.830713],[85.484766,47.063525],[85.749414,48.385059],[86.549414,48.528613],[86.808301,49.049707],[87.322852,49.085791],[86.675488,49.777295],[86.180859,49.499316],[85.232617,49.61582],[84.989453,50.061426],[84.323242,50.23916],[83.357324,50.99458],[82.493945,50.727588],[81.465918,50.739844],[80.735254,51.293408],[79.98623,50.774561],[77.859961,53.269189],[76.484766,54.022559],[76.837305,54.442383],[74.351562,53.487646],[73.858984,53.619727],[73.406934,53.447559],[73.712402,54.042383],[72.622266,54.134326],[72.446777,53.941846],[72.186035,54.325635],[71.093164,54.212207],[70.738086,55.305176],[70.182422,55.162451],[68.977246,55.3896],[68.155859,54.976709],[65.476953,54.623291],[65.088379,54.340186],[61.231055,54.019482],[60.979492,53.621729],[61.534961,53.523291],[61.199219,53.287158],[62.082715,53.00542],[61.047461,52.972461],[60.774414,52.675781],[60.994531,52.336865],[60.030273,51.933252],[61.554688,51.324609],[61.389453,50.861035],[60.942285,50.695508],[60.058594,50.850293],[59.523047,50.492871],[57.838867,51.09165],[57.442188,50.888867],[56.491406,51.019531],[55.68623,50.582861],[54.641602,51.011572],[54.555273,50.535791],[53.338086,51.482373],[52.219141,51.709375],[51.344531,51.475342],[50.793945,51.729199],[48.625098,50.612695],[48.758984,49.92832],[48.334961,49.858252],[47.429199,50.357959],[46.889551,49.696973],[47.031348,49.150293],[46.660938,48.412256],[47.292383,47.740918],[48.166992,47.708789],[48.959375,46.774609],[48.541211,46.605615],[49.232227,46.337158],[51.178027,47.110156],[52.138281,46.828613],[52.483203,46.990674],[53.069434,46.856055],[53.135254,46.19165],[52.773828,45.572754],[53.200391,45.331982],[51.415723,45.357861],[51.009375,44.921826],[51.543555,44.531006],[50.409473,44.624023],[50.25293,44.461523],[50.830762,44.192773],[51.29541,43.174121],[52.596582,42.760156],[52.493848,41.780371],[53.055859,42.147754],[54.120996,42.335205],[55.434375,41.296289],[55.977441,41.322217],[55.975684,44.994922],[58.555273,45.555371],[61.00791,44.393799],[61.990234,43.492139],[64.905469,43.714697],[65.803027,42.876953],[66.100293,42.99082],[66.00957,42.004883],[66.498633,41.994873],[66.709668,41.17915],[67.935742,41.196582],[68.291895,40.656104],[68.572656,40.622656],[69.153613,41.425244],[70.946777,42.248682]]]}},{type:"Feature",properties:{name:"约旦",full_name:"约旦哈希姆王国",iso_a2:"JO",iso_a3:"JOR",iso_n3:"400"},geometry:{type:"Polygon",coordinates:[[[35.787305,32.734912],[35.551465,32.395508],[35.450586,31.479297],[34.973438,29.555029],[34.950781,29.353516],[36.068457,29.200537],[36.755273,29.866016],[37.469238,29.995068],[37.980078,30.5],[36.958594,31.491504],[39.14541,32.124512],[38.773535,33.372217],[36.818359,32.317285],[35.787305,32.734912]]]}},{type:"Feature",properties:{name:"日本",full_name:"日本国",iso_a2:"JP",iso_a3:"JPN",iso_n3:"392"},geometry:{type:"MultiPolygon",coordinates:[[[[134.932812,34.288135],[135.004688,34.544043],[134.667871,34.294141],[134.932812,34.288135]]],[[[143.824316,44.116992],[141.937695,45.509521],[141.667969,45.40127],[141.760938,44.48252],[141.374121,43.279639],[140.392383,43.303125],[140.432227,42.954102],[139.860156,42.581738],[140.085156,41.434082],[140.659863,41.815576],[141.150977,41.805078],[140.32666,42.293359],[140.480469,42.559375],[140.986133,42.342139],[141.851367,42.579053],[143.236523,42.000195],[143.969336,42.881396],[145.833008,43.385938],[145.34082,43.302539],[145.139648,43.6625],[145.369531,44.327393],[144.715234,43.927979],[143.824316,44.116992]]],[[[131.174609,33.602588],[130.715625,33.927783],[129.580078,33.236279],[129.991699,32.851562],[129.679102,33.059961],[129.768555,32.570996],[130.34043,32.701855],[130.2375,33.177637],[130.547266,32.831592],[130.147266,31.408496],[130.58877,31.178516],[130.77627,31.706299],[130.685742,31.015137],[131.070801,31.436865],[131.337207,31.404688],[132.002148,32.882373],[131.896582,33.25459],[131.537402,33.274072],[131.696289,33.602832],[131.174609,33.602588]]],[[[134.357422,34.256348],[133.94834,34.348047],[133.193066,33.933203],[132.935156,34.095312],[132.032617,33.33999],[132.412793,33.430469],[132.495117,32.916602],[132.804297,32.752002],[133.632031,33.510986],[134.181641,33.247217],[134.738867,33.820508],[134.6375,34.226611],[134.357422,34.256348]]],[[[141.229297,41.372656],[140.936914,41.505566],[140.801855,41.253662],[141.244238,41.205615],[141.118555,40.882275],[140.748633,40.830322],[140.627637,41.19541],[140.344434,41.20332],[139.741504,39.92085],[140.064746,39.624414],[139.801953,38.881592],[139.363867,38.099023],[138.319922,37.218408],[137.246289,36.753174],[136.899902,37.117676],[137.322656,37.52207],[136.843457,37.382129],[135.903125,35.606885],[135.326953,35.525537],[135.174316,35.74707],[132.922949,35.511279],[131.354395,34.413184],[131.004199,34.392578],[130.918848,33.975732],[131.740527,34.052051],[132.146484,33.83877],[132.312598,34.324951],[133.142383,34.302441],[134.740039,34.765234],[135.415918,34.61748],[135.12793,34.006982],[135.695312,33.486963],[136.329883,34.176855],[136.853711,34.324072],[136.533008,34.678369],[136.804199,35.050293],[136.871289,34.733105],[137.275195,34.77251],[137.061719,34.582812],[138.189063,34.596338],[138.719629,35.124072],[138.8375,34.619238],[139.249414,35.278027],[139.675,35.149268],[139.834766,35.658057],[140.096875,35.585156],[139.843945,34.914893],[140.354688,35.181445],[140.874023,35.724951],[140.573535,36.231348],[141.00166,37.114648],[140.962109,38.148877],[141.46748,38.40415],[141.976953,39.428809],[141.430469,40.72334],[141.455469,41.404736],[141.229297,41.372656]]],[[[128.258789,26.652783],[128.254883,26.881885],[127.907227,26.693604],[127.653125,26.094727],[128.258789,26.652783]]],[[[129.452539,28.208984],[129.689551,28.51748],[129.164648,28.249756],[129.452539,28.208984]]]]}},{type:"Feature",properties:{name:"牙买加",full_name:"牙买加",iso_a2:"JM",iso_a3:"JAM",iso_n3:"388"},geometry:{type:"Polygon",coordinates:[[[-77.261475,18.457422],[-77.873438,18.522217],[-78.339502,18.287207],[-77.20498,17.714941],[-76.853223,17.97373],[-76.210791,17.913525],[-77.261475,18.457422]]]}},{type:"Feature",properties:{name:"意大利",full_name:"意大利共和国",iso_a2:"IT",iso_a3:"ITA",iso_n3:"380"},geometry:{type:"MultiPolygon",coordinates:[[[[7.021094,45.925781],[6.790918,45.740869],[7.146387,45.381738],[6.634766,45.068164],[6.992676,44.827295],[6.900195,44.335742],[7.637207,44.164844],[7.493164,43.767139],[8.76582,44.422314],[10.188086,43.94751],[10.514844,42.967529],[11.141211,42.389893],[15.692773,39.990186],[16.209961,38.941113],[15.645801,38.034229],[16.056836,37.941846],[16.616699,38.800146],[17.174609,38.998096],[17.114551,39.380615],[16.521875,39.747559],[16.928223,40.458057],[17.865039,40.280176],[18.34375,39.821387],[18.460645,40.221045],[15.900488,41.512061],[16.164648,41.896191],[15.16875,41.934033],[14.540723,42.244287],[13.56416,43.571289],[12.396289,44.223877],[12.274316,45.446045],[13.206348,45.771387],[13.719824,45.587598],[13.378223,46.261621],[13.7,46.520264],[12.388281,46.702637],[12.169434,47.082129],[10.993262,46.777002],[10.452832,46.864941],[10.12832,46.238232],[9.260156,46.475195],[9.02373,45.845703],[8.422559,46.446045],[7.787891,45.921826],[7.021094,45.925781]],[[12.43916,41.898389],[12.430566,41.897559],[12.430566,41.905469],[12.43916,41.898389]],[[12.485254,43.901416],[12.396875,43.93457],[12.503711,43.989746],[12.485254,43.901416]]],[[[15.576563,38.220312],[13.788867,37.981201],[12.734375,38.183057],[12.435547,37.819775],[15.112598,36.687842],[15.295703,37.055176],[15.099512,37.458594],[15.576563,38.220312]]],[[[9.632031,40.882031],[9.228418,41.25708],[8.571875,40.850195],[8.224219,40.91333],[8.648535,38.926562],[9.056348,39.23916],[9.5625,39.166016],[9.632031,40.882031]]]]}},{type:"Feature",properties:{name:"以色列",full_name:"以色列国",iso_a2:"IL",iso_a3:"ISR",iso_n3:"376"},geometry:{type:"Polygon",coordinates:[[[35.840723,33.415674],[35.108594,33.083691],[34.477344,31.584863],[34.245313,31.208301],[34.904297,29.477344],[34.973438,29.555029],[35.450586,31.479297],[34.872754,31.396875],[35.203711,31.75],[34.953809,31.84126],[35.065039,32.460449],[35.551465,32.395508],[35.787305,32.734912],[35.816125,33.361879],[35.840723,33.415674]]]}},{type:"Feature",properties:{name:"巴勒斯坦",full_name:"巴勒斯坦国",iso_a2:"PS",iso_a3:"PSE",iso_n3:"275"},geometry:{type:"MultiPolygon",coordinates:[[[[34.477344,31.584863],[34.198145,31.322607],[34.245313,31.208301],[34.477344,31.584863]]],[[[35.551465,32.395508],[35.065039,32.460449],[34.953809,31.84126],[35.203711,31.75],[34.872754,31.396875],[35.450586,31.479297],[35.551465,32.395508]]]]}},{type:"Feature",properties:{name:"爱尔兰",full_name:"爱尔兰",iso_a2:"IE",iso_a3:"IRL",iso_n3:"372"},geometry:{type:"Polygon",coordinates:[[[-7.218652,55.091992],[-6.96167,55.237891],[-7.308789,55.36582],[-7.65874,54.970947],[-7.66709,55.256494],[-8.274609,55.146289],[-8.763916,54.681201],[-8.133447,54.64082],[-8.545557,54.241211],[-10.056396,54.257812],[-9.578223,53.80542],[-10.09126,53.412842],[-8.930127,53.20708],[-9.916602,52.569727],[-8.783447,52.679639],[-10.356689,52.206934],[-9.909668,52.122949],[-10.341064,51.798926],[-9.598828,51.874414],[-10.120752,51.600684],[-8.813428,51.584912],[-8.40918,51.88877],[-6.325,52.24668],[-6.027393,52.9271],[-6.218018,54.088721],[-6.649805,54.058643],[-7.007715,54.406689],[-7.606543,54.143848],[-8.118262,54.414258],[-7.218652,55.091992]]]}},{type:"Feature",properties:{name:"伊拉克",full_name:"伊拉克共和国",iso_a2:"IQ",iso_a3:"IRQ",iso_n3:"368"},geometry:{type:"Polygon",coordinates:[[[42.358984,37.108594],[41.295996,36.38335],[40.987012,34.429053],[38.773535,33.372217],[39.14541,32.124512],[40.369336,31.938965],[42.074414,31.080371],[44.69082,29.202344],[46.531445,29.09624],[47.148242,30.000977],[47.978711,29.982812],[48.546484,29.962354],[48.014941,30.465625],[48.010645,30.989795],[47.679492,31.002393],[47.82998,31.794434],[47.371289,32.42373],[46.112793,32.957666],[46.019922,33.415723],[45.39707,33.97085],[46.273438,35.773242],[45.361621,36.015332],[44.765137,37.142432],[44.281836,36.978027],[44.114453,37.301855],[42.774609,37.371875],[42.358984,37.108594]]]}},{type:"Feature",properties:{name:"伊朗",full_name:"伊朗伊斯兰共和国",iso_a2:"IR",iso_a3:"IRN",iso_n3:"364"},geometry:{type:"MultiPolygon",coordinates:[[[[56.187988,26.921143],[55.757617,26.947656],[55.762598,26.811963],[55.311523,26.592627],[56.187988,26.921143]]],[[[53.91416,37.343555],[53.970117,36.818311],[52.190137,36.621729],[51.118555,36.742578],[50.130469,37.407129],[49.171191,37.600586],[48.86875,38.435498],[47.996484,38.85376],[48.322168,39.399072],[47.995898,39.683936],[46.490625,38.906689],[46.114453,38.877783],[45.479688,39.00625],[44.817188,39.650439],[44.587109,39.768555],[44.389355,39.422119],[44.023242,39.377441],[44.449902,38.334229],[44.211328,37.908057],[44.589941,37.710352],[44.765137,37.142432],[45.361621,36.015332],[46.273438,35.773242],[45.39707,33.97085],[46.019922,33.415723],[46.112793,32.957666],[47.371289,32.42373],[47.82998,31.794434],[47.679492,31.002393],[48.010645,30.989795],[48.014941,30.465625],[48.546484,29.962354],[48.919141,30.120898],[49.001953,30.506543],[49.554883,30.028955],[50.071582,30.198535],[51.278906,28.131348],[53.705762,26.725586],[54.759277,26.505078],[55.424023,26.770557],[55.650293,26.977539],[56.356152,27.200244],[56.982227,26.905469],[57.33457,25.791553],[59.046094,25.417285],[61.587891,25.202344],[61.842383,26.225928],[63.157812,26.649756],[63.301563,27.151465],[62.762988,27.250195],[62.758008,28.243555],[61.889844,28.546533],[60.843359,29.858691],[61.81084,30.913281],[61.660156,31.382422],[60.820703,31.495166],[60.561914,33.058789],[60.916992,33.505225],[60.51084,33.638916],[60.485742,34.094775],[60.889453,34.319434],[60.72627,34.518262],[61.262012,35.61958],[61.119629,36.642578],[60.341309,36.637646],[59.301758,37.510645],[58.261621,37.66582],[57.193555,38.216406],[55.380859,38.051123],[54.699414,37.470166],[53.91416,37.343555]]]]}},{type:"Feature",properties:{name:"印度尼西亚",full_name:"印度尼西亚共和国",iso_a2:"ID",iso_a3:"IDN",iso_n3:"360"},geometry:{type:"MultiPolygon",coordinates:[[[[97.481543,1.465088],[97.079199,1.425488],[97.82041,.564453],[97.931934,.973926],[97.481543,1.465088]]],[[[99.163867,-1.77793],[98.932617,-.954004],[98.676074,-.970508],[98.827734,-1.609961],[99.163867,-1.77793]]],[[[116.64082,-8.613867],[116.718945,-8.336035],[116.401563,-8.204199],[115.857324,-8.787891],[116.586523,-8.886133],[116.64082,-8.613867]]],[[[115.447852,-8.155176],[114.467578,-8.166309],[115.055078,-8.573047],[115.144922,-8.849023],[115.704297,-8.407129],[115.447852,-8.155176]]],[[[106.045703,-1.669434],[105.45957,-1.574707],[105.133398,-2.042578],[105.78584,-2.181348],[105.99873,-2.824902],[106.667188,-3.071777],[106.818457,-2.57334],[106.365918,-2.464844],[106.045703,-1.669434]]],[[[123.179785,-4.551172],[123.074609,-4.386914],[122.85332,-4.618359],[122.64502,-5.663379],[123.187305,-5.333008],[122.97168,-5.138477],[123.179785,-4.551172]]],[[[122.645117,-5.269434],[122.701953,-4.618652],[122.368945,-4.767188],[122.283105,-5.319531],[122.645117,-5.269434]]],[[[108.316016,3.689648],[108.24834,4.217139],[108.002344,3.982861],[108.316016,3.689648]]],[[[108.207227,-2.997656],[108.215137,-2.696973],[107.666309,-2.566309],[107.614453,-3.209375],[108.055273,-3.226855],[108.207227,-2.997656]]],[[[135.383008,-.651367],[135.915039,-1.178418],[136.375293,-1.094043],[135.383008,-.651367]]],[[[135.474219,-1.591797],[136.228125,-1.893652],[136.892578,-1.799707],[135.474219,-1.591797]]],[[[130.813281,-.004102],[130.236621,-.209668],[130.750195,-.443848],[130.899219,-.344434],[130.622168,-.085938],[131.005371,-.360742],[131.339746,-.290332],[130.813281,-.004102]]],[[[128.453906,2.051758],[128.602148,2.597607],[128.217969,2.297461],[128.453906,2.051758]]],[[[128.153027,-1.660547],[127.64668,-1.332422],[127.39502,-1.589844],[128.153027,-1.660547]]],[[[126.024219,-1.789746],[125.387207,-1.843066],[126.331738,-1.822852],[126.024219,-1.789746]]],[[[124.969531,-1.705469],[124.417578,-1.659277],[124.329688,-1.858887],[125.314063,-1.877148],[124.969531,-1.705469]]],[[[131.325586,-7.999512],[131.624414,-7.626172],[131.643457,-7.112793],[131.137793,-7.684863],[131.11377,-7.997363],[131.325586,-7.999512]]],[[[126.800977,-7.667871],[125.975293,-7.663379],[125.798242,-7.98457],[126.47207,-7.950391],[126.800977,-7.667871]]],[[[124.575586,-8.14082],[124.380664,-8.415137],[125.131738,-8.326465],[124.575586,-8.14082]]],[[[131.001855,-1.315527],[131.033008,-.917578],[130.672949,-.959766],[131.001855,-1.315527]]],[[[96.492578,5.229346],[95.227832,5.564795],[95.578613,4.661963],[96.968945,3.575146],[97.59082,2.846582],[97.700781,2.358545],[98.595313,1.8646],[99.15918,.351758],[99.669824,.045068],[100.308203,-.82666],[100.889551,-2.248535],[101.578613,-3.166992],[104.601562,-5.90459],[104.639551,-5.52041],[105.081348,-5.745508],[105.349414,-5.549512],[105.74834,-5.818262],[106.044336,-3.10625],[105.396973,-2.380176],[104.650781,-2.595215],[104.845215,-2.092969],[104.515918,-1.819434],[104.360547,-1.038379],[103.721094,-.886719],[103.438574,-.575586],[103.428516,-.191797],[103.786719,.046973],[103.672656,.288916],[103.338965,.513721],[102.55,.216455],[103.031836,.578906],[102.389941,.841992],[102.019922,1.442139],[101.47666,1.693066],[101.046191,2.257471],[100.828223,2.242578],[100.887891,1.948242],[100.523828,2.18916],[99.732324,3.183057],[98.307324,4.092871],[97.547168,5.205859],[96.492578,5.229346]]],[[[122.78291,-8.611719],[122.916992,-8.105566],[122.323242,-8.62832],[120.610254,-8.24043],[119.874805,-8.419824],[119.80791,-8.697656],[121.035254,-8.935449],[122.78291,-8.611719]]],[[[120.0125,-9.374707],[118.958789,-9.519336],[120.144824,-10.200098],[120.698047,-10.206641],[120.784473,-9.957031],[120.0125,-9.374707]]],[[[118.242383,-8.317773],[117.755273,-8.149512],[118.234863,-8.591895],[117.969531,-8.728027],[117.164844,-8.367188],[116.835059,-8.532422],[116.788477,-9.006348],[119.129687,-8.668164],[118.926172,-8.297656],[118.242383,-8.317773]]],[[[124.888867,.995312],[125.233789,1.502295],[125.110938,1.685693],[123.930762,.850439],[122.838281,.845703],[121.081738,1.327637],[120.602539,.854395],[120.269531,.970801],[119.721875,-.088477],[119.844336,-.861914],[119.711328,-.680762],[119.508203,-.906738],[119.321875,-1.929688],[118.783301,-2.720801],[118.867676,-3.398047],[119.46748,-3.512988],[119.623633,-4.034375],[119.360352,-5.31416],[119.557422,-5.611035],[120.430371,-5.591016],[120.261035,-2.949316],[120.653613,-2.667578],[121.052148,-2.75166],[120.891797,-3.520605],[121.618066,-4.092676],[121.588672,-4.75957],[122.038086,-4.832422],[122.114258,-4.540234],[122.872266,-4.391992],[122.847949,-4.064551],[122.25293,-3.62041],[122.291699,-2.907617],[121.355469,-1.878223],[122.250684,-1.555273],[122.902832,-.900977],[123.37793,-1.004102],[123.43418,-.778223],[123.171484,-.570703],[121.969629,-.933301],[121.575586,-.828516],[121.148535,-1.339453],[120.667383,-1.370117],[120.062891,-.555566],[120.192285,.268506],[120.579004,.52832],[123.753809,.305518],[124.427539,.470605],[124.888867,.995312]]],[[[107.373926,-6.007617],[106.075,-5.91416],[105.255469,-6.835254],[106.198242,-6.927832],[106.519727,-7.053711],[106.455273,-7.368652],[107.91748,-7.724121],[109.281641,-7.704883],[111.509961,-8.305078],[113.25332,-8.286719],[114.583789,-8.769629],[114.386914,-8.405176],[114.409277,-7.79248],[113.013574,-7.657715],[112.539258,-6.926465],[111.181543,-6.686719],[110.834766,-6.424219],[110.42627,-6.947266],[108.677832,-6.790527],[108.330176,-6.286035],[107.373926,-6.007617]]],[[[109.628906,2.027539],[109.075879,1.495898],[108.944531,.355664],[109.25752,.031152],[109.258789,-.807422],[109.983301,-1.274805],[110.256055,-2.966113],[111.694727,-2.889453],[111.858105,-3.551855],[112.758008,-3.322168],[113.033984,-2.933496],[113.705078,-3.455273],[114.344336,-3.235156],[114.693555,-4.169727],[115.956152,-3.59502],[116.257227,-3.126367],[116.166309,-2.93457],[116.56543,-2.299707],[116.275488,-1.784863],[116.753418,-1.327344],[116.739844,-1.044238],[116.913965,-1.223633],[117.5625,-.770898],[117.522168,.235889],[117.911621,1.098682],[118.534766,.813525],[118.984961,.982129],[117.789258,2.026855],[118.066602,2.317822],[117.055957,3.622656],[117.777246,3.689258],[117.574414,4.170605],[116.514746,4.370801],[115.678809,4.193018],[115.454395,3.034326],[115.117578,2.894873],[115.179102,2.523193],[114.786426,2.250488],[114.5125,1.452002],[113.622266,1.235938],[112.476172,1.559082],[111.808984,1.01167],[110.505762,.861963],[109.654004,1.614893],[109.628906,2.027539]]],[[[127.732715,.848145],[127.652832,1.013867],[128.011719,1.331738],[128.036426,2.199023],[127.631738,1.843701],[127.428516,1.13999],[127.691602,-.241895],[128.425488,-.892676],[127.887402,.29834],[127.983105,.471875],[128.899609,.21626],[128.260645,.733789],[128.702637,1.106396],[128.688379,1.572559],[127.732715,.848145]]],[[[129.754688,-2.86582],[128.198535,-2.865918],[127.902344,-3.496289],[128.132031,-3.157422],[128.516602,-3.449121],[128.8625,-3.234961],[129.467676,-3.453223],[129.844141,-3.327148],[130.805078,-3.857715],[130.569922,-3.130859],[129.754688,-2.86582]]],[[[126.861133,-3.087891],[126.088281,-3.105469],[126.056543,-3.420996],[126.686328,-3.823633],[127.22959,-3.633008],[126.861133,-3.087891]]],[[[124.922266,-8.94248],[124.444434,-9.190332],[124.282324,-9.42793],[124.036328,-9.341602],[123.589258,-9.966797],[123.747266,-10.347168],[124.427539,-10.148633],[125.068164,-9.511914],[124.960156,-9.21377],[125.149023,-9.042578],[124.922266,-8.94248]]],[[[134.746973,-5.707031],[134.570801,-5.427344],[134.205371,-5.707227],[134.343066,-5.833008],[134.154883,-6.062891],[134.441113,-6.334863],[134.71416,-6.295117],[134.746973,-5.707031]]],[[[134.536816,-6.442285],[134.114648,-6.19082],[134.09082,-6.833789],[134.322754,-6.84873],[134.536816,-6.442285]]],[[[138.535352,-8.273633],[138.989063,-7.696094],[138.769824,-7.39043],[138.081836,-7.566211],[137.650391,-8.386133],[138.535352,-8.273633]]],[[[140.973438,-2.609766],[139.789551,-2.348242],[137.80625,-1.483203],[137.123438,-1.840918],[137.07207,-2.105078],[136.389941,-2.27334],[135.85918,-2.995313],[135.251563,-3.368555],[134.886816,-3.209863],[134.627441,-2.536719],[134.459961,-2.832324],[134.194824,-2.309082],[134.25957,-1.362988],[133.974512,-.744336],[132.39375,-.355469],[131.257227,-.855469],[130.995898,-1.424707],[131.930371,-1.559668],[132.307617,-2.242285],[133.921582,-2.102051],[133.700098,-2.624609],[133.191016,-2.437793],[132.725,-2.789062],[131.971191,-2.788574],[132.751367,-3.294629],[132.914453,-4.056934],[133.400879,-3.899023],[133.841504,-3.054785],[133.67832,-3.479492],[133.973828,-3.817969],[134.886523,-3.938477],[134.679688,-4.079102],[135.195605,-4.450684],[137.279785,-4.94541],[138.06084,-5.465234],[138.087109,-5.70918],[138.339648,-5.675684],[138.199609,-5.807031],[138.864551,-6.858398],[138.601367,-6.936523],[139.176855,-7.19043],[138.747949,-7.251465],[139.087988,-7.587207],[138.890625,-8.237793],[139.248828,-7.982422],[139.385645,-8.189062],[140.116992,-7.92373],[140.00293,-8.195508],[140.976172,-9.11875],[140.973438,-2.609766]]],[[[138.895117,-8.388672],[138.796191,-8.173633],[138.563379,-8.309082],[138.895117,-8.388672]]],[[[101.708105,2.078418],[101.409668,2.02168],[101.500781,1.733203],[101.719434,1.78916],[101.708105,2.078418]]],[[[103.027539,.746631],[102.506641,1.08877],[102.49043,.856641],[103.027539,.746631]]],[[[104.585352,1.216113],[104.251953,1.014893],[104.575195,.831934],[104.585352,1.216113]]],[[[104.778613,-.175977],[104.542676,.017725],[104.44707,-.18916],[105.005371,-.282812],[104.778613,-.175977]]],[[[104.474219,-.334668],[104.257129,-.463281],[104.363184,-.658594],[104.590137,-.466602],[104.474219,-.334668]]],[[[109.710254,-1.180664],[109.475977,-.985352],[109.463672,-1.277539],[109.710254,-1.180664]]],[[[113.844531,-7.105371],[114.073633,-6.960156],[113.067383,-6.87998],[112.725879,-7.072754],[113.844531,-7.105371]]],[[[127.566992,-.318945],[127.3,-.500293],[127.761133,-.883691],[127.566992,-.318945]]],[[[128.275586,-3.674609],[128.329102,-3.515918],[127.925,-3.699316],[128.275586,-3.674609]]],[[[130.35332,-1.690527],[129.737695,-1.866895],[130.248047,-2.047754],[130.35332,-1.690527]]],[[[100.425098,-3.18291],[100.198535,-2.785547],[100.465137,-3.328516],[100.425098,-3.18291]]],[[[100.204102,-2.741016],[99.987891,-2.525391],[100.014941,-2.819727],[100.204102,-2.741016]]],[[[98.459277,-.530469],[98.544141,-.257617],[98.322949,-781e-6],[98.459277,-.530469]]],[[[122.042969,-5.437988],[121.913672,-5.072266],[121.808496,-5.256152],[122.042969,-5.437988]]],[[[123.212305,-1.171289],[122.908008,-1.182227],[122.89043,-1.587207],[123.150391,-1.304492],[123.172949,-1.616016],[123.511914,-1.447363],[123.212305,-1.171289]]],[[[120.52832,-6.298438],[120.477344,-5.775293],[120.487305,-6.464844],[120.52832,-6.298438]]],[[[115.377051,-6.970801],[115.546094,-6.938672],[115.240527,-6.86123],[115.377051,-6.970801]]],[[[116.30332,-3.868164],[116.269727,-3.251074],[116.058789,-4.006934],[116.30332,-3.868164]]],[[[122.948926,-10.909277],[123.418164,-10.65127],[123.371094,-10.474902],[122.845703,-10.761816],[122.948926,-10.909277]]],[[[123.924805,-8.272461],[123.391211,-8.280469],[123.230078,-8.530664],[123.924805,-8.272461]]],[[[123.242383,-4.112988],[122.969043,-4.02998],[123.076172,-4.227148],[123.242383,-4.112988]]],[[[117.649023,4.168994],[117.736816,4.004004],[117.884766,4.186133],[117.649023,4.168994]]],[[[121.883008,-10.590332],[121.99834,-10.446973],[121.704688,-10.555664],[121.883008,-10.590332]]]]}},{type:"Feature",properties:{name:"印度",full_name:"印度共和国",iso_a2:"IN",iso_a3:"IND",iso_n3:"356"},geometry:{type:"MultiPolygon",coordinates:[[[[68.165039,23.857324],[68.234961,23.596973],[68.776758,23.8521],[68.41748,23.571484],[69.235937,22.848535],[69.664648,22.759082],[70.489258,23.089502],[70.177246,22.572754],[68.969922,22.290283],[70.485059,20.840186],[71.024609,20.738867],[72.015234,21.155713],[72.254004,21.531006],[72.037207,21.823047],[72.182813,22.269727],[72.80918,22.233301],[72.553027,22.159961],[72.543066,21.696582],[73.1125,21.750439],[72.613281,21.461816],[72.89375,20.672754],[72.667773,19.830957],[72.987207,19.277441],[72.803027,19.079297],[72.97207,19.15332],[72.875488,18.642822],[73.476074,16.054248],[74.382227,14.494727],[74.945508,12.564551],[75.723828,11.361768],[76.553418,8.902783],[77.517578,8.07832],[78.060156,8.38457],[78.421484,9.105029],[79.411426,9.192383],[78.939941,9.565771],[79.314551,10.256689],[79.838184,10.322559],[79.693164,11.312549],[80.342383,13.361328],[80.062109,13.60625],[80.306543,13.485059],[80.053418,15.074023],[80.293457,15.710742],[80.646582,15.89502],[80.978711,15.75835],[81.286133,16.337061],[82.258789,16.559863],[82.35957,17.096191],[84.104102,18.292676],[85.441602,19.626562],[85.180762,19.594873],[85.248633,19.757666],[86.279492,19.919434],[86.975488,20.700146],[86.954102,21.365332],[87.82373,21.727344],[88.159277,22.121729],[87.941406,22.374316],[88.196289,22.139551],[88.12207,21.635791],[88.584668,21.659717],[88.641602,22.121973],[88.74502,21.584375],[89.05166,21.654102],[89.051465,22.093164],[88.928125,23.186621],[88.567383,23.674414],[88.723535,24.274902],[88.023438,24.627832],[88.45625,25.188428],[88.95166,25.259277],[88.08457,25.888232],[88.418164,26.571533],[88.828027,26.252197],[89.018652,26.410254],[89.369727,26.006104],[89.670898,26.213818],[89.833301,25.292773],[92.049707,25.169482],[92.468359,24.944141],[91.876953,24.195312],[91.36709,24.093506],[91.160449,23.660645],[91.315234,23.104395],[91.619531,22.979688],[91.92959,23.685986],[92.246094,23.683594],[92.574902,21.978076],[93.151172,22.230615],[93.32627,24.064209],[94.127637,23.876465],[94.707617,25.04873],[94.579883,25.319824],[95.132422,26.04126],[95.128711,26.597266],[96.19082,27.261279],[96.731641,27.331494],[97.102051,27.11543],[96.876855,27.586719],[97.086778,27.7475],[96.275479,28.228241],[95.832003,28.295186],[95.39715,28.142259],[95.28628,27.939955],[94.88592,27.743098],[94.277372,27.58143],[93.817265,27.025183],[93.111399,26.880082],[92.64698,26.952656],[91.99834,26.85498],[89.609961,26.719434],[88.857617,26.961475],[88.891406,27.316064],[88.803711,28.006934],[88.109766,27.870605],[87.995117,26.382373],[85.794531,26.60415],[84.091016,27.491357],[82.733398,27.518994],[80.070703,28.830176],[80.401855,29.730273],[81.010254,30.164502],[79.707774,31.013593],[78.807678,31.099982],[78.389648,32.519873],[78.700879,32.597021],[78.918945,32.358203],[79.219336,32.501074],[78.72666,34.013379],[78.970117,34.302637],[78.326953,34.606396],[78.042676,35.479785],[77.799414,35.495898],[77.048633,35.109912],[75.70918,34.503076],[73.96123,34.653467],[73.904102,34.075684],[74.250879,33.946094],[73.976465,33.721289],[74.003809,33.189453],[74.35459,32.768701],[74.663281,32.757666],[74.685742,32.493799],[75.333496,32.279199],[74.555566,31.818555],[74.632812,31.034668],[73.80918,30.093359],[73.381641,29.934375],[72.90332,29.02876],[72.341895,28.751904],[71.870313,27.9625],[70.797949,27.709619],[70.403711,28.025049],[69.537012,27.122949],[69.506934,26.742676],[70.147656,26.506445],[70.100195,25.910059],[70.648438,25.666943],[71.044043,24.400098],[69.805176,24.165234],[68.781152,24.313721],[68.724121,23.964697],[68.165039,23.857324]]],[[[93.890039,6.831055],[93.822461,7.236621],[93.658008,7.016064],[93.890039,6.831055]]],[[[92.502832,10.554883],[92.510352,10.897461],[92.352832,10.751123],[92.502832,10.554883]]],[[[92.722754,11.536084],[93.062305,13.545459],[92.533887,11.873389],[92.722754,11.536084]]]]}},{type:"Feature",properties:{name:"冰岛",full_name:"冰岛共和国",iso_a2:"IS",iso_a3:"ISL",iso_n3:"352"},geometry:{type:"Polygon",coordinates:[[[-15.543115,66.228516],[-16.249316,66.5229],[-16.48501,66.195947],[-17.550439,65.964404],[-18.297168,66.157422],[-18.141943,65.734082],[-18.845898,66.183936],[-19.489697,65.768066],[-20.20752,66.100098],[-21.129687,65.266602],[-21.406885,66.025586],[-22.944336,66.429443],[-22.441699,65.908301],[-23.452539,66.181006],[-23.832617,65.849219],[-23.285352,65.75],[-24.092627,65.776465],[-23.856738,65.538379],[-24.475684,65.525195],[-21.844385,65.447363],[-22.509082,65.196777],[-21.892139,65.048779],[-24.026172,64.863428],[-21.590625,64.626367],[-22.053369,64.313916],[-21.46333,64.37915],[-22.701172,64.083203],[-22.652197,63.827734],[-21.152393,63.944531],[-20.198145,63.555811],[-18.653613,63.406689],[-14.927393,64.319678],[-13.599316,65.035938],[-13.617871,65.519336],[-14.8271,65.764258],[-15.117383,66.125635],[-14.59585,66.381543],[-15.543115,66.228516]]]}},{type:"Feature",properties:{name:"匈牙利",full_name:"匈牙利",iso_a2:"HU",iso_a3:"HUN",iso_n3:"348"},geometry:{type:"Polygon",coordinates:[[[22.131836,48.405322],[20.490039,48.526904],[19.950391,48.146631],[18.791895,48.000293],[18.724219,47.787158],[17.761914,47.770166],[17.147363,48.005957],[17.066602,47.707568],[16.421289,47.674463],[16.676563,47.536035],[16.093066,46.863281],[16.516211,46.499902],[17.807129,45.79043],[18.905371,45.931738],[20.241797,46.108594],[21.12168,46.282422],[21.999707,47.505029],[22.87666,47.947266],[22.131836,48.405322]]]}},{type:"Feature",properties:{name:"洪都拉斯",full_name:"洪都拉斯共和国",iso_a2:"HN",iso_a3:"HND",iso_n3:"340"},geometry:{type:"Polygon",coordinates:[[[-83.15752,14.993066],[-84.095068,15.400928],[-83.765283,15.405469],[-84.261426,15.822607],[-84.97373,15.989893],[-88.22832,15.729004],[-89.142578,15.072314],[-89.362598,14.416016],[-88.482666,13.854248],[-87.802246,13.88999],[-87.814209,13.39917],[-87.489111,13.35293],[-87.337256,12.979248],[-86.729297,13.284375],[-86.733643,13.763477],[-86.040381,14.050146],[-85.733936,13.858691],[-84.985156,14.752441],[-84.453564,14.643701],[-83.15752,14.993066]]]}},{type:"Feature",properties:{name:"海地",full_name:"海地共和国",iso_a2:"HT",iso_a3:"HTI",iso_n3:"332"},geometry:{type:"Polygon",coordinates:[[[-71.779248,19.718164],[-73.400537,19.807422],[-72.703223,19.441064],[-72.811084,19.071582],[-72.376074,18.574463],[-72.789355,18.434814],[-74.227734,18.662695],[-74.478125,18.45],[-73.884961,18.041895],[-73.385156,18.251172],[-71.768311,18.03916],[-72.000391,18.5979],[-71.645312,19.163525],[-71.779248,19.718164]]]}},{type:"Feature",properties:{name:"圭亚那",full_name:"圭亚那合作共和国",iso_a2:"GY",iso_a3:"GUY",iso_n3:"328"},geometry:{type:"Polygon",coordinates:[[[-60.742139,5.202051],[-60.142041,5.238818],[-59.990674,5.082861],[-60.148633,4.533252],[-59.703271,4.381104],[-59.551123,3.933545],[-59.854395,3.5875],[-59.994336,2.68999],[-59.666602,1.746289],[-59.231201,1.376025],[-58.821777,1.201221],[-57.31748,1.963477],[-56.482812,1.942139],[-57.197363,2.853271],[-57.303662,3.3771],[-57.646729,3.394531],[-58.054297,4.10166],[-57.917041,4.82041],[-57.331006,5.020166],[-57.194775,5.548438],[-57.227539,6.178418],[-57.982568,6.785889],[-58.41499,6.851172],[-58.672949,6.390771],[-58.511084,7.398047],[-60.017529,8.549316],[-59.849072,8.248682],[-60.718652,7.535937],[-60.3521,7.002881],[-61.145605,6.694531],[-61.128711,6.214307],[-61.39082,5.93877],[-60.742139,5.202051]]]}},{type:"Feature",properties:{name:"几内亚比绍",full_name:"几内亚比绍共和国",iso_a2:"GW",iso_a3:"GNB",iso_n3:"624"},geometry:{type:"Polygon",coordinates:[[[-16.711816,12.354834],[-16.24458,12.237109],[-16.328076,12.051611],[-15.941748,11.786621],[-15.078271,11.968994],[-15.501904,11.723779],[-15.072656,11.597803],[-15.479492,11.410303],[-15.043018,10.940137],[-14.682959,11.508496],[-13.732764,11.736035],[-13.948877,12.178174],[-13.70791,12.312695],[-13.729248,12.673926],[-15.196094,12.679932],[-16.711816,12.354834]]]}},{type:"Feature",properties:{name:"几内亚",full_name:"几内亚共和国",iso_a2:"GN",iso_a3:"GIN",iso_n3:"324"},geometry:{type:"Polygon",coordinates:[[[-10.283203,8.485156],[-9.518262,8.346094],[-9.463818,7.415869],[-9.117578,7.215918],[-8.659766,7.688379],[-8.486426,7.558496],[-8.231885,7.556738],[-8.009863,8.078516],[-8.236963,8.455664],[-7.681201,8.410352],[-7.950977,8.786816],[-7.896191,9.415869],[-8.136963,9.495703],[-7.990625,10.1625],[-8.337402,10.990625],[-8.666699,11.009473],[-8.398535,11.366553],[-8.822021,11.673242],[-9.043066,12.402344],[-9.395361,12.464648],[-9.358105,12.25542],[-9.754004,12.029932],[-10.274854,12.212646],[-10.709229,11.89873],[-10.933203,12.205176],[-11.305176,12.01543],[-11.502197,12.198633],[-11.389404,12.404395],[-12.399072,12.340088],[-13.729248,12.673926],[-13.70791,12.312695],[-13.948877,12.178174],[-13.732764,11.736035],[-14.682959,11.508496],[-15.043018,10.940137],[-14.593506,10.766699],[-14.426904,10.24834],[-13.689795,9.927783],[-13.691357,9.535791],[-13.292676,9.049219],[-12.427979,9.898145],[-11.273633,9.996533],[-10.690527,9.314258],[-10.500537,8.687549],[-10.712109,8.335254],[-10.283203,8.485156]]]}},{type:"Feature",properties:{name:"危地马拉",full_name:"危地马拉共和国",iso_a2:"GT",iso_a3:"GTM",iso_n3:"320"},geometry:{type:"Polygon",coordinates:[[[-92.235156,14.54541],[-91.377344,13.990186],[-90.095215,13.736523],[-89.362598,14.416016],[-89.142578,15.072314],[-88.22832,15.729004],[-88.894043,15.890625],[-89.2375,15.894434],[-89.161475,17.814844],[-90.98916,17.816406],[-90.992969,17.252441],[-91.409619,17.255859],[-90.416992,16.391016],[-90.447168,16.072705],[-91.736572,16.070166],[-92.204248,15.275],[-92.235156,14.54541]]]}},{type:"Feature",properties:{name:"格林纳达",full_name:"格林纳达",iso_a2:"GD",iso_a3:"GRD",iso_n3:"308"},geometry:{type:"Polygon",coordinates:[[[-61.715527,12.012646],[-61.607031,12.223291],[-61.71499,12.185156],[-61.715527,12.012646]]]}},{type:"Feature",properties:{name:"希腊",full_name:"希腊共和国",iso_a2:"GR",iso_a3:"GRC",iso_n3:"300"},geometry:{type:"MultiPolygon",coordinates:[[[[20.612305,38.38335],[20.352539,38.179883],[20.761328,38.070557],[20.612305,38.38335]]],[[[20.07793,39.432715],[19.926074,39.77373],[19.646484,39.76709],[20.07793,39.432715]]],[[[23.41543,38.958643],[22.870313,38.870508],[24.536523,37.979736],[24.127539,38.648486],[23.41543,38.958643]]],[[[26.824414,37.811426],[26.581055,37.72373],[27.055078,37.709277],[26.824414,37.811426]]],[[[26.094043,38.218066],[26.160352,38.540723],[25.846094,38.574023],[26.094043,38.218066]]],[[[26.410156,39.329443],[25.844141,39.200049],[26.46875,38.972803],[26.410156,39.329443]]],[[[27.842773,35.929297],[28.231836,36.433643],[27.716309,36.171582],[27.842773,35.929297]]],[[[23.852246,35.535449],[23.569824,35.534766],[23.592773,35.257227],[24.799805,34.934473],[26.165625,35.018604],[26.320215,35.315137],[25.791309,35.122852],[25.730176,35.348584],[23.852246,35.535449]]],[[[26.320898,41.716553],[25.92334,41.311914],[25.251172,41.243555],[24.487891,41.555225],[22.916016,41.336279],[20.964258,40.849902],[20.657422,40.117383],[20.00127,39.709424],[20.713379,39.035156],[21.118359,39.02998],[20.768555,38.874414],[21.182617,38.345557],[22.42168,38.438525],[23.148926,38.176074],[22.920313,37.958301],[21.824707,38.328125],[21.124707,37.891602],[21.678906,37.387207],[21.58291,37.080957],[21.892383,36.737305],[22.080469,37.028955],[22.427734,36.475781],[22.717188,36.793945],[23.160156,36.448096],[22.725391,37.542139],[23.489258,37.440186],[23.036328,37.878369],[23.501758,38.034863],[24.019727,37.677734],[24.024512,38.139795],[22.569141,38.86748],[23.066699,39.037939],[22.921387,39.306348],[23.327734,39.174902],[22.592188,40.036914],[22.629492,40.495557],[22.922266,40.590869],[23.627344,39.924072],[23.42627,40.263965],[23.94707,39.965576],[23.72793,40.329736],[24.343359,40.147705],[23.762793,40.747803],[25.104492,40.994727],[26.038965,40.726758],[26.624902,41.401758],[26.320898,41.716553]]]]}},{type:"Feature",properties:{name:"加纳",full_name:"加纳共和国",iso_a2:"GH",iso_a3:"GHA",iso_n3:"288"},geometry:{type:"Polygon",coordinates:[[[-.068604,11.115625],[-.627148,10.927393],[-2.829932,10.998389],[-2.69585,9.481348],[-2.505859,8.20874],[-3.235791,6.807227],[-2.75498,5.43252],[-3.019141,5.130811],[-3.086719,5.12832],[-3.114014,5.088672],[-2.001855,4.762451],[.259668,5.757324],[.949707,5.810254],[1.187207,6.089404],[.525586,6.850928],[.686328,8.354883],[.372559,8.759277],[.525684,9.398486],[.233398,9.463525],[.380859,10.291846],[-.086328,10.673047],[-.068604,11.115625]]]}},{type:"Feature",properties:{name:"德国",full_name:"德意志联邦共和国",iso_a2:"DE",iso_a3:"DEU",iso_n3:"276"},geometry:{type:"MultiPolygon",coordinates:[[[[9.524023,47.524219],[10.183008,47.278809],[10.439453,47.551562],[11.041992,47.393115],[12.209277,47.718262],[13.014355,47.478076],[12.760352,48.106982],[13.814746,48.766943],[12.681152,49.414502],[12.089844,50.301758],[12.942676,50.406445],[14.319727,51.037793],[14.809375,50.858984],[15.016602,51.252734],[14.619434,52.528516],[14.128613,52.878223],[14.258887,53.729639],[12.575391,54.467383],[11.399609,53.944629],[10.85459,54.009814],[11.013379,54.37915],[9.868652,54.472461],[9.739746,54.825537],[8.670313,54.903418],[8.92041,53.965332],[9.783984,53.554639],[8.618945,53.875],[8.495215,53.394238],[8.009277,53.690723],[7.285254,53.681348],[7.197266,53.282275],[7.033008,52.651367],[6.710742,52.617871],[7.035156,52.380225],[6.800391,51.967383],[5.94873,51.802686],[5.993945,50.750439],[6.340918,50.451758],[6.116504,50.120996],[6.487305,49.798486],[6.344336,49.452734],[6.735449,49.160596],[8.134863,48.973584],[7.615625,47.592725],[8.454004,47.596191],[8.572656,47.775635],[9.524023,47.524219]]],[[[13.70918,54.382715],[13.336816,54.697119],[13.190039,54.325635],[13.70918,54.382715]]],[[[14.211426,53.950342],[13.827734,54.127246],[14.213672,53.870752],[14.211426,53.950342]]]]}},{type:"Feature",properties:{name:"格鲁吉亚",full_name:"格鲁吉亚",iso_a2:"GE",iso_a3:"GEO",iso_n3:"268"},geometry:{type:"Polygon",coordinates:[[[43.439453,41.107129],[45.001367,41.290967],[45.280957,41.449561],[46.534375,41.088574],[46.672559,41.286816],[46.182129,41.65708],[46.429883,41.890967],[45.638574,42.205078],[45.705273,42.498096],[44.870996,42.756396],[43.825977,42.571533],[42.760645,43.16958],[41.580566,43.219238],[40.648047,43.533887],[39.97832,43.419824],[41.48877,42.659326],[41.762988,41.97002],[41.510059,41.51748],[42.754102,41.578906],[43.439453,41.107129]]]}},{type:"Feature",properties:{name:"冈比亚",full_name:"冈比亚共和国",iso_a2:"GM",iso_a3:"GMB",iso_n3:"270"},geometry:{type:"Polygon",coordinates:[[[-16.562305,13.587305],[-16.351807,13.343359],[-15.42749,13.468359],[-16.413379,13.269727],[-16.669336,13.475],[-16.76333,13.06416],[-15.834277,13.156445],[-15.151123,13.556494],[-14.246777,13.23584],[-13.826709,13.407812],[-15.10835,13.812109],[-15.509668,13.58623],[-16.562305,13.587305]]]}},{type:"Feature",properties:{name:"加蓬",full_name:"加蓬共和国",iso_a2:"GA",iso_a3:"GAB",iso_n3:"266"},geometry:{type:"Polygon",coordinates:[[[13.293555,2.161572],[11.328711,2.167432],[11.335352,.999707],[9.59082,1.031982],[9.617969,.576514],[9.324805,.5521],[10.001465,.194971],[9.796777,.044238],[9.354883,.343604],[9.29668,-.35127],[8.946387,-.68877],[8.703125,-.591016],[9.064648,-1.29834],[9.501074,-1.555176],[9.318848,-1.632031],[9.036328,-1.308887],[9.624609,-2.36709],[10.062012,-2.549902],[9.72207,-2.467578],[11.130176,-3.916309],[11.504297,-3.520312],[11.879883,-3.665918],[11.93418,-3.318555],[11.537793,-2.836719],[11.605469,-2.342578],[12.446387,-2.32998],[12.59043,-1.826855],[12.991992,-2.313379],[13.464941,-2.39541],[13.733789,-2.138477],[13.993848,-2.490625],[14.383984,-1.890039],[14.474121,-.573438],[13.860059,-.20332],[13.949609,.353809],[14.429883,.901465],[14.180859,1.370215],[13.216309,1.248438],[13.293555,2.161572]]]}},{type:"Feature",properties:{name:"法国",full_name:"法兰西共和国",iso_a2:"FR",iso_a3:"FRA",iso_n3:"250"},geometry:{type:"MultiPolygon",coordinates:[[[[9.480371,42.80542],[9.363184,43.017383],[9.313379,42.713184],[8.565625,42.357715],[8.80752,41.588379],[9.186133,41.384912],[9.550684,42.129736],[9.480371,42.80542]]],[[[7.615625,47.592725],[8.134863,48.973584],[6.735449,49.160596],[6.344336,49.452734],[5.789746,49.538281],[4.867578,49.788135],[4.818652,50.153174],[4.149316,49.971582],[4.174609,50.246484],[2.759375,50.750635],[2.524902,51.097119],[1.672266,50.88501],[1.592773,50.252197],[.186719,49.703027],[.416895,49.448389],[-1.138525,49.387891],[-1.258643,49.680176],[-1.856445,49.683789],[-1.376465,48.652588],[-2.692334,48.536816],[-3.231445,48.84082],[-4.7625,48.450244],[-4.241406,48.303662],[-4.678809,48.039502],[-4.312109,47.8229],[-1.742529,47.215967],[-2.19707,47.162939],[-2.059375,46.810303],[-1.146289,46.311377],[-1.195996,45.714453],[-.548486,45.000586],[-1.081006,45.532422],[-1.076953,44.689844],[-1.484863,43.56377],[-1.794043,43.407324],[-1.46084,43.051758],[-.586426,42.798975],[.631641,42.6896],[.696875,42.845117],[1.42832,42.595898],[1.706055,42.50332],[3.211426,42.431152],[3.051758,42.915137],[3.91084,43.563086],[6.115918,43.072363],[7.377734,43.731738],[7.39502,43.765332],[7.438672,43.750439],[7.493164,43.767139],[7.637207,44.164844],[6.900195,44.335742],[6.992676,44.827295],[6.634766,45.068164],[7.146387,45.381738],[6.790918,45.740869],[7.021094,45.925781],[6.758105,46.415771],[5.97002,46.214697],[6.968359,47.453223],[7.615625,47.592725]]],[[[55.797363,-21.339355],[55.661914,-20.90625],[55.311328,-20.904102],[55.362695,-21.273633],[55.797363,-21.339355]]],[[[-60.82627,14.494482],[-61.21333,14.848584],[-61.063721,14.46709],[-60.82627,14.494482]]],[[[-61.327148,16.23042],[-61.172607,16.256104],[-61.471191,16.506641],[-61.522168,16.228027],[-61.327148,16.23042]]],[[[-54.61626,2.326758],[-54.130078,2.121045],[-53.767773,2.354834],[-52.903467,2.211523],[-51.652539,4.061279],[-51.827539,4.635693],[-52.00293,4.352295],[-52.058105,4.717383],[-52.899316,5.425049],[-53.847168,5.782227],[-54.155957,5.358984],[-54.479688,4.836523],[-54.00957,3.448535],[-54.61626,2.326758]]]]}},{type:"Feature",properties:{name:"圣皮埃尔和密克隆群岛",full_name:"圣皮埃尔和密克隆群岛（法国）",iso_a2:"PM",iso_a3:"SPM",iso_n3:"666"},geometry:{type:"Polygon",coordinates:[[[-56.26709,46.838477],[-56.364648,47.098975],[-56.384766,46.819434],[-56.26709,46.838477]]]}},{type:"Feature",properties:{name:"瓦利斯和富图纳群岛",full_name:"瓦利斯和富图纳群岛",iso_a2:"WF",iso_a3:"WLF",iso_n3:"876"},geometry:{type:"Polygon",coordinates:[[[-178.04668,-14.318359],[-178.194385,-14.255469],[-178.158594,-14.311914],[-178.04668,-14.318359]]]}},{type:"Feature",properties:{name:"法属圣马丁",full_name:"法属圣马丁岛",iso_a2:"MF",iso_a3:"MAF",iso_n3:"663"},geometry:{type:"Polygon",coordinates:[[[-63.011182,18.068945],[-63.063086,18.115332],[-63.123047,18.068945],[-63.011182,18.068945]]]}},{type:"Feature",properties:{name:"圣巴泰勒米",full_name:"圣巴泰勒米（法国）",iso_a2:"BL",iso_a3:"BLM",iso_n3:"652"},geometry:{type:"Polygon",coordinates:[[[-62.831934,17.876465],[-62.799707,17.908691],[-62.874219,17.922266],[-62.831934,17.876465]]]}},{type:"Feature",properties:{name:"法属波利尼西亚",full_name:"法属波利尼西亚",iso_a2:"PF",iso_a3:"PYF",iso_n3:"258"},geometry:{type:"MultiPolygon",coordinates:[[[[-149.321533,-17.690039],[-149.63501,-17.564258],[-149.181787,-17.862305],[-149.321533,-17.690039]]],[[[-139.024316,-9.695215],[-139.134082,-9.829492],[-138.827344,-9.741602],[-139.024316,-9.695215]]]]}},{type:"Feature",properties:{name:"新喀里多尼亚",full_name:"新喀里多尼亚",iso_a2:"NC",iso_a3:"NCL",iso_n3:"540"},geometry:{type:"MultiPolygon",coordinates:[[[[164.202344,-20.246094],[164.059668,-20.141504],[164.927441,-21.289844],[166.467969,-22.256055],[166.970313,-22.322852],[166.942383,-22.090137],[165.191797,-20.768848],[164.202344,-20.246094]]],[[[168.010938,-21.42998],[167.81543,-21.392676],[167.966797,-21.641602],[168.010938,-21.42998]]],[[[167.400879,-21.160645],[167.297949,-20.73252],[167.055762,-20.720215],[167.072656,-20.997266],[167.400879,-21.160645]]]]}},{type:"Feature",properties:{name:"法属南部和南极领地",full_name:"法属南部和南极领地",iso_a2:"TF",iso_a3:"ATF",iso_n3:"260"},geometry:{type:"Polygon",coordinates:[[[69.184863,-49.10957],[69.002441,-48.66123],[68.814746,-49.699609],[69.153125,-49.529688],[70.124316,-49.704395],[70.247754,-49.530664],[69.759961,-49.430176],[70.386133,-49.433984],[70.555469,-49.201465],[70.320215,-49.058594],[69.542383,-49.255664],[69.592773,-48.970996],[69.184863,-49.10957]]]}},{type:"Feature",properties:{name:"奥兰群岛",full_name:"奥兰群岛（芬兰）",iso_a2:"AX",iso_a3:"ALA",iso_n3:"248"},geometry:{type:"Polygon",coordinates:[[[19.989551,60.351172],[19.799805,60.081738],[20.258887,60.261279],[19.989551,60.351172]]]}},{type:"Feature",properties:{name:"芬兰",full_name:"芬兰共和国",iso_a2:"FI",iso_a3:"FIN",iso_n3:"246"},geometry:{type:"Polygon",coordinates:[[[24.155469,65.805273],[24.628027,65.85918],[25.347852,65.479248],[25.288184,64.860352],[24.55791,64.801025],[21.143848,62.73999],[21.436035,60.596387],[22.584961,60.380566],[22.462695,60.029199],[22.911719,60.209717],[23.021289,59.816016],[25.758008,60.267529],[26.569336,60.624561],[26.534668,60.412891],[27.797656,60.536133],[31.533984,62.8854],[29.991504,63.735156],[30.51377,64.2],[29.604199,64.968408],[30.102734,65.72627],[29.066211,66.891748],[29.988086,67.668262],[28.685156,68.189795],[28.414062,68.90415],[28.96582,69.021973],[29.141602,69.671436],[27.747852,70.064844],[26.072461,69.691553],[24.941406,68.593262],[23.854004,68.805908],[22.410938,68.719873],[21.59375,69.273584],[20.622168,69.036865],[23.638867,67.954395],[24.155469,65.805273]]]}},{type:"Feature",properties:{name:"斐济",full_name:"斐济共和国",iso_a2:"FJ",iso_a3:"FJI",iso_n3:"242"},geometry:{type:"MultiPolygon",coordinates:[[[[179.999219,-16.168555],[180,-16.15293],[178.497461,-16.787891],[178.706641,-16.976172],[179.202344,-16.712695],[179.92793,-16.744434],[179.930371,-16.519434],[179.56416,-16.636914],[179.999219,-16.168555]]],[[[178.280176,-17.371973],[177.504492,-17.539551],[177.321387,-18.077539],[177.955469,-18.264062],[178.667676,-18.080859],[178.280176,-17.371973]]]]}},{type:"Feature",properties:{name:"埃塞俄比亚",full_name:"埃塞俄比亚联邦民主共和国",iso_a2:"ET",iso_a3:"ETH",iso_n3:"231"},geometry:{type:"Polygon",coordinates:[[[35.268359,5.492285],[35.74502,5.343994],[36.021973,4.468115],[36.905566,4.411475],[38.086133,3.648828],[39.494434,3.456104],[40.765234,4.273047],[41.14043,3.962988],[41.883984,3.977734],[43.583496,4.85498],[44.940527,4.912012],[47.978223,7.99707],[46.978223,7.99707],[43.983789,9.008838],[42.841602,10.203076],[42.656445,10.6],[42.922754,10.999316],[41.798242,10.980469],[41.792676,11.686035],[42.378516,12.466406],[40.820117,14.11167],[40.140625,14.456055],[39.023828,14.628223],[38.431445,14.428613],[37.88418,14.852295],[37.571191,14.149072],[37.257227,14.45376],[36.524316,14.256836],[36.125195,12.757031],[35.670215,12.62373],[35.112305,11.816553],[34.931445,10.864795],[34.343945,10.658643],[34.078125,9.461523],[34.072754,8.545264],[33.281055,8.437256],[32.998926,7.899512],[33.902441,7.509521],[34.710645,6.660303],[35.268359,5.492285]]]}},{type:"Feature",properties:{name:"爱沙尼亚",full_name:"爱沙尼亚共和国",iso_a2:"EE",iso_a3:"EST",iso_n3:"233"},geometry:{type:"MultiPolygon",coordinates:[[[[27.351953,57.528125],[27.778516,57.870703],[27.43418,58.787256],[28.0125,59.484277],[25.509277,59.639014],[23.494434,59.195654],[23.767578,58.36084],[24.529102,58.354248],[24.322559,57.870605],[25.282617,58.048486],[26.462109,57.544482],[27.351953,57.528125]]],[[[22.617383,58.62124],[21.862305,58.497168],[21.996875,57.931348],[23.323242,58.45083],[22.617383,58.62124]]],[[[22.92373,58.826904],[22.649414,59.087109],[22.05625,58.943604],[22.542188,58.68999],[22.92373,58.826904]]]]}},{type:"Feature",properties:{name:"厄立特里亚",full_name:"厄立特里亚国",iso_a2:"ER",iso_a3:"ERI",iso_n3:"232"},geometry:{type:"MultiPolygon",coordinates:[[[[36.524316,14.256836],[37.257227,14.45376],[37.571191,14.149072],[37.88418,14.852295],[38.431445,14.428613],[39.023828,14.628223],[40.140625,14.456055],[40.820117,14.11167],[42.378516,12.466406],[42.703711,12.380322],[43.116699,12.708594],[41.176465,14.620312],[40.204102,15.014111],[39.86377,15.470312],[39.785547,15.124854],[38.609473,18.005078],[37.411035,17.061719],[37.008984,17.058887],[36.426758,15.13208],[36.524316,14.256836]]],[[[40.141211,15.696143],[39.956738,15.889404],[39.975195,15.612451],[40.399023,15.579883],[40.141211,15.696143]]]]}},{type:"Feature",properties:{name:"赤道几内亚",full_name:"赤道几内亚共和国",iso_a2:"GQ",iso_a3:"GNQ",iso_n3:"226"},geometry:{type:"MultiPolygon",coordinates:[[[[8.735742,3.758301],[8.474902,3.264648],[8.704004,3.223633],[8.946094,3.627539],[8.735742,3.758301]]],[[[11.328711,2.167432],[9.800781,2.304443],[9.385938,1.139258],[9.59082,1.031982],[11.335352,.999707],[11.328711,2.167432]]]]}},{type:"Feature",properties:{name:"萨尔瓦多",full_name:"萨尔瓦多共和国",iso_a2:"SV",iso_a3:"SLV",iso_n3:"222"},geometry:{type:"Polygon",coordinates:[[[-89.362598,14.416016],[-90.095215,13.736523],[-88.512012,13.183936],[-88.685645,13.281494],[-87.930859,13.180664],[-87.814209,13.39917],[-87.802246,13.88999],[-88.482666,13.854248],[-89.362598,14.416016]]]}},{type:"Feature",properties:{name:"埃及",full_name:"阿拉伯埃及共和国",iso_a2:"EG",iso_a3:"EGY",iso_n3:"818"},geometry:{type:"Polygon",coordinates:[[[36.871387,21.996729],[35.697852,22.946191],[35.504395,23.779297],[35.783887,23.937793],[35.194141,24.475146],[33.959082,26.649023],[33.54707,27.898145],[32.359766,29.630664],[32.565723,29.973975],[33.247754,28.567725],[34.220117,27.764307],[34.904297,29.477344],[34.245313,31.208301],[34.198145,31.322607],[32.60332,31.06875],[32.216211,31.29375],[32.101758,31.092822],[31.771094,31.292578],[31.892188,31.482471],[32.136035,31.341064],[31.888965,31.541406],[31.08291,31.60332],[29.07207,30.830273],[25.150488,31.65498],[24.852734,31.334814],[24.961426,30.678516],[24.703223,30.201074],[24.980273,29.181885],[24.980273,21.99585],[31.092676,21.994873],[31.400293,22.202441],[31.434473,21.99585],[36.871387,21.996729]]]}},{type:"Feature",properties:{name:"厄瓜多尔",full_name:"厄瓜多尔共和国",iso_a2:"EC",iso_a3:"ECU",iso_n3:"218"},geometry:{type:"MultiPolygon",coordinates:[[[[-75.284473,-.106543],[-76.270605,.439404],[-76.494629,.235449],[-77.396338,.393896],[-77.702881,.837842],[-78.859668,1.455371],[-78.899658,1.20625],[-80.088281,.784766],[-80.046143,.155371],[-80.482275,-.368262],[-80.282373,-.620508],[-80.902393,-1.078906],[-80.760596,-1.93457],[-80.932178,-2.269141],[-80.284717,-2.706738],[-80.006641,-2.353809],[-79.925586,-2.548535],[-79.842139,-2.067383],[-79.729883,-2.579102],[-79.96333,-3.157715],[-80.324658,-3.387891],[-80.179248,-3.877734],[-80.490137,-4.010059],[-80.478564,-4.430078],[-79.638525,-4.454883],[-79.330957,-4.927832],[-79.033301,-4.969141],[-78.686035,-4.562402],[-78.345361,-3.397363],[-78.158496,-3.465137],[-77.860596,-2.981641],[-76.679102,-2.562598],[-75.570557,-1.53125],[-75.259375,-.590137],[-75.62627,-.122852],[-75.284473,-.106543]]],[[[-80.131592,-2.973145],[-79.909033,-2.725586],[-80.223682,-2.753125],[-80.131592,-2.973145]]],[[[-90.334863,-.771582],[-90.269385,-.484668],[-90.531689,-.581445],[-90.334863,-.771582]]],[[[-89.418896,-.911035],[-89.287842,-.689844],[-89.608594,-.888574],[-89.418896,-.911035]]],[[[-91.272168,.025146],[-91.596826,.0021],[-91.120947,-.559082],[-91.49541,-.860938],[-91.131055,-1.019629],[-90.799658,-.752051],[-91.272168,.025146]]]]}},{type:"Feature",properties:{name:"多米尼加",full_name:"多米尼加共和国",iso_a2:"DO",iso_a3:"DOM",iso_n3:"214"},geometry:{type:"Polygon",coordinates:[[[-71.768311,18.03916],[-71.438965,17.635596],[-71.027832,18.273193],[-69.274512,18.439844],[-68.687402,18.214941],[-68.33916,18.611523],[-69.623633,19.117822],[-69.232471,19.271826],[-69.739404,19.299219],[-69.956836,19.671875],[-70.95415,19.913965],[-71.779248,19.718164],[-71.645312,19.163525],[-72.000391,18.5979],[-71.768311,18.03916]]]}},{type:"Feature",properties:{name:"多米尼克",full_name:"多米尼克国",iso_a2:"DM",iso_a3:"DMA",iso_n3:"212"},geometry:{type:"Polygon",coordinates:[[[-61.281689,15.249023],[-61.277246,15.526709],[-61.458105,15.633105],[-61.281689,15.249023]]]}},{type:"Feature",properties:{name:"美国本土外小岛屿",full_name:"美国本土外小岛屿",iso_a2:"UM",iso_a3:"UMI",iso_n3:"581"},geometry:{type:"Polygon",coordinates:[[[166.61939537900003,19.281642971000053],[166.64421634200005,19.27558014500005],[166.63819420700008,19.286444403000075],[166.61939537900003,19.281642971000053]]]}},{type:"Feature",properties:{name:"吉布提",full_name:"吉布提共和国",iso_a2:"DJ",iso_a3:"DJI",iso_n3:"262"},geometry:{type:"Polygon",coordinates:[[[43.245996,11.499805],[42.521777,11.572168],[43.380273,12.09126],[43.116699,12.708594],[42.703711,12.380322],[42.378516,12.466406],[41.792676,11.686035],[41.798242,10.980469],[42.922754,10.999316],[43.245996,11.499805]]]}},{type:"Feature",properties:{name:"格陵兰",full_name:"格陵兰",iso_a2:"GL",iso_a3:"GRL",iso_n3:"304"},geometry:{type:"MultiPolygon",coordinates:[[[[-29.952881,83.564844],[-37.72334,83.497754],[-38.15625,82.998633],[-40.356836,83.332178],[-41.300146,83.100781],[-43.009277,83.2646],[-46.169043,83.063867],[-46.136816,82.858838],[-41.369629,82.75],[-45.556543,82.747021],[-44.238867,82.368164],[-44.729492,81.779834],[-50.037109,82.472412],[-49.541064,81.918066],[-53.022559,82.321729],[-53.555664,81.653271],[-54.548877,82.350635],[-59.261816,82.006641],[-56.615137,81.362891],[-59.281934,81.884033],[-60.842871,81.855371],[-61.435986,81.133594],[-62.903369,81.218359],[-63.028662,80.889551],[-64.515527,81],[-67.050635,80.384521],[-66.843652,80.076221],[-64.17915,80.099268],[-65.825537,79.17373],[-71.651318,78.623145],[-72.818066,78.194336],[-69.351367,77.467139],[-66.691211,77.681201],[-66.389453,77.280273],[-68.135547,77.37959],[-71.141455,77.028662],[-68.114258,76.650635],[-69.484082,76.39917],[-68.14873,76.067041],[-66.674805,75.977393],[-66.992578,76.212939],[-63.291309,76.352051],[-58.516211,75.689062],[-58.565527,75.352734],[-56.255469,74.526807],[-57.230566,74.125293],[-56.225391,74.129102],[-55.288281,73.3271],[-55.668555,73.00791],[-54.737939,72.87251],[-55.601709,72.453467],[-55.581445,72.178857],[-54.840137,72.356104],[-55.594043,71.553516],[-53.962988,71.458984],[-53.652148,72.362646],[-53.440088,71.579004],[-51.769922,71.671729],[-53.007568,71.17998],[-51.018945,71.001318],[-51.774316,71.010449],[-50.872363,70.364893],[-52.801953,70.750586],[-54.530762,70.699268],[-52.254639,70.058936],[-50.291699,70.014453],[-50.945703,68.682666],[-51.623145,68.534814],[-52.60459,68.70874],[-53.383154,68.297363],[-51.210156,68.419922],[-51.456494,68.116064],[-53.151562,68.207764],[-53.735205,67.549023],[-52.344824,67.836914],[-50.968848,67.806641],[-50.613477,67.52793],[-52.666455,67.749707],[-53.884424,67.135547],[-52.386865,66.881152],[-53.41875,66.648535],[-53.53877,66.139355],[-51.225,66.881543],[-53.392041,66.04834],[-53.198975,65.594043],[-52.55127,65.461377],[-51.091895,65.775781],[-52.537695,65.328809],[-51.922607,64.21875],[-50.721582,64.797607],[-50.960645,65.201123],[-50.121631,64.70376],[-50.008984,64.447266],[-50.49209,64.693164],[-51.40376,64.463184],[-51.584912,64.103174],[-50.260693,64.214258],[-51.54751,64.006104],[-51.468848,63.642285],[-50.390088,62.822021],[-49.793115,63.044629],[-50.319238,62.473193],[-49.553467,62.232715],[-49.623779,61.998584],[-48.828711,62.079688],[-49.380273,61.890186],[-49.289062,61.589941],[-48.386426,61.004736],[-47.770312,60.997754],[-48.180811,60.769238],[-46.874463,60.816406],[-45.870215,61.218311],[-46.046631,60.615723],[-45.380518,60.444922],[-44.756738,60.6646],[-45.379248,60.20293],[-44.613281,60.01665],[-44.224365,60.273535],[-44.412939,59.922607],[-43.906543,59.815479],[-43.955029,60.025488],[-43.1229,60.06123],[-43.212988,60.390674],[-43.922705,60.595361],[-43.044092,60.523682],[-42.585303,61.71748],[-42.110205,61.857227],[-42.152979,62.568457],[-42.94165,62.720215],[-41.908984,62.737109],[-41.634473,62.972461],[-42.174512,63.208789],[-41.387891,63.061865],[-40.550391,63.725244],[-40.617773,64.131738],[-41.581006,64.29834],[-40.781738,64.221777],[-40.182227,64.479932],[-41.084424,65.10083],[-39.937256,65.141602],[-39.57793,65.340771],[-40.173535,65.556152],[-38.203369,65.711719],[-38.520361,66.009668],[-38.139941,65.903516],[-37.752344,66.261523],[-38.156641,66.385596],[-37.278711,66.304395],[-37.954785,65.633594],[-36.665186,65.790088],[-36.527246,66.007715],[-36.379199,65.830811],[-35.630078,66.139941],[-35.867236,66.441406],[-35.188574,66.250293],[-34.198242,66.655078],[-32.164551,67.991113],[-32.327441,68.437305],[-30.978564,68.061328],[-26.48291,68.675928],[-22.287061,70.033398],[-25.529883,70.353174],[-27.38418,69.991602],[-27.56084,70.124463],[-26.621777,70.463379],[-29.07207,70.444971],[-28.069873,70.699023],[-28.398438,70.99292],[-26.71792,70.950488],[-25.742236,71.183594],[-25.842725,71.480176],[-27.087207,71.626562],[-25.885156,71.571924],[-24.562207,71.223535],[-23.327832,70.450977],[-22.690674,70.437305],[-22.437012,70.86001],[-22.384131,70.462402],[-21.522656,70.526221],[-21.752246,71.47832],[-22.479639,71.383447],[-21.959668,71.744678],[-25.117871,72.346973],[-24.81333,72.901514],[-26.657617,72.71582],[-24.62998,73.037646],[-24.069043,72.49873],[-22.293213,72.119531],[-22.036328,72.918457],[-24.132666,73.409375],[-27.348047,73.067822],[-27.561621,73.138477],[-26.541846,73.248975],[-27.27041,73.436279],[-26.062305,73.253027],[-24.79126,73.511279],[-25.521289,73.851611],[-22.346875,73.269238],[-20.509668,73.492871],[-20.367285,73.848242],[-22.134814,73.990479],[-22.321582,74.302539],[-21.94292,74.565723],[-21.954932,74.244287],[-20.653125,74.137354],[-19.369141,74.284033],[-19.287012,74.546387],[-19.984912,74.975195],[-20.861572,74.635938],[-20.985791,75.074365],[-22.232861,75.119727],[-20.484961,75.314258],[-19.526367,75.180225],[-19.508984,75.75752],[-20.103613,76.219092],[-21.488232,76.271875],[-22.609326,76.704297],[-20.486719,76.920801],[-18.510303,76.778174],[-18.442627,77.259375],[-20.680811,77.618994],[-19.49043,77.718896],[-20.862598,77.911865],[-21.72959,77.708545],[-21.13374,78.658643],[-18.991992,79.178369],[-20.150146,80.01123],[-19.429199,80.257715],[-16.48877,80.251953],[-16.760596,80.573389],[-11.430664,81.456836],[-14.241992,81.813867],[-17.456055,81.397705],[-19.629932,81.639893],[-23.117725,80.778174],[-21.337988,82.068701],[-24.293066,81.700977],[-25.148828,82.001123],[-29.887402,82.054834],[-23.118066,82.324707],[-21.58252,82.63418],[-25.123389,83.159619],[-32.032715,82.983447],[-25.795068,83.260986],[-29.952881,83.564844]]],[[[-52.731152,69.944727],[-54.371631,70.317285],[-54.919141,69.713623],[-53.578418,69.256641],[-51.900195,69.604785],[-52.731152,69.944727]]],[[[-55.016895,72.791113],[-56.214795,72.719189],[-55.566602,72.564355],[-55.016895,72.791113]]],[[[-44.864551,82.083643],[-44.91748,82.480518],[-47.272266,82.656934],[-44.864551,82.083643]]],[[[-25.432324,70.921338],[-27.617236,70.91377],[-28.035254,70.486816],[-26.604687,70.553369],[-26.217871,70.454053],[-25.432324,70.921338]]],[[[-17.6125,79.825879],[-17.98291,80.055176],[-19.138281,79.852344],[-17.6125,79.825879]]],[[[-18.000537,75.407324],[-18.856055,75.319141],[-18.670801,75.00166],[-17.391992,75.036914],[-18.000537,75.407324]]],[[[-46.266699,60.781396],[-46.205225,60.943506],[-46.788086,60.758398],[-46.266699,60.781396]]]]}},{type:"Feature",properties:{name:"法罗群岛",full_name:"法罗群岛（丹麦）",iso_a2:"FO",iso_a3:"FRO",iso_n3:"234"},geometry:{type:"Polygon",coordinates:[[[-6.631055,62.227881],[-7.172168,62.285596],[-6.725195,61.951465],[-6.631055,62.227881]]]}},{type:"Feature",properties:{name:"丹麦",full_name:"丹麦王国",iso_a2:"DK",iso_a3:"DNK",iso_n3:"208"},geometry:{type:"MultiPolygon",coordinates:[[[[12.56875,55.785059],[12.218945,56.118652],[11.819727,55.697656],[11.627734,55.956885],[10.978906,55.721533],[11.862305,54.772607],[12.56875,55.785059]]],[[[9.739746,54.825537],[9.591113,55.493213],[10.926172,56.443262],[10.282715,56.620508],[10.609961,57.736914],[8.284082,56.852344],[8.468359,56.664551],[9.254883,57.011719],[8.67168,56.495654],[8.163965,56.606885],[8.132129,55.599805],[8.615918,55.418213],[8.670313,54.903418],[9.739746,54.825537]]],[[[10.645117,55.609814],[9.860645,55.515479],[9.98877,55.163184],[10.785254,55.133398],[10.645117,55.609814]]],[[[11.361426,54.89165],[11.035547,54.773096],[11.765918,54.679443],[11.361426,54.89165]]]]}},{type:"Feature",properties:{name:"捷克",full_name:"捷克共和国",iso_a2:"CZ",iso_a3:"CZE",iso_n3:"203"},geometry:{type:"Polygon",coordinates:[[[18.832227,49.510791],[18.562402,49.879346],[17.627051,50.116406],[17.702246,50.307178],[16.880078,50.427051],[16.63916,50.102148],[16.282227,50.655615],[14.99375,51.014355],[14.809375,50.858984],[14.319727,51.037793],[12.942676,50.406445],[12.089844,50.301758],[12.681152,49.414502],[13.814746,48.766943],[14.691309,48.599219],[15.066797,48.997852],[16.953125,48.598828],[18.832227,49.510791]]]}},{type:"Feature",properties:{name:"北塞浦路斯",full_name:"北塞浦路斯土耳其共和国",iso_a2:"-99",iso_a3:"-99",iso_n3:"-99"},geometry:{type:"Polygon",coordinates:[[[34.004492,35.065234],[33.941992,35.292041],[34.556055,35.662061],[32.712695,35.171045],[34.004492,35.065234]]]}},{type:"Feature",properties:{name:"塞浦路斯",full_name:"塞浦路斯共和国",iso_a2:"CY",iso_a3:"CYP",iso_n3:"196"},geometry:{type:"Polygon",coordinates:[[[32.712695,35.171045],[32.317188,34.95332],[33.00791,34.56958],[34.004492,35.065234],[32.712695,35.171045]]]}},{type:"Feature",properties:{name:"古巴",full_name:"古巴共和国",iso_a2:"CU",iso_a3:"CUB",iso_n3:"192"},geometry:{type:"MultiPolygon",coordinates:[[[[-81.837451,23.163037],[-84.044922,22.666016],[-84.361279,22.378906],[-84.326367,22.074316],[-84.887207,21.856982],[-84.030957,21.943115],[-82.738037,22.689258],[-81.838818,22.672461],[-81.710352,22.49668],[-82.077734,22.387695],[-81.849414,22.213672],[-81.185498,22.267969],[-79.357422,21.585156],[-78.727686,21.592725],[-78.116357,20.761865],[-77.22959,20.64375],[-77.103809,20.40752],[-77.715088,19.855469],[-75.116406,19.901416],[-74.153711,20.168555],[-74.882568,20.650635],[-75.724561,20.714551],[-75.722949,21.111035],[-77.252881,21.483496],[-77.366162,21.612646],[-77.144141,21.643604],[-77.497266,21.871631],[-79.275684,22.407617],[-79.820264,22.887012],[-81.837451,23.163037]]],[[[-82.561768,21.57168],[-82.991211,21.942725],[-82.973584,21.592285],[-83.183789,21.593457],[-82.561768,21.57168]]]]}},{type:"Feature",properties:{name:"克罗地亚",full_name:"克罗地亚共和国",iso_a2:"HR",iso_a3:"HRV",iso_n3:"191"},geometry:{type:"MultiPolygon",coordinates:[[[[13.57793,45.516895],[13.860742,44.837402],[14.550488,45.297705],[15.470996,44.271973],[15.18584,44.172119],[15.985547,43.519775],[16.903125,43.392432],[17.585156,42.938379],[15.736621,44.76582],[15.788086,45.178955],[16.293359,45.008838],[16.918652,45.276562],[19.007129,44.869189],[19.4,45.2125],[19.004688,45.399512],[18.905371,45.931738],[17.807129,45.79043],[16.516211,46.499902],[15.635938,46.200732],[15.339453,45.467041],[14.568848,45.657227],[13.57793,45.516895]]],[[[14.810254,44.977051],[14.571094,45.224756],[14.450391,45.079199],[14.810254,44.977051]]],[[[18.436328,42.559717],[17.667578,42.897119],[17.04541,43.014893],[18.51748,42.43291],[18.436328,42.559717]]]]}},{type:"Feature",properties:{name:"科特迪瓦",full_name:"科特迪瓦共和国",iso_a2:"CI",iso_a3:"CIV",iso_n3:"384"},geometry:{type:"Polygon",coordinates:[[[-7.990625,10.1625],[-8.136963,9.495703],[-7.896191,9.415869],[-7.950977,8.786816],[-7.681201,8.410352],[-8.236963,8.455664],[-8.009863,8.078516],[-8.231885,7.556738],[-8.486426,7.558496],[-8.302344,6.980957],[-8.603564,6.507812],[-7.454395,5.841309],[-7.544971,4.351318],[-5.061816,5.130664],[-5.282373,5.210254],[-3.347559,5.130664],[-3.199951,5.354492],[-3.019141,5.130811],[-2.75498,5.43252],[-3.235791,6.807227],[-2.505859,8.20874],[-2.69585,9.481348],[-3.223535,9.895459],[-4.62583,9.713574],[-5.523535,10.426025],[-6.196875,10.232129],[-6.261133,10.724072],[-6.65415,10.656445],[-7.01709,10.143262],[-7.497949,10.439795],[-7.990625,10.1625]]]}},{type:"Feature",properties:{name:"哥斯达黎加",full_name:"哥斯达黎加共和国",iso_a2:"CR",iso_a3:"CRI",iso_n3:"188"},geometry:{type:"Polygon",coordinates:[[[-82.563574,9.57666],[-83.641992,10.917236],[-83.919287,10.735352],[-84.63418,11.045605],[-85.744336,11.062109],[-85.908008,10.897559],[-85.667236,10.74502],[-85.849658,10.292041],[-85.681006,9.958594],[-85.114502,9.581787],[-84.886426,9.820947],[-85.263184,10.256641],[-85.025049,10.115723],[-84.581592,9.568359],[-83.637256,9.035352],[-83.604736,8.480322],[-83.291504,8.406006],[-83.469727,8.706836],[-83.285791,8.664355],[-82.879346,8.070654],[-83.027344,8.337744],[-82.727832,8.916064],[-82.939844,9.44917],[-82.563574,9.57666]]]}},{type:"Feature",properties:{name:"刚果（金）",full_name:"刚果民主共和国",iso_a2:"CD",iso_a3:"COD",iso_n3:"180"},geometry:{type:"Polygon",coordinates:[[[30.751172,-8.193652],[30.212695,-7.037891],[29.54082,-6.313867],[29.403223,-4.449316],[29.014355,-2.720215],[28.876367,-2.400293],[29.576953,-1.387891],[29.942871,.819238],[31.252734,2.04458],[30.728613,2.455371],[30.838574,3.490723],[29.676855,4.586914],[28.19209,4.350244],[27.40332,5.10918],[25.525098,5.312109],[25.065234,4.967432],[22.864551,4.723877],[22.422168,4.134961],[20.558105,4.462695],[19.500977,5.12749],[18.594141,4.34624],[18.610352,3.478418],[18.072168,2.013281],[17.752832,-.549023],[16.879883,-1.225879],[16.215332,-2.177832],[15.990039,-3.766211],[14.70791,-4.881738],[14.410742,-4.83125],[14.358301,-4.299414],[13.71709,-4.454492],[13.414941,-4.837402],[13.072754,-4.634766],[12.451465,-5.071484],[12.503711,-5.695801],[12.213672,-5.758691],[12.45293,-6.000488],[13.068164,-5.864844],[16.431445,-5.900195],[17.57959,-8.099023],[19.34082,-7.966602],[19.527637,-7.144434],[19.875195,-6.986328],[20.590039,-6.919922],[20.607813,-7.277734],[21.781641,-7.314648],[21.813184,-9.46875],[22.274512,-10.259082],[22.226172,-11.121973],[23.966504,-10.871777],[24.365723,-11.129883],[24.37793,-11.41709],[25.28877,-11.212402],[25.349414,-11.623047],[26.025977,-11.890137],[26.824023,-11.965234],[27.15918,-11.579199],[27.573828,-12.227051],[28.412891,-12.518066],[29.014258,-13.368848],[29.554199,-13.248926],[29.775195,-13.438086],[29.795117,-12.155469],[29.485547,-12.418457],[29.064355,-12.348828],[28.383398,-11.566699],[28.645508,-10.550195],[28.400684,-9.224805],[28.898145,-8.485449],[30.751172,-8.193652]]]}},{type:"Feature",properties:{name:"刚果（布）",full_name:"刚果共和国",iso_a2:"CG",iso_a3:"COG",iso_n3:"178"},geometry:{type:"Polygon",coordinates:[[[11.130176,-3.916309],[12.018359,-5.004297],[12.798242,-4.430566],[13.072754,-4.634766],[13.414941,-4.837402],[13.71709,-4.454492],[14.358301,-4.299414],[14.410742,-4.83125],[14.70791,-4.881738],[15.990039,-3.766211],[16.215332,-2.177832],[16.879883,-1.225879],[17.752832,-.549023],[18.072168,2.013281],[18.610352,3.478418],[17.491602,3.687305],[16.610742,3.505371],[16.183398,2.270068],[16.059375,1.676221],[14.578906,2.199121],[13.293555,2.161572],[13.216309,1.248438],[14.180859,1.370215],[14.429883,.901465],[13.949609,.353809],[13.860059,-.20332],[14.474121,-.573438],[14.383984,-1.890039],[13.993848,-2.490625],[13.733789,-2.138477],[13.464941,-2.39541],[12.991992,-2.313379],[12.59043,-1.826855],[12.446387,-2.32998],[11.605469,-2.342578],[11.537793,-2.836719],[11.93418,-3.318555],[11.879883,-3.665918],[11.504297,-3.520312],[11.130176,-3.916309]]]}},{type:"Feature",properties:{name:"科摩罗",full_name:"科摩罗联盟",iso_a2:"KM",iso_a3:"COM",iso_n3:"174"},geometry:{type:"MultiPolygon",coordinates:[[[[44.476367,-12.081543],[44.220117,-12.171387],[44.50498,-12.356543],[44.476367,-12.081543]]],[[[43.46582,-11.90127],[43.299023,-11.374512],[43.22666,-11.751855],[43.46582,-11.90127]]]]}},{type:"Feature",properties:{name:"哥伦比亚",full_name:"哥伦比亚共和国",iso_a2:"CO",iso_a3:"COL",iso_n3:"170"},geometry:{type:"Polygon",coordinates:[[[-71.319727,11.861914],[-71.137305,12.046338],[-71.262109,12.335303],[-71.714551,12.419971],[-73.313379,11.295752],[-74.14292,11.32085],[-74.400879,10.765234],[-74.330225,10.99668],[-74.84458,11.109717],[-75.70835,10.143408],[-75.538574,10.205176],[-75.639355,9.450439],[-76.920459,8.57373],[-76.786572,7.931592],[-77.374219,8.658301],[-77.195996,7.972461],[-77.538281,7.56626],[-77.761914,7.698828],[-77.901172,7.229346],[-77.368799,6.575586],[-77.469434,6.176758],[-77.249268,5.780176],[-77.534424,5.537109],[-77.286328,4.721729],[-77.520703,4.212793],[-77.076807,3.913281],[-77.813574,2.716357],[-78.591699,2.356641],[-78.576904,1.773779],[-79.025439,1.623682],[-78.859668,1.455371],[-77.702881,.837842],[-77.396338,.393896],[-76.494629,.235449],[-76.270605,.439404],[-75.284473,-.106543],[-74.801758,-.200098],[-74.246387,-.970605],[-73.664307,-1.248828],[-72.941113,-2.394043],[-70.968555,-2.206836],[-70.09585,-2.658203],[-70.735107,-3.781543],[-70.339502,-3.814355],[-69.965918,-4.235938],[-69.400244,-1.194922],[-69.633984,-.509277],[-70.070508,-.138867],[-70.053906,.578613],[-69.15332,.658789],[-69.311816,1.050488],[-69.852148,1.059521],[-69.848584,1.70874],[-68.176562,1.719824],[-68.193799,1.987012],[-67.93623,1.748486],[-67.400439,2.116699],[-67.082275,1.1854],[-66.876025,1.223047],[-67.21084,2.390137],[-67.859082,2.793604],[-67.311133,3.415869],[-67.855273,4.506885],[-67.481982,6.180273],[-69.427148,6.123975],[-70.129199,6.953613],[-72.006641,7.032617],[-72.471973,7.524268],[-72.390332,8.287061],[-72.796387,9.108984],[-73.366211,9.194141],[-72.690088,10.83584],[-71.958105,11.666406],[-71.319727,11.861914]]]}},{type:"Feature",properties:{name:"中国",full_name:"中华人民共和国",iso_a2:"CN",iso_a3:"CHN",iso_n3:"156"},geometry:{type:"MultiPolygon",coordinates:[[[[107.972656,21.507959],[108.502148,21.633447],[108.479883,21.904639],[109.081543,21.440283],[109.521484,21.693408],[109.930762,21.480566],[109.662598,20.916895],[110.123145,20.263721],[110.517578,20.46001],[110.154004,20.944629],[110.410937,21.338135],[110.567187,21.214062],[111.602734,21.559082],[111.943945,21.849658],[112.30498,21.741699],[112.359668,21.978027],[112.586328,21.776855],[113.08877,22.207959],[113.548145,22.222607],[113.331055,22.912012],[113.519727,23.1021],[114.01543,22.511914],[113.937305,22.36499],[114.267969,22.295557],[114.266016,22.540967],[116.470703,22.945898],[116.910645,23.64668],[117.367676,23.588623],[118.056055,24.246094],[117.842676,24.474316],[118.657031,24.621436],[118.977539,25.209277],[119.285547,25.232227],[119.180078,25.449805],[119.622461,25.391162],[119.61875,26.003564],[119.139453,26.121777],[119.463086,26.054688],[119.881055,26.33418],[119.588184,26.784961],[120.086719,26.671582],[120.747656,28.009961],[121.145703,28.32666],[121.609961,28.292139],[121.487109,29.193164],[121.917773,29.13501],[121.941211,29.605908],[121.50625,29.48457],[122.08291,29.870361],[121.258008,30.304102],[120.194629,30.241309],[121.87793,30.916992],[120.715527,31.98374],[120.035937,31.936279],[120.520117,32.105859],[121.856348,31.816455],[120.853223,32.661377],[120.266699,34.274023],[119.165332,34.848828],[120.284766,35.984424],[120.183301,36.202441],[120.637891,36.129932],[120.81084,36.632812],[121.932715,36.959473],[122.340918,36.832227],[122.666992,37.402832],[121.640234,37.460352],[120.75,37.833936],[119.760547,37.155078],[119.287402,37.138281],[118.952637,37.331152],[118.940039,38.042773],[117.766699,38.31167],[117.616699,38.852881],[117.865723,39.19126],[118.976953,39.182568],[119.391113,39.75249],[120.479102,40.230957],[121.174512,40.90127],[121.834863,40.974268],[122.275,40.541846],[121.26748,39.544678],[121.818457,39.386523],[121.106738,38.920801],[121.163574,38.731641],[122.840039,39.60083],[124.362109,40.004053],[125.989062,40.904639],[126.743066,41.724854],[128.149414,41.387744],[128.045215,41.9875],[128.923438,42.038232],[129.697852,42.448145],[129.898242,42.998145],[130.526953,42.5354],[130.424805,42.727051],[131.068555,42.902246],[131.257324,43.378076],[130.981641,44.844336],[131.851855,45.326855],[133.113477,45.130713],[134.167676,47.302197],[134.752344,47.71543],[134.665234,48.253906],[135.083406,48.436324],[134.293359,48.373438],[133.144043,48.105664],[132.47627,47.71499],[130.961914,47.709326],[130.553125,48.861182],[129.498145,49.388818],[127.550781,49.801807],[127.590234,50.208984],[125.649023,53.042285],[123.607813,53.546533],[120.985449,53.28457],[120.094531,52.787207],[120.656152,52.56665],[120.749805,52.096533],[119.163672,50.406006],[119.259863,50.066406],[117.873438,49.513477],[116.683301,49.823779],[115.616406,47.874805],[115.898242,47.686914],[116.760547,47.869775],[117.350781,47.652197],[117.768359,47.987891],[118.498438,47.983984],[119.711133,47.15],[119.867188,46.672168],[117.438086,46.58623],[117.333398,46.362012],[116.562598,46.289795],[115.681055,45.458252],[114.560156,45.38999],[113.587012,44.745703],[111.898047,45.064062],[111.402246,44.367285],[111.933203,43.711426],[110.400391,42.773682],[109.339844,42.438379],[106.77002,42.288721],[104.982031,41.595508],[104.498242,41.658691],[104.498242,41.877002],[103.711133,41.751318],[102.156641,42.158105],[101.495313,42.53877],[96.385449,42.720361],[95.350293,44.278076],[93.516211,44.944482],[90.877246,45.196094],[90.869922,46.954492],[90.02793,47.877686],[89.047656,48.002539],[87.979688,48.555127],[87.814258,49.162305],[87.322852,49.085791],[86.808301,49.049707],[86.549414,48.528613],[85.749414,48.385059],[85.484766,47.063525],[84.786133,46.830713],[83.029492,47.185938],[82.315234,45.594922],[82.521484,45.125488],[81.691992,45.349365],[79.871875,44.883789],[80.481543,44.714648],[80.355273,44.097266],[80.785742,43.161572],[80.202246,42.734473],[80.209375,42.190039],[78.123438,41.075635],[76.907715,41.02417],[76.318555,40.352246],[75.677148,40.305811],[75.555566,40.625195],[74.835156,40.482617],[73.991602,40.043115],[73.631641,39.448877],[73.80166,38.606885],[74.812305,38.460303],[75.11875,37.385693],[74.891309,37.231641],[74.372168,37.157715],[74.541406,37.022168],[75.772168,36.694922],[75.912305,36.048975],[76.766895,35.661719],[77.799414,35.495898],[78.042676,35.479785],[78.326953,34.606396],[78.970117,34.302637],[78.72666,34.013379],[79.219336,32.501074],[78.918945,32.358203],[78.700879,32.597021],[78.389648,32.519873],[78.807678,31.099982],[79.707774,31.013593],[81.010254,30.164502],[82.043359,30.326758],[83.583496,29.183594],[84.101367,29.219971],[84.228711,28.911768],[85.159082,28.592236],[85.122461,28.315967],[85.67832,28.277441],[85.994531,27.9104],[86.137012,28.114355],[87.141406,27.83833],[88.109766,27.870605],[88.803711,28.006934],[88.891406,27.316064],[89.981055,28.311182],[90.352734,28.080225],[91.273047,28.078369],[91.631934,27.759961],[91.594727,27.557666],[92.083398,27.290625],[91.99834,26.85498],[92.64698,26.952656],[93.111399,26.880082],[93.817265,27.025183],[94.277372,27.58143],[94.88592,27.743098],[95.28628,27.939955],[95.39715,28.142259],[95.832003,28.295186],[96.275479,28.228241],[97.086778,27.7475],[97.335156,27.937744],[97.322461,28.217969],[97.599219,28.517041],[98.061621,28.185889],[98.298828,27.550098],[98.651172,27.572461],[98.738477,26.785742],[98.65625,25.863574],[97.819531,25.251855],[97.583301,24.774805],[97.564551,23.911035],[98.835059,24.121191],[98.676758,23.905078],[98.86377,23.19126],[99.507129,22.959131],[99.192969,22.125977],[99.917676,22.028027],[100.147656,21.480518],[101.079785,21.755859],[101.138867,21.56748],[101.247852,21.197314],[101.800586,21.212598],[101.524512,22.253662],[101.73877,22.495264],[102.127441,22.379199],[102.470898,22.750928],[102.981934,22.448242],[103.32666,22.769775],[103.941504,22.540088],[105.275391,23.345215],[105.842969,22.922803],[106.780273,22.778906],[106.550391,22.501367],[106.663574,21.978906],[107.972656,21.507959]]],[[[110.88877,19.991943],[110.651758,20.137744],[109.263477,19.882666],[108.665527,19.304102],[108.701563,18.535254],[109.519336,18.218262],[110.067383,18.447559],[111.013672,19.655469],[110.88877,19.991943]]],[[[121.008789,22.620361],[121.397461,23.17251],[121.929004,24.97373],[121.593652,25.275342],[121.040625,25.032812],[120.132129,23.65293],[120.232813,22.71792],[120.839844,21.925],[121.008789,22.620361]]],[[[124.4751,25.9358],[124.4641,25.8592],[124.6536,25.9111],[124.5822,25.9655],[124.4751,25.9358]]],[[[123.7143,26.0025],[123.7967,25.921],[123.7198,25.8716],[123.5962,25.921],[123.7143,26.0025]]],[[[123.4946,25.7554],[123.5797,25.6861],[123.3325,25.6192],[123.2639,25.6712],[123.327,25.7306],[123.4946,25.7554]]],[[[116.769628,20.771721],[116.889736,20.683284],[116.749302,20.600958],[116.862635,20.588633],[116.925461,20.726949],[116.769628,20.771721]]],[[[111.7447,16.552],[111.7886,16.5125],[111.7392,16.4598],[111.7447,16.552]]],[[[111.8134,16.2621],[111.8161,16.2252],[111.5689,16.1619],[111.662292,16.260163],[111.8134,16.2621]]],[[[112.6126,16.059],[112.4753,16.0009],[112.4615,16.0432],[112.6126,16.059]]],[[[113.896887,7.607204],[114.058879,7.537794],[114.368696,7.638642],[114.540543,7.945783],[113.896887,7.607204]]],[[[109.463972,7.344339],[109.948716,7.522962],[109.653065,7.559745],[109.463972,7.344339]]],[[[116.48876,10.395686],[116.467202,10.309144],[116.644592,10.335051],[116.48876,10.395686]]],[[[122.518653,23.460785],[122.798614,24.573674],[122.779218,24.578553],[122.499257,23.465664],[122.518653,23.460785]]],[[[121.172026,20.805459],[121.909388,21.687433],[121.894044,21.700262],[121.156682,20.818287],[121.172026,20.805459]]],[[[119.473662,18.007073],[120.025697,19.024038],[120.00812,19.033579],[119.456084,18.016614],[119.473662,18.007073]]],[[[119.072182,15.007514],[119.072676,16.043885],[119.052676,16.043885],[119.052184,15.00781],[119.072182,15.007514]]],[[[118.686467,11.189592],[118.524042,10.912566],[118.540436,10.90292],[118.704762,11.181475],[118.874599,11.607472],[118.98895,11.985731],[118.969805,11.991519],[118.855579,11.613671],[118.686467,11.189592]]],[[[115.544669,7.146723],[116.250486,7.979279],[116.23523,7.992212],[115.529413,7.159656],[115.544669,7.146723]]],[[[112.307052,3.534873],[111.786901,3.416873],[111.791326,3.397368],[112.312489,3.515623],[112.521474,3.578591],[112.852064,3.732569],[112.843614,3.750696],[112.515016,3.597533],[112.307052,3.534873]]],[[[108.290133,6.012663],[108.308786,6.019877],[108.279563,6.095434],[108.256117,6.227526],[108.2168,6.538165],[108.218763,6.949641],[108.244195,7.073907],[108.224601,7.077917],[108.198768,6.950725],[108.196797,6.537606],[108.236307,6.224768],[108.26004,6.090984],[108.290133,6.012663]]],[[[110.128228,11.368945],[110.055537,11.253354],[110.072467,11.242707],[110.145887,11.359542],[110.207005,11.481288],[110.259018,11.604996],[110.304569,11.783642],[110.328228,11.945713],[110.334243,12.141598],[110.332274,12.240384],[110.312278,12.239982],[110.314245,12.141953],[110.308355,11.948035],[110.284855,11.787051],[110.239823,11.610665],[110.188981,11.489964],[110.128228,11.368945]]],[[[109.845225,15.153166],[109.864809,15.157224],[109.848892,15.233933],[109.789745,15.450683],[109.690053,15.675484],[109.591475,15.836774],[109.532015,15.922592],[109.30888,16.207258],[109.29314,16.194919],[109.515744,15.910958],[109.57456,15.826099],[109.672646,15.665615],[109.77065,15.444688],[109.829516,15.228968],[109.845225,15.153166]]]]}},{type:"Feature",properties:{name:"智利",full_name:"智利共和国",iso_a2:"CL",iso_a3:"CHL",iso_n3:"152"},geometry:{type:"MultiPolygon",coordinates:[[[[-70.418262,-18.345605],[-70.080029,-21.356836],[-70.593359,-23.255469],[-70.392334,-23.565918],[-70.445361,-25.172656],[-70.925781,-27.588672],[-71.519238,-28.926465],[-71.315723,-29.649707],[-71.708936,-30.628027],[-71.452246,-32.65957],[-72.223779,-35.096191],[-73.215967,-37.166895],[-73.662402,-37.341016],[-73.226465,-39.224414],[-73.965869,-41.118262],[-73.624023,-41.773633],[-72.318262,-41.499023],[-72.824072,-41.908789],[-72.499414,-41.980859],[-72.412354,-42.388184],[-72.773242,-42.257715],[-72.758008,-43.039453],[-73.224463,-43.897949],[-73.265088,-44.168652],[-72.663867,-44.436426],[-72.680078,-44.593945],[-73.444971,-45.238184],[-72.933838,-45.452344],[-73.730762,-45.47998],[-73.591846,-45.899121],[-73.845361,-46.566016],[-73.735254,-45.811719],[-73.967578,-46.154102],[-74.392969,-46.217383],[-74.019922,-46.055859],[-73.957178,-45.404395],[-74.157861,-45.767188],[-75.066699,-45.874902],[-74.924463,-46.159668],[-75.706396,-46.705273],[-75.430371,-46.93457],[-75.540332,-46.69873],[-74.98418,-46.512109],[-75.005957,-46.741113],[-74.313574,-46.788184],[-74.158398,-47.18252],[-74.482666,-47.430469],[-74.134082,-47.59082],[-74.654932,-47.702246],[-74.227051,-47.968945],[-73.715869,-47.655469],[-73.391064,-48.145898],[-74.584668,-47.999023],[-74.474414,-48.463965],[-74.009082,-48.475],[-74.341016,-48.595703],[-74.366553,-49.400488],[-73.934961,-49.020898],[-73.836377,-49.609375],[-74.29082,-49.604102],[-73.958594,-49.994727],[-74.62959,-50.194043],[-73.950342,-50.510547],[-74.185596,-50.485352],[-73.978027,-50.827051],[-73.654443,-50.492676],[-73.806543,-50.938379],[-74.139404,-50.817773],[-74.365576,-50.487891],[-74.644482,-50.360938],[-74.685742,-50.662012],[-75.094678,-50.68125],[-74.814746,-51.062891],[-73.939502,-51.266309],[-74.19668,-51.680566],[-73.518164,-52.041016],[-72.600049,-51.799121],[-73.16875,-51.453906],[-72.76123,-51.573242],[-72.489648,-51.763672],[-72.52334,-52.255469],[-72.677051,-52.384668],[-72.79502,-51.949512],[-73.834473,-52.233984],[-74.264941,-52.104883],[-74.014453,-52.639355],[-73.123926,-52.487988],[-73.645215,-52.837012],[-73.122461,-53.073926],[-72.712109,-52.535547],[-71.511279,-52.605371],[-72.727686,-52.762305],[-73.052734,-53.243457],[-72.548926,-53.460742],[-72.278027,-53.132324],[-71.227148,-52.810645],[-71.791455,-53.48457],[-71.941699,-53.234082],[-72.412891,-53.350195],[-71.297754,-53.883398],[-70.795117,-52.76875],[-69.241016,-52.205469],[-68.443359,-52.356641],[-69.960254,-52.008203],[-71.918652,-51.989551],[-72.407666,-51.54082],[-72.340234,-50.681836],[-73.15293,-50.738281],[-73.50127,-50.125293],[-73.554199,-49.463867],[-72.354736,-48.36582],[-72.51792,-47.876367],[-71.699658,-46.651367],[-71.746191,-45.578906],[-71.349316,-45.331934],[-72.063721,-44.771875],[-71.261133,-44.763086],[-71.159717,-44.560254],[-71.82002,-44.383105],[-71.750635,-43.237305],[-72.146436,-42.990039],[-72.108203,-42.251855],[-71.75,-42.046777],[-71.932129,-40.691699],[-71.401562,-38.935059],[-70.858643,-38.604492],[-71.192187,-36.843652],[-70.404785,-36.061719],[-70.555176,-35.246875],[-69.852441,-34.224316],[-69.819629,-33.283789],[-70.084863,-33.201758],[-70.51958,-31.148438],[-69.844287,-30.175],[-70.026807,-29.324023],[-69.656934,-28.413574],[-68.846338,-27.153711],[-68.318652,-26.973242],[-68.591602,-26.47041],[-68.384229,-25.091895],[-68.562012,-24.747363],[-67.356201,-24.033789],[-67.008789,-23.001367],[-67.194873,-22.82168],[-67.879443,-22.822949],[-68.197021,-21.300293],[-68.760547,-20.416211],[-68.462891,-19.432813],[-68.968311,-18.967969],[-69.093945,-18.050488],[-69.510938,-17.506055],[-69.8521,-17.703809],[-69.926367,-18.206055],[-70.418262,-18.345605]],[[-74.385742,-52.922363],[-74.712012,-52.74873],[-73.135205,-53.353906],[-74.385742,-52.922363]]],[[[-68.629932,-52.652637],[-69.414062,-52.48623],[-69.935449,-52.821094],[-70.380127,-52.751953],[-70.329297,-53.377637],[-69.355957,-53.416309],[-70.151123,-53.888086],[-69.044336,-54.406738],[-69.253174,-54.557422],[-70.535303,-54.136133],[-70.531299,-53.627344],[-70.863086,-54.110449],[-70.310986,-54.528516],[-70.797266,-54.327246],[-71.927734,-54.528711],[-68.653223,-54.853613],[-68.629932,-52.652637]]],[[[-67.079932,-55.153809],[-68.301367,-54.980664],[-68.07002,-55.221094],[-67.079932,-55.153809]]],[[[-73.773389,-43.345898],[-73.436328,-42.936523],[-73.789258,-42.585742],[-73.4229,-42.192871],[-73.527832,-41.896289],[-74.03667,-41.795508],[-74.387354,-43.231641],[-73.773389,-43.345898]]],[[[-74.476172,-49.147852],[-74.546094,-48.766895],[-74.89624,-48.733203],[-75.549805,-49.791309],[-75.066016,-49.852344],[-74.723828,-49.423828],[-74.594727,-50.006641],[-74.476172,-49.147852]]],[[[-75.510254,-48.763477],[-75.158496,-48.622656],[-75.391406,-48.019727],[-75.510254,-48.763477]]],[[[-74.567285,-48.591992],[-74.895654,-47.839355],[-75.212891,-48.141699],[-74.923047,-48.626465],[-74.567285,-48.591992]]],[[[-72.923242,-53.481641],[-73.845459,-53.545801],[-73.210645,-53.98584],[-72.76377,-53.864844],[-72.870996,-54.126562],[-72.20542,-53.807422],[-72.923242,-53.481641]]],[[[-74.822949,-51.630176],[-75.105371,-51.788867],[-74.694482,-52.279199],[-74.822949,-51.630176]]],[[[-69.702979,-54.919043],[-69.979785,-55.147461],[-69.411816,-55.444238],[-69.192627,-55.171875],[-68.04834,-55.643164],[-68.458008,-54.959668],[-69.702979,-54.919043]]],[[[-71.390479,-54.032812],[-71.996484,-53.884863],[-72.210449,-54.047754],[-71.948535,-54.300879],[-71.143262,-54.374023],[-71.021924,-54.111816],[-71.390479,-54.032812]]],[[[-73.735352,-44.394531],[-73.994922,-44.140234],[-74.617773,-44.647949],[-74.01626,-45.344922],[-73.728174,-45.195898],[-74.002051,-44.590918],[-73.735352,-44.394531]]],[[[-72.986133,-44.780078],[-72.776367,-44.508594],[-73.207715,-44.334961],[-73.39707,-44.774316],[-72.986133,-44.780078]]],[[[-75.302002,-50.67998],[-75.115332,-50.510449],[-75.427637,-50.480566],[-75.302002,-50.67998]]],[[[-75.106689,-48.836523],[-75.583105,-48.858887],[-75.641162,-49.19541],[-75.106689,-48.836523]]],[[[-74.558643,-51.277051],[-75.153662,-51.278809],[-75.289111,-51.625391],[-74.558643,-51.277051]]],[[[-75.054785,-50.296094],[-74.875977,-50.109961],[-75.32666,-50.011816],[-75.449121,-50.343359],[-75.054785,-50.296094]]],[[[-74.312891,-45.691504],[-74.310547,-45.172656],[-74.689844,-45.662598],[-74.312891,-45.691504]]],[[[-70.991602,-54.867969],[-71.437207,-54.889258],[-70.297852,-55.11377],[-70.991602,-54.867969]]]]}},{type:"Feature",properties:{name:"乍得",full_name:"乍得共和国",iso_a2:"TD",iso_a3:"TCD",iso_n3:"148"},geometry:{type:"Polygon",coordinates:[[[23.980273,19.496631],[20.147656,21.389258],[15.984082,23.445215],[14.979004,22.996191],[15.181836,21.523389],[15.963184,20.346191],[15.735059,19.904053],[15.474316,16.908398],[13.448242,14.380664],[13.606348,13.70459],[14.063965,13.078516],[14.461719,13.021777],[14.84707,12.5021],[15.132227,10.648486],[15.654883,10.007812],[14.243262,9.979736],[13.977246,9.691553],[15.116211,8.557324],[15.549805,7.787891],[15.480078,7.523779],[15.957617,7.507568],[16.545313,7.865479],[16.784766,7.550977],[17.649414,7.983594],[18.56416,8.045898],[19.108691,8.656152],[18.95625,8.938867],[20.34209,9.1271],[21.682715,10.289844],[21.771484,10.642822],[22.493848,10.99624],[22.860059,10.919678],[22.922656,11.344873],[22.591113,11.579883],[22.352344,12.660449],[21.825293,12.790527],[22.228125,13.32959],[22.106445,13.799805],[22.538574,14.161865],[22.381543,14.550488],[22.932324,15.162109],[22.933887,15.533105],[23.970801,15.721533],[23.980273,19.496631]]]}},{type:"Feature",properties:{name:"中非",full_name:"中非共和国",iso_a2:"CF",iso_a3:"CAF",iso_n3:"140"},geometry:{type:"Polygon",coordinates:[[[24.147363,8.665625],[23.537305,8.81582],[23.646289,9.8229],[22.860059,10.919678],[22.493848,10.99624],[21.771484,10.642822],[21.682715,10.289844],[20.34209,9.1271],[18.95625,8.938867],[19.108691,8.656152],[18.56416,8.045898],[17.649414,7.983594],[16.784766,7.550977],[16.545313,7.865479],[15.957617,7.507568],[15.480078,7.523779],[14.431152,6.038721],[14.73125,4.602393],[15.063574,4.284863],[15.128711,3.826904],[16.063477,2.908594],[16.183398,2.270068],[16.610742,3.505371],[17.491602,3.687305],[18.610352,3.478418],[18.594141,4.34624],[19.500977,5.12749],[20.558105,4.462695],[22.422168,4.134961],[22.864551,4.723877],[25.065234,4.967432],[25.525098,5.312109],[27.40332,5.10918],[27.143945,5.722949],[26.514258,6.069238],[26.361816,6.635303],[25.278906,7.42749],[24.85332,8.137549],[24.291406,8.291406],[24.147363,8.665625]]]}},{type:"Feature",properties:{name:"佛得角",full_name:"佛得角共和国",iso_a2:"CV",iso_a3:"CPV",iso_n3:"132"},geometry:{type:"MultiPolygon",coordinates:[[[[-25.169824,16.946484],[-25.034668,17.176465],[-25.337109,17.091016],[-25.169824,16.946484]]],[[[-23.444238,15.007959],[-23.748096,15.328516],[-23.705371,14.961328],[-23.444238,15.007959]]],[[[-22.917725,16.237256],[-22.959277,16.045117],[-22.710107,16.043359],[-22.917725,16.237256]]]]}},{type:"Feature",properties:{name:"加拿大",full_name:"加拿大",iso_a2:"CA",iso_a3:"CAN",iso_n3:"124"},geometry:{type:"MultiPolygon",coordinates:[[[[-132.655518,54.12749],[-133.048389,54.158936],[-133.079492,53.837012],[-132.347266,53.189209],[-131.957422,53.308691],[-131.667627,54.141357],[-132.534668,53.651709],[-132.166113,53.955225],[-132.655518,54.12749]]],[[[-131.753711,53.195557],[-132.546777,53.1375],[-131.221533,52.153613],[-131.455225,52.701709],[-131.971777,52.879834],[-131.634668,52.922168],[-131.753711,53.195557]]],[[[-127.197314,50.640381],[-127.918066,50.860547],[-128.346045,50.744238],[-128.05835,50.498486],[-127.465918,50.583105],[-127.486523,50.404639],[-127.905859,50.445215],[-127.863916,50.127734],[-127.249805,50.137988],[-127.114307,49.879736],[-126.134082,49.672314],[-126.519141,49.396777],[-125.9354,49.401465],[-125.489453,48.933789],[-124.812646,49.212646],[-125.120703,48.760791],[-123.310645,48.411035],[-125.48208,50.316797],[-127.197314,50.640381]]],[[[-130.025098,55.888232],[-130.048486,55.057275],[-129.795166,55.55957],[-129.560645,55.462549],[-130.430273,54.420996],[-129.626025,54.230273],[-130.335254,53.723926],[-129.563721,53.251465],[-128.959375,53.841455],[-128.532129,53.858105],[-128.675537,53.55459],[-127.927832,53.274707],[-128.905615,53.559326],[-128.85459,53.704541],[-129.171582,53.533594],[-128.365039,52.825781],[-128.053271,52.910693],[-128.271533,52.362988],[-127.940234,52.545166],[-128.357617,52.158887],[-128.102246,51.788428],[-127.791895,52.289355],[-126.951367,52.751025],[-127.193994,52.457666],[-126.713965,52.060693],[-127.437939,52.356152],[-127.795361,52.191016],[-127.850537,51.673193],[-127.668701,51.477588],[-127.338721,51.707373],[-126.691455,51.703418],[-127.419678,51.608057],[-127.708105,51.151172],[-127.057568,50.867529],[-126.517334,51.056836],[-126.514355,50.679395],[-125.904102,50.704932],[-126.447461,50.587744],[-126.094336,50.497607],[-125.058789,50.513867],[-124.859863,50.872412],[-125.056689,50.418652],[-124.782373,50.020117],[-124.141602,49.792676],[-123.880127,50.173633],[-123.874414,49.736816],[-123.582471,49.68125],[-124.028613,49.602881],[-123.530566,49.397314],[-123.1875,49.680322],[-123.276758,49.343945],[-122.879102,49.398926],[-123.196338,49.147705],[-122.78877,48.993018],[-114.585107,48.993066],[-106.483838,48.993115],[-97.529834,48.993164],[-95.162061,48.991748],[-95.155273,49.369678],[-94.620898,48.742627],[-92.99624,48.611816],[-91.518311,48.058301],[-90.916064,48.209131],[-89.455664,47.99624],[-88.378174,48.303076],[-84.875977,46.899902],[-84.561768,46.457373],[-84.149463,46.542773],[-83.977783,46.084912],[-83.615967,46.116846],[-83.592676,45.817139],[-82.551074,45.347363],[-82.137842,43.570898],[-82.545312,42.624707],[-83.149658,42.141943],[-82.690039,41.675195],[-79.036719,42.802344],[-79.171875,43.466553],[-78.72041,43.624951],[-76.819971,43.628809],[-76.151172,44.303955],[-74.708887,45.003857],[-73.973828,45.345117],[-74.315088,45.531055],[-73.476611,45.738232],[-72.981006,46.209717],[-71.87959,46.686816],[-71.267773,46.795947],[-70.705859,47.139795],[-69.994434,47.739893],[-69.865527,48.172266],[-71.018262,48.455615],[-69.673877,48.19917],[-68.281934,49.197168],[-67.372021,49.348438],[-66.495508,50.211865],[-62.71543,50.30166],[-61.724854,50.104053],[-59.886328,50.316406],[-58.510352,51.295068],[-56.975977,51.457666],[-55.695215,52.137793],[-56.011719,52.394482],[-55.746484,52.474561],[-56.324902,52.544531],[-55.802832,52.643164],[-55.797949,53.211963],[-56.46499,53.765039],[-57.331738,53.469092],[-57.416064,54.162744],[-58.19209,54.228174],[-57.935986,54.091162],[-60.329492,53.266113],[-60.100293,53.486963],[-60.39541,53.65332],[-58.633203,54.049561],[-57.404492,54.590869],[-57.962451,54.875732],[-58.780176,54.838379],[-59.25957,55.199951],[-59.837793,54.813965],[-59.437891,55.175928],[-59.758789,55.30957],[-60.617139,55.060205],[-60.341016,55.784668],[-61.449512,55.995703],[-61.364697,56.216016],[-61.713086,56.230957],[-61.425293,56.360645],[-62.497266,56.801709],[-61.371631,56.680811],[-61.33374,57.010596],[-62.495557,57.489209],[-61.967969,57.611914],[-61.958643,57.911768],[-62.48623,58.154053],[-63.261523,58.014697],[-62.593848,58.474023],[-63.537061,58.329932],[-62.873877,58.672461],[-63.248437,59.068311],[-63.971143,59.053809],[-63.415137,59.194385],[-63.945459,59.380176],[-64.283496,60.064062],[-64.768457,60.012109],[-64.499414,60.268262],[-64.817334,60.331055],[-65.028174,59.770703],[-65.433398,59.776514],[-65.038232,59.387891],[-65.475098,59.470312],[-65.383545,59.060205],[-66.043066,58.820654],[-66.002393,58.431201],[-66.362402,58.791162],[-67.678271,57.991113],[-68.021045,58.485303],[-68.413574,58.051758],[-69.04082,57.90249],[-68.356543,58.163232],[-68.381152,58.743506],[-68.698193,58.904541],[-70.154346,58.760596],[-69.531641,58.869238],[-69.344043,59.303076],[-69.681885,59.341748],[-69.733936,59.918018],[-70.654834,60.026221],[-69.67373,60.075879],[-69.50332,61.04043],[-69.992432,60.856494],[-71.422705,61.158936],[-71.638281,61.617188],[-72.215869,61.587256],[-72.686963,62.124561],[-73.705078,62.473145],[-74.632568,62.115674],[-77.372412,62.57251],[-78.133398,62.282275],[-77.514355,61.556299],[-78.181348,60.819141],[-77.589551,60.808594],[-77.349072,59.578955],[-77.726172,59.675879],[-78.515088,58.682373],[-76.809814,57.657959],[-76.604053,56.199561],[-77.775293,55.29126],[-79.712354,54.671826],[-78.996045,54.00249],[-78.448096,52.261377],[-78.981641,51.774561],[-78.903174,51.200293],[-79.338672,51.628174],[-79.737451,51.186279],[-79.3479,50.762646],[-80.103564,51.282861],[-80.851221,51.125],[-80.443311,51.388574],[-80.588037,51.667236],[-81.827881,52.224219],[-81.599414,52.432617],[-82.291553,53.030713],[-82.393262,55.067822],[-83.910596,55.314648],[-85.365283,55.079297],[-85.559326,55.540186],[-87.482422,56.021289],[-88.948486,56.851318],[-90.897461,57.256934],[-92.798145,56.921973],[-92.432812,57.320312],[-93.17876,58.725635],[-94.123193,58.736719],[-94.332227,58.297363],[-94.287061,58.716016],[-94.957324,59.068848],[-94.761719,60.498242],[-93.312012,61.767285],[-93.581787,61.942041],[-92.905518,62.215137],[-93.205371,62.364941],[-92.527979,62.168408],[-92.551416,62.546729],[-91.93584,62.592383],[-92.361279,62.819385],[-90.698584,63.063867],[-90.970068,63.442773],[-91.841846,63.697559],[-92.465088,63.555078],[-92.156885,63.691699],[-93.559814,63.865283],[-93.696338,64.147168],[-90.811914,63.580908],[-90.154736,63.689648],[-90.04165,64.140869],[-89.131543,63.968506],[-88.105615,64.183301],[-87.027539,65.198096],[-88.974023,65.348291],[-89.924072,65.780273],[-91.427246,65.9479],[-89.749414,65.936035],[-87.452881,65.338965],[-85.95874,66.119043],[-86.708154,66.523047],[-85.603857,66.568262],[-83.869043,66.213574],[-84.223047,66.682471],[-85.113721,66.906934],[-84.538477,66.972803],[-83.406445,66.37124],[-81.467578,67.069873],[-81.294336,67.497412],[-82.552686,68.446484],[-81.281543,68.657227],[-81.95791,68.883643],[-81.377832,69.185645],[-82.227539,69.248877],[-82.618359,69.691064],[-85.507373,69.845264],[-84.867578,68.77334],[-85.643164,68.699707],[-86.560791,67.482129],[-87.359375,67.177246],[-88.313818,67.950342],[-88.346973,68.288281],[-87.813574,68.345703],[-88.223535,68.915039],[-89.279541,69.255469],[-90.204785,68.257471],[-91.237207,69.285547],[-90.415576,69.456982],[-92.887793,69.668213],[-91.976709,70.038672],[-92.320508,70.235352],[-91.564062,70.178271],[-94.734863,71.982959],[-95.872314,71.573145],[-95.564258,71.336768],[-96.446582,71.239893],[-95.878613,70.548975],[-96.551367,70.210303],[-95.964941,69.802783],[-93.532275,69.480908],[-94.600439,68.803223],[-93.852441,69.000342],[-93.448926,68.618896],[-95.460693,68.021387],[-95.25874,67.262549],[-95.399658,66.949463],[-96.036865,66.9375],[-95.787549,66.616797],[-96.422559,67.051758],[-95.418896,67.013232],[-96.369141,67.509766],[-95.970312,68.249121],[-96.72207,68.03877],[-96.430664,68.310596],[-97.410352,68.496533],[-98.650488,68.363525],[-98.192529,67.922998],[-97.206543,67.855078],[-97.454932,67.616992],[-98.631543,68.072559],[-98.412109,67.807178],[-98.920459,67.725781],[-102.320361,67.735645],[-103.474121,68.115039],[-104.486816,68.063184],[-106.164453,68.919873],[-108.313477,68.610791],[-108.718115,68.297461],[-107.73418,68.17373],[-105.750195,68.592285],[-107.958398,67.818604],[-107.259473,66.398535],[-108.496045,67.092285],[-107.988721,67.256396],[-110.073926,67.99292],[-112.503027,67.681934],[-115.133203,67.819189],[-115.127051,68.132031],[-113.964404,68.399072],[-115.442285,68.940918],[-117.226953,68.913428],[-122.070068,69.816162],[-123.025781,69.81001],[-123.528418,69.389355],[-124.338086,69.364844],[-124.555029,70.151221],[-125.524951,69.351563],[-127.991016,70.573828],[-127.683789,70.260352],[-128.853027,69.751025],[-128.898926,69.966162],[-130.117627,69.720068],[-130.970654,69.209082],[-131.063428,69.450684],[-131.788379,69.431982],[-133.196826,68.739844],[-132.81748,69.205762],[-129.648291,69.997754],[-129.675635,70.192969],[-134.174316,69.252832],[-134.408936,69.681787],[-135.691455,69.311182],[-135.939014,68.97417],[-135.258838,68.684326],[-141.002148,69.650781],[-141.002148,64.975537],[-141.002148,60.300244],[-139.079248,60.343701],[-139.185156,60.083594],[-137.438574,58.903125],[-135.475928,59.793262],[-133.401123,58.410889],[-131.824268,56.58999],[-130.097852,56.109277],[-130.025098,55.888232]]],[[[-109.815967,78.650391],[-110.877588,78.735059],[-113.223047,78.2979],[-109.484473,78.316406],[-109.815967,78.650391]]],[[[-110.458057,78.103223],[-113.215186,77.903516],[-112.372656,77.364111],[-110.198486,77.524512],[-110.865625,77.834131],[-109.622266,78.074756],[-110.458057,78.103223]]],[[[-115.55127,77.363281],[-116.511328,77.547607],[-116.843555,77.339551],[-119.090186,77.305078],[-122.519385,76.353174],[-122.533057,75.950928],[-120.848389,76.182666],[-119.912891,75.858838],[-117.880811,76.805078],[-117.233594,76.281543],[-115.55127,77.363281]]],[[[-108.292383,76.057129],[-109.098242,76.811865],[-110.314453,76.369385],[-108.947168,75.541797],[-111.052686,75.548535],[-112.697607,76.201709],[-114.998486,76.497461],[-115.822168,76.27002],[-114.778613,76.172607],[-116.209863,76.194434],[-116.664551,75.957568],[-114.991504,75.896338],[-117.163623,75.644873],[-115.141846,75.678516],[-117.565234,75.23335],[-115.728857,74.968115],[-114.451758,75.087891],[-114.016504,75.434277],[-113.711768,75.068604],[-111.093457,75.256299],[-114.312695,74.715088],[-112.519336,74.416846],[-108.831299,75.064893],[-107.153418,74.927148],[-106.092627,75.089453],[-105.632666,75.945361],[-106.677002,76.02373],[-106.913525,75.679639],[-108.292383,76.057129]]],[[[-114.521533,72.59292],[-114.051709,73.070996],[-114.638232,73.372656],[-118.133105,72.632812],[-118.987695,71.764258],[-117.742334,71.659326],[-117.935645,71.39209],[-115.303418,71.493701],[-118.269092,71.034717],[-117.587061,70.629541],[-113.757275,70.690723],[-111.632568,70.308838],[-117.19541,70.054053],[-116.513477,69.424609],[-113.694141,69.19502],[-113.127734,68.494141],[-109.472119,68.676709],[-107.439893,69.002148],[-106.659082,69.4396],[-104.571436,68.872119],[-101.857129,69.023975],[-102.045947,69.464844],[-103.120215,69.20459],[-103.464893,69.644482],[-102.621094,69.551514],[-102.182129,69.845947],[-100.982373,69.679883],[-101.042676,70.110791],[-103.58457,70.630859],[-104.514795,71.064258],[-105.415137,72.78833],[-106.482129,73.196191],[-108.029053,73.34873],[-108.237402,73.149902],[-107.306006,71.894678],[-107.812842,71.626172],[-110.008447,72.983643],[-110.66084,73.008203],[-110.205127,72.661279],[-111.675098,72.300146],[-111.269727,72.713721],[-112.753613,72.986035],[-114.521533,72.59292]]],[[[-119.736328,74.112646],[-121.50415,74.545117],[-124.69624,74.348193],[-123.797266,73.768164],[-125.845312,71.978662],[-124.007764,71.677441],[-123.095654,71.093799],[-120.619336,71.505762],[-120.179883,72.212646],[-115.446875,73.438867],[-117.514844,74.231738],[-119.736328,74.112646]]],[[[-69.488867,83.016797],[-72.81167,83.081201],[-72.658691,82.721631],[-74.41416,83.013135],[-77.124902,83.008545],[-76.009375,82.535156],[-77.618066,82.89585],[-80.154932,82.911133],[-78.748779,82.679395],[-81.010156,82.779053],[-82.447559,82.39502],[-79.465625,81.851123],[-84.896826,82.449414],[-86.615625,82.218555],[-85.044824,81.982812],[-88.063184,82.096484],[-91.647559,81.683838],[-89.82168,81.634863],[-90.416309,81.405371],[-87.597021,81.52583],[-89.673682,81.328613],[-89.623047,81.032471],[-84.941211,81.28623],[-89.166895,80.941309],[-88.003662,80.675391],[-83.288818,81.147949],[-86.250342,80.565771],[-81.007031,80.654883],[-76.885107,81.430273],[-78.716211,80.95166],[-76.862988,80.864795],[-82.987012,80.322607],[-80.475928,79.60625],[-83.723633,80.228955],[-86.498535,80.258252],[-86.420752,79.845215],[-83.575879,79.053662],[-84.412012,78.996582],[-81.750098,78.975781],[-83.271436,78.770312],[-86.80791,78.774365],[-87.551758,78.176611],[-85.920068,78.342871],[-85.585938,78.10957],[-84.783203,78.527588],[-84.222705,78.176025],[-85.547559,77.927686],[-85.289355,77.559033],[-83.779395,77.532617],[-82.710352,77.849512],[-83.721289,77.414209],[-84.738672,77.361035],[-86.755078,77.863721],[-88.016992,77.784717],[-86.812256,77.184912],[-89.499756,76.826807],[-89.369629,76.474463],[-88.545801,76.420898],[-88.49585,76.772852],[-88.395996,76.405273],[-87.497559,76.386279],[-87.489795,76.58584],[-86.680225,76.376611],[-86.453711,76.584863],[-85.14126,76.30459],[-84.275342,76.356543],[-84.223779,76.675342],[-83.885693,76.453125],[-82.233154,76.46582],[-82.529834,76.723291],[-80.799707,76.173584],[-78.284326,76.57124],[-78.288867,76.977979],[-82.056787,77.296533],[-81.659082,77.525439],[-78.708496,77.342139],[-78.012598,77.946045],[-75.865967,78.009814],[-75.193457,78.327734],[-76.416113,78.511523],[-74.486328,78.750098],[-78.581641,79.075],[-74.640918,79.035547],[-76.898828,79.512305],[-73.361523,79.504004],[-74.394482,79.874072],[-71.387842,79.761768],[-70.568408,80.093701],[-72.055957,80.123242],[-70.264893,80.233594],[-70.712598,80.5396],[-69.550684,80.383252],[-64.780078,81.492871],[-68.688525,81.293311],[-61.615381,82.184424],[-63.641016,82.812598],[-68.469336,82.653369],[-66.422559,82.926855],[-69.488867,83.016797]]],[[[-95.484375,77.791992],[-95.987061,77.484131],[-93.543945,77.46665],[-93.300977,77.739795],[-95.484375,77.791992]]],[[[-93.542578,75.02793],[-94.878174,75.630029],[-96.599609,75.031787],[-94.534521,74.636719],[-93.573096,74.668848],[-93.542578,75.02793]]],[[[-100.001904,73.945898],[-100.962988,73.791406],[-100.52168,73.449316],[-101.523193,73.486377],[-99.825146,73.213867],[-100.536377,73.197852],[-100.128125,72.906689],[-101.273193,72.72168],[-102.204004,73.077295],[-102.70874,72.764502],[-98.662891,71.3021],[-98.322705,71.852344],[-97.582275,71.629688],[-96.613428,71.833838],[-96.445605,72.552441],[-97.636328,73.027637],[-98.421777,72.941016],[-97.170508,73.824854],[-99.157959,73.731592],[-100.001904,73.945898]]],[[[-84.919629,65.261084],[-85.554688,65.918652],[-86.2521,64.136865],[-87.151904,63.585645],[-85.768945,63.700342],[-85.392627,63.119678],[-83.303955,64.143799],[-81.046387,63.461572],[-80.302051,63.762207],[-80.828955,64.089941],[-81.887109,64.016406],[-82.05,64.644287],[-84.501123,65.458447],[-84.919629,65.261084]]],[[[-97.700928,76.466504],[-98.71084,76.693848],[-98.890332,76.465576],[-100.829736,76.523877],[-99.541064,76.146289],[-99.865479,75.924219],[-101.415186,76.424902],[-102.104688,76.331201],[-100.972803,75.798438],[-102.144727,75.875049],[-102.587402,75.513672],[-99.19458,75.698389],[-100.711914,75.406348],[-100.234375,75.007715],[-97.674316,75.127295],[-97.700928,76.466504]]],[[[-103.426025,79.315625],[-105.514551,79.24248],[-104.895508,78.808154],[-104.151953,78.989893],[-103.371582,78.736328],[-104.763574,78.35166],[-102.731348,78.371045],[-100.274658,77.832715],[-99.166406,77.856934],[-99.609424,78.583057],[-101.703662,79.078906],[-102.576172,78.879395],[-103.426025,79.315625]]],[[[-91.885547,81.132861],[-94.220117,81.330762],[-93.286719,81.100293],[-95.514746,80.838135],[-93.92793,80.55918],[-95.926953,80.720654],[-96.394092,80.315039],[-94.262598,80.194873],[-96.773242,80.135791],[-96.589062,79.91665],[-95.739355,79.660156],[-94.401855,79.736328],[-95.662891,79.527344],[-95.103174,79.289893],[-91.299902,79.372705],[-94.1146,78.928906],[-91.866895,78.542676],[-92.35127,78.312891],[-89.525684,78.159619],[-90.037109,78.606836],[-88.822412,78.185889],[-88.040186,78.995312],[-87.617383,78.676318],[-85.042139,79.28457],[-85.647852,79.611426],[-87.295166,79.580176],[-87.675,80.372119],[-88.857324,80.166211],[-91.885547,81.132861]]],[[[-94.294971,76.912451],[-95.849512,77.066211],[-96.880713,76.73833],[-95.273877,76.264404],[-93.091748,76.354004],[-91.549121,74.655566],[-90.880225,74.817773],[-89.558691,74.554736],[-88.534961,74.831738],[-88.423047,74.494141],[-84.425537,74.508105],[-83.531885,74.585693],[-83.52207,74.901465],[-82.735791,74.530273],[-80.262744,74.584473],[-80.347754,74.902979],[-79.401416,74.917627],[-80.381982,75.03418],[-79.509082,75.259814],[-80.321973,75.629102],[-83.931982,75.818945],[-85.951465,75.39502],[-88.644971,75.658447],[-88.916699,75.453955],[-91.407324,76.220068],[-89.284521,76.301611],[-91.415088,76.455859],[-90.542627,76.495752],[-91.305029,76.680762],[-93.53457,76.447705],[-93.230029,76.770264],[-94.294971,76.912451]]],[[[-96.204492,78.531299],[-98.332617,78.773535],[-96.989648,77.806006],[-94.934277,78.075635],[-94.915381,78.390527],[-96.204492,78.531299]]],[[[-93.17085,74.160986],[-94.973535,74.041406],[-94.697607,73.663574],[-95.63291,73.695459],[-95.007861,72.012793],[-94.037549,72.02876],[-93.555176,72.421143],[-94.211328,72.756934],[-92.11792,72.753809],[-90.381396,73.824756],[-93.17085,74.160986]]],[[[-97.439453,69.642676],[-98.200488,69.796973],[-98.041357,69.456641],[-98.545996,69.5729],[-99.494678,68.95957],[-96.401562,68.470703],[-95.267773,68.826074],[-97.439453,69.642676]]],[[[-61.105176,45.944727],[-60.494531,46.270264],[-60.408203,47.003516],[-61.408643,46.170361],[-61.449805,45.716211],[-60.672949,45.59082],[-59.842188,45.941553],[-60.297949,46.31123],[-60.737891,45.751416],[-61.059033,45.703369],[-60.865234,45.983496],[-61.105176,45.944727]]],[[[-67.124854,45.169434],[-66.439844,45.095898],[-66.026562,45.417578],[-65.884473,45.2229],[-64.778516,45.638428],[-64.632715,45.946631],[-64.314648,45.835693],[-64.873145,45.35459],[-63.368018,45.364795],[-64.135498,45.023047],[-64.448145,45.337451],[-66.090625,44.504932],[-65.868018,44.568799],[-66.125732,43.813818],[-65.481689,43.518066],[-64.286084,44.550342],[-63.609766,44.47998],[-63.604004,44.683203],[-61.031543,45.291748],[-61.955518,45.868164],[-62.750098,45.648242],[-64.541504,46.240332],[-64.831396,47.060791],[-65.318896,47.101221],[-64.703223,47.724854],[-65.607227,47.67002],[-66.704395,48.022461],[-65.926709,48.188867],[-65.259424,48.02124],[-64.348828,48.423193],[-64.513721,48.841113],[-64.216211,48.873633],[-64.836328,49.191748],[-66.178174,49.213135],[-68.238184,48.626416],[-70.519482,47.03252],[-71.261182,46.75625],[-72.109277,46.551221],[-73.15957,46.010059],[-73.558105,45.425098],[-74.708887,45.003857],[-71.517529,45.007568],[-71.327295,45.290088],[-70.865039,45.270703],[-69.242871,47.462988],[-68.937207,47.21123],[-68.235498,47.345947],[-67.806787,47.082812],[-67.802246,45.727539],[-67.124854,45.169434]]],[[[-55.45874,51.536523],[-56.025586,51.568359],[-57.035937,51.01084],[-57.791309,49.48999],[-58.213379,49.38667],[-57.990527,48.987939],[-58.403662,49.084326],[-58.716455,48.598047],[-58.841797,48.746436],[-59.167676,48.558496],[-58.330225,48.522119],[-59.320654,47.736914],[-59.116943,47.570703],[-58.336865,47.730859],[-56.774121,47.56499],[-55.85791,47.819189],[-56.127246,47.502832],[-55.576123,47.465234],[-54.784619,47.664746],[-55.919238,47.016895],[-55.788525,46.867236],[-54.488135,47.403857],[-54.191846,47.859814],[-53.849512,47.440332],[-54.17373,46.880371],[-53.597363,47.145996],[-53.589795,46.638867],[-53.114844,46.655811],[-52.653662,47.549414],[-52.782422,47.769434],[-53.169824,47.512109],[-52.866016,48.112988],[-53.672363,47.648242],[-53.86958,48.019678],[-53.027588,48.634717],[-54.114453,48.393604],[-53.706348,48.655518],[-54.161279,48.787695],[-53.619434,49.321631],[-54.448242,49.329443],[-54.502197,49.527344],[-55.353174,49.079443],[-55.229541,49.508154],[-56.087305,49.451953],[-55.869824,49.670166],[-56.140186,49.619141],[-55.50293,49.983154],[-56.161279,49.940137],[-56.179395,50.11499],[-56.822168,49.613477],[-55.8,51.033301],[-56.031104,51.328369],[-55.45874,51.536523]]],[[[-86.589355,71.010791],[-85.023389,71.353223],[-86.218457,71.899121],[-86.656299,72.724023],[-84.946777,73.721631],[-85.950781,73.850146],[-88.705176,73.403271],[-89.861523,72.411914],[-89.805371,71.462305],[-87.140088,71.011621],[-89.455908,71.061719],[-88.782715,70.494482],[-87.838135,70.246582],[-86.396875,70.465332],[-85.780029,70.03667],[-81.564697,69.942725],[-80.921729,69.730908],[-81.651953,70.094629],[-78.889648,69.97749],[-79.066406,70.603564],[-75.647754,69.212549],[-76.557227,69.009473],[-76.585059,68.69873],[-74.716699,69.045508],[-74.892969,68.808154],[-74.270117,68.541211],[-73.822119,68.685986],[-72.22002,67.254297],[-74.416406,66.16709],[-73.550781,65.485254],[-75.798682,65.29751],[-75.4521,64.841602],[-75.82832,65.227051],[-77.326709,65.453125],[-78.095605,64.939258],[-78.045215,64.499268],[-76.856152,64.237646],[-74.694727,64.496582],[-74.681396,64.830664],[-74.064795,64.424658],[-73.271289,64.58252],[-72.498438,63.823486],[-71.380859,63.580322],[-71.992236,63.416162],[-71.347266,63.066113],[-69.604736,62.767725],[-68.535889,62.255615],[-66.123877,61.893066],[-65.980176,62.208887],[-68.911084,63.703223],[-67.722559,63.422754],[-67.893262,63.73374],[-66.697461,63.069531],[-66.65498,63.264746],[-65.108496,62.626465],[-65.162793,62.932617],[-64.672363,62.921973],[-65.191846,63.764258],[-64.664648,63.245361],[-64.410937,63.706348],[-65.580322,64.293848],[-65.074609,64.43667],[-65.529346,64.504785],[-65.274805,64.631543],[-66.635498,65.000342],[-66.697412,64.815186],[-67.117969,65.440381],[-67.936768,65.564893],[-68.748926,66.200049],[-67.350439,65.929736],[-67.883398,66.467432],[-67.225391,66.310254],[-66.986328,66.62749],[-66.063721,66.132715],[-65.656348,66.204736],[-65.825732,65.996924],[-64.445361,66.317139],[-65.401611,65.764014],[-64.555078,65.116602],[-64.269678,65.400781],[-63.606592,64.928076],[-63.45874,65.853027],[-62.658887,65.639941],[-62.624121,66.01626],[-61.991602,66.035303],[-62.553125,66.406836],[-61.570801,66.3729],[-62.12334,66.643066],[-61.353418,66.689209],[-62.123584,67.046729],[-63.701562,66.822363],[-63.040137,67.23501],[-64.699951,67.350537],[-63.850195,67.566064],[-65.021094,67.787549],[-64.922314,68.031641],[-65.40127,67.674854],[-65.942383,68.070947],[-66.443945,67.833838],[-66.212402,68.28042],[-66.923096,68.065723],[-66.742725,68.457764],[-69.319092,68.856982],[-67.883203,68.783984],[-67.832617,69.065967],[-69.040625,69.097998],[-68.406299,69.232227],[-66.707422,69.168213],[-67.236963,69.460107],[-69.250781,69.511914],[-67.221631,69.730713],[-67.363672,70.034424],[-68.059082,70.317236],[-68.744043,69.941406],[-68.778223,70.203564],[-70.057715,70.042627],[-68.363525,70.48125],[-69.949805,70.84502],[-71.429443,70.127783],[-71.275879,70.500293],[-71.890186,70.431543],[-70.672656,71.052197],[-72.632715,70.830762],[-71.229395,71.33877],[-72.901953,71.677783],[-73.180615,71.282861],[-73.712842,71.587598],[-74.197266,71.40415],[-73.814062,71.771436],[-74.996191,71.218115],[-74.700781,71.675586],[-75.204785,71.709131],[-74.209326,71.978662],[-74.903174,72.100488],[-75.922803,71.717236],[-75.052686,72.226367],[-75.704297,72.571533],[-77.753223,72.724756],[-78.484277,72.470605],[-77.516504,72.177783],[-78.699268,72.351416],[-78.585107,71.880615],[-79.831299,72.446289],[-80.925146,71.907666],[-80.611475,72.45083],[-81.229346,72.311719],[-80.277246,72.770166],[-81.946143,73.729834],[-85.454736,73.105469],[-84.256641,72.796729],[-85.262109,72.954004],[-85.649902,72.722168],[-84.28374,72.044482],[-85.321875,72.233154],[-85.911621,71.986523],[-84.699414,71.631445],[-84.82373,71.028613],[-86.589355,71.010791]]],[[[-61.801123,49.093896],[-62.858545,49.705469],[-64.485205,49.886963],[-63.041504,49.224951],[-61.801123,49.093896]]],[[[-63.811279,46.468701],[-63.993555,47.061572],[-64.388037,46.640869],[-63.641016,46.230469],[-62.978467,46.316357],[-63.02207,46.066602],[-62.531348,45.977295],[-62.02373,46.421582],[-63.811279,46.468701]]],[[[-82.000488,62.954199],[-83.376416,62.904932],[-83.910498,62.45415],[-83.698877,62.160254],[-82.568262,62.403223],[-82.000488,62.954199]]],[[[-79.545312,62.411719],[-80.260059,62.109033],[-79.816113,61.594629],[-79.323926,62.026074],[-79.545312,62.411719]]],[[[-75.675879,68.32251],[-76.595801,68.278955],[-77.125879,67.94707],[-76.944189,67.250293],[-75.201953,67.45918],[-75.078125,68.173145],[-75.675879,68.32251]]],[[[-79.537305,73.654492],[-80.848877,73.72124],[-79.820703,72.826318],[-76.183398,72.843066],[-77.206543,73.499561],[-79.537305,73.654492]]],[[[-80.731689,52.747266],[-81.135596,53.205811],[-82.039258,53.049902],[-80.731689,52.747266]]],[[[-78.935596,56.266064],[-79.272412,56.600439],[-79.536328,56.180078],[-79.458887,56.539746],[-79.9875,55.892139],[-79.544727,56.128369],[-79.764746,55.806787],[-79.495117,55.874756],[-79.182129,56.212158],[-79.175488,55.885059],[-78.935596,56.266064]]],[[[-89.833252,77.267627],[-91.019043,77.643896],[-90.993213,77.329492],[-89.833252,77.267627]]],[[[-98.791602,79.981104],[-100.053271,80.093359],[-98.945215,79.724072],[-98.791602,79.981104]]],[[[-105.288916,72.919922],[-104.5875,73.578076],[-106.613965,73.695605],[-106.921533,73.479834],[-105.288916,72.919922]]],[[[-102.227344,76.014893],[-102.728027,76.307031],[-104.350635,76.182324],[-103.314746,75.764209],[-102.227344,76.014893]]],[[[-104.022852,76.583105],[-104.35752,76.334619],[-103.311377,76.347559],[-104.022852,76.583105]]],[[[-118.328125,75.579688],[-117.633691,76.115088],[-119.39458,75.617334],[-118.328125,75.579688]]],[[[-113.832471,77.754639],[-114.330371,78.077539],[-114.98042,77.91543],[-113.832471,77.754639]]],[[[-130.236279,53.958545],[-130.447998,54.089014],[-130.703174,53.892236],[-130.236279,53.958545]]],[[[-128.552441,52.939746],[-129.033252,53.279932],[-129.175928,52.964941],[-128.746338,52.763379],[-128.678955,52.289648],[-128.552441,52.939746]]],[[[-73.566504,45.469092],[-73.476074,45.704736],[-73.960547,45.441406],[-73.566504,45.469092]]],[[[-68.233789,60.240918],[-67.818848,60.449512],[-68.087598,60.587842],[-68.233789,60.240918]]],[[[-64.832617,61.366064],[-64.789648,61.662207],[-65.432129,61.649512],[-64.832617,61.366064]]],[[[-79.063086,75.925879],[-79.009326,76.145898],[-79.63877,75.84292],[-79.063086,75.925879]]],[[[-79.384277,51.951953],[-79.271289,52.086816],[-79.64375,52.010059],[-79.384277,51.951953]]],[[[-73.621729,67.783838],[-73.49375,68.000635],[-74.706543,68.06709],[-74.573389,67.828662],[-73.621729,67.783838]]],[[[-77.876709,63.470557],[-78.536768,63.42373],[-77.942432,63.114404],[-77.532715,63.233643],[-77.876709,63.470557]]],[[[-98.270361,73.868506],[-97.698242,74.108691],[-99.416992,73.89541],[-98.270361,73.868506]]],[[[-79.430664,69.787793],[-80.794775,69.689258],[-79.977832,69.509668],[-79.430664,69.787793]]],[[[-76.995361,69.14375],[-76.668848,69.366162],[-77.187549,69.440088],[-76.995361,69.14375]]],[[[-83.725977,65.796729],[-84.407178,66.131006],[-84.118262,65.771777],[-83.332422,65.631055],[-83.725977,65.796729]]],[[[-101.693555,77.696582],[-101.193213,77.829785],[-102.447705,77.880615],[-101.693555,77.696582]]],[[[-96.078564,75.510107],[-96.367822,75.654639],[-96.915137,75.379688],[-96.078564,75.510107]]],[[[-104.119922,75.036328],[-104.346191,75.429932],[-104.887402,75.147754],[-104.119922,75.036328]]]]}},{type:"Feature",properties:{name:"喀麦隆",full_name:"喀麦隆共和国",iso_a2:"CM",iso_a3:"CMR",iso_n3:"120"},geometry:{type:"Polygon",coordinates:[[[8.555859,4.755225],[8.574414,4.526221],[8.918262,4.55376],[9.000098,4.091602],[9.688867,4.056396],[9.556152,3.798047],[9.948438,3.079053],[9.800781,2.304443],[11.328711,2.167432],[13.293555,2.161572],[14.578906,2.199121],[16.059375,1.676221],[16.183398,2.270068],[16.063477,2.908594],[15.128711,3.826904],[15.063574,4.284863],[14.73125,4.602393],[14.431152,6.038721],[15.480078,7.523779],[15.549805,7.787891],[15.116211,8.557324],[13.977246,9.691553],[14.243262,9.979736],[15.654883,10.007812],[15.132227,10.648486],[14.84707,12.5021],[14.461719,13.021777],[14.063965,13.078516],[14.197461,12.383789],[14.619727,12.150977],[14.575391,11.532422],[13.699902,10.873145],[12.782227,8.817871],[12.233398,8.282324],[11.861426,7.116406],[11.237305,6.450537],[10.60625,7.063086],[9.779883,6.760156],[8.997168,5.917725],[8.555859,4.755225]]]}},{type:"Feature",properties:{name:"柬埔寨",full_name:"柬埔寨王国",iso_a2:"KH",iso_a3:"KHM",iso_n3:"116"},geometry:{type:"Polygon",coordinates:[[[107.519434,14.705078],[106.938086,14.327344],[106.501465,14.578223],[105.978906,14.343018],[106.066797,13.921191],[105.183301,14.34624],[103.199414,14.332617],[102.336328,13.560303],[102.933887,11.706689],[103.152832,10.913721],[103.532422,11.14668],[103.721875,10.890137],[103.587109,10.552197],[104.426367,10.41123],[104.850586,10.534473],[105.045703,10.911377],[105.755078,10.98999],[106.163965,10.794922],[105.851465,11.63501],[106.399219,11.687012],[106.413867,11.948438],[107.506445,12.364551],[107.605469,13.437793],[107.331445,14.126611],[107.519434,14.705078]]]}},{type:"Feature",properties:{name:"缅甸",full_name:"缅甸联邦共和国",iso_a2:"MM",iso_a3:"MMR",iso_n3:"104"},geometry:{type:"MultiPolygon",coordinates:[[[[100.122461,20.31665],[100.249316,20.730273],[100.622949,20.85957],[100.703125,21.251367],[101.138867,21.56748],[101.079785,21.755859],[100.147656,21.480518],[99.917676,22.028027],[99.192969,22.125977],[99.507129,22.959131],[98.86377,23.19126],[98.676758,23.905078],[98.835059,24.121191],[97.564551,23.911035],[97.583301,24.774805],[97.819531,25.251855],[98.65625,25.863574],[98.738477,26.785742],[98.651172,27.572461],[98.298828,27.550098],[98.061621,28.185889],[97.599219,28.517041],[97.322461,28.217969],[97.335156,27.937744],[96.876855,27.586719],[97.102051,27.11543],[96.731641,27.331494],[96.19082,27.261279],[95.128711,26.597266],[95.132422,26.04126],[94.579883,25.319824],[94.707617,25.04873],[94.127637,23.876465],[93.32627,24.064209],[93.151172,22.230615],[92.574902,21.978076],[92.631641,21.306201],[92.17959,21.293115],[92.324121,20.791846],[92.722852,20.295605],[92.735645,20.562695],[92.82832,20.177588],[93.066797,20.377637],[93.129492,19.858008],[93.25,20.070117],[93.707031,19.912158],[93.998145,19.440869],[93.824902,19.238477],[93.493066,19.369482],[93.929199,18.899658],[94.044922,19.287402],[94.588965,17.569336],[94.223828,16.016455],[94.70332,16.511914],[94.661523,15.904395],[94.893164,16.182812],[94.942578,15.818262],[95.176953,15.825684],[95.346777,16.097607],[95.389551,15.722754],[96.324316,16.444434],[96.189063,16.768311],[96.431152,16.504932],[96.76543,16.710352],[96.851465,17.401025],[97.375879,16.522949],[97.725977,16.568555],[97.584277,16.01958],[97.812305,14.858936],[98.110645,13.712891],[98.200391,13.980176],[98.575977,13.161914],[98.636328,11.738379],[98.875977,11.719727],[98.464941,10.67583],[98.562598,10.034961],[98.702539,10.190381],[98.757227,10.660937],[99.614746,11.781201],[99.123926,13.030762],[99.136816,13.716699],[98.202148,14.975928],[98.888281,16.351904],[98.660742,16.33042],[97.373926,18.517969],[97.745898,18.588184],[98.015039,19.749512],[98.916699,19.7729],[99.074219,20.099365],[99.485938,20.149854],[99.458887,20.363037],[100.122461,20.31665]]],[[[98.553809,11.744873],[98.376465,11.791504],[98.434766,11.56709],[98.553809,11.744873]]],[[[93.69082,18.684277],[93.744727,18.865527],[93.4875,18.867529],[93.69082,18.684277]]]]}},{type:"Feature",properties:{name:"布隆迪",full_name:"布隆迪共和国",iso_a2:"BI",iso_a3:"BDI",iso_n3:"108"},geometry:{type:"Polygon",coordinates:[[[30.553613,-2.400098],[29.930176,-2.339551],[29.698047,-2.794727],[29.014355,-2.720215],[29.403223,-4.449316],[29.947266,-4.307324],[30.790234,-3.274609],[30.780273,-2.984863],[30.433496,-2.874512],[30.553613,-2.400098]]]}},{type:"Feature",properties:{name:"布基纳法索",full_name:"布基纳法索",iso_a2:"BF",iso_a3:"BFA",iso_n3:"854"},geometry:{type:"Polygon",coordinates:[[[.900488,10.993262],[1.426758,11.447119],[1.980371,11.418408],[2.38916,11.89707],[2.072949,12.309375],[2.10459,12.70127],[1.564941,12.6354],[.987305,13.041895],[.988477,13.364844],[1.201172,13.35752],[.429199,13.972119],[.21748,14.911475],[-.760449,15.047754],[-1.973047,14.456543],[-2.113232,14.168457],[-2.586719,14.227588],[-2.95083,13.648438],[-3.248633,13.65835],[-3.301758,13.280762],[-4.151025,13.306201],[-4.428711,12.337598],[-5.288135,11.82793],[-5.523535,10.426025],[-4.62583,9.713574],[-3.223535,9.895459],[-2.69585,9.481348],[-2.829932,10.998389],[-.627148,10.927393],[-.068604,11.115625],[.900488,10.993262]]]}},{type:"Feature",properties:{name:"保加利亚",full_name:"保加利亚共和国",iso_a2:"BG",iso_a3:"BGR",iso_n3:"100"},geometry:{type:"Polygon",coordinates:[[[28.014453,41.969043],[27.484766,42.468066],[28.585352,43.742236],[27.086914,44.167383],[25.49707,43.670801],[22.919043,43.834473],[23.028516,44.077979],[22.705078,44.237793],[22.369629,43.781299],[22.967969,43.142041],[22.466797,42.84248],[22.344043,42.313965],[23.003613,41.739844],[22.916016,41.336279],[24.487891,41.555225],[25.251172,41.243555],[25.92334,41.311914],[26.320898,41.716553],[27.011719,42.058643],[28.014453,41.969043]]]}},{type:"Feature",properties:{name:"文莱",full_name:"文莱达鲁萨兰国",iso_a2:"BN",iso_a3:"BRN",iso_n3:"096"},geometry:{type:"MultiPolygon",coordinates:[[[[115.140039,4.899756],[115.026758,4.899707],[115.290625,4.352588],[115.140039,4.899756]]],[[[115.026758,4.899707],[114.063867,4.592676],[114.654102,4.037646],[114.74668,4.718066],[115.026758,4.899707]]]]}},{type:"Feature",properties:{name:"巴西",full_name:"巴西联邦共和国",iso_a2:"BR",iso_a3:"BRA",iso_n3:"076"},geometry:{type:"MultiPolygon",coordinates:[[[[-66.876025,1.223047],[-67.082275,1.1854],[-67.400439,2.116699],[-67.93623,1.748486],[-68.193799,1.987012],[-68.176562,1.719824],[-69.848584,1.70874],[-69.852148,1.059521],[-69.311816,1.050488],[-69.15332,.658789],[-70.053906,.578613],[-70.070508,-.138867],[-69.633984,-.509277],[-69.400244,-1.194922],[-69.965918,-4.235938],[-70.799512,-4.17334],[-72.887061,-5.122754],[-73.235547,-6.098438],[-73.137354,-6.46582],[-73.758105,-6.905762],[-73.72041,-7.309277],[-74.002051,-7.556055],[-72.974023,-8.993164],[-73.209424,-9.411426],[-72.379053,-9.510156],[-72.142969,-10.005176],[-71.237939,-9.966016],[-70.541113,-9.4375],[-70.642334,-11.010254],[-69.578613,-10.951758],[-68.622656,-11.10918],[-66.575342,-9.899902],[-65.396143,-9.712402],[-65.389893,-11.246289],[-64.992529,-11.975195],[-64.420508,-12.439746],[-63.06748,-12.669141],[-61.789941,-13.525586],[-61.077002,-13.489746],[-60.506592,-13.789844],[-60.27334,-15.08877],[-60.583203,-15.09834],[-60.242334,-15.47959],[-60.175586,-16.269336],[-58.345605,-16.284375],[-58.395996,-17.234277],[-57.832471,-17.512109],[-57.495654,-18.214648],[-58.131494,-19.744531],[-57.860742,-19.97959],[-58.159766,-20.164648],[-57.830225,-20.997949],[-57.955908,-22.10918],[-56.937256,-22.271289],[-56.447803,-22.076172],[-55.84917,-22.307617],[-55.415918,-23.951367],[-54.625488,-23.8125],[-54.241797,-24.047266],[-54.615869,-25.576074],[-53.891162,-25.668848],[-53.668555,-26.288184],[-53.838184,-27.121094],[-55.725488,-28.204102],[-57.608887,-30.187793],[-56.832715,-30.107227],[-56.044824,-30.777637],[-56.004687,-31.079199],[-55.603027,-30.850781],[-53.761719,-32.056836],[-53.125586,-32.736719],[-53.531348,-33.170898],[-53.370605,-33.742188],[-52.652246,-33.137793],[-51.972461,-31.383789],[-51.283057,-30.751562],[-51.298047,-30.034863],[-51.024951,-30.368652],[-50.563525,-30.253613],[-50.581934,-30.438867],[-51.272168,-31.476953],[-52.063232,-31.830371],[-52.039209,-32.114844],[-50.921387,-31.258398],[-49.745996,-29.363184],[-48.799658,-28.575293],[-48.55415,-27.195996],[-48.748291,-26.268652],[-48.401172,-25.597363],[-48.731738,-25.36875],[-48.202734,-25.416504],[-46.867285,-24.236328],[-45.97207,-23.795508],[-45.464307,-23.802539],[-44.569678,-23.274023],[-44.637256,-23.055469],[-43.22417,-22.991211],[-43.154297,-22.725195],[-42.958301,-22.96709],[-42.042383,-22.94707],[-41.705518,-22.309668],[-41.000293,-21.999023],[-40.954541,-21.237891],[-39.783301,-19.571777],[-39.650781,-18.252344],[-39.154004,-17.703906],[-38.880615,-15.864258],[-39.089355,-13.588184],[-38.851758,-12.790137],[-38.690967,-12.623926],[-38.498926,-12.956641],[-38.239746,-12.844238],[-37.359229,-11.252539],[-37.356006,-11.403906],[-35.340869,-9.230664],[-34.834668,-7.971484],[-34.805469,-7.288379],[-35.481689,-5.166016],[-37.174658,-4.912402],[-38.475781,-3.71748],[-39.964697,-2.861523],[-41.479932,-2.916504],[-43.380078,-2.376074],[-44.192676,-2.80957],[-44.228613,-2.471289],[-44.723047,-3.204785],[-44.381836,-2.365527],[-44.435449,-2.168066],[-44.756348,-2.265527],[-44.537793,-2.052734],[-44.65127,-1.745801],[-45.076367,-1.466406],[-45.32915,-1.717285],[-45.458594,-1.35625],[-47.398096,-.62666],[-48.115088,-.7375],[-48.449805,-1.145508],[-48.349805,-1.482129],[-48.71001,-1.487695],[-49.211035,-1.916504],[-49.636523,-2.656934],[-49.313672,-1.731738],[-50.403223,-2.015527],[-50.690039,-1.761719],[-50.894922,-.937598],[-51.947559,-1.586719],[-52.66416,-1.551758],[-51.980811,-1.367969],[-51.28291,-.085205],[-49.898877,1.162988],[-49.957129,1.659863],[-50.714404,2.134033],[-51.219922,4.093604],[-51.54707,4.310889],[-51.652539,4.061279],[-52.903467,2.211523],[-53.767773,2.354834],[-54.130078,2.121045],[-54.61626,2.326758],[-54.978662,2.597656],[-55.957471,2.520459],[-56.137695,2.259033],[-55.929639,1.8875],[-56.482812,1.942139],[-57.31748,1.963477],[-58.821777,1.201221],[-59.231201,1.376025],[-59.666602,1.746289],[-59.994336,2.68999],[-59.854395,3.5875],[-59.551123,3.933545],[-59.703271,4.381104],[-60.148633,4.533252],[-59.990674,5.082861],[-60.142041,5.238818],[-60.742139,5.202051],[-60.603857,4.949365],[-61.002832,4.535254],[-62.712109,4.01792],[-62.856982,3.593457],[-63.338672,3.943896],[-64.021484,3.929102],[-64.788672,4.276025],[-64.221094,3.587402],[-64.046582,2.502393],[-63.389258,2.411914],[-63.43252,2.155566],[-64.008496,1.931592],[-64.205029,1.529492],[-65.473389,.69126],[-65.681445,.983447],[-66.347119,.767188],[-66.876025,1.223047]]],[[[-49.628662,-.229199],[-50.645508,-.272852],[-50.796094,-.90625],[-50.507617,-1.787988],[-49.805127,-1.790234],[-48.833594,-1.390039],[-48.392676,-.297363],[-49.628662,-.229199]]],[[[-45.260254,-23.88916],[-45.302344,-23.727539],[-45.451416,-23.895605],[-45.260254,-23.88916]]],[[[-49.738232,.268164],[-50.272656,.231738],[-50.339453,.043359],[-49.91709,-.023193],[-49.738232,.268164]]],[[[-49.443896,-.112402],[-49.503467,.083691],[-49.830078,-.093896],[-49.443896,-.112402]]],[[[-50.426123,.139258],[-50.372754,.590869],[-50.623926,.054395],[-50.426123,.139258]]],[[[-50.15293,.393018],[-50.058838,.638037],[-50.281689,.516504],[-50.15293,.393018]]],[[[-51.83252,-1.433789],[-51.276318,-1.021777],[-51.254004,-.541406],[-51.546045,-.649609],[-51.83252,-1.433789]]]]}},{type:"Feature",properties:{name:"博茨瓦纳",full_name:"博茨瓦纳共和国",iso_a2:"BW",iso_a3:"BWA",iso_n3:"072"},geometry:{type:"Polygon",coordinates:[[[25.258789,-17.793555],[24.243945,-18.023438],[23.599707,-18.459961],[23.219336,-17.999707],[20.974121,-18.318848],[20.979492,-21.961914],[19.977344,-22.000195],[19.980469,-24.776758],[20.793164,-25.915625],[20.685059,-26.822461],[21.646289,-26.854199],[22.597656,-26.132715],[23.05752,-25.312305],[24.748145,-25.817383],[25.443652,-25.714453],[25.912109,-24.747461],[26.835059,-24.24082],[27.085547,-23.57793],[28.210156,-22.693652],[29.364844,-22.193945],[29.025586,-21.796875],[28.014063,-21.554199],[27.669434,-21.064258],[27.679297,-20.503027],[27.280762,-20.478711],[27.178223,-20.100977],[26.168066,-19.538281],[25.258789,-17.793555]]]}},{type:"Feature",properties:{name:"波黑",full_name:"波斯尼亚和黑塞哥维那",iso_a2:"BA",iso_a3:"BIH",iso_n3:"070"},geometry:{type:"Polygon",coordinates:[[[19.194336,43.533301],[19.495117,43.642871],[19.24502,43.965039],[19.583789,44.043457],[19.118457,44.359961],[19.348633,44.880908],[19.007129,44.869189],[16.918652,45.276562],[16.293359,45.008838],[15.788086,45.178955],[15.736621,44.76582],[17.585156,42.938379],[17.667578,42.897119],[18.436328,42.559717],[18.460156,42.9979],[19.194336,43.533301]]]}},{type:"Feature",properties:{name:"玻利维亚",full_name:"多民族玻利维亚国",iso_a2:"BO",iso_a3:"BOL",iso_n3:"068"},geometry:{type:"Polygon",coordinates:[[[-69.510938,-17.506055],[-69.093945,-18.050488],[-68.968311,-18.967969],[-68.462891,-19.432813],[-68.760547,-20.416211],[-68.197021,-21.300293],[-67.879443,-22.822949],[-67.194873,-22.82168],[-66.220166,-21.802539],[-65.771045,-22.099609],[-64.605518,-22.228809],[-64.325293,-22.827637],[-63.92168,-22.028613],[-62.843359,-21.997266],[-62.650977,-22.233691],[-62.276318,-20.5625],[-61.756836,-19.645312],[-59.090527,-19.28623],[-58.180176,-19.817871],[-58.159766,-20.164648],[-57.860742,-19.97959],[-58.131494,-19.744531],[-57.495654,-18.214648],[-57.832471,-17.512109],[-58.395996,-17.234277],[-58.345605,-16.284375],[-60.175586,-16.269336],[-60.242334,-15.47959],[-60.583203,-15.09834],[-60.27334,-15.08877],[-60.506592,-13.789844],[-61.077002,-13.489746],[-61.789941,-13.525586],[-63.06748,-12.669141],[-64.420508,-12.439746],[-64.992529,-11.975195],[-65.389893,-11.246289],[-65.396143,-9.712402],[-66.575342,-9.899902],[-68.622656,-11.10918],[-69.578613,-10.951758],[-68.685254,-12.501953],[-68.978613,-12.880078],[-69.074121,-13.682813],[-68.870898,-14.169727],[-69.359473,-14.795312],[-69.172461,-15.236621],[-69.420898,-15.640625],[-69.217578,-16.149121],[-68.842773,-16.337891],[-69.624854,-17.200195],[-69.510938,-17.506055]]]}},{type:"Feature",properties:{name:"不丹",full_name:"不丹王国",iso_a2:"BT",iso_a3:"BTN",iso_n3:"064"},geometry:{type:"Polygon",coordinates:[[[91.631934,27.759961],[91.273047,28.078369],[90.352734,28.080225],[89.981055,28.311182],[88.891406,27.316064],[88.857617,26.961475],[89.609961,26.719434],[91.99834,26.85498],[92.083398,27.290625],[91.594727,27.557666],[91.631934,27.759961]]]}},{type:"Feature",properties:{name:"贝宁",full_name:"贝宁共和国",iso_a2:"BJ",iso_a3:"BEN",iso_n3:"204"},geometry:{type:"Polygon",coordinates:[[[1.622656,6.216797],[2.706445,6.369238],[2.774805,9.048535],[3.044922,9.083838],[3.834473,10.607422],[3.487793,11.39541],[3.59541,11.696289],[2.805273,12.383838],[2.366016,12.221924],[2.38916,11.89707],[1.980371,11.418408],[1.426758,11.447119],[.900488,10.993262],[.763379,10.38667],[1.330078,9.996973],[1.600195,9.050049],[1.530957,6.992432],[1.77793,6.294629],[1.622656,6.216797]]]}},{type:"Feature",properties:{name:"伯利兹",full_name:"伯利兹",iso_a2:"BZ",iso_a3:"BLZ",iso_n3:"084"},geometry:{type:"Polygon",coordinates:[[[-89.161475,17.814844],[-89.2375,15.894434],[-88.894043,15.890625],[-88.313428,16.632764],[-88.085254,18.226123],[-88.295654,18.472412],[-89.161475,17.814844]]]}},{type:"Feature",properties:{name:"比利时",full_name:"比利时王国",iso_a2:"BE",iso_a3:"BEL",iso_n3:"056"},geometry:{type:"Polygon",coordinates:[[[4.226172,51.386475],[3.902051,51.207666],[3.350098,51.377686],[2.524902,51.097119],[2.759375,50.750635],[4.174609,50.246484],[4.149316,49.971582],[4.818652,50.153174],[4.867578,49.788135],[5.789746,49.538281],[5.744043,49.919629],[6.116504,50.120996],[6.340918,50.451758],[5.993945,50.750439],[5.639453,50.843604],[5.796484,51.153076],[5.030957,51.469092],[4.226172,51.386475]]]}},{type:"Feature",properties:{name:"白俄罗斯",full_name:"白俄罗斯共和国",iso_a2:"BY",iso_a3:"BLR",iso_n3:"112"},geometry:{type:"Polygon",coordinates:[[[31.763379,52.101074],[31.258789,53.016699],[31.417871,53.196045],[32.141992,53.091162],[32.706445,53.419434],[31.754199,53.810449],[30.798828,54.783252],[30.906836,55.57002],[30.233594,55.845215],[29.482227,55.68457],[29.375,55.938721],[28.147949,56.14292],[27.576758,55.798779],[26.593555,55.667529],[26.457617,55.34248],[26.775684,55.273096],[25.780859,54.833252],[25.749219,54.156982],[25.461133,54.292773],[24.317969,53.892969],[23.484668,53.939795],[23.91543,52.770264],[23.175098,52.286621],[23.652441,52.040381],[23.605273,51.51792],[25.267188,51.937744],[27.141992,51.752051],[27.7,51.477979],[28.73125,51.433398],[29.102051,51.627539],[29.346484,51.382568],[30.160742,51.477881],[30.544531,51.265039],[30.755273,51.895166],[31.763379,52.101074]]]}},{type:"Feature",properties:{name:"巴巴多斯",full_name:"巴巴多斯",iso_a2:"BB",iso_a3:"BRB",iso_n3:"052"},geometry:{type:"Polygon",coordinates:[[[-59.493311,13.081982],[-59.427637,13.152783],[-59.64668,13.303125],[-59.493311,13.081982]]]}},{type:"Feature",properties:{name:"孟加拉国",full_name:"孟加拉人民共和国",iso_a2:"BD",iso_a3:"BGD",iso_n3:"050"},geometry:{type:"MultiPolygon",coordinates:[[[[89.051465,22.093164],[89.353711,21.721094],[89.483203,22.275537],[89.568555,21.767432],[89.985156,22.466406],[89.918066,22.116162],[90.20957,22.156592],[90.230566,21.829785],[90.616113,22.362158],[90.435059,22.751904],[90.590918,23.266406],[90.269141,23.455859],[90.604004,23.591357],[90.945605,22.597021],[91.480078,22.884814],[91.863379,22.350488],[92.324121,20.791846],[92.17959,21.293115],[92.631641,21.306201],[92.574902,21.978076],[92.246094,23.683594],[91.92959,23.685986],[91.619531,22.979688],[91.315234,23.104395],[91.160449,23.660645],[91.36709,24.093506],[91.876953,24.195312],[92.468359,24.944141],[92.049707,25.169482],[89.833301,25.292773],[89.670898,26.213818],[89.369727,26.006104],[89.018652,26.410254],[88.828027,26.252197],[88.418164,26.571533],[88.08457,25.888232],[88.95166,25.259277],[88.45625,25.188428],[88.023438,24.627832],[88.723535,24.274902],[88.567383,23.674414],[88.928125,23.186621],[89.051465,22.093164]]],[[[90.777637,22.089307],[90.868164,22.484863],[90.596484,22.863525],[90.680469,22.32749],[90.515039,22.065137],[90.777637,22.089307]]]]}},{type:"Feature",properties:{name:"巴林",full_name:"巴林王国",iso_a2:"BH",iso_a3:"BHR",iso_n3:"048"},geometry:{type:"Polygon",coordinates:[[[50.607227,25.883105],[50.585938,26.240723],[50.469922,26.228955],[50.607227,25.883105]]]}},{type:"Feature",properties:{name:"巴哈马",full_name:"巴哈马国",iso_a2:"BS",iso_a3:"BHS",iso_n3:"044"},geometry:{type:"MultiPolygon",coordinates:[[[[-77.657715,24.249463],[-77.999902,24.219824],[-77.57373,23.73916],[-77.657715,24.249463]]],[[[-77.225635,25.904199],[-77.066357,26.530176],[-77.533887,26.903418],[-77.94375,26.903564],[-77.238623,26.561133],[-77.403174,26.024707],[-77.225635,25.904199]]],[[[-73.026855,21.192383],[-73.523096,21.19082],[-73.681152,20.975586],[-73.164551,20.97915],[-73.026855,21.192383]]],[[[-77.743848,24.707422],[-78.211377,25.19126],[-78.366504,24.544189],[-78.044922,24.287451],[-77.743848,24.707422]]],[[[-78.492871,26.729053],[-78.985645,26.689502],[-78.743652,26.500684],[-77.922461,26.691113],[-78.492871,26.729053]]],[[[-76.648828,25.487402],[-76.1604,25.119336],[-76.169531,24.649414],[-76.126611,25.140527],[-76.648828,25.487402]]],[[[-74.840479,22.894336],[-75.315967,23.668359],[-75.22334,23.165332],[-74.840479,22.894336]]],[[[-75.308398,24.2],[-75.72666,24.689355],[-75.503223,24.139062],[-75.308398,24.2]]]]}},{type:"Feature",properties:{name:"阿塞拜疆",full_name:"阿塞拜疆共和国",iso_a2:"AZ",iso_a3:"AZE",iso_n3:"031"},geometry:{type:"MultiPolygon",coordinates:[[[[44.817188,39.650439],[45.479688,39.00625],[46.114453,38.877783],[45.784473,39.545605],[44.768262,39.703516],[44.817188,39.650439]]],[[[48.86875,38.435498],[49.551172,40.194141],[50.365918,40.279492],[49.456738,40.799854],[48.572852,41.844482],[47.791016,41.199268],[46.429883,41.890967],[46.182129,41.65708],[46.672559,41.286816],[46.534375,41.088574],[45.280957,41.449561],[45.001367,41.290967],[45.5875,40.846924],[45.454395,40.532373],[45.964648,40.233789],[45.579785,39.977539],[46.481445,39.555176],[46.490625,38.906689],[47.995898,39.683936],[48.322168,39.399072],[47.996484,38.85376],[48.86875,38.435498]]]]}},{type:"Feature",properties:{name:"奥地利",full_name:"奥地利共和国",iso_a2:"AT",iso_a3:"AUT",iso_n3:"040"},geometry:{type:"Polygon",coordinates:[[[9.527539,47.270752],[9.580273,47.057373],[10.452832,46.864941],[10.993262,46.777002],[12.169434,47.082129],[12.388281,46.702637],[13.7,46.520264],[14.549805,46.399707],[16.093066,46.863281],[16.676563,47.536035],[16.421289,47.674463],[17.066602,47.707568],[17.147363,48.005957],[16.953125,48.598828],[15.066797,48.997852],[14.691309,48.599219],[13.814746,48.766943],[12.760352,48.106982],[13.014355,47.478076],[12.209277,47.718262],[11.041992,47.393115],[10.439453,47.551562],[10.183008,47.278809],[9.524023,47.524219],[9.527539,47.270752]]]}},{type:"Feature",properties:{name:"澳大利亚",full_name:"澳大利亚联邦",iso_a2:"AU",iso_a3:"AUS",iso_n3:"036"},geometry:{type:"MultiPolygon",coordinates:[[[[143.178906,-11.954492],[142.872559,-11.821387],[142.779688,-11.115332],[142.456445,-10.707324],[142.168359,-10.946582],[141.961133,-12.054297],[141.688574,-12.351074],[141.929785,-12.739844],[141.613574,-12.943457],[141.625488,-15.056641],[141.291406,-16.463477],[140.830469,-17.414453],[140.03584,-17.702637],[139.248438,-17.328613],[139.009863,-16.899316],[138.24502,-16.718359],[135.45332,-14.923145],[135.954492,-13.934863],[135.927344,-13.304297],[136.461035,-13.225195],[136.897461,-12.243555],[136.443359,-11.951465],[136.081836,-12.422461],[136.008496,-12.191406],[135.704395,-12.209863],[135.922461,-11.825781],[135.029688,-12.19375],[131.961523,-11.180859],[131.822461,-11.302441],[132.072852,-11.474707],[132.674219,-11.649023],[132.712793,-12.123438],[131.438281,-12.276953],[131.291602,-12.067871],[130.867383,-12.557813],[130.622656,-12.431055],[130.168164,-12.957422],[130.259766,-13.302246],[129.838867,-13.572949],[129.378711,-14.39248],[129.84873,-14.828906],[129.637109,-14.850977],[129.634766,-15.139746],[129.267578,-14.871484],[129.21582,-15.160254],[129.058203,-14.884375],[128.575781,-14.774512],[128.069434,-15.329297],[128.180469,-14.711621],[127.457617,-14.031445],[126.903223,-13.744141],[126.569727,-14.160938],[126.053906,-13.977246],[126.020703,-14.494531],[125.661621,-14.529492],[125.627734,-14.256641],[125.178711,-14.714746],[125.355664,-15.119824],[124.839063,-15.160742],[125.062988,-15.442285],[124.692578,-15.273633],[124.439551,-15.493555],[124.381641,-15.758203],[124.648535,-15.870215],[124.404883,-16.298926],[124.771973,-16.402637],[123.607031,-16.224023],[123.49043,-16.490723],[123.874414,-16.918652],[123.831055,-17.120801],[123.593555,-17.030371],[123.563086,-17.520898],[122.970703,-16.436816],[122.260938,-17.135742],[122.34541,-18.111914],[120.997949,-19.604395],[119.104492,-19.995313],[117.40625,-20.721191],[116.706738,-20.653809],[114.709277,-21.823438],[114.141602,-22.483105],[114.022852,-21.881445],[113.417676,-24.435645],[114.214258,-25.851562],[114.215723,-26.289453],[113.72373,-26.129785],[113.451367,-25.599121],[113.836426,-26.500586],[113.581641,-26.558105],[113.356055,-26.080469],[113.184766,-26.182227],[114.028125,-27.347266],[114.165137,-28.080664],[114.856836,-29.142969],[115.07793,-30.560449],[115.698438,-31.694531],[115.683008,-33.192871],[115.358789,-33.639941],[114.993848,-33.515332],[115.008789,-34.255859],[116.517188,-34.987891],[117.581934,-35.097754],[119.450586,-34.368262],[119.854102,-33.974707],[123.506836,-33.916211],[124.24375,-33.015234],[125.917188,-32.296973],[127.319824,-32.264062],[129.187695,-31.659961],[131.143652,-31.495703],[134.23418,-32.548535],[134.173535,-32.979102],[134.791016,-33.32832],[135.45,-34.581055],[135.123047,-34.585742],[135.647559,-34.939648],[135.969727,-34.981836],[135.891016,-34.660938],[136.430664,-34.02998],[137.237305,-33.629492],[137.783203,-32.578125],[137.931836,-33.579102],[137.493848,-34.161133],[137.391016,-34.913281],[137.014258,-34.91582],[136.883594,-35.239746],[137.691699,-35.142969],[138.089258,-34.169824],[138.511133,-35.024414],[138.184375,-35.612695],[139.28252,-35.375391],[139.289453,-35.611328],[138.968945,-35.580762],[139.729004,-36.371387],[139.784277,-37.245801],[140.39043,-37.89668],[141.424219,-38.363477],[142.455859,-38.386328],[143.538965,-38.820898],[144.891309,-37.899805],[145.119922,-38.091309],[144.717773,-38.340332],[144.95957,-38.500781],[145.475781,-38.24375],[145.397266,-38.535352],[146.4,-39.145508],[146.21748,-38.727441],[146.856836,-38.663477],[147.876758,-37.93418],[149.932715,-37.528516],[150.195312,-35.833594],[150.80459,-35.012891],[151.29209,-33.580957],[152.47041,-32.439062],[152.943945,-31.434863],[153.616895,-28.673047],[153.116797,-27.194434],[153.164941,-25.96416],[151.831641,-24.122949],[150.843164,-23.458008],[150.672461,-22.418164],[150.541309,-22.559082],[150.076172,-22.164453],[149.974414,-22.550684],[149.703906,-22.440527],[149.454102,-21.578711],[148.683691,-20.580176],[148.884766,-20.480859],[148.759375,-20.289551],[147.418555,-19.378125],[146.383398,-18.977051],[146.032227,-18.272852],[145.912109,-16.9125],[145.426074,-16.406152],[145.287695,-14.943164],[144.473047,-14.231836],[143.756348,-14.348828],[143.178906,-11.954492]]],[[[139.507812,-16.573047],[139.587891,-16.395215],[139.15957,-16.741699],[139.507812,-16.573047]]],[[[136.714648,-13.803906],[136.424707,-13.864844],[136.335449,-14.211816],[136.894336,-14.293066],[136.89082,-13.786621],[136.714648,-13.803906]]],[[[130.459277,-11.679297],[130.294922,-11.336816],[130.043262,-11.787305],[130.60625,-11.816602],[130.459277,-11.679297]]],[[[130.618848,-11.376074],[130.38457,-11.192188],[130.511914,-11.617871],[130.950977,-11.926465],[131.538574,-11.436914],[131.268262,-11.189844],[130.618848,-11.376074]]],[[[137.596484,-35.738672],[137.334082,-35.59248],[136.540625,-35.890137],[137.448438,-36.074805],[138.123438,-35.852344],[137.596484,-35.738672]]],[[[146.27832,-18.23125],[146.098828,-18.251758],[146.298828,-18.484766],[146.27832,-18.23125]]],[[[136.338672,-11.602344],[136.479297,-11.465918],[136.180273,-11.676758],[136.338672,-11.602344]]],[[[145.042969,-40.786719],[144.718555,-40.672266],[144.766113,-41.390039],[145.516602,-42.354492],[145.198828,-42.230859],[145.487598,-42.92666],[146.208008,-43.316211],[146.043164,-43.547168],[146.873926,-43.6125],[147.297949,-42.790918],[147.94541,-43.181836],[148.213672,-41.97002],[148.342578,-42.215332],[148.215234,-40.854883],[146.31748,-41.163477],[145.042969,-40.786719]]],[[[148.000391,-39.757617],[147.767188,-39.870313],[148.105664,-40.262109],[148.297363,-39.985742],[148.000391,-39.757617]]],[[[148.32627,-40.306934],[148.020117,-40.404199],[148.404004,-40.486523],[148.32627,-40.306934]]]]}},{type:"Feature",properties:{name:"圣诞岛",full_name:"圣诞岛（澳大利亚）",iso_a2:"CX",iso_a3:"CXR",iso_n3:"162"},geometry:{type:"Polygon",coordinates:[[[105.725391,-10.492969],[105.584082,-10.5125],[105.696875,-10.56416],[105.725391,-10.492969]]]}},{type:"Feature",properties:{name:"赫德岛和麦克唐纳群岛",full_name:"赫德岛和麦克唐纳群岛",iso_a2:"HM",iso_a3:"HMD",iso_n3:"334"},geometry:{type:"Polygon",coordinates:[[[73.707422,-53.137109],[73.251172,-52.975781],[73.465137,-53.18418],[73.707422,-53.137109]]]}},{type:"Feature",properties:{name:"诺福克岛",full_name:"诺福克岛（澳大利亚）",iso_a2:"NF",iso_a3:"NFK",iso_n3:"574"},geometry:{type:"Polygon",coordinates:[[[167.939453,-29.017676],[167.960742,-29.096289],[167.99043,-29.04209],[167.939453,-29.017676]]]}},{type:"Feature",properties:{name:"阿什莫尔和卡捷群岛",full_name:"阿什莫尔和卡捷群岛（澳大利亚）",iso_a2:"AU",iso_a3:"AUS",iso_n3:"036"},geometry:{type:"Polygon",coordinates:[[[123.594531,-12.425684],[123.572461,-12.423926],[123.573145,-12.43418],[123.594531,-12.425684]]]}},{type:"Feature",properties:{name:"亚美尼亚",full_name:"亚美尼亚共和国",iso_a2:"AM",iso_a3:"ARM",iso_n3:"051"},geometry:{type:"Polygon",coordinates:[[[44.768262,39.703516],[45.784473,39.545605],[46.114453,38.877783],[46.490625,38.906689],[46.481445,39.555176],[45.579785,39.977539],[45.964648,40.233789],[45.454395,40.532373],[45.5875,40.846924],[45.001367,41.290967],[43.439453,41.107129],[43.666211,40.126367],[44.768262,39.703516]]]}},{type:"Feature",properties:{name:"阿根廷",full_name:"阿根廷共和国",iso_a2:"AR",iso_a3:"ARG",iso_n3:"032"},geometry:{type:"MultiPolygon",coordinates:[[[[-57.608887,-30.187793],[-55.725488,-28.204102],[-53.838184,-27.121094],[-53.668555,-26.288184],[-53.891162,-25.668848],[-54.615869,-25.576074],[-54.825488,-26.652246],[-55.714648,-27.414844],[-56.164062,-27.321484],[-56.437158,-27.553809],[-58.604834,-27.314355],[-57.643896,-25.328418],[-59.89248,-24.093555],[-61.03291,-23.755664],[-62.650977,-22.233691],[-62.843359,-21.997266],[-63.92168,-22.028613],[-64.325293,-22.827637],[-64.605518,-22.228809],[-65.771045,-22.099609],[-66.220166,-21.802539],[-67.194873,-22.82168],[-67.008789,-23.001367],[-67.356201,-24.033789],[-68.562012,-24.747363],[-68.384229,-25.091895],[-68.591602,-26.47041],[-68.318652,-26.973242],[-68.846338,-27.153711],[-69.656934,-28.413574],[-70.026807,-29.324023],[-69.844287,-30.175],[-70.51958,-31.148438],[-70.084863,-33.201758],[-69.819629,-33.283789],[-69.852441,-34.224316],[-70.555176,-35.246875],[-70.404785,-36.061719],[-71.192187,-36.843652],[-70.858643,-38.604492],[-71.401562,-38.935059],[-71.932129,-40.691699],[-71.75,-42.046777],[-72.108203,-42.251855],[-72.146436,-42.990039],[-71.750635,-43.237305],[-71.82002,-44.383105],[-71.159717,-44.560254],[-71.261133,-44.763086],[-72.063721,-44.771875],[-71.349316,-45.331934],[-71.746191,-45.578906],[-71.699658,-46.651367],[-72.51792,-47.876367],[-72.354736,-48.36582],[-73.554199,-49.463867],[-73.50127,-50.125293],[-73.15293,-50.738281],[-72.340234,-50.681836],[-72.407666,-51.54082],[-71.918652,-51.989551],[-69.960254,-52.008203],[-68.443359,-52.356641],[-68.965332,-51.677148],[-69.46543,-51.584473],[-69.035303,-51.488965],[-69.358594,-51.028125],[-69.044775,-50.499121],[-68.421875,-50.15791],[-68.97959,-50.003027],[-68.667578,-49.752539],[-68.257227,-50.10459],[-67.825977,-49.919629],[-67.466309,-48.951758],[-65.810059,-47.941113],[-66.225244,-47.826758],[-65.738086,-47.344922],[-65.998535,-47.09375],[-66.776855,-47.005859],[-67.599561,-46.052539],[-66.941406,-45.257324],[-65.63877,-45.007812],[-65.252344,-43.571875],[-64.319141,-42.968945],[-64.970703,-42.666309],[-64.487842,-42.513477],[-64.034766,-42.88125],[-63.617334,-42.695801],[-63.795557,-42.113867],[-64.42041,-42.433789],[-64.986377,-42.102051],[-65.133398,-40.880664],[-64.869482,-40.73584],[-63.621777,-41.159766],[-62.39502,-40.89082],[-62.053662,-39.373828],[-62.334766,-38.800098],[-61.602539,-38.998828],[-59.82832,-38.838184],[-57.546973,-38.085645],[-56.672021,-36.85127],[-56.698096,-36.426465],[-57.335449,-36.026758],[-57.303662,-35.188477],[-58.28335,-34.683496],[-58.525488,-34.296191],[-58.39248,-34.192969],[-58.547217,-33.663477],[-58.424463,-33.111523],[-58.170996,-32.959277],[-58.201172,-32.47168],[-57.608887,-30.187793]]],[[[-68.653223,-54.853613],[-66.511133,-55.032129],[-65.179004,-54.678125],[-67.294238,-54.049805],[-68.488525,-53.260938],[-68.240137,-53.081836],[-68.629932,-52.652637],[-68.653223,-54.853613]]],[[[-64.54917,-54.716211],[-64.637354,-54.902539],[-63.81543,-54.725098],[-64.54917,-54.716211]]]]}},{type:"Feature",properties:{name:"安提瓜和巴布达",full_name:"安提瓜和巴布达",iso_a2:"AG",iso_a3:"ATG",iso_n3:"028"},geometry:{type:"Polygon",coordinates:[[[-61.716064,17.037012],[-61.817285,17.168945],[-61.887109,17.098145],[-61.716064,17.037012]]]}},{type:"Feature",properties:{name:"安哥拉",full_name:"安哥拉共和国",iso_a2:"AO",iso_a3:"AGO",iso_n3:"024"},geometry:{type:"MultiPolygon",coordinates:[[[[13.072754,-4.634766],[12.798242,-4.430566],[12.018359,-5.004297],[12.213672,-5.758691],[12.503711,-5.695801],[12.451465,-5.071484],[13.072754,-4.634766]]],[[[23.966504,-10.871777],[22.226172,-11.121973],[22.274512,-10.259082],[21.813184,-9.46875],[21.781641,-7.314648],[20.607813,-7.277734],[20.590039,-6.919922],[19.875195,-6.986328],[19.527637,-7.144434],[19.34082,-7.966602],[17.57959,-8.099023],[16.431445,-5.900195],[13.068164,-5.864844],[12.283301,-6.124316],[13.378516,-8.369727],[12.998535,-9.048047],[13.833594,-10.929688],[13.785352,-11.812793],[12.550488,-13.437793],[11.750879,-15.831934],[11.743066,-17.249219],[13.101172,-16.967676],[14.01748,-17.408887],[18.396387,-17.399414],[18.955273,-17.803516],[20.745508,-18.019727],[23.380664,-17.640625],[22.040234,-16.262793],[21.978906,-13.000977],[23.962988,-12.988477],[23.966504,-10.871777]]]]}},{type:"Feature",properties:{name:"安道尔",full_name:"安道尔公国",iso_a2:"AD",iso_a3:"AND",iso_n3:"020"},geometry:{type:"Polygon",coordinates:[[[1.706055,42.50332],[1.42832,42.595898],[1.448828,42.437451],[1.706055,42.50332]]]}},{type:"Feature",properties:{name:"阿尔及利亚",full_name:"阿尔及利亚民主人民共和国",iso_a2:"DZ",iso_a3:"DZA",iso_n3:"012"},geometry:{type:"Polygon",coordinates:[[[8.576563,36.937207],[6.486523,37.085742],[5.29541,36.648242],[4.758105,36.896338],[3.779004,36.896191],[1.257227,36.51958],[-.048242,35.832812],[-2.219629,35.104199],[-1.795605,34.751904],[-1.679199,33.318652],[-1.065527,32.468311],[-1.225928,32.107227],[-2.887207,32.068848],[-3.017383,31.834277],[-3.826758,31.661914],[-3.666797,30.964014],[-4.968262,30.465381],[-5.448779,29.956934],[-7.685156,29.349512],[-8.678418,28.689404],[-8.68335,27.656445],[-8.68335,27.285938],[-4.822607,24.995605],[1.145508,21.102246],[1.685449,20.378369],[3.130273,19.850195],[3.119727,19.103174],[4.227637,19.142773],[5.836621,19.47915],[7.481738,20.873096],[11.967871,23.517871],[11.507617,24.314355],[10.255859,24.591016],[9.448242,26.067139],[9.883203,26.630811],[9.916016,27.785693],[9.805273,29.176953],[9.310254,30.115234],[9.51875,30.229395],[9.044043,32.072363],[8.333398,32.543604],[7.500195,33.832471],[8.245605,34.734082],[8.207617,36.518945],[8.576563,36.937207]]]}},{type:"Feature",properties:{name:"阿尔巴尼亚",full_name:"阿尔巴尼亚共和国",iso_a2:"AL",iso_a3:"ALB",iso_n3:"008"},geometry:{type:"Polygon",coordinates:[[[19.342383,41.869092],[19.575684,41.64043],[19.322266,40.40708],[20.00127,39.709424],[20.657422,40.117383],[20.964258,40.849902],[20.488965,41.272607],[20.566211,41.873682],[20.063965,42.547266],[19.654492,42.628564],[19.342383,41.869092]]]}},{type:"Feature",properties:{name:"阿富汗",full_name:"阿富汗",iso_a2:"AF",iso_a3:"AFG",iso_n3:"004"},geometry:{type:"Polygon",coordinates:[[[66.522266,37.348486],[65.765039,37.569141],[65.55498,37.251172],[64.816309,37.13208],[64.511035,36.340674],[63.12998,35.846191],[63.056641,35.445801],[62.688086,35.255322],[62.307813,35.170801],[61.262012,35.61958],[60.72627,34.518262],[60.889453,34.319434],[60.485742,34.094775],[60.51084,33.638916],[60.916992,33.505225],[60.561914,33.058789],[60.820703,31.495166],[61.660156,31.382422],[61.81084,30.913281],[60.843359,29.858691],[62.476562,29.40835],[64.09873,29.391943],[66.23125,29.865723],[66.346875,30.802783],[66.829297,31.263672],[67.452832,31.234619],[68.161035,31.802979],[68.868945,31.634229],[69.279297,31.936816],[69.501562,33.020068],[70.261133,33.289014],[69.889648,34.007275],[71.051563,34.049707],[70.965625,34.530371],[71.620508,35.183008],[71.23291,36.121777],[72.249805,36.734717],[74.541406,37.022168],[74.372168,37.157715],[74.891309,37.231641],[74.349023,37.41875],[73.653516,37.239355],[73.720605,37.41875],[73.38291,37.462256],[71.665625,36.696924],[71.43291,37.127539],[71.582227,37.910107],[71.278516,37.918408],[71.255859,38.306982],[70.878906,38.456396],[70.214648,37.924414],[70.188672,37.582471],[69.49209,37.553076],[69.303906,37.116943],[68.911816,37.333936],[68.067773,36.949805],[67.758984,37.172217],[66.522266,37.348486]]]}},{type:"Feature",properties:{name:"锡亚琴冰川",full_name:"锡亚琴冰川",iso_a2:"-99",iso_a3:"-99",iso_n3:"-99"},geometry:{type:"Polygon",coordinates:[[[77.048633,35.109912],[77.799414,35.495898],[76.766895,35.661719],[77.048633,35.109912]]]}},{type:"Feature",properties:{name:"南极洲",full_name:"南极洲",iso_a2:"AQ",iso_a3:"ATA",iso_n3:"010"},geometry:{type:"MultiPolygon",coordinates:[[[[-57.020654,-63.372852],[-57.389648,-63.22627],[-58.87207,-63.551855],[-60.86416,-64.073438],[-61.631787,-64.604688],[-62.503467,-64.656445],[-63.059082,-65.139355],[-63.760254,-65.033496],[-63.818115,-65.531543],[-64.646582,-65.747852],[-64.613525,-66.019043],[-65.617285,-66.135254],[-65.766406,-66.624902],[-66.503613,-66.689844],[-66.498682,-67.289062],[-67.034473,-66.945117],[-67.493359,-67.112793],[-67.544531,-67.534668],[-66.677246,-67.560254],[-67.390527,-68.86123],[-66.974902,-69.161035],[-67.371777,-69.412305],[-68.707959,-69.432227],[-66.827734,-72.09043],[-68.000342,-72.935547],[-72.929199,-73.447949],[-73.996045,-73.699805],[-75.293066,-73.63877],[-77.048926,-73.844141],[-76.850488,-73.460449],[-78.78623,-73.506738],[-80.442236,-72.944531],[-80.336377,-73.41416],[-81.176416,-73.248828],[-81.30874,-73.738281],[-82.183496,-73.856836],[-85.801416,-73.19209],[-86.791016,-73.363672],[-88.419385,-73.229004],[-88.194092,-72.7875],[-88.77998,-72.683008],[-90.920947,-73.319141],[-92.828369,-73.164648],[-96.394238,-73.301172],[-98.208594,-73.022266],[-102.409277,-72.987402],[-102.855859,-72.716211],[-103.375,-72.818848],[-102.908789,-73.285156],[-98.896143,-73.611133],[-102.862744,-73.783594],[-101.251709,-74.485742],[-100.118604,-74.515039],[-100.47334,-74.872363],[-98.752344,-75.31709],[-101.039355,-75.421875],[-101.708105,-75.127344],[-103.121045,-75.095215],[-106.618848,-75.343945],[-111.358789,-75.219922],[-110.229785,-74.536328],[-111.180176,-74.188086],[-111.69624,-74.792188],[-114.110449,-74.981836],[-113.508496,-74.088867],[-114.62373,-73.90293],[-115.222607,-74.487402],[-118.655762,-74.392773],[-121.543945,-74.75],[-135.362061,-74.69043],[-136.649854,-75.161719],[-139.691162,-75.212793],[-141.22334,-75.545898],[-140.874316,-75.745898],[-142.329834,-75.490918],[-145.987744,-75.88877],[-145.44209,-76.40918],[-148.458984,-76.117969],[-149.654248,-76.365332],[-147.34043,-76.438379],[-145.750488,-76.749023],[-145.677148,-77.488086],[-148.572412,-77.105078],[-148.155713,-77.462305],[-149.717725,-77.797461],[-154.814941,-77.126953],[-158.213574,-77.157129],[-158.285889,-77.950781],[-157.266797,-78.199805],[-154.293018,-78.259082],[-156.114551,-78.744629],[-152.137695,-79.115918],[-148.176514,-79.775879],[-150.575391,-80.353711],[-148.023438,-80.835742],[-156.528223,-81.162305],[-157.03252,-81.319141],[-153.956641,-81.700195],[-153.009863,-82.449609],[-159.444385,-83.543164],[-174.235938,-82.793457],[-167.801221,-83.79082],[-164.950879,-83.805859],[-165.135352,-84.409863],[-156.986328,-84.811133],[-156.459131,-85.186035],[-171.703662,-84.542383],[-180,-84.351562],[-180,-85.05752],[-180,-85.763379],[-180,-86.469336],[-180,-87.175195],[-180,-87.881055],[-180,-88.587012],[-180,-89.292969],[-180,-89.58291],[-180,-89.998926],[-1.40625,-89.998926],[180,-89.998926],[180,-84.351562],[171.035742,-83.448438],[168.110059,-83.362012],[168.607324,-83.065332],[164.980078,-82.384961],[161.283203,-82.489941],[163.602344,-82.120605],[160.469824,-81.340625],[160.637305,-80.449902],[158.573633,-80.423438],[160.558789,-80.010547],[159.975879,-79.585645],[160.873535,-79.049707],[161.951465,-79.02998],[161.669238,-78.536133],[162.639453,-78.897754],[164.634766,-78.603223],[167.130273,-78.606152],[165.662988,-78.305664],[165.417578,-78.042188],[163.977637,-78.223828],[164.420898,-77.883496],[162.450293,-76.955664],[162.815723,-75.846191],[160.910742,-75.334668],[162.410059,-75.237598],[163.397852,-74.382129],[165.408594,-74.558594],[164.812988,-73.396777],[165.733691,-73.866699],[165.860156,-73.592676],[167.709082,-73.394238],[166.452832,-72.936035],[167.155664,-73.147266],[169.54502,-73.050391],[169.828613,-72.728809],[168.428418,-72.383398],[170.206445,-72.565332],[170.030078,-72.115527],[170.859082,-71.868555],[170.435742,-71.41875],[170.162305,-71.630469],[166.626953,-70.664258],[163.566504,-70.642285],[162.674805,-70.30459],[162.021973,-70.439844],[162.189453,-71.039551],[159.783984,-69.521875],[155.520313,-69.024414],[153.908008,-68.323145],[153.081836,-68.856836],[151.28877,-68.81709],[150.935938,-68.358496],[147.093652,-68.368652],[145.975195,-67.624219],[143.977344,-67.864551],[144.621191,-67.141406],[143.730371,-66.876758],[142.6875,-67.012793],[135.351953,-66.127148],[134.289453,-66.476758],[133.148242,-66.094824],[130.120508,-66.291504],[129.236914,-67.041602],[128.430566,-67.119141],[125.865625,-66.364453],[119.133008,-67.370703],[120.374805,-66.983789],[116.713477,-67.047168],[114.026563,-67.441211],[113.991211,-67.211914],[115.635352,-66.771191],[113.099414,-65.799902],[110.906738,-66.07666],[110.622266,-66.524023],[109.462793,-66.908691],[102.674219,-65.865137],[101.381348,-65.973047],[100.889063,-66.358008],[99.370117,-66.648242],[98.257617,-66.46748],[94.839844,-66.501367],[93.964258,-66.689648],[92.073438,-66.50791],[84.485156,-67.114453],[83.304297,-67.603027],[79.035156,-68.175391],[77.81748,-69.068945],[75.423828,-69.893066],[73.324805,-69.848926],[71.771387,-70.80127],[71.276758,-71.623926],[68.419824,-72.515039],[67.32207,-73.300293],[66.497656,-73.125488],[69.250195,-70.431055],[67.267969,-70.273145],[68.178125,-69.837305],[69.082617,-69.866602],[68.90625,-69.372754],[69.629492,-69.231641],[69.982227,-68.464258],[69.55918,-67.763184],[68.32793,-67.889551],[63.699023,-67.508301],[59.250781,-67.484961],[57.627441,-67.014063],[56.154883,-67.264551],[56.145898,-66.626074],[57.185449,-66.613281],[55.504492,-66.002637],[53.671777,-65.858691],[51.88457,-66.02002],[50.332422,-66.444629],[50.553027,-67.194336],[49.24707,-66.941602],[48.465234,-67.043457],[49.219336,-67.226855],[48.374512,-67.988086],[48.209961,-67.699316],[47.489844,-67.72793],[47.351562,-67.361914],[46.559668,-67.268164],[46.399023,-67.617578],[42.960938,-68.095312],[40.215625,-68.804883],[38.885547,-70.171875],[37.787109,-69.725684],[35.357031,-69.681348],[34.595898,-69.094531],[33.813672,-69.099316],[34.192871,-68.702441],[33.465625,-68.670703],[32.641602,-68.868945],[32.621289,-70.000586],[30.00332,-70.3],[26.498828,-71.019531],[24.756738,-70.89209],[24.024121,-70.413379],[23.149902,-70.796289],[22.44541,-70.739746],[21.70498,-70.258496],[21.070801,-70.843457],[19.651855,-70.920605],[19.009375,-70.212109],[18.124609,-70.540332],[16.381055,-70.145117],[13.822656,-70.343164],[13.065625,-70.053613],[11.70127,-70.766602],[9.141602,-70.183691],[8.523047,-70.473828],[7.676758,-70.356348],[2.609473,-70.900098],[-.543164,-71.712695],[-1.067773,-71.265625],[-6.11748,-71.325977],[-5.936328,-70.712695],[-7.752734,-70.842773],[-7.713721,-71.546484],[-8.497705,-71.674805],[-10.270605,-70.935742],[-10.825439,-71.55332],[-12.351318,-71.389746],[-11.009229,-71.75791],[-11.496973,-72.412891],[-13.208594,-72.785059],[-14.297754,-72.733008],[-14.164697,-73.102441],[-15.595996,-73.096777],[-16.435205,-73.425684],[-16.220117,-73.915723],[-14.573828,-73.9375],[-15.67251,-74.407324],[-17.43584,-74.379102],[-18.749219,-75.24209],[-18.30459,-75.431348],[-26.059326,-75.957227],[-34.075781,-77.425391],[-36.23916,-78.774219],[-32.994238,-79.228809],[-30.645264,-79.124121],[-29.949316,-79.599023],[-23.406836,-79.858984],[-31.01543,-80.308105],[-35.327002,-80.650684],[-37.209277,-81.063867],[-38.771729,-80.882324],[-41.125879,-81.214844],[-45.04375,-82.437988],[-46.516748,-82.45459],[-46.258057,-81.946973],[-48.360791,-81.892285],[-53.986084,-82.200586],[-59.516016,-83.458398],[-61.425293,-83.395605],[-62.735645,-82.527344],[-60.527734,-82.199902],[-64.91958,-82.370508],[-66.133838,-81.953418],[-62.490234,-81.556738],[-65.573682,-81.460547],[-70.687891,-80.62627],[-73.029492,-80.917285],[-75.075586,-80.860059],[-76.407324,-80.094922],[-79.6604,-79.996875],[-76.557861,-79.903516],[-76.217676,-79.387207],[-80.151172,-79.268066],[-80.891992,-79.501855],[-83.696631,-78.537305],[-83.779004,-77.983594],[-80.292285,-78.822754],[-77.54502,-78.65957],[-77.858105,-78.350977],[-81.580957,-77.846094],[-80.601562,-77.751953],[-74.812061,-78.177832],[-73.251562,-77.894238],[-72.851953,-77.590234],[-75.748145,-77.398438],[-77.190039,-76.629785],[-70.550781,-76.718066],[-63.363379,-75.451465],[-64.279541,-75.292871],[-63.231055,-75.153809],[-63.924707,-75.004492],[-63.178125,-74.68418],[-62.137793,-74.926367],[-62.235303,-74.441309],[-60.704297,-74.307129],[-61.842773,-74.289648],[-60.790283,-73.711816],[-62.008301,-73.147656],[-60.122217,-73.275293],[-60.009766,-72.937891],[-61.286133,-72.600781],[-60.719434,-72.072656],[-62.256641,-72.017578],[-60.949023,-71.747266],[-61.213574,-71.564062],[-61.958789,-71.657812],[-60.962256,-71.244629],[-62.04043,-70.801367],[-61.504687,-70.490527],[-62.377783,-70.364844],[-61.961084,-70.120117],[-63.747021,-68.70459],[-62.933301,-68.442578],[-63.924463,-68.497656],[-64.078467,-68.771191],[-65.15835,-68.617969],[-65.452002,-68.336719],[-64.829492,-68.127441],[-65.639502,-68.130566],[-65.503125,-67.377246],[-64.819287,-67.307324],[-64.686279,-66.80625],[-63.754736,-66.872949],[-63.752539,-66.277734],[-62.628906,-66.706152],[-62.682031,-66.237305],[-61.756006,-66.429199],[-61.431934,-66.144727],[-61.028418,-66.336523],[-60.618311,-65.933105],[-61.839062,-66.119531],[-62.293262,-65.916406],[-61.703125,-64.987207],[-61.059863,-64.98125],[-59.963086,-64.431348],[-59.645996,-64.583691],[-59.546777,-64.358789],[-58.786084,-64.524219],[-59.005322,-64.194922],[-57.460645,-63.513574],[-56.834766,-63.63125],[-57.020654,-63.372852]]],[[[-45.222656,-78.810742],[-43.947217,-78.597559],[-44.093994,-78.167285],[-45.993164,-77.826855],[-47.69209,-77.840137],[-50.14165,-78.556738],[-50.339258,-79.479492],[-52.297168,-80.141211],[-53.393896,-80.108789],[-54.1625,-80.870117],[-43.52793,-80.191406],[-43.544336,-78.901953],[-45.222656,-78.810742]]],[[[-59.733936,-80.344141],[-60.578809,-79.741016],[-61.633301,-80.344141],[-66.771143,-80.293848],[-60.582812,-80.948145],[-59.733936,-80.344141]]],[[[-70.051123,-69.189062],[-70.416992,-68.788965],[-72.137891,-69.114551],[-71.728516,-70.053711],[-69.618359,-70.398047],[-71.190039,-70.65957],[-69.875781,-70.875977],[-69.869775,-71.125684],[-70.380664,-70.946387],[-72.710449,-71.072949],[-72.21167,-71.335059],[-75.335449,-71.645215],[-73.995605,-72.169824],[-73.775977,-71.848926],[-72.927637,-71.92168],[-72.336621,-71.632227],[-70.820996,-71.906543],[-71.892188,-72.152832],[-70.206006,-72.227734],[-72.7375,-72.280566],[-72.36748,-72.669727],[-69.209326,-72.53418],[-68.241016,-71.822168],[-68.459473,-70.68291],[-70.051123,-69.189062]]],[[[-98.091113,-71.9125],[-98.61543,-71.76377],[-99.833203,-72.046094],[-100.218652,-71.83291],[-102.313623,-72.081055],[-98.407812,-72.547656],[-95.575391,-72.409961],[-95.6854,-72.056641],[-96.978906,-72.221875],[-96.38335,-71.836328],[-97.345215,-72.189062],[-97.584766,-71.882617],[-98.167969,-72.123047],[-98.091113,-71.9125]]],[[[-120.55625,-73.756055],[-123.112158,-73.682227],[-122.859082,-74.342676],[-121.002441,-74.326367],[-120.55625,-73.756055]]],[[[-126.329883,-73.28623],[-127.267627,-73.304004],[-127.211621,-73.724414],[-123.937402,-74.256152],[-124.128516,-73.833984],[-125.798584,-73.801953],[-125.263965,-73.666406],[-126.329883,-73.28623]]],[[[-159.05293,-79.807422],[-159.963525,-79.324316],[-163.256104,-78.72207],[-164.225781,-79.320801],[-159.05293,-79.807422]]],[[[167.084082,-77.32168],[166.506348,-77.189355],[166.729004,-77.850977],[169.352734,-77.524707],[167.084082,-77.32168]]],[[[-31.118848,-79.798438],[-31.68042,-79.634277],[-31.594238,-79.887695],[-29.614453,-79.90957],[-30.779932,-79.647363],[-31.118848,-79.798438]]],[[[-33.93418,-79.32041],[-35.534668,-79.090039],[-36.565967,-79.208789],[-33.93418,-79.32041]]],[[[-70.334082,-79.679883],[-67.038135,-78.315723],[-71.454004,-79.128906],[-71.68667,-79.568066],[-70.334082,-79.679883]]],[[[-57.845996,-64.053906],[-57.925684,-63.806055],[-58.424951,-64.067773],[-58.214062,-64.369727],[-57.294678,-64.366992],[-57.479736,-63.961621],[-57.845996,-64.053906]]],[[[-55.528027,-63.173535],[-56.462842,-63.418066],[-55.075195,-63.324316],[-55.528027,-63.173535]]],[[[-57.978418,-61.911914],[-59.003711,-62.209766],[-57.639551,-62.02041],[-57.978418,-61.911914]]],[[[-63.180566,-64.469531],[-63.485596,-64.260547],[-64.27207,-64.697559],[-63.739502,-64.834277],[-62.836523,-64.571875],[-63.180566,-64.469531]]],[[[-62.325781,-64.424414],[-62.058496,-64.138086],[-62.451416,-64.012402],[-62.781787,-64.479004],[-62.325781,-64.424414]]],[[[-67.988477,-67.474414],[-67.830518,-66.624316],[-69.120361,-67.57793],[-68.58042,-67.732813],[-67.988477,-67.474414]]],[[[-73.706641,-70.635156],[-74.400977,-70.575879],[-74.589697,-70.791992],[-74.953613,-70.590234],[-76.421484,-71.09043],[-74.205029,-70.924121],[-73.706641,-70.635156]]],[[[-74.987109,-69.727832],[-75.80415,-70.038184],[-74.848828,-70.179297],[-74.437988,-69.949609],[-74.987109,-69.727832]]],[[[-74.354443,-73.098438],[-75.376855,-72.82041],[-76.096387,-73.150488],[-74.574658,-73.611328],[-74.354443,-73.098438]]],[[[-91.160693,-73.182227],[-90.76333,-72.681055],[-91.303516,-72.547363],[-91.160693,-73.182227]]],[[[167.642773,-78.141406],[166.111133,-78.089648],[166.121875,-78.274609],[167.642773,-78.141406]]],[[[100.981445,-65.677539],[101.220605,-65.472266],[100.545117,-65.408984],[100.292578,-65.65127],[100.981445,-65.677539]]],[[[26.857227,-70.381152],[26.301074,-70.072461],[26.005371,-70.372949],[26.857227,-70.381152]]],[[[-66.173633,-80.077832],[-65.579248,-79.770801],[-67.687939,-79.528418],[-66.173633,-80.077832]]],[[[-67.261914,-79.452637],[-68.032568,-79.227148],[-68.548926,-79.437402],[-67.261914,-79.452637]]],[[[-55.16543,-61.22041],[-54.670996,-61.116992],[-55.387012,-61.072656],[-55.16543,-61.22041]]],[[[-61.997607,-69.721875],[-61.815967,-69.376172],[-62.442139,-69.145996],[-61.997607,-69.721875]]],[[[-60.625,-62.560059],[-61.149805,-62.63418],[-59.849561,-62.614941],[-60.625,-62.560059]]],[[[96.612695,-66.03584],[96.307031,-66.18584],[96.933984,-66.200781],[96.612695,-66.03584]]],[[[16.222656,-70.007617],[16.573438,-69.723242],[15.596875,-69.828027],[16.222656,-70.007617]]],[[[3.036914,-70.597363],[3.072168,-70.381641],[2.584668,-70.53457],[3.036914,-70.597363]]],[[[-2.532812,-70.767773],[-3.574658,-70.703125],[-2.783496,-71.16748],[-2.092285,-70.820898],[-2.532812,-70.767773]]],[[[-20.607422,-73.886621],[-20.580225,-73.619238],[-22.035352,-74.106543],[-20.489014,-74.492676],[-20.607422,-73.886621]]],[[[-67.348926,-67.766211],[-67.246729,-67.59873],[-67.743262,-67.66123],[-67.348926,-67.766211]]],[[[-116.738623,-74.165039],[-116.381299,-73.865527],[-117.376465,-74.082813],[-116.738623,-74.165039]]],[[[-131.066699,-74.583789],[-130.981104,-74.414062],[-132.162646,-74.425781],[-131.066699,-74.583789]]],[[[-149.230664,-77.120508],[-149.870605,-76.875],[-150.788525,-76.981641],[-149.230664,-77.120508]]]]}},{type:"Feature",properties:{name:"荷属圣马丁",full_name:"荷属圣马丁岛",iso_a2:"SX",iso_a3:"SXM",iso_n3:"534"},geometry:{type:"Polygon",coordinates:[[[-63.123047,18.068945],[-63.023047,18.019189],[-63.011182,18.068945],[-63.123047,18.068945]]]}},{type:"Feature",properties:{name:"图瓦卢",full_name:"图瓦卢",iso_a2:"TV",iso_a3:"TUV",iso_n3:"798"},geometry:{type:"Polygon",coordinates:[[[179.213672,-8.524219],[179.203027,-8.466309],[179.195703,-8.534766],[179.213672,-8.524219]]]}}],VC={type:qM,features:HM},XM="modulepreload",KM=function(t){return"/"+t},Gm={},YM=function(o,c,p){if(!c||c.length===0)return o();const _=document.getElementsByTagName("link");return Promise.all(c.map(x=>{if(x=KM(x),x in Gm)return;Gm[x]=!0;const E=x.endsWith(".css"),s=E?'[rel="stylesheet"]':"";if(!!p)for(let N=_.length-1;N>=0;N--){const U=_[N];if(U.href===x&&(!E||U.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${x}"]${s}`))return;const D=document.createElement("link");if(D.rel=E?"stylesheet":XM,E||(D.as="script",D.crossOrigin=""),D.href=x,document.head.appendChild(D),E)return new Promise((N,U)=>{D.addEventListener("load",N),D.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${x}`)))})})).then(()=>o()).catch(x=>{const E=new Event("vite:preloadError",{cancelable:!0});if(E.payload=x,window.dispatchEvent(E),!E.defaultPrevented)throw x})};var Vy={exports:{}};(function(t){function o(D){if(D=Object.assign({},D),!(this instanceof o))throw new Error("MapboxLanguage needs to be called with the new keyword");this.setLanguage=this.setLanguage.bind(this),this._initialStyleUpdate=this._initialStyleUpdate.bind(this),this._defaultLanguage=D.defaultLanguage,this._isLanguageField=D.languageField||/^name_/,this._getLanguageField=D.getLanguageField||function(U){return U==="mul"?"name":`name_${U}`},this._languageSource=D.languageSource||null,this._languageTransform=D.languageTransform,this._excludedLayerIds=D.excludedLayerIds||[],this.supportedLanguages=D.supportedLanguages||["ar","de","en","es","fr","it","ja","ko","mul","pt","ru","vi","zh-Hans","zh-Hant"]}const c=/^\{name/;function p(D,N){const U=Array.isArray(N)&&N[0]==="get";return U&&c.test(N[1])&&console.warn("This plugin no longer supports the use of token syntax (e.g. {name}). Please use a get expression. See https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/ for more details."),U&&D.test(N[1])}function _(D,N,U){if(Array.isArray(N))for(let G=1;G<N.length;G++)Array.isArray(N[G])&&(p(D,N[G])&&(N[G][1]=U),_(D,N[G],U))}function x(D,N,U){if(p(D,N)&&(N[1]=U),_(D,N,U),N[0]==="get"&&N[1]==="name"){const G=N.slice();N=["coalesce",["get",U],G]}return N}function E(D,N,U,G){return N.layout&&N.layout["text-field"]&&G.indexOf(N.id)===-1?Object.assign({},N,{layout:Object.assign({},N.layout,{"text-field":x(D,N.layout["text-field"],U)})}):N}function s(D){const N=Object.keys(D.sources).filter(U=>{const G=D.sources[U].url;return G&&G.indexOf("mapbox.mapbox-streets-v8")>-1||/mapbox-streets-v[1-9][1-9]/.test(G)});if(!N.length)throw new Error('If using MapboxLanguage with a Mapbox style, the style must be based on vector tile version 8, e.g. "streets-v11"');return N[0]}o.prototype.setLanguage=function(D,N){if(this.supportedLanguages.indexOf(N)<0)throw new Error(`Language ${N} is not supported`);const U=this._languageSource||s(D);if(!U)return D;const G=this._getLanguageField(N),ce=this._isLanguageField,ge=this._excludedLayerIds,xe=D.layers.map(ne=>ne.source===U?E(ce,ne,G,ge):ne),$e=Object.assign({},D,{layers:xe});return this._languageTransform?this._languageTransform($e,N):$e},o.prototype._initialStyleUpdate=function(){const D=this._map.getStyle(),N=this._defaultLanguage||C(this.supportedLanguages);this._map.setStyle(this.setLanguage(D,N))};function C(D){const N=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage,U=N&&N.split("-");let G=N;return U.length>1&&(G=U[0]),D.indexOf(G)>-1?G:null}o.prototype.onAdd=function(D){return this._map=D,this._map.on("style.load",this._initialStyleUpdate),this._container=document.createElement("div"),this._container},o.prototype.onRemove=function(){this._map.off("style.load",this._initialStyleUpdate),this._map=void 0},t.exports=o})(Vy);var JM=Vy.exports;const GC=ol(JM),QM=Ne.createContext(null);function eC(t,o){const c=Array.isArray(t)?t[0]:t?t.x:0,p=Array.isArray(t)?t[1]:t?t.y:0,_=Array.isArray(o)?o[0]:o?o.x:0,x=Array.isArray(o)?o[1]:o?o.y:0;return c===_&&p===x}function to(t,o){if(t===o)return!0;if(!t||!o)return!1;if(Array.isArray(t)){if(!Array.isArray(o)||t.length!==o.length)return!1;for(let c=0;c<t.length;c++)if(!to(t[c],o[c]))return!1;return!0}else if(Array.isArray(o))return!1;if(typeof t=="object"&&typeof o=="object"){const c=Object.keys(t),p=Object.keys(o);if(c.length!==p.length)return!1;for(const _ of c)if(!o.hasOwnProperty(_)||!to(t[_],o[_]))return!1;return!0}return!1}function tC(t){const o=t.clone();return o.pixelsToGLUnits=t.pixelsToGLUnits,o}function $m(t,o){if(!t.getProjection)return;const c=t.getProjection(),p=o.getProjection();to(c,p)||o.setProjection(c)}function Zm(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function Wm(t,o){const c=o.viewState||o;let p=!1;if("zoom"in c){const _=t.zoom;t.zoom=c.zoom,p=p||_!==t.zoom}if("bearing"in c){const _=t.bearing;t.bearing=c.bearing,p=p||_!==t.bearing}if("pitch"in c){const _=t.pitch;t.pitch=c.pitch,p=p||_!==t.pitch}if(c.padding&&!t.isPaddingEqual(c.padding)&&(p=!0,t.padding=c.padding),"longitude"in c&&"latitude"in c){const _=t.center;t.center=new _.constructor(c.longitude,c.latitude),p=p||_!==t.center}return p}const nC=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function qm(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const o={};for(const p of t.layers)o[p.id]=p;const c=t.layers.map(p=>{let _=null;"interactive"in p&&(_=Object.assign({},p),delete _.interactive);const x=o[p.ref];if(x){_=_||Object.assign({},p),delete _.ref;for(const E of nC)E in x&&(_[E]=x[E])}return _||p});return{...t,layers:c}}const Hm={version:8,sources:{},layers:[]},Xm={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},l6={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Km={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},rC=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],iC=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Qc{constructor(o,c,p){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=_=>{const x=this.props[Km[_.type]];x?x(_):_.type==="error"&&console.error(_.error)},this._onPointerEvent=_=>{(_.type==="mousemove"||_.type==="mouseout")&&this._updateHover(_);const x=this.props[Xm[_.type]];x&&(this.props.interactiveLayerIds&&_.type!=="mouseover"&&_.type!=="mouseout"&&(_.features=this._hoveredFeatures||this._queryRenderedFeatures(_.point)),x(_),delete _.features)},this._onCameraEvent=_=>{if(!this._internalUpdate){const x=this.props[l6[_.type]];x&&x(_)}_.type in this._deferredEvents&&(this._deferredEvents[_.type]=!1)},this._MapClass=o,this.props=c,this._initialize(p)}get map(){return this._map}get transform(){return this._renderTransform}setProps(o){const c=this.props;this.props=o;const p=this._updateSettings(o,c);p&&this._createShadowTransform(this._map);const _=this._updateSize(o),x=this._updateViewState(o,!0);this._updateStyle(o,c),this._updateStyleComponents(o,c),this._updateHandlers(o,c),(p||_||x&&!this._map.isMoving())&&this.redraw()}static reuse(o,c){const p=Qc.savedMaps.pop();if(!p)return null;const _=p.map,x=_.getContainer();for(c.className=x.className;x.childNodes.length>0;)c.appendChild(x.childNodes[0]);_._container=c;const E=_._resizeObserver;E&&(E.disconnect(),E.observe(c)),p.setProps({...o,styleDiffing:!1}),_.resize();const{initialViewState:s}=o;return s&&(s.bounds?_.fitBounds(s.bounds,{...s.fitBoundsOptions,duration:0}):p._updateViewState(s,!1)),_.isStyleLoaded()?_.fire("load"):_.once("styledata",()=>_.fire("load")),_._update(),p}_initialize(o){const{props:c}=this,{mapStyle:p=Hm}=c,_={...c,...c.initialViewState,accessToken:c.mapboxAccessToken||oC()||null,container:o,style:qm(p)},x=_.initialViewState||_.viewState||_;if(Object.assign(_,{center:[x.longitude||0,x.latitude||0],zoom:x.zoom||0,pitch:x.pitch||0,bearing:x.bearing||0}),c.gl){const N=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=N,c.gl)}const E=new this._MapClass(_);x.padding&&E.setPadding(x.padding),c.cursor&&(E.getCanvas().style.cursor=c.cursor),this._createShadowTransform(E);const s=E._render;E._render=N=>{this._inRender=!0,s.call(E,N),this._inRender=!1};const C=E._renderTaskQueue.run;E._renderTaskQueue.run=N=>{C.call(E._renderTaskQueue,N),this._onBeforeRepaint()},E.on("render",()=>this._onAfterRepaint());const D=E.fire;E.fire=this._fireEvent.bind(this,D),E.on("resize",()=>{this._renderTransform.resize(E.transform.width,E.transform.height)}),E.on("styledata",()=>{this._updateStyleComponents(this.props,{}),$m(E.transform,this._renderTransform)}),E.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const N in Xm)E.on(N,this._onPointerEvent);for(const N in l6)E.on(N,this._onCameraEvent);for(const N in Km)E.on(N,this._onEvent);this._map=E}recycle(){const c=this.map.getContainer().querySelector("[mapboxgl-children]");c==null||c.remove(),Qc.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const o=this._map;!this._inRender&&o.style&&(o._frame&&(o._frame.cancel(),o._frame=null),o._render())}_createShadowTransform(o){const c=tC(o.transform);o.painter.transform=c,this._renderTransform=c}_updateSize(o){const{viewState:c}=o;if(c){const p=this._map;if(c.width!==p.transform.width||c.height!==p.transform.height)return p.resize(),!0}return!1}_updateViewState(o,c){if(this._internalUpdate)return!1;const p=this._map,_=this._renderTransform,{zoom:x,pitch:E,bearing:s}=_,C=p.isMoving();C&&(_.cameraElevationReference="sea");const D=Wm(_,{...Zm(p.transform),...o});if(C&&(_.cameraElevationReference="ground"),D&&c){const N=this._deferredEvents;N.move=!0,N.zoom||(N.zoom=x!==_.zoom),N.rotate||(N.rotate=s!==_.bearing),N.pitch||(N.pitch=E!==_.pitch)}return C||Wm(p.transform,o),D}_updateSettings(o,c){const p=this._map;let _=!1;for(const x of rC)if(x in o&&!to(o[x],c[x])){_=!0;const E=p[`set${x[0].toUpperCase()}${x.slice(1)}`];E==null||E.call(p,o[x])}return _}_updateStyle(o,c){if(o.cursor!==c.cursor&&(this._map.getCanvas().style.cursor=o.cursor||""),o.mapStyle!==c.mapStyle){const{mapStyle:p=Hm,styleDiffing:_=!0}=o,x={diff:_};return"localIdeographFontFamily"in o&&(x.localIdeographFontFamily=o.localIdeographFontFamily),this._map.setStyle(qm(p),x),!0}return!1}_updateStyleComponents(o,c){const p=this._map;let _=!1;return p.isStyleLoaded()&&("light"in o&&p.setLight&&!to(o.light,c.light)&&(_=!0,p.setLight(o.light)),"fog"in o&&p.setFog&&!to(o.fog,c.fog)&&(_=!0,p.setFog(o.fog)),"terrain"in o&&p.setTerrain&&!to(o.terrain,c.terrain)&&(!o.terrain||p.getSource(o.terrain.source))&&(_=!0,p.setTerrain(o.terrain))),_}_updateHandlers(o,c){var p,_;const x=this._map;let E=!1;for(const s of iC){const C=(p=o[s])!==null&&p!==void 0?p:!0,D=(_=c[s])!==null&&_!==void 0?_:!0;to(C,D)||(E=!0,C?x[s].enable(C):x[s].disable())}return E}_queryRenderedFeatures(o){const c=this._map,p=c.transform,{interactiveLayerIds:_=[]}=this.props;try{return c.transform=this._renderTransform,c.queryRenderedFeatures(o,{layers:_.filter(c.getLayer.bind(c))})}catch{return[]}finally{c.transform=p}}_updateHover(o){var c;const{props:p}=this;if(p.interactiveLayerIds&&(p.onMouseMove||p.onMouseEnter||p.onMouseLeave)){const x=o.type,E=((c=this._hoveredFeatures)===null||c===void 0?void 0:c.length)>0,s=this._queryRenderedFeatures(o.point),C=s.length>0;!C&&E&&(o.type="mouseleave",this._onPointerEvent(o)),this._hoveredFeatures=s,C&&!E&&(o.type="mouseenter",this._onPointerEvent(o)),o.type=x}else this._hoveredFeatures=null}_fireEvent(o,c,p){const _=this._map,x=_.transform,E=typeof c=="string"?c:c.type;return E==="move"&&this._updateViewState(this.props,!1),E in l6&&(typeof c=="object"&&(c.viewState=Zm(x)),this._map.isMoving())?(_.transform=this._renderTransform,o.call(_,c,p),_.transform=x,_):(o.call(_,c,p),_)}_onBeforeRepaint(){const o=this._map;this._internalUpdate=!0;for(const p in this._deferredEvents)this._deferredEvents[p]&&o.fire(p);this._internalUpdate=!1;const c=this._map.transform;o.transform=this._renderTransform,this._onAfterRepaint=()=>{$m(this._renderTransform,c),o.transform=c}}}Qc.savedMaps=[];function oC(){let t=null;if(typeof location<"u"){const o=/access_token=([^&\/]*)/.exec(location.search);t=o&&o[1]}try{t=t||{}.MapboxAccessToken}catch{}try{t=t||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const sC=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function aC(t){if(!t)return null;const o=t.map,c={getMap:()=>o,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:p=>{const _=o.transform;o.transform=t.transform;const x=o.project(p);return o.transform=_,x},unproject:p=>{const _=o.transform;o.transform=t.transform;const x=o.unproject(p);return o.transform=_,x},queryTerrainElevation:(p,_)=>{const x=o.transform;o.transform=t.transform;const E=o.queryTerrainElevation(p,_);return o.transform=x,E},queryRenderedFeatures:(p,_)=>{const x=o.transform;o.transform=t.transform;const E=o.queryRenderedFeatures(p,_);return o.transform=x,E}};for(const p of lC(o))!(p in c)&&!sC.includes(p)&&(c[p]=o[p].bind(o));return c}function lC(t){const o=new Set;let c=t;for(;c;){for(const p of Object.getOwnPropertyNames(c))p[0]!=="_"&&typeof t[p]=="function"&&p!=="fire"&&p!=="setEventedParent"&&o.add(p);c=Object.getPrototypeOf(c)}return Array.from(o)}const cC=typeof document<"u"?Ne.useLayoutEffect:Ne.useEffect,uC=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function hC(t,o){for(const p of uC)p in o&&(t[p]=o[p]);const{RTLTextPlugin:c="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=o;c&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(c,p=>{p&&console.error(p)},!0)}const iu=Ne.createContext(null);function dC(t,o,c){const p=Ne.useContext(QM),[_,x]=Ne.useState(null),E=Ne.useRef(),{current:s}=Ne.useRef({mapLib:null,map:null});Ne.useEffect(()=>{const N=t.mapLib;let U=!0,G;return Promise.resolve(N||c).then(ce=>{if(!U)return;if(!ce)throw new Error("Invalid mapLib");const ge="Map"in ce?ce:ce.default;if(!ge.Map)throw new Error("Invalid mapLib");if(hC(ge,t),!ge.supported||ge.supported(t))t.reuseMaps&&(G=Qc.reuse(t,E.current)),G||(G=new Qc(ge.Map,t,E.current)),s.map=aC(G),s.mapLib=ge,x(G),p==null||p.onMapMount(s.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(ce=>{const{onError:ge}=t;ge?ge({type:"error",target:null,originalEvent:null,error:ce}):console.error(ce)}),()=>{U=!1,G&&(p==null||p.onMapUnmount(t.id),t.reuseMaps?G.recycle():G.destroy())}},[]),cC(()=>{_&&_.setProps(t)}),Ne.useImperativeHandle(o,()=>s.map,[_]);const C=Ne.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),D={height:"100%"};return Ne.createElement("div",{id:t.id,ref:E,style:C},_&&Ne.createElement(iu.Provider,{value:s},Ne.createElement("div",{"mapboxgl-children":"",style:D},t.children)))}const pC=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function m1(t,o){if(!t||!o)return;const c=t.style;for(const p in o){const _=o[p];Number.isFinite(_)&&!pC.test(p)?c[p]=`${_}px`:c[p]=_}}function fC(t,o){const{map:c,mapLib:p}=Ne.useContext(iu),_=Ne.useRef({props:t});_.current.props=t;const x=Ne.useMemo(()=>{let xe=!1;Ne.Children.forEach(t.children,ee=>{ee&&(xe=!0)});const $e={...t,element:xe?document.createElement("div"):null},ne=new p.Marker($e);return ne.setLngLat([t.longitude,t.latitude]),ne.getElement().addEventListener("click",ee=>{var oe,Te;(Te=(oe=_.current.props).onClick)===null||Te===void 0||Te.call(oe,{type:"click",target:ne,originalEvent:ee})}),ne.on("dragstart",ee=>{var oe,Te;const Oe=ee;Oe.lngLat=x.getLngLat(),(Te=(oe=_.current.props).onDragStart)===null||Te===void 0||Te.call(oe,Oe)}),ne.on("drag",ee=>{var oe,Te;const Oe=ee;Oe.lngLat=x.getLngLat(),(Te=(oe=_.current.props).onDrag)===null||Te===void 0||Te.call(oe,Oe)}),ne.on("dragend",ee=>{var oe,Te;const Oe=ee;Oe.lngLat=x.getLngLat(),(Te=(oe=_.current.props).onDragEnd)===null||Te===void 0||Te.call(oe,Oe)}),ne},[]);Ne.useEffect(()=>(x.addTo(c.getMap()),()=>{x.remove()}),[]);const{longitude:E,latitude:s,offset:C,style:D,draggable:N=!1,popup:U=null,rotation:G=0,rotationAlignment:ce="auto",pitchAlignment:ge="auto"}=t;return Ne.useEffect(()=>{m1(x.getElement(),D)},[D]),Ne.useImperativeHandle(o,()=>x,[]),(x.getLngLat().lng!==E||x.getLngLat().lat!==s)&&x.setLngLat([E,s]),C&&!eC(x.getOffset(),C)&&x.setOffset(C),x.isDraggable()!==N&&x.setDraggable(N),x.getRotation()!==G&&x.setRotation(G),x.getRotationAlignment()!==ce&&x.setRotationAlignment(ce),x.getPitchAlignment()!==ge&&x.setPitchAlignment(ge),x.getPopup()!==U&&x.setPopup(U),R2.createPortal(t.children,x.getElement())}const mC=Ne.memo(Ne.forwardRef(fC));function Ym(t){return new Set(t?t.trim().split(/\s+/):[])}function _C(t,o){const{map:c,mapLib:p}=Ne.useContext(iu),_=Ne.useMemo(()=>document.createElement("div"),[]),x=Ne.useRef({props:t});x.current.props=t;const E=Ne.useMemo(()=>{const s={...t},C=new p.Popup(s);return C.setLngLat([t.longitude,t.latitude]),C.once("open",D=>{var N,U;(U=(N=x.current.props).onOpen)===null||U===void 0||U.call(N,D)}),C},[]);if(Ne.useEffect(()=>{const s=C=>{var D,N;(N=(D=x.current.props).onClose)===null||N===void 0||N.call(D,C)};return E.on("close",s),E.setDOMContent(_).addTo(c.getMap()),()=>{E.off("close",s),E.isOpen()&&E.remove()}},[]),Ne.useEffect(()=>{m1(E.getElement(),t.style)},[t.style]),Ne.useImperativeHandle(o,()=>E,[]),E.isOpen()&&((E.getLngLat().lng!==t.longitude||E.getLngLat().lat!==t.latitude)&&E.setLngLat([t.longitude,t.latitude]),t.offset&&!to(E.options.offset,t.offset)&&E.setOffset(t.offset),(E.options.anchor!==t.anchor||E.options.maxWidth!==t.maxWidth)&&(E.options.anchor=t.anchor,E.setMaxWidth(t.maxWidth)),E.options.className!==t.className)){const s=Ym(E.options.className),C=Ym(t.className);for(const D of s)C.has(D)||E.removeClassName(D);for(const D of C)s.has(D)||E.addClassName(D);E.options.className=t.className}return R2.createPortal(t.children,_)}Ne.memo(Ne.forwardRef(_C));function B2(t,o,c,p){const _=Ne.useContext(iu),x=Ne.useMemo(()=>t(_),[]);return Ne.useEffect(()=>{const E=p||c||o,s=typeof o=="function"&&typeof c=="function"?o:null,C=typeof c=="function"?c:typeof o=="function"?o:null,{map:D}=_;return D.hasControl(x)||(D.addControl(x,E==null?void 0:E.position),s&&s(_)),()=>{C&&C(_),D.hasControl(x)&&D.removeControl(x)}},[]),x}function gC(t){const o=B2(({mapLib:c})=>new c.AttributionControl(t),{position:t.position});return Ne.useEffect(()=>{m1(o._container,t.style)},[t.style]),null}Ne.memo(gC);function yC(t){const o=B2(({mapLib:c})=>new c.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return Ne.useEffect(()=>{m1(o._controlContainer,t.style)},[t.style]),null}const vC=Ne.memo(yC);function xC(t,o){const c=Ne.useRef({props:t}),p=B2(({mapLib:_})=>{const x=new _.GeolocateControl(t),E=x._setupUI;return x._setupUI=s=>{x._container.hasChildNodes()||E(s)},x.on("geolocate",s=>{var C,D;(D=(C=c.current.props).onGeolocate)===null||D===void 0||D.call(C,s)}),x.on("error",s=>{var C,D;(D=(C=c.current.props).onError)===null||D===void 0||D.call(C,s)}),x.on("outofmaxbounds",s=>{var C,D;(D=(C=c.current.props).onOutOfMaxBounds)===null||D===void 0||D.call(C,s)}),x.on("trackuserlocationstart",s=>{var C,D;(D=(C=c.current.props).onTrackUserLocationStart)===null||D===void 0||D.call(C,s)}),x.on("trackuserlocationend",s=>{var C,D;(D=(C=c.current.props).onTrackUserLocationEnd)===null||D===void 0||D.call(C,s)}),x},{position:t.position});return c.current.props=t,Ne.useImperativeHandle(o,()=>p,[]),Ne.useEffect(()=>{m1(p._container,t.style)},[t.style]),null}Ne.memo(Ne.forwardRef(xC));function wC(t){const o=B2(({mapLib:c})=>new c.NavigationControl(t),{position:t.position});return Ne.useEffect(()=>{m1(o._container,t.style)},[t.style]),null}const bC=Ne.memo(wC);function TC(t){const o=B2(({mapLib:x})=>new x.ScaleControl(t),{position:t.position}),c=Ne.useRef(t),p=c.current;c.current=t;const{style:_}=t;return t.maxWidth!==void 0&&t.maxWidth!==p.maxWidth&&(o.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==p.unit&&o.setUnit(t.unit),Ne.useEffect(()=>{m1(o._container,_)},[_]),null}Ne.memo(TC);function C5(t,o){if(!t)throw new Error(o)}function EC(t,o,c,p){if(C5(c.id===p.id,"layer id changed"),C5(c.type===p.type,"layer type changed"),c.type==="custom"||p.type==="custom")return;const{layout:_={},paint:x={},filter:E,minzoom:s,maxzoom:C,beforeId:D}=c;if(D!==p.beforeId&&t.moveLayer(o,D),_!==p.layout){const N=p.layout||{};for(const U in _)to(_[U],N[U])||t.setLayoutProperty(o,U,_[U]);for(const U in N)_.hasOwnProperty(U)||t.setLayoutProperty(o,U,void 0)}if(x!==p.paint){const N=p.paint||{};for(const U in x)to(x[U],N[U])||t.setPaintProperty(o,U,x[U]);for(const U in N)x.hasOwnProperty(U)||t.setPaintProperty(o,U,void 0)}to(E,p.filter)||t.setFilter(o,E),(s!==p.minzoom||C!==p.maxzoom)&&t.setLayerZoomRange(o,s,C)}function SC(t,o,c){if(t.style&&t.style._loaded&&(!("source"in c)||t.getSource(c.source))){const p={...c,id:o};delete p.beforeId,t.addLayer(p,c.beforeId)}}let MC=0;function CC(t){const o=Ne.useContext(iu).map.getMap(),c=Ne.useRef(t),[,p]=Ne.useState(0),_=Ne.useMemo(()=>t.id||`jsx-layer-${MC++}`,[]);if(Ne.useEffect(()=>{if(o){const E=()=>p(s=>s+1);return o.on("styledata",E),E(),()=>{o.off("styledata",E),o.style&&o.style._loaded&&o.getLayer(_)&&o.removeLayer(_)}}},[o]),o&&o.style&&o.getLayer(_))try{EC(o,_,t,c.current)}catch(E){console.warn(E)}else SC(o,_,t);return c.current=t,null}let PC=0;function AC(t,o,c){if(t.style&&t.style._loaded){const p={...c};return delete p.id,delete p.children,t.addSource(o,p),t.getSource(o)}return null}function IC(t,o,c){C5(o.id===c.id,"source id changed"),C5(o.type===c.type,"source type changed");let p="",_=0;for(const E in o)E!=="children"&&E!=="id"&&!to(c[E],o[E])&&(p=E,_++);if(!_)return;const x=o.type;x==="geojson"?t.setData(o.data):x==="image"?t.updateImage({url:o.url,coordinates:o.coordinates}):"setCoordinates"in t&&_===1&&p==="coordinates"?t.setCoordinates(o.coordinates):"setUrl"in t&&p==="url"?t.setUrl(o.url):"setTiles"in t&&p==="tiles"?t.setTiles(o.tiles):console.warn(`Unable to update <Source> prop: ${p}`)}function kC(t){const o=Ne.useContext(iu).map.getMap(),c=Ne.useRef(t),[,p]=Ne.useState(0),_=Ne.useMemo(()=>t.id||`jsx-source-${PC++}`,[]);Ne.useEffect(()=>{if(o){const E=()=>setTimeout(()=>p(s=>s+1),0);return o.on("styledata",E),E(),()=>{var s;if(o.off("styledata",E),o.style&&o.style._loaded&&o.getSource(_)){const C=(s=o.getStyle())===null||s===void 0?void 0:s.layers;if(C)for(const D of C)D.source===_&&o.removeLayer(D.id);o.removeSource(_)}}}},[o]);let x=o&&o.style&&o.getSource(_);return x?IC(x,t,c.current):x=AC(o,_,t),c.current=t,x&&Ne.Children.map(t.children,E=>E&&Ne.cloneElement(E,{source:_}))||null}const LC=YM(()=>Promise.resolve().then(()=>RC),void 0),$C=(()=>Ne.forwardRef(function(o,c){return dC(o,c,LC)}))(),ZC=mC,WC=vC,qC=bC,HC=CC,XC=kC;var zC={},Gy={},$y={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){for(var _=arguments.length,x=new Array(_),E=0;E<_;E++)x[E]=arguments[E];if(typeof window<"u"){var s;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(s=window).gtag.apply(s,x)}},c=o;t.default=c})($y);var Zy={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=E;var o=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function c(s){return s.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(C,D,N){return D>0&&D+C.length!==N.length&&C.search(o)>-1&&N.charAt(D-2)!==":"&&(N.charAt(D+C.length)!=="-"||N.charAt(D-1)==="-")&&N.charAt(D-1).search(/[^\s-]/)<0?C.toLowerCase():C.substr(1).search(/[A-Z]|\../)>-1?C:C.charAt(0).toUpperCase()+C.substr(1)})}function p(s){return typeof s=="string"&&s.indexOf("@")!==-1}var _="REDACTED (Potential Email Address)";function x(s){return p(s)?(console.warn("This arg looks like an email address, redacting."),_):s}function E(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,N=s||"";return C&&(N=c(s)),D&&(N=x(N)),N}})(Zy);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GA4=void 0;var o=E($y),c=E(Zy),p=["eventCategory","eventAction","eventLabel","eventValue","hitType"],_=["title","location"],x=["page","hitType"];function E(He){return He&&He.__esModule?He:{default:He}}function s(He,Ve){if(He==null)return{};var Je=C(He,Ve),it,Ee;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(He);for(Ee=0;Ee<ct.length;Ee++)it=ct[Ee],!(Ve.indexOf(it)>=0)&&Object.prototype.propertyIsEnumerable.call(He,it)&&(Je[it]=He[it])}return Je}function C(He,Ve){if(He==null)return{};var Je={},it=Object.keys(He),Ee,ct;for(ct=0;ct<it.length;ct++)Ee=it[ct],!(Ve.indexOf(Ee)>=0)&&(Je[Ee]=He[Ee]);return Je}function D(He){"@babel/helpers - typeof";return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ve){return typeof Ve}:function(Ve){return Ve&&typeof Symbol=="function"&&Ve.constructor===Symbol&&Ve!==Symbol.prototype?"symbol":typeof Ve},D(He)}function N(He){return ce(He)||G(He)||ee(He)||U()}function U(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G(He){if(typeof Symbol<"u"&&He[Symbol.iterator]!=null||He["@@iterator"]!=null)return Array.from(He)}function ce(He){if(Array.isArray(He))return oe(He)}function ge(He,Ve){var Je=Object.keys(He);if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(He);Ve&&(it=it.filter(function(Ee){return Object.getOwnPropertyDescriptor(He,Ee).enumerable})),Je.push.apply(Je,it)}return Je}function xe(He){for(var Ve=1;Ve<arguments.length;Ve++){var Je=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?ge(Object(Je),!0).forEach(function(it){ze(He,it,Je[it])}):Object.getOwnPropertyDescriptors?Object.defineProperties(He,Object.getOwnPropertyDescriptors(Je)):ge(Object(Je)).forEach(function(it){Object.defineProperty(He,it,Object.getOwnPropertyDescriptor(Je,it))})}return He}function $e(He,Ve){return Oe(He)||Te(He,Ve)||ee(He,Ve)||ne()}function ne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ee(He,Ve){if(He){if(typeof He=="string")return oe(He,Ve);var Je=Object.prototype.toString.call(He).slice(8,-1);if(Je==="Object"&&He.constructor&&(Je=He.constructor.name),Je==="Map"||Je==="Set")return Array.from(He);if(Je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Je))return oe(He,Ve)}}function oe(He,Ve){(Ve==null||Ve>He.length)&&(Ve=He.length);for(var Je=0,it=new Array(Ve);Je<Ve;Je++)it[Je]=He[Je];return it}function Te(He,Ve){var Je=He==null?null:typeof Symbol<"u"&&He[Symbol.iterator]||He["@@iterator"];if(Je!=null){var it,Ee,ct,yt,kt=[],Nt=!0,Zt=!1;try{if(ct=(Je=Je.call(He)).next,Ve===0){if(Object(Je)!==Je)return;Nt=!1}else for(;!(Nt=(it=ct.call(Je)).done)&&(kt.push(it.value),kt.length!==Ve);Nt=!0);}catch(cn){Zt=!0,Ee=cn}finally{try{if(!Nt&&Je.return!=null&&(yt=Je.return(),Object(yt)!==yt))return}finally{if(Zt)throw Ee}}return kt}}function Oe(He){if(Array.isArray(He))return He}function rt(He,Ve){if(!(He instanceof Ve))throw new TypeError("Cannot call a class as a function")}function we(He,Ve){for(var Je=0;Je<Ve.length;Je++){var it=Ve[Je];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(He,gt(it.key),it)}}function Ye(He,Ve,Je){return Ve&&we(He.prototype,Ve),Je&&we(He,Je),Object.defineProperty(He,"prototype",{writable:!1}),He}function ze(He,Ve,Je){return Ve=gt(Ve),Ve in He?Object.defineProperty(He,Ve,{value:Je,enumerable:!0,configurable:!0,writable:!0}):He[Ve]=Je,He}function gt(He){var Ve=Qt(He,"string");return D(Ve)==="symbol"?Ve:String(Ve)}function Qt(He,Ve){if(D(He)!=="object"||He===null)return He;var Je=He[Symbol.toPrimitive];if(Je!==void 0){var it=Je.call(He,Ve||"default");if(D(it)!=="object")return it;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ve==="string"?String:Number)(He)}var St=function(){function He(){var Ve=this;rt(this,He),ze(this,"reset",function(){Ve.isInitialized=!1,Ve._testMode=!1,Ve._currentMeasurementId,Ve._hasLoadedGA=!1,Ve._isQueuing=!1,Ve._queueGtag=[]}),ze(this,"_gtag",function(){for(var Je=arguments.length,it=new Array(Je),Ee=0;Ee<Je;Ee++)it[Ee]=arguments[Ee];Ve._testMode||Ve._isQueuing?Ve._queueGtag.push(it):o.default.apply(void 0,it)}),ze(this,"_loadGA",function(Je,it){var Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!Ve._hasLoadedGA){var ct=document.createElement("script");ct.async=!0,ct.src="".concat(Ee,"?id=").concat(Je),it&&ct.setAttribute("nonce",it),document.body.appendChild(ct),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},Ve._hasLoadedGA=!0}}),ze(this,"_toGtagOptions",function(Je){if(Je){var it={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},Ee=Object.entries(Je).reduce(function(ct,yt){var kt=$e(yt,2),Nt=kt[0],Zt=kt[1];return it[Nt]?ct[it[Nt]]=Zt:ct[Nt]=Zt,ct},{});return Ee}}),ze(this,"initialize",function(Je){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Je)throw new Error("Require GA_MEASUREMENT_ID");var Ee=typeof Je=="string"?[{trackingId:Je}]:Je;Ve._currentMeasurementId=Ee[0].trackingId;var ct=it.gaOptions,yt=it.gtagOptions,kt=it.nonce,Nt=it.testMode,Zt=Nt===void 0?!1:Nt,cn=it.gtagUrl;if(Ve._testMode=Zt,Zt||Ve._loadGA(Ve._currentMeasurementId,kt,cn),Ve.isInitialized||(Ve._gtag("js",new Date),Ee.forEach(function(On){var Ti=xe(xe(xe({},Ve._toGtagOptions(xe(xe({},ct),On.gaOptions))),yt),On.gtagOptions);Object.keys(Ti).length?Ve._gtag("config",On.trackingId,Ti):Ve._gtag("config",On.trackingId)})),Ve.isInitialized=!0,!Zt){var Zn=N(Ve._queueGtag);for(Ve._queueGtag=[],Ve._isQueuing=!1;Zn.length;){var Bn=Zn.shift();Ve._gtag.apply(Ve,N(Bn)),Bn[0]==="get"&&(Ve._isQueuing=!0)}}}),ze(this,"set",function(Je){if(!Je){console.warn("`fieldsObject` is required in .set()");return}if(D(Je)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(Je).length===0&&console.warn("empty `fieldsObject` given to .set()"),Ve._gaCommand("set",Je)}),ze(this,"_gaCommandSendEvent",function(Je,it,Ee,ct,yt){Ve._gtag("event",it,xe(xe({event_category:Je,event_label:Ee,value:ct},yt&&{non_interaction:yt.nonInteraction}),Ve._toGtagOptions(yt)))}),ze(this,"_gaCommandSendEventParameters",function(){for(var Je=arguments.length,it=new Array(Je),Ee=0;Ee<Je;Ee++)it[Ee]=arguments[Ee];if(typeof it[0]=="string")Ve._gaCommandSendEvent.apply(Ve,N(it.slice(1)));else{var ct=it[0],yt=ct.eventCategory,kt=ct.eventAction,Nt=ct.eventLabel,Zt=ct.eventValue;ct.hitType;var cn=s(ct,p);Ve._gaCommandSendEvent(yt,kt,Nt,Zt,cn)}}),ze(this,"_gaCommandSendTiming",function(Je,it,Ee,ct){Ve._gtag("event","timing_complete",{name:it,value:Ee,event_category:Je,event_label:ct})}),ze(this,"_gaCommandSendPageview",function(Je,it){if(it&&Object.keys(it).length){var Ee=Ve._toGtagOptions(it),ct=Ee.title,yt=Ee.location,kt=s(Ee,_);Ve._gtag("event","page_view",xe(xe(xe(xe({},Je&&{page_path:Je}),ct&&{page_title:ct}),yt&&{page_location:yt}),kt))}else Je?Ve._gtag("event","page_view",{page_path:Je}):Ve._gtag("event","page_view")}),ze(this,"_gaCommandSendPageviewParameters",function(){for(var Je=arguments.length,it=new Array(Je),Ee=0;Ee<Je;Ee++)it[Ee]=arguments[Ee];if(typeof it[0]=="string")Ve._gaCommandSendPageview.apply(Ve,N(it.slice(1)));else{var ct=it[0],yt=ct.page;ct.hitType;var kt=s(ct,x);Ve._gaCommandSendPageview(yt,kt)}}),ze(this,"_gaCommandSend",function(){for(var Je=arguments.length,it=new Array(Je),Ee=0;Ee<Je;Ee++)it[Ee]=arguments[Ee];var ct=typeof it[0]=="string"?it[0]:it[0].hitType;switch(ct){case"event":Ve._gaCommandSendEventParameters.apply(Ve,it);break;case"pageview":Ve._gaCommandSendPageviewParameters.apply(Ve,it);break;case"timing":Ve._gaCommandSendTiming.apply(Ve,N(it.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(ct));break;default:console.warn("Send command doesn't exist: ".concat(ct))}}),ze(this,"_gaCommandSet",function(){for(var Je=arguments.length,it=new Array(Je),Ee=0;Ee<Je;Ee++)it[Ee]=arguments[Ee];typeof it[0]=="string"&&(it[0]=ze({},it[0],it[1])),Ve._gtag("set",Ve._toGtagOptions(it[0]))}),ze(this,"_gaCommand",function(Je){for(var it=arguments.length,Ee=new Array(it>1?it-1:0),ct=1;ct<it;ct++)Ee[ct-1]=arguments[ct];switch(Je){case"send":Ve._gaCommandSend.apply(Ve,Ee);break;case"set":Ve._gaCommandSet.apply(Ve,Ee);break;default:console.warn("Command doesn't exist: ".concat(Je))}}),ze(this,"ga",function(){for(var Je=arguments.length,it=new Array(Je),Ee=0;Ee<Je;Ee++)it[Ee]=arguments[Ee];if(typeof it[0]=="string")Ve._gaCommand.apply(Ve,it);else{var ct=it[0];Ve._gtag("get",Ve._currentMeasurementId,"client_id",function(yt){Ve._isQueuing=!1;var kt=Ve._queueGtag;for(ct({get:function(cn){return cn==="clientId"?yt:cn==="trackingId"?Ve._currentMeasurementId:cn==="apiVersion"?"1":void 0}});kt.length;){var Nt=kt.shift();Ve._gtag.apply(Ve,N(Nt))}}),Ve._isQueuing=!0}return Ve.ga}),ze(this,"event",function(Je,it){if(typeof Je=="string")Ve._gtag("event",Je,Ve._toGtagOptions(it));else{var Ee=Je.action,ct=Je.category,yt=Je.label,kt=Je.value,Nt=Je.nonInteraction,Zt=Je.transport;if(!ct||!Ee){console.warn("args.category AND args.action are required in event()");return}var cn={hitType:"event",eventCategory:(0,c.default)(ct),eventAction:(0,c.default)(Ee)};yt&&(cn.eventLabel=(0,c.default)(yt)),typeof kt<"u"&&(typeof kt!="number"?console.warn("Expected `args.value` arg to be a Number."):cn.eventValue=kt),typeof Nt<"u"&&(typeof Nt!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):cn.nonInteraction=Nt),typeof Zt<"u"&&(typeof Zt!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(Zt)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),cn.transport=Zt)),Ve._gaCommand("send",cn)}}),ze(this,"send",function(Je){Ve._gaCommand("send",Je)}),this.reset()}return Ye(He,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),He}();t.GA4=St;var $t=new St;t.default=$t})(Gy);(function(t){function o(s){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},o(s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ReactGAImplementation=void 0;var c=_(Gy);function p(s){if(typeof WeakMap!="function")return null;var C=new WeakMap,D=new WeakMap;return(p=function(U){return U?D:C})(s)}function _(s,C){if(!C&&s&&s.__esModule)return s;if(s===null||o(s)!=="object"&&typeof s!="function")return{default:s};var D=p(C);if(D&&D.has(s))return D.get(s);var N={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var G in s)if(G!=="default"&&Object.prototype.hasOwnProperty.call(s,G)){var ce=U?Object.getOwnPropertyDescriptor(s,G):null;ce&&(ce.get||ce.set)?Object.defineProperty(N,G,ce):N[G]=s[G]}return N.default=s,D&&D.set(s,N),N}var x=c.GA4;t.ReactGAImplementation=x;var E=c.default;t.default=E})(zC);var Wy={exports:{}};(function(t,o){(function(c,p){t.exports=p()})(Tw,function(){var c,p,_;function x(s,C){if(!c)c=C;else if(!p)p=C;else{var D="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+c+")(sharedChunk); ("+p+")(sharedChunk); self.onerror = null;",N={};c(N),_=C(N),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(_.workerUrl=window.URL.createObjectURL(new Blob([D],{type:"text/javascript"})))}}x(["exports"],function(s){var C=typeof self<"u"?self:{},D="2.15.0";let N;const U={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(N==null){const n=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{N={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):n}catch{N=n}}return N},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!U.API_URL)return null;try{const n=new URL(U.API_URL);return n.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":n.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},G={supported:!1,testSupport:function(n){!xe&&ge&&($e?ne(n):ce=n)}};let ce,ge,xe=!1,$e=!1;function ne(n){const e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,ge),n.isContextLost())return;G.supported=!0}catch{}n.deleteTexture(e),xe=!0}C.document&&(ge=C.document.createElement("img"),ge.onload=function(){ce&&ne(ce),ce=null,$e=!0},ge.onerror=function(){xe=!0,ce=null},ge.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ee="01";function oe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Te=Oe;function Oe(n,e,r,a){this.cx=3*n,this.bx=3*(r-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(a-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=e,this.p2x=r,this.p2y=a}Oe.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,e){if(e===void 0&&(e=1e-6),n<0)return 0;if(n>1)return 1;for(var r=n,a=0;a<8;a++){var u=this.sampleCurveX(r)-n;if(Math.abs(u)<e)return r;var d=this.sampleCurveDerivativeX(r);if(Math.abs(d)<1e-6)break;r-=u/d}var m=0,y=1;for(r=n,a=0;a<20&&(u=this.sampleCurveX(r),!(Math.abs(u-n)<e));a++)n>u?m=r:y=r,r=.5*(y-m)+m;return r},solve:function(n,e){return this.sampleCurveY(this.solveCurveX(n,e))}};var rt=oe(Te),we=Ye;function Ye(n,e){this.x=n,this.y=e}Ye.prototype={clone:function(){return new Ye(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,e){return this.clone()._rotateAround(n,e)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var e=n.x-this.x,r=n.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,e){return Math.atan2(this.x*e-this.y*n,this.x*n+this.y*e)},_matMult:function(n){var e=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=e,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var e=Math.cos(n),r=Math.sin(n),a=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=a,this},_rotateAround:function(n,e){var r=Math.cos(n),a=Math.sin(n),u=e.y+a*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-a*(this.y-e.y),this.y=u,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ye.convert=function(n){return n instanceof Ye?n:Array.isArray(n)?new Ye(n[0],n[1]):n};var ze=oe(we);const gt=Math.PI/180,Qt=180/Math.PI;function St(n){return n*gt}function $t(n){return n*Qt}const He=[[0,0],[1,0],[1,1],[0,1]];function Ve(n){if(n<=0)return 0;if(n>=1)return 1;const e=n*n,r=e*n;return 4*(n<.5?r:3*(n-e)+r-.75)}function Je(n,e,r,a){const u=new rt(n,e,r,a);return function(d){return u.solve(d)}}const it=Je(.25,.1,.25,1);function Ee(n,e,r){return Math.min(r,Math.max(e,n))}function ct(n,e,r){return(r=Ee((r-n)/(e-n),0,1))*r*(3-2*r)}function yt(n,e,r){const a=r-e,u=((n-e)%a+a)%a+e;return u===e?r:u}function kt(n,e,r){if(!n.length)return r(null,[]);let a=n.length;const u=new Array(n.length);let d=null;n.forEach((m,y)=>{e(m,(w,b)=>{w&&(d=w),u[y]=b,--a==0&&r(d,u)})})}function Nt(n){const e=[];for(const r in n)e.push(n[r]);return e}function Zt(n,...e){for(const r of e)for(const a in r)n[a]=r[a];return n}let cn=1;function Zn(){return cn++}function Bn(){return function n(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,n)}()}function On(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Ti(n){return!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)}function Io(n,e){n.forEach(r=>{e[r]&&(e[r]=e[r].bind(e))})}function rs(n,e){return n.indexOf(e,n.length-e.length)!==-1}function on(n,e,r){const a={};for(const u in n)a[u]=e.call(r||this,n[u],u,n);return a}function tr(n,e,r){const a={};for(const u in n)e.call(r||this,n[u],u,n)&&(a[u]=n[u]);return a}function yr(n){return Array.isArray(n)?n.map(yr):typeof n=="object"&&n?on(n,yr):n}const is={};function Un(n){is[n]||(typeof console<"u"&&console.warn(n),is[n]=!0)}function vr(n,e,r){return(r.y-n.y)*(e.x-n.x)>(e.y-n.y)*(r.x-n.x)}function sa(n){let e=0;for(let r,a,u=0,d=n.length,m=d-1;u<d;m=u++)r=n[u],a=n[m],e+=(a.x-r.x)*(r.y+a.y);return e}function ji(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Fr(n){const e={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,a,u,d)=>{const m=u||d;return e[a]=!m||m.toLowerCase(),""}),e["max-age"]){const r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}let Ss=null;function os(n){if(Ss==null){const e=n.navigator?n.navigator.userAgent:null;Ss=!!n.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Ss}function Ms(n){try{const e=C[n];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}function ao(n,e){return[n[4*e],n[4*e+1],n[4*e+2],n[4*e+3]]}const Qr="mapbox-tiles";let lo=500,Cs=50,Br,Ir;function Zr(){try{return C.caches}catch{}}function co(){Zr()&&!Br&&(Br=C.caches.open(Qr))}function Vi(n){const e=n.indexOf("?");if(e<0)return n;const r=function(u){const d=u.indexOf("?");return d>0?u.slice(d+1).split("&"):[]}(n),a=r.filter(u=>{const d=u.split("=");return d[0]==="language"||d[0]==="worldview"});return a.length?`${n.slice(0,e)}?${a.join("&")}`:n.slice(0,e)}let Ps=1/0;const Or={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Or);class Gi extends Error{constructor(e,r,a){r===401&&Pe(a)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=r,this.url=a}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const uo=ji()?()=>self.worker&&self.worker.referrer:()=>(C.location.protocol==="blob:"?C.parent:C).location.href,ho=function(n,e){if(!(/^file:/.test(r=n.url)||/^file:/.test(uo())&&!/^\w+:/.test(r))){if(C.fetch&&C.Request&&C.AbortController&&C.Request.prototype.hasOwnProperty("signal"))return function(a,u){const d=new C.AbortController,m=new C.Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,referrer:uo(),referrerPolicy:a.referrerPolicy,signal:d.signal});let y=!1,w=!1;const b=(M=m.url).indexOf("sku=")>0&&Pe(M);var M;a.type==="json"&&m.headers.set("Accept","application/json");const A=(z,R,O)=>{if(w)return;if(z&&z.message!=="SecurityError"&&Un(z.toString()),R&&O)return I(R);const Z=Date.now();C.fetch(m).then(J=>{if(J.ok){const le=b?J.clone():null;return I(J,le,Z)}return u(new Gi(J.statusText,J.status,a.url))}).catch(J=>{J.name!=="AbortError"&&u(new Error(`${J.message} ${a.url}`))})},I=(z,R,O)=>{(a.type==="arrayBuffer"?z.arrayBuffer():a.type==="json"?z.json():z.text()).then(Z=>{w||(R&&O&&function(J,le,Q){if(co(),!Br)return;const ae={status:le.status,statusText:le.statusText,headers:new C.Headers};le.headers.forEach((De,Ie)=>ae.headers.set(Ie,De));const he=Fr(le.headers.get("Cache-Control")||"");if(he["no-store"])return;he["max-age"]&&ae.headers.set("Expires",new Date(Q+1e3*he["max-age"]).toUTCString());const ue=ae.headers.get("Expires");ue&&(new Date(ue).getTime()-Q<42e4||function(De,Ie){if(Ir===void 0)try{new Response(new ReadableStream),Ir=!0}catch{Ir=!1}Ir?Ie(De.body):De.blob().then(Ie)}(le,De=>{const Ie=new C.Response(De,ae);co(),Br&&Br.then(Ze=>Ze.put(Vi(J.url),Ie)).catch(Ze=>Un(Ze.message))}))}(m,R,O),y=!0,u(null,Z,z.headers.get("Cache-Control"),z.headers.get("Expires")))}).catch(Z=>{w||u(new Error(Z.message))})};return b?function(z,R){if(co(),!Br)return R(null);const O=Vi(z.url);Br.then(Z=>{Z.match(O).then(J=>{const le=function(Q){if(!Q)return!1;const ae=new Date(Q.headers.get("Expires")||0),he=Fr(Q.headers.get("Cache-Control")||"");return ae>Date.now()&&!he["no-cache"]}(J);Z.delete(O),le&&Z.put(O,J.clone()),R(null,J,le)}).catch(R)}).catch(R)}(m,A):A(null,null),{cancel:()=>{w=!0,y||d.abort()}}}(n,e);if(ji()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",n,e,void 0,!0)}var r;return function(a,u){const d=new C.XMLHttpRequest;d.open(a.method||"GET",a.url,!0),a.type==="arrayBuffer"&&(d.responseType="arraybuffer");for(const m in a.headers)d.setRequestHeader(m,a.headers[m]);return a.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=a.credentials==="include",d.onerror=()=>{u(new Error(d.statusText))},d.onload=()=>{if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){let m=d.response;if(a.type==="json")try{m=JSON.parse(d.response)}catch(y){return u(y)}u(null,m,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else u(new Gi(d.statusText,d.status,a.url))},d.send(a.body),{cancel:()=>d.abort()}}(n,e)},ss=function(n,e){return ho(Zt(n,{type:"arrayBuffer"}),e)};function As(n){const e=C.document.createElement("a");return e.href=n,e.protocol===C.document.location.protocol&&e.host===C.document.location.host}const se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let j,V;j=[],V=0;const ie=function(n,e){if(G.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),V>=U.MAX_PARALLEL_IMAGE_REQUESTS){const d={requestParameters:n,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return j.push(d),d}V++;let r=!1;const a=()=>{if(!r)for(r=!0,V--;j.length&&V<U.MAX_PARALLEL_IMAGE_REQUESTS;){const d=j.shift(),{requestParameters:m,callback:y,cancelled:w}=d;w||(d.cancel=ie(m,y).cancel)}},u=ss(n,(d,m,y,w)=>{a(),d?e(d):m&&(C.createImageBitmap?function(b,M){const A=new C.Blob([new Uint8Array(b)],{type:"image/png"});C.createImageBitmap(A).then(I=>{M(null,I)}).catch(I=>{M(new Error(`Could not load image because of ${I.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(m,(b,M)=>e(b,M,y,w)):function(b,M){const A=new C.Image,I=C.URL;A.onload=()=>{M(null,A),I.revokeObjectURL(A.src),A.onload=null,C.requestAnimationFrame(()=>{A.src=se})},A.onerror=()=>M(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const z=new C.Blob([new Uint8Array(b)],{type:"image/png"});A.src=b.byteLength?I.createObjectURL(z):se}(m,(b,M)=>e(b,M,y,w)))});return{cancel:()=>{u.cancel(),a()}}},de="NO_ACCESS_TOKEN";function ve(n){return n.indexOf("mapbox:")===0}function Pe(n){return U.API_URL_REGEX.test(n)}function Ce(n){return U.API_CDN_URL_REGEX.test(n)}function ye(n){return U.API_STYLE_REGEX.test(n)&&!Re(n)}function Re(n){return U.API_SPRITE_REGEX.test(n)}const ht=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function pt(n){const e=n.match(ht);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function K(n){const e=n.params.length?`?${n.params.join("&")}`:"";return`${n.protocol}://${n.authority}${n.path}${e}`}const _e="mapbox.eventData";function Me(n){if(!n)return null;const e=n.split(".");if(!e||e.length!==3)return null;try{return JSON.parse(decodeURIComponent(C.atob(e[1]).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Ue{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const r=Me(U.ACCESS_TOKEN);let a="";return a=r&&r.u?C.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,(u,d)=>String.fromCharCode(+("0x"+d)))):U.ACCESS_TOKEN||"",e?`${_e}.${e}:${a}`:`${_e}:${a}`}fetchEventData(){const e=Ms("localStorage"),r=this.getStorageKey(),a=this.getStorageKey("uuid");if(e)try{const u=C.localStorage.getItem(r);u&&(this.eventData=JSON.parse(u));const d=C.localStorage.getItem(a);d&&(this.anonId=d)}catch{Un("Unable to read from LocalStorage")}}saveEventData(){const e=Ms("localStorage"),r=this.getStorageKey(),a=this.getStorageKey("uuid");if(e)try{C.localStorage.setItem(a,this.anonId),Object.keys(this.eventData).length>=1&&C.localStorage.setItem(r,JSON.stringify(this.eventData))}catch{Un("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,r,a,u){if(!U.EVENTS_URL)return;const d=pt(U.EVENTS_URL);d.params.push(`access_token=${u||U.ACCESS_TOKEN||""}`);const m={event:this.type,created:new Date(e).toISOString()},y=r?Zt(m,r):m,w={url:K(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([y])};this.pendingRequest=function(b,M){return ho(Zt(b,{method:"POST"}),M)}(w,b=>{this.pendingRequest=null,a(b),this.saveEventData(),this.processRequests(u)})}queueRequest(e,r){this.queue.push(e),this.processRequests(r)}}const tt=new class extends Ue{constructor(n){super("appUserTurnstile"),this._customAccessToken=n}postTurnstileEvent(n,e){U.EVENTS_URL&&U.ACCESS_TOKEN&&Array.isArray(n)&&n.some(r=>ve(r)||Pe(r))&&this.queueRequest(Date.now(),e)}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=Me(U.ACCESS_TOKEN),r=e?e.u:U.ACCESS_TOKEN;let a=r!==this.eventData.tokenU;Ti(this.anonId)||(this.anonId=Bn(),a=!0);const u=this.queue.shift();if(this.eventData.lastSuccess){const d=new Date(this.eventData.lastSuccess),m=new Date(u),y=(u-this.eventData.lastSuccess)/864e5;a=a||y>=1||y<-1||d.getDate()!==m.getDate()}else a=!0;a?this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:D,skuId:ee,"enabled.telemetry":!1,userId:this.anonId},d=>{d||(this.eventData.lastSuccess=u,this.eventData.tokenU=r)},n):this.processRequests()}},ft=tt.postTurnstileEvent.bind(tt),It=new class extends Ue{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(n,e,r,a){this.skuToken=e,this.errorCb=a,U.EVENTS_URL&&(r||U.ACCESS_TOKEN?this.queueRequest({id:n,timestamp:Date.now()},r):this.errorCb(new Error(de)))}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),Ti(this.anonId)||(this.anonId=Bn()),this.postEvent(r,{sdkIdentifier:"mapbox-gl-js",sdkVersion:D,skuId:ee,skuToken:this.skuToken,userId:this.anonId},a=>{a?this.errorCb(a):e&&(this.success[e]=!0)},n))}},Tt=It.postMapLoadEvent.bind(It),Mt=new class extends Ue{constructor(){super("gljs.performance")}postPerformanceEvent(n,e){U.EVENTS_URL&&(n||U.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},n)}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:e,performanceData:r}=this.queue.shift(),a=function(u){const d=C.performance.getEntriesByType("resource"),m=C.performance.getEntriesByType("mark"),y=function(I){const z={};if(I){for(const R in I)if(R!=="other")for(const O of I[R]){const Z=`${R}ResolveRangeMin`,J=`${R}ResolveRangeMax`,le=`${R}RequestCount`,Q=`${R}RequestCachedCount`;z[Z]=Math.min(z[Z]||1/0,O.startTime),z[J]=Math.max(z[J]||-1/0,O.responseEnd);const ae=he=>{z[he]===void 0&&(z[he]=0),++z[he]};O.transferSize!==void 0&&O.transferSize===0&&ae(Q),ae(le)}}return z}(function(I,z){const R={};if(I)for(const O of I){const Z=z(O);R[Z]===void 0&&(R[Z]=[]),R[Z].push(O)}return R}(d,gn)),w=C.devicePixelRatio,b=C.navigator.connection||C.navigator.mozConnection||C.navigator.webkitConnection,M={counters:[],metadata:[],attributes:[]},A=(I,z,R)=>{R!=null&&I.push({name:z,value:R.toString()})};for(const I in y)A(M.counters,I,y[I]);if(u.interactionRange[0]!==1/0&&u.interactionRange[1]!==-1/0&&(A(M.counters,"interactionRangeMin",u.interactionRange[0]),A(M.counters,"interactionRangeMax",u.interactionRange[1])),m)for(const I of Object.keys(Hn)){const z=Hn[I],R=m.find(O=>O.name===z);R&&A(M.counters,z,R.startTime)}return A(M.counters,"visibilityHidden",u.visibilityHidden),A(M.attributes,"style",function(I){if(I)for(const z of I){const R=z.name.split("?")[0];if(ye(R)){const O=R.split("/").slice(-2);if(O.length===2)return`mapbox://styles/${O[0]}/${O[1]}`}}}(d)),A(M.attributes,"terrainEnabled",u.terrainEnabled?"true":"false"),A(M.attributes,"fogEnabled",u.fogEnabled?"true":"false"),A(M.attributes,"projection",u.projection),A(M.attributes,"zoom",u.zoom),A(M.metadata,"devicePixelRatio",w),A(M.metadata,"connectionEffectiveType",b?b.effectiveType:void 0),A(M.metadata,"navigatorUserAgent",C.navigator.userAgent),A(M.metadata,"screenWidth",C.screen.width),A(M.metadata,"screenHeight",C.screen.height),A(M.metadata,"windowWidth",C.innerWidth),A(M.metadata,"windowHeight",C.innerHeight),A(M.metadata,"mapWidth",u.width/w),A(M.metadata,"mapHeight",u.height/w),A(M.metadata,"webglRenderer",u.renderer),A(M.metadata,"webglVendor",u.vendor),A(M.metadata,"sdkVersion",D),A(M.metadata,"sdkIdentifier","mapbox-gl-js"),M}(r);for(const u of a.metadata);for(const u of a.counters);for(const u of a.attributes);this.postEvent(e,a,()=>{},n)}},wt=Mt.postPerformanceEvent.bind(Mt),zt=new class extends Ue{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(n,e,r,a){if(!U.API_URL||!U.SESSION_PATH)return;const u=pt(U.API_URL+U.SESSION_PATH);u.params.push(`sku=${e||""}`),u.params.push(`access_token=${a||U.ACCESS_TOKEN||""}`);const d={url:K(u),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(m,y){return ho(Zt(m,{method:"GET"}),y)}(d,m=>{this.pendingRequest=null,r(m),this.saveEventData(),this.processRequests(a)})}getSessionAPI(n,e,r,a){this.skuToken=e,this.errorCb=a,U.SESSION_PATH&&U.API_URL&&(r||U.ACCESS_TOKEN?this.queueRequest({id:n,timestamp:Date.now()},r):this.errorCb(new Error(de)))}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||this.getSession(r,this.skuToken,a=>{a?this.errorCb(a):e&&(this.success[e]=!0)},n)}},Vt=zt.getSessionAPI.bind(zt),Wt=new Set,Hn={create:"create",load:"load",fullLoad:"fullLoad"},Dn={mark(n){C.performance.mark(n)},measure(n,e,r){C.performance.measure(n,e,r)}};function gn(n){const e=n.name.split("?")[0];return Ce(e)&&e.includes("mapbox-gl.js")?"javascript":Ce(e)&&e.includes("mapbox-gl.css")?"css":function(r){return U.API_FONTS_REGEX.test(r)}(e)?"fontRange":Re(e)?"sprite":ye(e)?"style":function(r){return U.API_TILEJSON_REGEX.test(r)}(e)?"tilejson":"other"}const jt=C.performance;function po(n){const e=n?n.url.toString():void 0;return jt.getEntriesByName(e)}let $i,fi,Wr,ei;const qr={now:()=>Wr!==void 0?Wr:C.performance.now(),setNow(n){Wr=n},restoreNow(){Wr=void 0},frame(n){const e=C.requestAnimationFrame(n);return{cancel:()=>C.cancelAnimationFrame(e)}},getImageData(n,e=0){const{width:r,height:a}=n;ei||(ei=C.document.createElement("canvas"));const u=ei.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return(r>ei.width||a>ei.height)&&(ei.width=r,ei.height=a),u.clearRect(-e,-e,r+2*e,a+2*e),u.drawImage(n,0,0,r,a),u.getImageData(-e,-e,r+2*e,a+2*e)},resolveURL:n=>($i||($i=C.document.createElement("a")),$i.href=n,$i.href),get devicePixelRatio(){return C.devicePixelRatio},get prefersReducedMotion(){return!!C.matchMedia&&(fi==null&&(fi=C.matchMedia("(prefers-reduced-motion: reduce)")),fi.matches)}};function Zi(n,e,r){r[n]&&r[n].indexOf(e)!==-1||(r[n]=r[n]||[],r[n].push(e))}function as(n,e,r){if(r&&r[n]){const a=r[n].indexOf(e);a!==-1&&r[n].splice(a,1)}}class Ei{constructor(e,r={}){Zt(this,r),this.type=e}}class sn extends Ei{constructor(e,r={}){super("error",Zt({error:e},r))}}class Rn{on(e,r){return this._listeners=this._listeners||{},Zi(e,r,this._listeners),this}off(e,r){return as(e,r,this._listeners),as(e,r,this._oneTimeListeners),this}once(e,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},Zi(e,r,this._oneTimeListeners),this):new Promise(a=>this.once(e,a))}fire(e,r){typeof e=="string"&&(e=new Ei(e,r||{}));const a=e.type;if(this.listens(a)){e.target=this;const u=this._listeners&&this._listeners[a]?this._listeners[a].slice():[];for(const y of u)y.call(this,e);const d=this._oneTimeListeners&&this._oneTimeListeners[a]?this._oneTimeListeners[a].slice():[];for(const y of d)as(a,y,this._oneTimeListeners),y.call(this,e);const m=this._eventedParent;m&&(Zt(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),m.fire(e))}else e instanceof sn&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,r){return this._eventedParent=e,this._eventedParentData=r,this}}var je=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Hr(n,...e){for(const r of e)for(const a in r)n[a]=r[a];return n}function an(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Wn(n){if(Array.isArray(n))return n.map(Wn);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const r in n)e[r]=Wn(n[r]);return e}return an(n)}class cl extends Error{constructor(e,r){super(r),this.message=r,this.key=e}}var Si=cl;class ou{constructor(e,r=[]){this.parent=e,this.bindings={};for(const[a,u]of r)this.bindings[a]=u}concat(e){return new ou(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var O2=ou;const aa={kind:"null"},bt={kind:"number"},ln={kind:"string"},tn={kind:"boolean"},mi={kind:"color"},Wi={kind:"object"},nn={kind:"value"},_i={kind:"collator"},ul={kind:"formatted"},Is={kind:"resolvedImage"};function Mi(n,e){return{kind:"array",itemType:n,N:e}}function Gn(n){if(n.kind==="array"){const e=Gn(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}return n.kind}const U2=[aa,bt,ln,tn,mi,ul,Wi,Mi(nn),Is];function ko(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!ko(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const r of U2)if(!ko(r,e))return null}}return`Expected ${Gn(n)} but found ${Gn(e)} instead.`}function hl(n,e){return e.some(r=>r.kind===n.kind)}function dl(n,e){return e.some(r=>r==="null"?n===null:r==="array"?Array.isArray(n):r==="object"?n&&!Array.isArray(n)&&typeof n=="object":r===typeof n)}var su,N2={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function pl(n){return(n=Math.round(n))<0?0:n>255?255:n}function fl(n){return pl(n[n.length-1]==="%"?parseFloat(n)/100*255:parseInt(n))}function _1(n){return(e=n[n.length-1]==="%"?parseFloat(n)/100:parseFloat(n))<0?0:e>1?1:e;var e}function la(n,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?n+(e-n)*r*6:2*r<1?e:3*r<2?n+(e-n)*(2/3-r)*6:n}try{su={}.parseCSSColor=function(n){var e,r=n.replace(/ /g,"").toLowerCase();if(r in N2)return N2[r].slice();if(r[0]==="#")return r.length===4?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:r.length===7&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var a=r.indexOf("("),u=r.indexOf(")");if(a!==-1&&u+1===r.length){var d=r.substr(0,a),m=r.substr(a+1,u-(a+1)).split(","),y=1;switch(d){case"rgba":if(m.length!==4)return null;y=_1(m.pop());case"rgb":return m.length!==3?null:[fl(m[0]),fl(m[1]),fl(m[2]),y];case"hsla":if(m.length!==4)return null;y=_1(m.pop());case"hsl":if(m.length!==3)return null;var w=(parseFloat(m[0])%360+360)%360/360,b=_1(m[1]),M=_1(m[2]),A=M<=.5?M*(b+1):M+b-M*b,I=2*M-A;return[pl(255*la(I,A,w+1/3)),pl(255*la(I,A,w)),pl(255*la(I,A,w-1/3)),y];default:return null}}return null}}catch{}class ti{constructor(e,r,a,u=1){this.r=e,this.g=r,this.b=a,this.a=u}static parse(e){if(!e)return;if(e instanceof ti)return e;if(typeof e!="string")return;const r=su(e);return r?new ti(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3]):void 0}toString(){const[e,r,a,u]=this.toArray();return`rgba(${Math.round(e)},${Math.round(r)},${Math.round(a)},${u})`}toArray(){const{r:e,g:r,b:a,a:u}=this;return u===0?[0,0,0,0]:[255*e/u,255*r/u,255*a/u,u]}toArray01(){const{r:e,g:r,b:a,a:u}=this;return u===0?[0,0,0,0]:[e/u,r/u,a/u,u]}toArray01PremultipliedAlpha(){const{r:e,g:r,b:a,a:u}=this;return[e,r,a,u]}}ti.black=new ti(0,0,0,1),ti.white=new ti(1,1,1,1),ti.transparent=new ti(0,0,0,0),ti.red=new ti(1,0,0,1),ti.blue=new ti(0,0,1,1);var nr=ti;class au{constructor(e,r,a){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=a,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class lu{constructor(e,r,a,u,d){this.text=e.normalize?e.normalize():e,this.image=r,this.scale=a,this.fontStack=u,this.textColor=d}}class ni{constructor(e){this.sections=e}static fromString(e){return new ni([new lu(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof ni?e:ni.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const r of this.sections){if(r.image){e.push(["image",r.image.name]);continue}e.push(r.text);const a={};r.fontStack&&(a["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(a["font-scale"]=r.scale),r.textColor&&(a["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(a)}return e}}class Ci{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Ci({name:e,available:!1}):null}serialize(){return["image",this.name]}}function j2(n,e,r,a){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255?a===void 0||typeof a=="number"&&a>=0&&a<=1?null:`Invalid rgba value [${[n,e,r,a].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof a=="number"?[n,e,r,a]:[n,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ml(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof nr||n instanceof au||n instanceof ni||n instanceof Ci)return!0;if(Array.isArray(n)){for(const e of n)if(!ml(e))return!1;return!0}if(typeof n=="object"){for(const e in n)if(!ml(n[e]))return!1;return!0}return!1}function Yn(n){if(n===null)return aa;if(typeof n=="string")return ln;if(typeof n=="boolean")return tn;if(typeof n=="number")return bt;if(n instanceof nr)return mi;if(n instanceof au)return _i;if(n instanceof ni)return ul;if(n instanceof Ci)return Is;if(Array.isArray(n)){const e=n.length;let r;for(const a of n){const u=Yn(a);if(r){if(r===u)continue;r=nn;break}r=u}return Mi(r||nn,e)}return Wi}function _l(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof nr||n instanceof ni||n instanceof Ci?n.toString():JSON.stringify(n)}class cu{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(e.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!ml(e[1]))return r.error("invalid value");const a=e[1];let u=Yn(a);const d=r.expectedType;return u.kind!=="array"||u.N!==0||!d||d.kind!=="array"||typeof d.N=="number"&&d.N!==0||(u=d),new cu(u,a)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof nr?["rgba"].concat(this.value.toArray()):this.value instanceof ni?this.value.serialize():this.value}}var ks=cu,kr=class{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}};const uu={string:ln,number:bt,boolean:tn,object:Wi};class hu{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let a,u=1;const d=e[0];if(d==="array"){let y,w;if(e.length>2){const b=e[1];if(typeof b!="string"||!(b in uu)||b==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);y=uu[b],u++}else y=nn;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);w=e[2],u++}a=Mi(y,w)}else a=uu[d];const m=[];for(;u<e.length;u++){const y=r.parse(e[u],u,nn);if(!y)return null;m.push(y)}return new hu(a,m)}evaluate(e){for(let r=0;r<this.args.length;r++){const a=this.args[r].evaluate(e);if(!ko(this.type,Yn(a)))return a;if(r===this.args.length-1)throw new kr(`Expected value to be of type ${Gn(this.type)}, but found ${Gn(Yn(a))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,r=[e.kind];if(e.kind==="array"){const a=e.itemType;if(a.kind==="string"||a.kind==="number"||a.kind==="boolean"){r.push(a.kind);const u=e.N;(typeof u=="number"||this.args.length>1)&&r.push(u)}}return r.concat(this.args.map(a=>a.serialize()))}}var Lo=hu;class ls{constructor(e){this.type=ul,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const a=e[1];if(!Array.isArray(a)&&typeof a=="object")return r.error("First argument must be an image or text section.");const u=[];let d=!1;for(let m=1;m<=e.length-1;++m){const y=e[m];if(d&&typeof y=="object"&&!Array.isArray(y)){d=!1;let w=null;if(y["font-scale"]&&(w=r.parse(y["font-scale"],1,bt),!w))return null;let b=null;if(y["text-font"]&&(b=r.parse(y["text-font"],1,Mi(ln)),!b))return null;let M=null;if(y["text-color"]&&(M=r.parse(y["text-color"],1,mi),!M))return null;const A=u[u.length-1];A.scale=w,A.font=b,A.textColor=M}else{const w=r.parse(e[m],1,nn);if(!w)return null;const b=w.type.kind;if(b!=="string"&&b!=="value"&&b!=="null"&&b!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");d=!0,u.push({content:w,scale:null,font:null,textColor:null})}}return new ls(u)}evaluate(e){return new ni(this.sections.map(r=>{const a=r.content.evaluate(e);return Yn(a)===Is?new lu("",a,null,null,null):new lu(_l(a),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)}))}eachChild(e){for(const r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const r of this.sections){e.push(r.content.serialize());const a={};r.scale&&(a["font-scale"]=r.scale.serialize()),r.font&&(a["text-font"]=r.font.serialize()),r.textColor&&(a["text-color"]=r.textColor.serialize()),e.push(a)}return e}}class g1{constructor(e){this.type=Is,this.input=e}static parse(e,r){if(e.length!==2)return r.error("Expected two arguments.");const a=r.parse(e[1],1,ln);return a?new g1(a):r.error("No image name provided.")}evaluate(e){const r=this.input.evaluate(e),a=Ci.fromString(r);return a&&e.availableImages&&(a.available=e.availableImages.indexOf(r)>-1),a}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const X5={"to-boolean":tn,"to-color":mi,"to-number":bt,"to-string":ln};class du{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const a=e[0];if((a==="to-boolean"||a==="to-string")&&e.length!==2)return r.error("Expected one argument.");const u=X5[a],d=[];for(let m=1;m<e.length;m++){const y=r.parse(e[m],m,nn);if(!y)return null;d.push(y)}return new du(u,d)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let r,a;for(const u of this.args){if(r=u.evaluate(e),a=null,r instanceof nr)return r;if(typeof r=="string"){const d=e.parseColor(r);if(d)return d}else if(Array.isArray(r)&&(a=r.length<3||r.length>4?`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:j2(r[0],r[1],r[2],r[3]),!a))return new nr(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new kr(a||`Could not parse color from value '${typeof r=="string"?r:String(JSON.stringify(r))}'`)}if(this.type.kind==="number"){let r=null;for(const a of this.args){if(r=a.evaluate(e),r===null)return 0;const u=Number(r);if(!isNaN(u))return u}throw new kr(`Could not convert ${JSON.stringify(r)} to number.`)}return this.type.kind==="formatted"?ni.fromString(_l(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Ci.fromString(_l(this.args[0].evaluate(e))):_l(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new ls([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new g1(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(r=>{e.push(r.serialize())}),e}}var ca=du;const fo=["Unknown","Point","LineString","Polygon"];var pu=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?fo[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const n=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:r,y:a}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(r*e-n[0])+this.featureDistanceData.bearing[1]*(a*e-n[1])}return 0}parseColor(n){let e=this._parseColorCache[n];return e||(e=this._parseColorCache[n]=nr.parse(n)),e}};class Ls{constructor(e,r,a,u){this.name=e,this.type=r,this._evaluate=a,this.args=u}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,r){const a=e[0],u=Ls.definitions[a];if(!u)return r.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0);const d=Array.isArray(u)?u[0]:u.type,m=Array.isArray(u)?[[u[1],u[2]]]:u.overloads,y=m.filter(([b])=>!Array.isArray(b)||b.length===e.length-1);let w=null;for(const[b,M]of y){w=new vu(r.registry,r.path,null,r.scope);const A=[];let I=!1;for(let z=1;z<e.length;z++){const R=e[z],O=Array.isArray(b)?b[z-1]:b.type,Z=w.parse(R,1+A.length,O);if(!Z){I=!0;break}A.push(Z)}if(!I)if(Array.isArray(b)&&b.length!==A.length)w.error(`Expected ${b.length} arguments, but found ${A.length} instead.`);else{for(let z=0;z<A.length;z++){const R=Array.isArray(b)?b[z]:b.type,O=A[z];w.concat(z+1).checkSubtype(R,O.type)}if(w.errors.length===0)return new Ls(a,d,M,A)}}if(y.length===1)r.errors.push(...w.errors);else{const b=(y.length?y:m).map(([A])=>{return I=A,Array.isArray(I)?`(${I.map(Gn).join(", ")})`:`(${Gn(I.type)}...)`;var I}).join(" | "),M=[];for(let A=1;A<e.length;A++){const I=r.parse(e[A],1+M.length);if(!I)return null;M.push(Gn(I.type))}r.error(`Expected arguments of type ${b}, but found (${M.join(", ")}) instead.`)}return null}static register(e,r){Ls.definitions=r;for(const a in r)e[a]=Ls}}var zo=Ls;class gl{constructor(e,r,a){this.type=_i,this.locale=a,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(e.length!==2)return r.error("Expected one argument.");const a=e[1];if(typeof a!="object"||Array.isArray(a))return r.error("Collator options argument must be an object.");const u=r.parse(a["case-sensitive"]!==void 0&&a["case-sensitive"],1,tn);if(!u)return null;const d=r.parse(a["diacritic-sensitive"]!==void 0&&a["diacritic-sensitive"],1,tn);if(!d)return null;let m=null;return a.locale&&(m=r.parse(a.locale,1,ln),!m)?null:new gl(u,d,m)}evaluate(e){return new au(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Do=8192;function y1(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function ua(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function yl(n,e){const r=(180+n[0])/360,a=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,u=Math.pow(2,e.z);return[Math.round(r*u*Do),Math.round(a*u*Do)]}function V2(n,e,r){const a=n[0]-e[0],u=n[1]-e[1],d=n[0]-r[0],m=n[1]-r[1];return a*m-d*u==0&&a*d<=0&&u*m<=0}function v1(n,e){let r=!1;for(let m=0,y=e.length;m<y;m++){const w=e[m];for(let b=0,M=w.length;b<M-1;b++){if(V2(n,w[b],w[b+1]))return!1;(u=w[b])[1]>(a=n)[1]!=(d=w[b+1])[1]>a[1]&&a[0]<(d[0]-u[0])*(a[1]-u[1])/(d[1]-u[1])+u[0]&&(r=!r)}}var a,u,d;return r}function fu(n,e){for(let r=0;r<e.length;r++)if(v1(n,e[r]))return!0;return!1}function mu(n,e,r,a){const u=a[0]-r[0],d=a[1]-r[1],m=(n[0]-r[0])*d-u*(n[1]-r[1]),y=(e[0]-r[0])*d-u*(e[1]-r[1]);return m>0&&y<0||m<0&&y>0}function ha(n,e,r){for(const b of r)for(let M=0;M<b.length-1;++M)if((y=[(m=b[M+1])[0]-(d=b[M])[0],m[1]-d[1]])[0]*(w=[(u=e)[0]-(a=n)[0],u[1]-a[1]])[1]-y[1]*w[0]!=0&&mu(a,u,d,m)&&mu(d,m,a,u))return!0;var a,u,d,m,y,w;return!1}function yn(n,e){for(let r=0;r<n.length;++r)if(!v1(n[r],e))return!1;for(let r=0;r<n.length-1;++r)if(ha(n[r],n[r+1],e))return!1;return!0}function K5(n,e){for(let r=0;r<e.length;r++)if(yn(n,e[r]))return!0;return!1}function _u(n,e,r){const a=[];for(let u=0;u<n.length;u++){const d=[];for(let m=0;m<n[u].length;m++){const y=yl(n[u][m],r);y1(e,y),d.push(y)}a.push(d)}return a}function G2(n,e,r){const a=[];for(let u=0;u<n.length;u++){const d=_u(n[u],e,r);a.push(d)}return a}function gu(n,e,r,a){if(n[0]<r[0]||n[0]>r[2]){const u=.5*a;let d=n[0]-r[0]>u?-a:r[0]-n[0]>u?a:0;d===0&&(d=n[0]-r[2]>u?-a:r[2]-n[0]>u?a:0),n[0]+=d}y1(e,n)}function $2(n,e,r,a){const u=Math.pow(2,a.z)*Do,d=[a.x*Do,a.y*Do],m=[];if(!n)return m;for(const y of n)for(const w of y){const b=[w.x+d[0],w.y+d[1]];gu(b,e,r,u),m.push(b)}return m}function yu(n,e,r,a){const u=Math.pow(2,a.z)*Do,d=[a.x*Do,a.y*Do],m=[];if(!n)return m;for(const w of n){const b=[];for(const M of w){const A=[M.x+d[0],M.y+d[1]];y1(e,A),b.push(A)}m.push(b)}if(e[2]-e[0]<=u/2){(y=e)[0]=y[1]=1/0,y[2]=y[3]=-1/0;for(const w of m)for(const b of w)gu(b,e,r,u)}var y;return m}class da{constructor(e,r){this.type=tn,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(ml(e[1])){const a=e[1];if(a.type==="FeatureCollection")for(let u=0;u<a.features.length;++u){const d=a.features[u].geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new da(a,a.features[u].geometry)}else if(a.type==="Feature"){const u=a.geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new da(a,a.geometry)}else if(a.type==="Polygon"||a.type==="MultiPolygon")return new da(a,a)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(r,a){const u=[1/0,1/0,-1/0,-1/0],d=[1/0,1/0,-1/0,-1/0],m=r.canonicalID();if(!m)return!1;if(a.type==="Polygon"){const y=_u(a.coordinates,d,m),w=$2(r.geometry(),u,d,m);if(!ua(u,d))return!1;for(const b of w)if(!v1(b,y))return!1}if(a.type==="MultiPolygon"){const y=G2(a.coordinates,d,m),w=$2(r.geometry(),u,d,m);if(!ua(u,d))return!1;for(const b of w)if(!fu(b,y))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(r,a){const u=[1/0,1/0,-1/0,-1/0],d=[1/0,1/0,-1/0,-1/0],m=r.canonicalID();if(!m)return!1;if(a.type==="Polygon"){const y=_u(a.coordinates,d,m),w=yu(r.geometry(),u,d,m);if(!ua(u,d))return!1;for(const b of w)if(!yn(b,y))return!1}if(a.type==="MultiPolygon"){const y=G2(a.coordinates,d,m),w=yu(r.geometry(),u,d,m);if(!ua(u,d))return!1;for(const b of w)if(!K5(b,y))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var x1=da;function pa(n){if(n instanceof zo&&(n.name==="get"&&n.args.length===1||n.name==="feature-state"||n.name==="has"&&n.args.length===1||n.name==="properties"||n.name==="geometry-type"||n.name==="id"||/^filter-/.test(n.name))||n instanceof x1)return!1;let e=!0;return n.eachChild(r=>{e&&!pa(r)&&(e=!1)}),e}function Ro(n){if(n instanceof zo&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(r=>{e&&!Ro(r)&&(e=!1)}),e}function zs(n,e){if(n instanceof zo&&e.indexOf(n.name)>=0)return!1;let r=!0;return n.eachChild(a=>{r&&!zs(a,e)&&(r=!1)}),r}class w1{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const a=e[1];return r.scope.has(a)?new w1(a,r.scope.get(a)):r.error(`Unknown variable "${a}". Make sure "${a}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Z2=w1;class vl{constructor(e,r=[],a,u=new O2,d=[]){this.registry=e,this.path=r,this.key=r.map(m=>`[${m}]`).join(""),this.scope=u,this.errors=d,this.expectedType=a}parse(e,r,a,u,d={}){return r?this.concat(r,a,u)._parse(e,d):this._parse(e,d)}_parse(e,r){function a(u,d,m){return m==="assert"?new Lo(d,[u]):m==="coerce"?new ca(d,[u]):u}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const u=e[0];if(typeof u!="string")return this.error(`Expression name must be a string, but found ${typeof u} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const d=this.registry[u];if(d){let m=d.parse(e,this);if(!m)return null;if(this.expectedType){const y=this.expectedType,w=m.type;if(y.kind!=="string"&&y.kind!=="number"&&y.kind!=="boolean"&&y.kind!=="object"&&y.kind!=="array"||w.kind!=="value")if(y.kind!=="color"&&y.kind!=="formatted"&&y.kind!=="resolvedImage"||w.kind!=="value"&&w.kind!=="string"){if(this.checkSubtype(y,w))return null}else m=a(m,y,r.typeAnnotation||"coerce");else m=a(m,y,r.typeAnnotation||"assert")}if(!(m instanceof ks)&&m.type.kind!=="resolvedImage"&&xu(m)){const y=new pu;try{m=new ks(m.type,m.evaluate(y))}catch(w){return this.error(w.message),null}}return m}return this.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,r,a){const u=typeof e=="number"?this.path.concat(e):this.path,d=a?this.scope.concat(a):this.scope;return new vl(this.registry,u,r||null,d,this.errors)}error(e,...r){const a=`${this.key}${r.map(u=>`[${u}]`).join("")}`;this.errors.push(new Si(a,e))}checkSubtype(e,r){const a=ko(e,r);return a&&this.error(a),a}}var vu=vl;function xu(n){if(n instanceof Z2)return xu(n.boundExpression);if(n instanceof zo&&n.name==="error"||n instanceof gl||n instanceof x1)return!1;const e=n instanceof ca||n instanceof Lo;let r=!0;return n.eachChild(a=>{r=e?r&&xu(a):r&&a instanceof ks}),!!r&&pa(n)&&zs(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function b1(n,e){const r=n.length-1;let a,u,d=0,m=r,y=0;for(;d<=m;)if(y=Math.floor((d+m)/2),a=n[y],u=n[y+1],a<=e){if(y===r||e<u)return y;d=y+1}else{if(!(a>e))throw new kr("Input is not a number.");m=y-1}return 0}class T1{constructor(e,r,a){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(const[u,d]of a)this.labels.push(u),this.outputs.push(d)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");const a=r.parse(e[1],1,bt);if(!a)return null;const u=[];let d=null;r.expectedType&&r.expectedType.kind!=="value"&&(d=r.expectedType);for(let m=1;m<e.length;m+=2){const y=m===1?-1/0:e[m],w=e[m+1],b=m,M=m+1;if(typeof y!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',b);if(u.length&&u[u.length-1][0]>=y)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',b);const A=r.parse(w,M,d);if(!A)return null;d=d||A.type,u.push([y,A])}return new T1(d,a,u)}evaluate(e){const r=this.labels,a=this.outputs;if(r.length===1)return a[0].evaluate(e);const u=this.input.evaluate(e);if(u<=r[0])return a[0].evaluate(e);const d=r.length;return u>=r[d-1]?a[d-1].evaluate(e):a[b1(r,u)].evaluate(e)}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e}}var wu=T1;function un(n,e,r){return n*(1-r)+e*r}var xl=Object.freeze({__proto__:null,array:function(n,e,r){return n.map((a,u)=>un(a,e[u],r))},color:function(n,e,r){return new nr(un(n.r,e.r,r),un(n.g,e.g,r),un(n.b,e.b,r),un(n.a,e.a,r))},number:un});const W2=.95047,bu=1.08883,q2=4/29,Ds=6/29,Tu=3*Ds*Ds,Y5=Ds*Ds*Ds,J5=Math.PI/180,Q5=180/Math.PI;function Eu(n){return n>Y5?Math.pow(n,1/3):n/Tu+q2}function Su(n){return n>Ds?n*n*n:Tu*(n-q2)}function Mu(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function E1(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function H2(n){const e=E1(n.r),r=E1(n.g),a=E1(n.b),u=Eu((.4124564*e+.3575761*r+.1804375*a)/W2),d=Eu((.2126729*e+.7151522*r+.072175*a)/1);return{l:116*d-16,a:500*(u-d),b:200*(d-Eu((.0193339*e+.119192*r+.9503041*a)/bu)),alpha:n.a}}function X2(n){let e=(n.l+16)/116,r=isNaN(n.a)?e:e+n.a/500,a=isNaN(n.b)?e:e-n.b/200;return e=1*Su(e),r=W2*Su(r),a=bu*Su(a),new nr(Mu(3.2404542*r-1.5371385*e-.4985314*a),Mu(-.969266*r+1.8760108*e+.041556*a),Mu(.0556434*r-.2040259*e+1.0572252*a),n.alpha)}function ed(n,e,r){const a=e-n;return n+r*(a>180||a<-180?a-360*Math.round(a/360):a)}const wl={forward:H2,reverse:X2,interpolate:function(n,e,r){return{l:un(n.l,e.l,r),a:un(n.a,e.a,r),b:un(n.b,e.b,r),alpha:un(n.alpha,e.alpha,r)}}},fa={forward:function(n){const{l:e,a:r,b:a}=H2(n),u=Math.atan2(a,r)*Q5;return{h:u<0?u+360:u,c:Math.sqrt(r*r+a*a),l:e,alpha:n.a}},reverse:function(n){const e=n.h*J5,r=n.c;return X2({l:n.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:n.alpha})},interpolate:function(n,e,r){return{h:ed(n.h,e.h,r),c:un(n.c,e.c,r),l:un(n.l,e.l,r),alpha:un(n.alpha,e.alpha,r)}}};var Cu=Object.freeze({__proto__:null,hcl:fa,lab:wl});class bl{constructor(e,r,a,u,d){this.type=e,this.operator=r,this.interpolation=a,this.input=u,this.labels=[],this.outputs=[];for(const[m,y]of d)this.labels.push(m),this.outputs.push(y)}static interpolationFactor(e,r,a,u){let d=0;if(e.name==="exponential")d=Pu(r,e.base,a,u);else if(e.name==="linear")d=Pu(r,1,a,u);else if(e.name==="cubic-bezier"){const m=e.controlPoints;d=new rt(m[0],m[1],m[2],m[3]).solve(Pu(r,1,a,u))}return d}static parse(e,r){let[a,u,d,...m]=e;if(!Array.isArray(u)||u.length===0)return r.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){const b=u[1];if(typeof b!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:b}}else{if(u[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(u[0])}`,1,0);{const b=u.slice(1);if(b.length!==4||b.some(M=>typeof M!="number"||M<0||M>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:b}}}if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(d=r.parse(d,2,bt),!d)return null;const y=[];let w=null;a==="interpolate-hcl"||a==="interpolate-lab"?w=mi:r.expectedType&&r.expectedType.kind!=="value"&&(w=r.expectedType);for(let b=0;b<m.length;b+=2){const M=m[b],A=m[b+1],I=b+3,z=b+4;if(typeof M!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(y.length&&y[y.length-1][0]>=M)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',I);const R=r.parse(A,z,w);if(!R)return null;w=w||R.type,y.push([M,R])}return w.kind==="number"||w.kind==="color"||w.kind==="array"&&w.itemType.kind==="number"&&typeof w.N=="number"?new bl(w,a,u,d,y):r.error(`Type ${Gn(w)} is not interpolatable.`)}evaluate(e){const r=this.labels,a=this.outputs;if(r.length===1)return a[0].evaluate(e);const u=this.input.evaluate(e);if(u<=r[0])return a[0].evaluate(e);const d=r.length;if(u>=r[d-1])return a[d-1].evaluate(e);const m=b1(r,u),y=bl.interpolationFactor(this.interpolation,u,r[m],r[m+1]),w=a[m].evaluate(e),b=a[m+1].evaluate(e);return this.operator==="interpolate"?xl[this.type.kind.toLowerCase()](w,b,y):this.operator==="interpolate-hcl"?fa.reverse(fa.interpolate(fa.forward(w),fa.forward(b),y)):wl.reverse(wl.interpolate(wl.forward(w),wl.forward(b),y))}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const r=[this.operator,e,this.input.serialize()];for(let a=0;a<this.labels.length;a++)r.push(this.labels[a],this.outputs[a].serialize());return r}}function Pu(n,e,r,a){const u=a-r,d=n-r;return u===0?0:e===1?d/u:(Math.pow(e,d)-1)/(Math.pow(e,u)-1)}var mo=bl;class S1{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expectected at least one argument.");let a=null;const u=r.expectedType;u&&u.kind!=="value"&&(a=u);const d=[];for(const y of e.slice(1)){const w=r.parse(y,1+d.length,a,void 0,{typeAnnotation:"omit"});if(!w)return null;a=a||w.type,d.push(w)}const m=u&&d.some(y=>ko(u,y.type));return new S1(m?nn:a,d)}evaluate(e){let r,a=null,u=0;for(const d of this.args){if(u++,a=d.evaluate(e),a&&a instanceof Ci&&!a.available&&(r||(r=a),a=null,u===this.args.length))return r;if(a!==null)break}return a}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var Au=S1;class M1{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const a=[];for(let d=1;d<e.length-1;d+=2){const m=e[d];if(typeof m!="string")return r.error(`Expected string, but found ${typeof m} instead.`,d);if(/[^a-zA-Z0-9_]/.test(m))return r.error("Variable names must contain only alphanumeric characters or '_'.",d);const y=r.parse(e[d+1],d+1);if(!y)return null;a.push([m,y])}const u=r.parse(e[e.length-1],e.length-1,r.expectedType,a);return u?new M1(a,u):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[r,a]of this.bindings)e.push(r,a.serialize());return e.push(this.result.serialize()),e}}var K2=M1;class Iu{constructor(e,r,a){this.type=e,this.index=r,this.input=a}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=r.parse(e[1],1,bt),u=r.parse(e[2],2,Mi(r.expectedType||nn));return a&&u?new Iu(u.type.itemType,a,u):null}evaluate(e){const r=this.index.evaluate(e),a=this.input.evaluate(e);if(r<0)throw new kr(`Array index out of bounds: ${r} < 0.`);if(r>=a.length)throw new kr(`Array index out of bounds: ${r} > ${a.length-1}.`);if(r!==Math.floor(r))throw new kr(`Array index must be an integer, but found ${r} instead.`);return a[r]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var td=Iu;class ku{constructor(e,r){this.type=tn,this.needle=e,this.haystack=r}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=r.parse(e[1],1,nn),u=r.parse(e[2],2,nn);return a&&u?hl(a.type,[tn,ln,bt,aa,nn])?new ku(a,u):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Gn(a.type)} instead`):null}evaluate(e){const r=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(a==null)return!1;if(!dl(r,["boolean","string","number","null"]))throw new kr(`Expected first argument to be of type boolean, string, number or null, but found ${Gn(Yn(r))} instead.`);if(!dl(a,["string","array"]))throw new kr(`Expected second argument to be of type array or string, but found ${Gn(Yn(a))} instead.`);return a.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var C1=ku;class Tl{constructor(e,r,a){this.type=bt,this.needle=e,this.haystack=r,this.fromIndex=a}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=r.parse(e[1],1,nn),u=r.parse(e[2],2,nn);if(!a||!u)return null;if(!hl(a.type,[tn,ln,bt,aa,nn]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Gn(a.type)} instead`);if(e.length===4){const d=r.parse(e[3],3,bt);return d?new Tl(a,u,d):null}return new Tl(a,u)}evaluate(e){const r=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(!dl(r,["boolean","string","number","null"]))throw new kr(`Expected first argument to be of type boolean, string, number or null, but found ${Gn(Yn(r))} instead.`);if(!dl(a,["string","array"]))throw new kr(`Expected second argument to be of type array or string, but found ${Gn(Yn(a))} instead.`);if(this.fromIndex){const u=this.fromIndex.evaluate(e);return a.indexOf(r,u)}return a.indexOf(r)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Y2=Tl;class Lu{constructor(e,r,a,u,d,m){this.inputType=e,this.type=r,this.input=a,this.cases=u,this.outputs=d,this.otherwise=m}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return r.error("Expected an even number of arguments.");let a,u;r.expectedType&&r.expectedType.kind!=="value"&&(u=r.expectedType);const d={},m=[];for(let b=2;b<e.length-1;b+=2){let M=e[b];const A=e[b+1];Array.isArray(M)||(M=[M]);const I=r.concat(b);if(M.length===0)return I.error("Expected at least one branch label.");for(const R of M){if(typeof R!="number"&&typeof R!="string")return I.error("Branch labels must be numbers or strings.");if(typeof R=="number"&&Math.abs(R)>Number.MAX_SAFE_INTEGER)return I.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof R=="number"&&Math.floor(R)!==R)return I.error("Numeric branch labels must be integer values.");if(a){if(I.checkSubtype(a,Yn(R)))return null}else a=Yn(R);if(d[String(R)]!==void 0)return I.error("Branch labels must be unique.");d[String(R)]=m.length}const z=r.parse(A,b,u);if(!z)return null;u=u||z.type,m.push(z)}const y=r.parse(e[1],1,nn);if(!y)return null;const w=r.parse(e[e.length-1],e.length-1,u);return w?y.type.kind!=="value"&&r.concat(1).checkSubtype(a,y.type)?null:new Lu(a,u,y,d,m,w):null}evaluate(e){const r=this.input.evaluate(e);return(Yn(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),a=[],u={};for(const m of r){const y=u[this.cases[m]];y===void 0?(u[this.cases[m]]=a.length,a.push([this.cases[m],[m]])):a[y][1].push(m)}const d=m=>this.inputType.kind==="number"?Number(m):m;for(const[m,y]of a)e.push(y.length===1?d(y[0]):y.map(d)),e.push(this.outputs[m].serialize());return e.push(this.otherwise.serialize()),e}}var nd=Lu;class zu{constructor(e,r,a){this.type=e,this.branches=r,this.otherwise=a}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return r.error("Expected an odd number of arguments.");let a;r.expectedType&&r.expectedType.kind!=="value"&&(a=r.expectedType);const u=[];for(let m=1;m<e.length-1;m+=2){const y=r.parse(e[m],m,tn);if(!y)return null;const w=r.parse(e[m+1],m+1,a);if(!w)return null;u.push([y,w]),a=a||w.type}const d=r.parse(e[e.length-1],e.length-1,a);return d?new zu(a,u,d):null}evaluate(e){for(const[r,a]of this.branches)if(r.evaluate(e))return a.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[r,a]of this.branches)e(r),e(a);e(this.otherwise)}outputDefined(){return this.branches.every(([e,r])=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var J2=zu;class El{constructor(e,r,a,u){this.type=e,this.input=r,this.beginIndex=a,this.endIndex=u}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=r.parse(e[1],1,nn),u=r.parse(e[2],2,bt);if(!a||!u)return null;if(!hl(a.type,[Mi(nn),ln,nn]))return r.error(`Expected first argument to be of type array or string, but found ${Gn(a.type)} instead`);if(e.length===4){const d=r.parse(e[3],3,bt);return d?new El(a.type,a,u,d):null}return new El(a.type,a,u)}evaluate(e){const r=this.input.evaluate(e),a=this.beginIndex.evaluate(e);if(!dl(r,["string","array"]))throw new kr(`Expected first argument to be of type array or string, but found ${Gn(Yn(r))} instead.`);if(this.endIndex){const u=this.endIndex.evaluate(e);return r.slice(a,u)}return r.slice(a)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Q2=El;function P1(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function eh(n,e,r,a){return a.compare(e,r)===0}function ma(n,e,r){const a=n!=="=="&&n!=="!=";return class qy{constructor(d,m,y){this.type=tn,this.lhs=d,this.rhs=m,this.collator=y,this.hasUntypedArgument=d.type.kind==="value"||m.type.kind==="value"}static parse(d,m){if(d.length!==3&&d.length!==4)return m.error("Expected two or three arguments.");const y=d[0];let w=m.parse(d[1],1,nn);if(!w)return null;if(!P1(y,w.type))return m.concat(1).error(`"${y}" comparisons are not supported for type '${Gn(w.type)}'.`);let b=m.parse(d[2],2,nn);if(!b)return null;if(!P1(y,b.type))return m.concat(2).error(`"${y}" comparisons are not supported for type '${Gn(b.type)}'.`);if(w.type.kind!==b.type.kind&&w.type.kind!=="value"&&b.type.kind!=="value")return m.error(`Cannot compare types '${Gn(w.type)}' and '${Gn(b.type)}'.`);a&&(w.type.kind==="value"&&b.type.kind!=="value"?w=new Lo(b.type,[w]):w.type.kind!=="value"&&b.type.kind==="value"&&(b=new Lo(w.type,[b])));let M=null;if(d.length===4){if(w.type.kind!=="string"&&b.type.kind!=="string"&&w.type.kind!=="value"&&b.type.kind!=="value")return m.error("Cannot use collator to compare non-string types.");if(M=m.parse(d[3],3,_i),!M)return null}return new qy(w,b,M)}evaluate(d){const m=this.lhs.evaluate(d),y=this.rhs.evaluate(d);if(a&&this.hasUntypedArgument){const w=Yn(m),b=Yn(y);if(w.kind!==b.kind||w.kind!=="string"&&w.kind!=="number")throw new kr(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${w.kind}, ${b.kind}) instead.`)}if(this.collator&&!a&&this.hasUntypedArgument){const w=Yn(m),b=Yn(y);if(w.kind!=="string"||b.kind!=="string")return e(d,m,y)}return this.collator?r(d,m,y,this.collator.evaluate(d)):e(d,m,y)}eachChild(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)}outputDefined(){return!0}serialize(){const d=[n];return this.eachChild(m=>{d.push(m.serialize())}),d}}}const rd=ma("==",function(n,e,r){return e===r},eh),id=ma("!=",function(n,e,r){return e!==r},function(n,e,r,a){return!eh(0,e,r,a)}),od=ma("<",function(n,e,r){return e<r},function(n,e,r,a){return a.compare(e,r)<0}),sd=ma(">",function(n,e,r){return e>r},function(n,e,r,a){return a.compare(e,r)>0}),ad=ma("<=",function(n,e,r){return e<=r},function(n,e,r,a){return a.compare(e,r)<=0}),th=ma(">=",function(n,e,r){return e>=r},function(n,e,r,a){return a.compare(e,r)>=0});class A1{constructor(e,r,a,u,d,m){this.type=ln,this.number=e,this.locale=r,this.currency=a,this.unit=u,this.minFractionDigits=d,this.maxFractionDigits=m}static parse(e,r){if(e.length!==3)return r.error("Expected two arguments.");const a=r.parse(e[1],1,bt);if(!a)return null;const u=e[2];if(typeof u!="object"||Array.isArray(u))return r.error("NumberFormat options argument must be an object.");let d=null;if(u.locale&&(d=r.parse(u.locale,1,ln),!d))return null;let m=null;if(u.currency&&(m=r.parse(u.currency,1,ln),!m))return null;let y=null;if(u.unit&&(y=r.parse(u.unit,1,ln),!y))return null;let w=null;if(u["min-fraction-digits"]&&(w=r.parse(u["min-fraction-digits"],1,bt),!w))return null;let b=null;return u["max-fraction-digits"]&&(b=r.parse(u["max-fraction-digits"],1,bt),!b)?null:new A1(a,d,m,y,w,b)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class _a{constructor(e){this.type=bt,this.input=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const a=r.parse(e[1],1);return a?a.type.kind!=="array"&&a.type.kind!=="string"&&a.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${Gn(a.type)} instead.`):new _a(a):null}evaluate(e){const r=this.input.evaluate(e);if(typeof r=="string"||Array.isArray(r))return r.length;throw new kr(`Expected value to be of type string or array, but found ${Gn(Yn(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(r=>{e.push(r.serialize())}),e}}const nh={"==":rd,"!=":id,">":sd,"<":od,">=":th,"<=":ad,array:Lo,at:td,boolean:Lo,case:J2,coalesce:Au,collator:gl,format:ls,image:g1,in:C1,"index-of":Y2,interpolate:mo,"interpolate-hcl":mo,"interpolate-lab":mo,length:_a,let:K2,literal:ks,match:nd,number:Lo,"number-format":A1,object:Lo,slice:Q2,step:wu,string:Lo,"to-boolean":ca,"to-color":ca,"to-number":ca,"to-string":ca,var:Z2,within:x1};function rh(n,[e,r,a,u]){e=e.evaluate(n),r=r.evaluate(n),a=a.evaluate(n);const d=u?u.evaluate(n):1,m=j2(e,r,a,d);if(m)throw new kr(m);return new nr(e/255*d,r/255*d,a/255*d,d)}function Fo(n,e){return n in e}function I1(n,e){const r=e[n];return r===void 0?null:r}function Pi(n){return{type:n}}zo.register(nh,{error:[{kind:"error"},[ln],(n,[e])=>{throw new kr(e.evaluate(n))}],typeof:[ln,[nn],(n,[e])=>Gn(Yn(e.evaluate(n)))],"to-rgba":[Mi(bt,4),[mi],(n,[e])=>e.evaluate(n).toArray()],rgb:[mi,[bt,bt,bt],rh],rgba:[mi,[bt,bt,bt,bt],rh],has:{type:tn,overloads:[[[ln],(n,[e])=>Fo(e.evaluate(n),n.properties())],[[ln,Wi],(n,[e,r])=>Fo(e.evaluate(n),r.evaluate(n))]]},get:{type:nn,overloads:[[[ln],(n,[e])=>I1(e.evaluate(n),n.properties())],[[ln,Wi],(n,[e,r])=>I1(e.evaluate(n),r.evaluate(n))]]},"feature-state":[nn,[ln],(n,[e])=>I1(e.evaluate(n),n.featureState||{})],properties:[Wi,[],n=>n.properties()],"geometry-type":[ln,[],n=>n.geometryType()],id:[nn,[],n=>n.id()],zoom:[bt,[],n=>n.globals.zoom],pitch:[bt,[],n=>n.globals.pitch||0],"distance-from-center":[bt,[],n=>n.distanceFromCenter()],"heatmap-density":[bt,[],n=>n.globals.heatmapDensity||0],"line-progress":[bt,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[bt,[],n=>n.globals.skyRadialProgress||0],accumulated:[nn,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[bt,Pi(bt),(n,e)=>{let r=0;for(const a of e)r+=a.evaluate(n);return r}],"*":[bt,Pi(bt),(n,e)=>{let r=1;for(const a of e)r*=a.evaluate(n);return r}],"-":{type:bt,overloads:[[[bt,bt],(n,[e,r])=>e.evaluate(n)-r.evaluate(n)],[[bt],(n,[e])=>-e.evaluate(n)]]},"/":[bt,[bt,bt],(n,[e,r])=>e.evaluate(n)/r.evaluate(n)],"%":[bt,[bt,bt],(n,[e,r])=>e.evaluate(n)%r.evaluate(n)],ln2:[bt,[],()=>Math.LN2],pi:[bt,[],()=>Math.PI],e:[bt,[],()=>Math.E],"^":[bt,[bt,bt],(n,[e,r])=>Math.pow(e.evaluate(n),r.evaluate(n))],sqrt:[bt,[bt],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[bt,[bt],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[bt,[bt],(n,[e])=>Math.log(e.evaluate(n))],log2:[bt,[bt],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[bt,[bt],(n,[e])=>Math.sin(e.evaluate(n))],cos:[bt,[bt],(n,[e])=>Math.cos(e.evaluate(n))],tan:[bt,[bt],(n,[e])=>Math.tan(e.evaluate(n))],asin:[bt,[bt],(n,[e])=>Math.asin(e.evaluate(n))],acos:[bt,[bt],(n,[e])=>Math.acos(e.evaluate(n))],atan:[bt,[bt],(n,[e])=>Math.atan(e.evaluate(n))],min:[bt,Pi(bt),(n,e)=>Math.min(...e.map(r=>r.evaluate(n)))],max:[bt,Pi(bt),(n,e)=>Math.max(...e.map(r=>r.evaluate(n)))],abs:[bt,[bt],(n,[e])=>Math.abs(e.evaluate(n))],round:[bt,[bt],(n,[e])=>{const r=e.evaluate(n);return r<0?-Math.round(-r):Math.round(r)}],floor:[bt,[bt],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[bt,[bt],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[tn,[ln,nn],(n,[e,r])=>n.properties()[e.value]===r.value],"filter-id-==":[tn,[nn],(n,[e])=>n.id()===e.value],"filter-type-==":[tn,[ln],(n,[e])=>n.geometryType()===e.value],"filter-<":[tn,[ln,nn],(n,[e,r])=>{const a=n.properties()[e.value],u=r.value;return typeof a==typeof u&&a<u}],"filter-id-<":[tn,[nn],(n,[e])=>{const r=n.id(),a=e.value;return typeof r==typeof a&&r<a}],"filter->":[tn,[ln,nn],(n,[e,r])=>{const a=n.properties()[e.value],u=r.value;return typeof a==typeof u&&a>u}],"filter-id->":[tn,[nn],(n,[e])=>{const r=n.id(),a=e.value;return typeof r==typeof a&&r>a}],"filter-<=":[tn,[ln,nn],(n,[e,r])=>{const a=n.properties()[e.value],u=r.value;return typeof a==typeof u&&a<=u}],"filter-id-<=":[tn,[nn],(n,[e])=>{const r=n.id(),a=e.value;return typeof r==typeof a&&r<=a}],"filter->=":[tn,[ln,nn],(n,[e,r])=>{const a=n.properties()[e.value],u=r.value;return typeof a==typeof u&&a>=u}],"filter-id->=":[tn,[nn],(n,[e])=>{const r=n.id(),a=e.value;return typeof r==typeof a&&r>=a}],"filter-has":[tn,[nn],(n,[e])=>e.value in n.properties()],"filter-has-id":[tn,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[tn,[Mi(ln)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[tn,[Mi(nn)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[tn,[ln,Mi(nn)],(n,[e,r])=>r.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[tn,[ln,Mi(nn)],(n,[e,r])=>function(a,u,d,m){for(;d<=m;){const y=d+m>>1;if(u[y]===a)return!0;u[y]>a?m=y-1:d=y+1}return!1}(n.properties()[e.value],r.value,0,r.value.length-1)],all:{type:tn,overloads:[[[tn,tn],(n,[e,r])=>e.evaluate(n)&&r.evaluate(n)],[Pi(tn),(n,e)=>{for(const r of e)if(!r.evaluate(n))return!1;return!0}]]},any:{type:tn,overloads:[[[tn,tn],(n,[e,r])=>e.evaluate(n)||r.evaluate(n)],[Pi(tn),(n,e)=>{for(const r of e)if(r.evaluate(n))return!0;return!1}]]},"!":[tn,[tn],(n,[e])=>!e.evaluate(n)],"is-supported-script":[tn,[ln],(n,[e])=>{const r=n.globals&&n.globals.isSupportedScript;return!r||r(e.evaluate(n))}],upcase:[ln,[ln],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[ln,[ln],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[ln,Pi(nn),(n,e)=>e.map(r=>_l(r.evaluate(n))).join("")],"resolved-locale":[ln,[_i],(n,[e])=>e.evaluate(n).resolvedLocale()]});var Sl=nh;function ih(n){return{result:"success",value:n}}function Rs(n){return{result:"error",value:n}}function ga(n){return n["property-type"]==="data-driven"}function k1(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function L1(n){return!!n.expression&&n.expression.interpolated}function hn(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function Ml(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function oh(n){return n}function z1(n,e){const r=e.type==="color",a=n.stops&&typeof n.stops[0][0]=="object",u=a||!(a||n.property!==void 0),d=n.type||(L1(e)?"exponential":"interval");if(r&&((n=Hr({},n)).stops&&(n.stops=n.stops.map(b=>[b[0],nr.parse(b[1])])),n.default=nr.parse(n.default?n.default:e.default)),n.colorSpace&&n.colorSpace!=="rgb"&&!Cu[n.colorSpace])throw new Error(`Unknown color space: ${n.colorSpace}`);let m,y,w;if(d==="exponential")m=Bo;else if(d==="interval")m=D1;else if(d==="categorical"){m=sh,y=Object.create(null);for(const b of n.stops)y[b[0]]=b[1];w=typeof n.stops[0][0]}else{if(d!=="identity")throw new Error(`Unknown function type "${d}"`);m=ah}if(a){const b={},M=[];for(let z=0;z<n.stops.length;z++){const R=n.stops[z],O=R[0].zoom;b[O]===void 0&&(b[O]={zoom:O,type:n.type,property:n.property,default:n.default,stops:[]},M.push(O)),b[O].stops.push([R[0].value,R[1]])}const A=[];for(const z of M)A.push([b[z].zoom,z1(b[z],e)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:mo.interpolationFactor.bind(void 0,I),zoomStops:A.map(z=>z[0]),evaluate:({zoom:z},R)=>Bo({stops:A,base:n.base},e,z).evaluate(z,R)}}if(u){const b=d==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:b,interpolationFactor:mo.interpolationFactor.bind(void 0,b),zoomStops:n.stops.map(M=>M[0]),evaluate:({zoom:M})=>m(n,e,M,y,w)}}return{kind:"source",evaluate(b,M){const A=M&&M.properties?M.properties[n.property]:void 0;return A===void 0?ya(n.default,e.default):m(n,e,A,y,w)}}}function ya(n,e,r){return n!==void 0?n:e!==void 0?e:r!==void 0?r:void 0}function sh(n,e,r,a,u){return ya(typeof r===u?a[r]:void 0,n.default,e.default)}function D1(n,e,r){if(hn(r)!=="number")return ya(n.default,e.default);const a=n.stops.length;if(a===1||r<=n.stops[0][0])return n.stops[0][1];if(r>=n.stops[a-1][0])return n.stops[a-1][1];const u=b1(n.stops.map(d=>d[0]),r);return n.stops[u][1]}function Bo(n,e,r){const a=n.base!==void 0?n.base:1;if(hn(r)!=="number")return ya(n.default,e.default);const u=n.stops.length;if(u===1||r<=n.stops[0][0])return n.stops[0][1];if(r>=n.stops[u-1][0])return n.stops[u-1][1];const d=b1(n.stops.map(M=>M[0]),r),m=function(M,A,I,z){const R=z-I,O=M-I;return R===0?0:A===1?O/R:(Math.pow(A,O)-1)/(Math.pow(A,R)-1)}(r,a,n.stops[d][0],n.stops[d+1][0]),y=n.stops[d][1],w=n.stops[d+1][1];let b=xl[e.type]||oh;if(n.colorSpace&&n.colorSpace!=="rgb"){const M=Cu[n.colorSpace];b=(A,I)=>M.reverse(M.interpolate(M.forward(A),M.forward(I),m))}return typeof y.evaluate=="function"?{evaluate(...M){const A=y.evaluate.apply(void 0,M),I=w.evaluate.apply(void 0,M);if(A!==void 0&&I!==void 0)return b(A,I,m)}}:b(y,w,m)}function ah(n,e,r){return e.type==="color"?r=nr.parse(r):e.type==="formatted"?r=ni.fromString(r.toString()):e.type==="resolvedImage"?r=Ci.fromString(r.toString()):hn(r)===e.type||e.type==="enum"&&e.values[r]||(r=void 0),ya(r,n.default,e.default)}class R1{constructor(e,r){this.expression=e,this._warningHistory={},this._evaluator=new pu,this._defaultValue=r?function(a){return a.type==="color"&&(Ml(a.default)||Array.isArray(a.default))?new nr(0,0,0,0):a.type==="color"?nr.parse(a.default)||null:a.default===void 0?null:a.default}(r):null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(e,r,a,u,d,m,y,w){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=a,this._evaluator.canonical=u||null,this._evaluator.availableImages=d||null,this._evaluator.formattedSection=m,this._evaluator.featureTileCoord=y||null,this._evaluator.featureDistanceData=w||null,this.expression.evaluate(this._evaluator)}evaluate(e,r,a,u,d,m,y,w){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=a||null,this._evaluator.canonical=u||null,this._evaluator.availableImages=d||null,this._evaluator.formattedSection=m||null,this._evaluator.featureTileCoord=y||null,this._evaluator.featureDistanceData=w||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new kr(`Expected value to be one of ${Object.keys(this._enumValues).map(M=>JSON.stringify(M)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function va(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in Sl}function xa(n,e){const r=new vu(Sl,[],e?function(u){const d={color:mi,string:ln,number:bt,enum:ln,boolean:tn,formatted:ul,resolvedImage:Is};return u.type==="array"?Mi(d[u.value]||nn,u.length):d[u.type]}(e):void 0),a=r.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return a?ih(new R1(a,e)):Rs(r.errors)}class Du{constructor(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!Ro(r.expression)}evaluateWithoutErrorHandling(e,r,a,u,d,m){return this._styleExpression.evaluateWithoutErrorHandling(e,r,a,u,d,m)}evaluate(e,r,a,u,d,m){return this._styleExpression.evaluate(e,r,a,u,d,m)}}class Cl{constructor(e,r,a,u){this.kind=e,this.zoomStops=a,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!Ro(r.expression),this.interpolationType=u}evaluateWithoutErrorHandling(e,r,a,u,d,m){return this._styleExpression.evaluateWithoutErrorHandling(e,r,a,u,d,m)}evaluate(e,r,a,u,d,m){return this._styleExpression.evaluate(e,r,a,u,d,m)}interpolationFactor(e,r,a){return this.interpolationType?mo.interpolationFactor(this.interpolationType,e,r,a):0}}function Pl(n,e){if((n=xa(n,e)).result==="error")return n;const r=n.value.expression,a=pa(r);if(!a&&!ga(e))return Rs([new Si("","data expressions not supported")]);const u=zs(r,["zoom","pitch","distance-from-center"]);if(!u&&!k1(e))return Rs([new Si("","zoom expressions not supported")]);const d=B1(r);return d||u?d instanceof Si?Rs([d]):d instanceof mo&&!L1(e)?Rs([new Si("",'"interpolate" expressions cannot be used with this property')]):ih(d?new Cl(a?"camera":"composite",n.value,d.labels,d instanceof mo?d.interpolation:void 0):new Du(a?"constant":"source",n.value)):Rs([new Si("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class F1{constructor(e,r){this._parameters=e,this._specification=r,Hr(this,z1(this._parameters,this._specification))}static deserialize(e){return new F1(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function B1(n){let e=null;if(n instanceof K2)e=B1(n.result);else if(n instanceof Au){for(const r of n.args)if(e=B1(r),e)break}else(n instanceof wu||n instanceof mo)&&n.input instanceof zo&&n.input.name==="zoom"&&(e=n);return e instanceof Si||n.eachChild(r=>{const a=B1(r);a instanceof Si?e=a:!e&&a?e=new Si("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&a&&e!==a&&(e=new Si("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}class Et{constructor(e,r,a,u){this.message=(e?`${e}: `:"")+a,u&&(this.identifier=u),r!=null&&r.__line__&&(this.line=r.__line__)}}function qi(n){const e=n.key,r=n.value,a=n.valueSpec||{},u=n.objectElementValidators||{},d=n.style,m=n.styleSpec;let y=[];const w=hn(r);if(w!=="object")return[new Et(e,r,`object expected, ${w} found`)];for(const b in r){const M=b.split(".")[0];let A;u[M]?A=u[M]:a[M]?A=Ur:u["*"]?A=u["*"]:a["*"]&&(A=Ur),A?y=y.concat(A({key:(e&&`${e}.`)+b,value:r[b],valueSpec:a[M]||a["*"],style:d,styleSpec:m,object:r,objectKey:b},r)):y.push(new Et(e,r[b],`unknown property "${b}"`))}for(const b in a)u[b]||a[b].required&&a[b].default===void 0&&r[b]===void 0&&y.push(new Et(e,r,`missing required property "${b}"`));return y}function lh(n){const e=n.value,r=n.valueSpec,a=n.style,u=n.styleSpec,d=n.key,m=n.arrayElementValidator||Ur;if(hn(e)!=="array")return[new Et(d,e,`array expected, ${hn(e)} found`)];if(r.length&&e.length!==r.length)return[new Et(d,e,`array length ${r.length} expected, length ${e.length} found`)];if(r["min-length"]&&e.length<r["min-length"])return[new Et(d,e,`array length at least ${r["min-length"]} expected, length ${e.length} found`)];let y={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};u.$version<7&&(y.function=r.function),hn(r.value)==="object"&&(y=r.value);let w=[];for(let b=0;b<e.length;b++)w=w.concat(m({array:e,arrayIndex:b,value:e[b],valueSpec:y,style:a,styleSpec:u,key:`${d}[${b}]`}));return w}function Al(n){const e=n.key,r=n.value,a=n.valueSpec;let u=hn(r);if(u==="number"&&r!=r&&(u="NaN"),u!=="number")return[new Et(e,r,`number expected, ${u} found`)];if("minimum"in a){let d=a.minimum;if(hn(a.minimum)==="array"&&(d=a.minimum[n.arrayIndex]),r<d)return[new Et(e,r,`${r} is less than the minimum value ${d}`)]}if("maximum"in a){let d=a.maximum;if(hn(a.maximum)==="array"&&(d=a.maximum[n.arrayIndex]),r>d)return[new Et(e,r,`${r} is greater than the maximum value ${d}`)]}return[]}function Il(n){const e=n.valueSpec,r=an(n.value.type);let a,u,d,m={};const y=r!=="categorical"&&n.value.property===void 0,w=!y,b=hn(n.value.stops)==="array"&&hn(n.value.stops[0])==="array"&&hn(n.value.stops[0][0])==="object",M=qi({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(z){if(r==="identity")return[new Et(z.key,z.value,'identity function may not have a "stops" property')];let R=[];const O=z.value;return R=R.concat(lh({key:z.key,value:O,valueSpec:z.valueSpec,style:z.style,styleSpec:z.styleSpec,arrayElementValidator:A})),hn(O)==="array"&&O.length===0&&R.push(new Et(z.key,O,"array must have at least one stop")),R},default:function(z){return Ur({key:z.key,value:z.value,valueSpec:e,style:z.style,styleSpec:z.styleSpec})}}});return r==="identity"&&y&&M.push(new Et(n.key,n.value,'missing required property "property"')),r==="identity"||n.value.stops||M.push(new Et(n.key,n.value,'missing required property "stops"')),r==="exponential"&&n.valueSpec.expression&&!L1(n.valueSpec)&&M.push(new Et(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(w&&!ga(n.valueSpec)?M.push(new Et(n.key,n.value,"property functions not supported")):y&&!k1(n.valueSpec)&&M.push(new Et(n.key,n.value,"zoom functions not supported"))),r!=="categorical"&&!b||n.value.property!==void 0||M.push(new Et(n.key,n.value,'"property" property is required')),M;function A(z){let R=[];const O=z.value,Z=z.key;if(hn(O)!=="array")return[new Et(Z,O,`array expected, ${hn(O)} found`)];if(O.length!==2)return[new Et(Z,O,`array length 2 expected, length ${O.length} found`)];if(b){if(hn(O[0])!=="object")return[new Et(Z,O,`object expected, ${hn(O[0])} found`)];if(O[0].zoom===void 0)return[new Et(Z,O,"object stop key must have zoom")];if(O[0].value===void 0)return[new Et(Z,O,"object stop key must have value")];const J=an(O[0].zoom);if(typeof J!="number")return[new Et(Z,O[0].zoom,"stop zoom values must be numbers")];if(d&&d>J)return[new Et(Z,O[0].zoom,"stop zoom values must appear in ascending order")];J!==d&&(d=J,u=void 0,m={}),R=R.concat(qi({key:`${Z}[0]`,value:O[0],valueSpec:{zoom:{}},style:z.style,styleSpec:z.styleSpec,objectElementValidators:{zoom:Al,value:I}}))}else R=R.concat(I({key:`${Z}[0]`,value:O[0],valueSpec:{},style:z.style,styleSpec:z.styleSpec},O));return va(Wn(O[1]))?R.concat([new Et(`${Z}[1]`,O[1],"expressions are not allowed in function stops.")]):R.concat(Ur({key:`${Z}[1]`,value:O[1],valueSpec:e,style:z.style,styleSpec:z.styleSpec}))}function I(z,R){const O=hn(z.value),Z=an(z.value),J=z.value!==null?z.value:R;if(a){if(O!==a)return[new Et(z.key,J,`${O} stop domain type must match previous stop domain type ${a}`)]}else a=O;if(O!=="number"&&O!=="string"&&O!=="boolean"&&typeof Z!="number"&&typeof Z!="string"&&typeof Z!="boolean")return[new Et(z.key,J,"stop domain value must be a number, string, or boolean")];if(O!=="number"&&r!=="categorical"){let le=`number expected, ${O} found`;return ga(e)&&r===void 0&&(le+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Et(z.key,J,le)]}return r!=="categorical"||O!=="number"||typeof Z=="number"&&isFinite(Z)&&Math.floor(Z)===Z?r!=="categorical"&&O==="number"&&typeof Z=="number"&&typeof u=="number"&&u!==void 0&&Z<u?[new Et(z.key,J,"stop domain values must appear in ascending order")]:(u=Z,r==="categorical"&&Z in m?[new Et(z.key,J,"stop domain values must be unique")]:(m[Z]=!0,[])):[new Et(z.key,J,`integer expected, found ${String(Z)}`)]}}function Sr(n){const e=(n.expressionContext==="property"?Pl:xa)(Wn(n.value),n.valueSpec);if(e.result==="error")return e.value.map(a=>new Et(`${n.key}${a.key}`,n.value,a.message));const r=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!r.outputDefined())return[new Et(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!Ro(r))return[new Et(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter")return kl(r,n);if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!zs(r,["zoom","feature-state"]))return[new Et(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!pa(r))return[new Et(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function kl(n,e){const r=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const u of e.valueSpec.expression.parameters)r.delete(u);if(r.size===0)return[];const a=[];return n instanceof zo&&r.has(n.name)?[new Et(e.key,e.value,`["${n.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(n.eachChild(u=>{a.push(...kl(u,e))}),a)}function O1(n){const e=n.key,r=n.value,a=n.valueSpec,u=[];return Array.isArray(a.values)?a.values.indexOf(an(r))===-1&&u.push(new Et(e,r,`expected one of [${a.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(a.values).indexOf(an(r))===-1&&u.push(new Et(e,r,`expected one of [${Object.keys(a.values).join(", ")}], ${JSON.stringify(r)} found`)),u}function Ru(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!Ru(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function U1(n,e="fill"){if(n==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Ru(n)||(n=ba(n));const r=n;let a=!0;try{a=function(b){if(!wa(b))return b;let M=Wn(b);return N1(M),M=ch(M),M}(r)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(r,null,2)}
        `)}const u=je[`filter_${e}`],d=xa(a,u);let m=null;if(d.result==="error")throw new Error(d.value.map(b=>`${b.key}: ${b.message}`).join(", "));m=(b,M,A)=>d.value.evaluate(b,M,{},A);let y=null,w=null;if(a!==r){const b=xa(r,u);if(b.result==="error")throw new Error(b.value.map(M=>`${M.key}: ${M.message}`).join(", "));y=(M,A,I,z,R)=>b.value.evaluate(M,A,{},I,void 0,void 0,z,R),w=!pa(b.value.expression)}return{filter:m,dynamicFilter:y||void 0,needGeometry:uh(a),needFeature:!!w}}function ch(n){if(!Array.isArray(n))return n;const e=function(r){if(Fu.has(r[0])){for(let a=1;a<r.length;a++)if(wa(r[a]))return!0}return r}(n);return e===!0?e:e.map(r=>ch(r))}function N1(n){let e=!1;const r=[];if(n[0]==="case"){for(let a=1;a<n.length-1;a+=2)e=e||wa(n[a]),r.push(n[a+1]);r.push(n[n.length-1])}else if(n[0]==="match"){e=e||wa(n[1]);for(let a=2;a<n.length-1;a+=2)r.push(n[a+1]);r.push(n[n.length-1])}else if(n[0]==="step"){e=e||wa(n[1]);for(let a=1;a<n.length-1;a+=2)r.push(n[a+1])}e&&(n.length=0,n.push("any",...r));for(let a=1;a<n.length;a++)N1(n[a])}function wa(n){if(!Array.isArray(n))return!1;if((e=n[0])==="pitch"||e==="distance-from-center")return!0;var e;for(let r=1;r<n.length;r++)if(wa(n[r]))return!0;return!1}const Fu=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function ld(n,e){return n<e?-1:n>e?1:0}function uh(n){if(!Array.isArray(n))return!1;if(n[0]==="within")return!0;for(let e=1;e<n.length;e++)if(uh(n[e]))return!0;return!1}function ba(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?Bu(n[1],n[2],"=="):e==="!="?j1(Bu(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Bu(n[1],n[2],e):e==="any"?(r=n.slice(1),["any"].concat(r.map(ba))):e==="all"?["all"].concat(n.slice(1).map(ba)):e==="none"?["all"].concat(n.slice(1).map(ba).map(j1)):e==="in"?Ou(n[1],n.slice(2)):e==="!in"?j1(Ou(n[1],n.slice(2))):e==="has"?Uu(n[1]):e==="!has"?j1(Uu(n[1])):e!=="within"||n;var r}function Bu(n,e,r){switch(n){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,n,e]}}function Ou(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(r=>typeof r!=typeof e[0])?["filter-in-large",n,["literal",e.sort(ld)]]:["filter-in-small",n,["literal",e]]}}function Uu(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function j1(n){return["!",n]}function Ll(n){return Ru(Wn(n.value))?Sr(Hr({},n,{expressionContext:"filter",valueSpec:n.styleSpec[`filter_${n.layerType||"fill"}`]})):zl(n)}function zl(n){const e=n.value,r=n.key;if(hn(e)!=="array")return[new Et(r,e,`array expected, ${hn(e)} found`)];const a=n.styleSpec;let u,d=[];if(e.length<1)return[new Et(r,e,"filter array must have at least 1 element")];switch(d=d.concat(O1({key:`${r}[0]`,value:e[0],valueSpec:a.filter_operator,style:n.style,styleSpec:n.styleSpec})),an(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&an(e[1])==="$type"&&d.push(new Et(r,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&d.push(new Et(r,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(u=hn(e[1]),u!=="string"&&d.push(new Et(`${r}[1]`,e[1],`string expected, ${u} found`)));for(let m=2;m<e.length;m++)u=hn(e[m]),an(e[1])==="$type"?d=d.concat(O1({key:`${r}[${m}]`,value:e[m],valueSpec:a.geometry_type,style:n.style,styleSpec:n.styleSpec})):u!=="string"&&u!=="number"&&u!=="boolean"&&d.push(new Et(`${r}[${m}]`,e[m],`string, number, or boolean expected, ${u} found`));break;case"any":case"all":case"none":for(let m=1;m<e.length;m++)d=d.concat(zl({key:`${r}[${m}]`,value:e[m],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":u=hn(e[1]),e.length!==2?d.push(new Et(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):u!=="string"&&d.push(new Et(`${r}[1]`,e[1],`string expected, ${u} found`));break;case"within":u=hn(e[1]),e.length!==2?d.push(new Et(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):u!=="object"&&d.push(new Et(`${r}[1]`,e[1],`object expected, ${u} found`))}return d}function Nu(n,e){const r=n.key,a=n.style,u=n.styleSpec,d=n.value,m=n.objectKey,y=u[`${e}_${n.layerType}`];if(!y)return[];const w=m.match(/^(.*)-transition$/);if(e==="paint"&&w&&y[w[1]]&&y[w[1]].transition)return Ur({key:r,value:d,valueSpec:u.transition,style:a,styleSpec:u});const b=n.valueSpec||y[m];if(!b)return[new Et(r,d,`unknown property "${m}"`)];let M;if(hn(d)==="string"&&ga(b)&&!b.tokens&&(M=/^{([^}]+)}$/.exec(d))){const I=`\`{ "type": "identity", "property": ${M?JSON.stringify(M[1]):'"_"'} }\``;return[new Et(r,d,`"${m}" does not support interpolation syntax
Use an identity property function instead: ${I}.`)]}const A=[];return n.layerType==="symbol"&&(m==="text-field"&&a&&!a.glyphs&&A.push(new Et(r,d,'use of "text-field" requires a style "glyphs" property')),m==="text-font"&&Ml(Wn(d))&&an(d.type)==="identity"&&A.push(new Et(r,d,'"text-font" does not support identity functions'))),A.concat(Ur({key:n.key,value:d,valueSpec:b,style:a,styleSpec:u,expressionContext:"property",propertyType:e,propertyKey:m}))}function hh(n){return Nu(n,"paint")}function ju(n){return Nu(n,"layout")}function dh(n){let e=[];const r=n.value,a=n.key,u=n.style,d=n.styleSpec;r.type||r.ref||e.push(new Et(a,r,'either "type" or "ref" is required'));let m=an(r.type);const y=an(r.ref);if(r.id){const w=an(r.id);for(let b=0;b<n.arrayIndex;b++){const M=u.layers[b];an(M.id)===w&&e.push(new Et(a,r.id,`duplicate layer id "${r.id}", previously used at line ${M.id.__line__}`))}}if("ref"in r){let w;["type","source","source-layer","filter","layout"].forEach(b=>{b in r&&e.push(new Et(a,r[b],`"${b}" is prohibited for ref layers`))}),u.layers.forEach(b=>{an(b.id)===y&&(w=b)}),w?w.ref?e.push(new Et(a,r.ref,"ref cannot reference another ref layer")):m=an(w.type):typeof y=="string"&&e.push(new Et(a,r.ref,`ref layer "${y}" not found`))}else if(m!=="background"&&m!=="sky")if(r.source){const w=u.sources&&u.sources[r.source],b=w&&an(w.type);w?b==="vector"&&m==="raster"?e.push(new Et(a,r.source,`layer "${r.id}" requires a raster source`)):b==="raster"&&m!=="raster"?e.push(new Et(a,r.source,`layer "${r.id}" requires a vector source`)):b!=="vector"||r["source-layer"]?b==="raster-dem"&&m!=="hillshade"?e.push(new Et(a,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):m!=="line"||!r.paint||!r.paint["line-gradient"]&&!r.paint["line-trim-offset"]||b==="geojson"&&w.lineMetrics||e.push(new Et(a,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Et(a,r,`layer "${r.id}" must specify a "source-layer"`)):e.push(new Et(a,r.source,`source "${r.source}" not found`))}else e.push(new Et(a,r,'missing required property "source"'));return e=e.concat(qi({key:a,value:r,valueSpec:d.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ur({key:`${a}.type`,value:r.type,valueSpec:d.layer.type,style:n.style,styleSpec:n.styleSpec,object:r,objectKey:"type"}),filter:w=>Ll(Hr({layerType:m},w)),layout:w=>qi({layer:r,key:w.key,value:w.value,valueSpec:{},style:w.style,styleSpec:w.styleSpec,objectElementValidators:{"*":b=>ju(Hr({layerType:m},b))}}),paint:w=>qi({layer:r,key:w.key,value:w.value,valueSpec:{},style:w.style,styleSpec:w.styleSpec,objectElementValidators:{"*":b=>hh(Hr({layerType:m},b))}})}})),e}function cs(n){const e=n.value,r=n.key,a=hn(e);return a!=="string"?[new Et(r,e,`string expected, ${a} found`)]:[]}const ph={promoteId:function({key:n,value:e}){if(hn(e)==="string")return cs({key:n,value:e});{const r=[];for(const a in e)r.push(...cs({key:`${n}.${a}`,value:e[a]}));return r}}};function fh(n){const e=n.value,r=n.key,a=n.styleSpec,u=n.style;if(!e.type)return[new Et(r,e,'"type" is required')];const d=an(e.type);let m;switch(d){case"vector":case"raster":case"raster-dem":return m=qi({key:r,value:e,valueSpec:a[`source_${d.replace("-","_")}`],style:n.style,styleSpec:a,objectElementValidators:ph}),m;case"geojson":if(m=qi({key:r,value:e,valueSpec:a.source_geojson,style:u,styleSpec:a,objectElementValidators:ph}),e.cluster)for(const y in e.clusterProperties){const[w,b]=e.clusterProperties[y],M=typeof w=="string"?[w,["accumulated"],["get",y]]:w;m.push(...Sr({key:`${r}.${y}.map`,value:b,expressionContext:"cluster-map"})),m.push(...Sr({key:`${r}.${y}.reduce`,value:M,expressionContext:"cluster-reduce"}))}return m;case"video":return qi({key:r,value:e,valueSpec:a.source_video,style:u,styleSpec:a});case"image":return qi({key:r,value:e,valueSpec:a.source_image,style:u,styleSpec:a});case"canvas":return[new Et(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return O1({key:`${r}.type`,value:e.type,valueSpec:{values:cd(a)},style:u,styleSpec:a})}}function cd(n){return n.source.reduce((e,r)=>{const a=n[r];return a.type.type==="enum"&&(e=e.concat(Object.keys(a.type.values))),e},[])}function mh(n){const e=n.value,r=n.styleSpec,a=r.light,u=n.style;let d=[];const m=hn(e);if(e===void 0)return d;if(m!=="object")return d=d.concat([new Et("light",e,`object expected, ${m} found`)]),d;for(const y in e){const w=y.match(/^(.*)-transition$/);d=d.concat(w&&a[w[1]]&&a[w[1]].transition?Ur({key:y,value:e[y],valueSpec:r.transition,style:u,styleSpec:r}):a[y]?Ur({key:y,value:e[y],valueSpec:a[y],style:u,styleSpec:r}):[new Et(y,e[y],`unknown property "${y}"`)])}return d}function Vu(n){const e=n.value,r=n.key,a=n.style,u=n.styleSpec,d=u.terrain;let m=[];const y=hn(e);if(e===void 0)return m;if(y!=="object")return m=m.concat([new Et("terrain",e,`object expected, ${y} found`)]),m;for(const w in e){const b=w.match(/^(.*)-transition$/);m=m.concat(b&&d[b[1]]&&d[b[1]].transition?Ur({key:w,value:e[w],valueSpec:u.transition,style:a,styleSpec:u}):d[w]?Ur({key:w,value:e[w],valueSpec:d[w],style:a,styleSpec:u}):[new Et(w,e[w],`unknown property "${w}"`)])}if(e.source){const w=a.sources&&a.sources[e.source],b=w&&an(w.type);w?b!=="raster-dem"&&m.push(new Et(r,e.source,`terrain cannot be used with a source of type ${String(b)}, it only be used with a "raster-dem" source type`)):m.push(new Et(r,e.source,`source "${e.source}" not found`))}else m.push(new Et(r,e,'terrain is missing required property "source"'));return m}function _h(n){const e=n.value,r=n.style,a=n.styleSpec,u=a.fog;let d=[];const m=hn(e);if(e===void 0)return d;if(m!=="object")return d=d.concat([new Et("fog",e,`object expected, ${m} found`)]),d;for(const y in e){const w=y.match(/^(.*)-transition$/);d=d.concat(w&&u[w[1]]&&u[w[1]].transition?Ur({key:y,value:e[y],valueSpec:a.transition,style:r,styleSpec:a}):u[y]?Ur({key:y,value:e[y],valueSpec:u[y],style:r,styleSpec:a}):[new Et(y,e[y],`unknown property "${y}"`)])}return d}const gh={"*":()=>[],array:lh,boolean:function(n){const e=n.value,r=n.key,a=hn(e);return a!=="boolean"?[new Et(r,e,`boolean expected, ${a} found`)]:[]},number:Al,color:function(n){const e=n.key,r=n.value,a=hn(r);return a!=="string"?[new Et(e,r,`color expected, ${a} found`)]:su(r)===null?[new Et(e,r,`color expected, "${r}" found`)]:[]},enum:O1,filter:Ll,function:Il,layer:dh,object:qi,source:fh,light:mh,terrain:Vu,fog:_h,string:cs,formatted:function(n){return cs(n).length===0?[]:Sr(n)},resolvedImage:function(n){return cs(n).length===0?[]:Sr(n)},projection:function(n){const e=n.value,r=n.styleSpec,a=r.projection,u=n.style;let d=[];const m=hn(e);if(m==="object")for(const y in e)d=d.concat(Ur({key:y,value:e[y],valueSpec:a[y],style:u,styleSpec:r}));else m!=="string"&&(d=d.concat([new Et("projection",e,`object or string expected, ${m} found`)]));return d}};function Ur(n){const e=n.value,r=n.valueSpec,a=n.styleSpec;return r.expression&&Ml(an(e))?Il(n):r.expression&&va(Wn(e))?Sr(n):r.type&&gh[r.type]?gh[r.type](n):qi(Hr({},n,{valueSpec:r.type?a[r.type]:r}))}function ud(n){const e=n.value,r=n.key,a=cs(n);return a.length||(e.indexOf("{fontstack}")===-1&&a.push(new Et(r,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&a.push(new Et(r,e,'"glyphs" url must include a "{range}" token'))),a}function yh(n,e=je){return Ai(Ur({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,objectElementValidators:{glyphs:ud,"*":()=>[]}}))}const hd=n=>Ai(hh(n)),dd=n=>Ai(ju(n));function Ai(n){return n.slice().sort((e,r)=>e.line&&r.line?e.line-r.line:0)}function vh(n,e){let r=!1;if(e&&e.length)for(const a of e)n.fire(new sn(new Error(a.message))),r=!0;return r}var pd=_o,Hi=3;function _o(n,e,r){var a=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;var u=new Int32Array(this.arrayBuffer);n=u[0],this.d=(e=u[1])+2*(r=u[2]);for(var d=0;d<this.d*this.d;d++){var m=u[Hi+d],y=u[Hi+d+1];a.push(m===y?null:u.subarray(m,y))}var w=u[Hi+a.length+1];this.keys=u.subarray(u[Hi+a.length],w),this.bboxes=u.subarray(w),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var b=0;b<this.d*this.d;b++)a.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=n,this.padding=r,this.scale=e/n,this.uid=0;var M=r/e*n;this.min=-M,this.max=n+M}_o.prototype.insert=function(n,e,r,a,u){this._forEachCell(e,r,a,u,this._insertCell,this.uid++),this.keys.push(n),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(a),this.bboxes.push(u)},_o.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},_o.prototype._insertCell=function(n,e,r,a,u,d){this.cells[u].push(d)},_o.prototype.query=function(n,e,r,a,u){var d=this.min,m=this.max;if(n<=d&&e<=d&&m<=r&&m<=a&&!u)return Array.prototype.slice.call(this.keys);var y=[];return this._forEachCell(n,e,r,a,this._queryCell,y,{},u),y},_o.prototype._queryCell=function(n,e,r,a,u,d,m,y){var w=this.cells[u];if(w!==null)for(var b=this.keys,M=this.bboxes,A=0;A<w.length;A++){var I=w[A];if(m[I]===void 0){var z=4*I;(y?y(M[z+0],M[z+1],M[z+2],M[z+3]):n<=M[z+2]&&e<=M[z+3]&&r>=M[z+0]&&a>=M[z+1])?(m[I]=!0,d.push(b[I])):m[I]=!1}}},_o.prototype._forEachCell=function(n,e,r,a,u,d,m,y){for(var w=this._convertToCellCoord(n),b=this._convertToCellCoord(e),M=this._convertToCellCoord(r),A=this._convertToCellCoord(a),I=w;I<=M;I++)for(var z=b;z<=A;z++){var R=this.d*z+I;if((!y||y(this._convertFromCellCoord(I),this._convertFromCellCoord(z),this._convertFromCellCoord(I+1),this._convertFromCellCoord(z+1)))&&u.call(this,n,e,r,a,R,d,m,y))return}},_o.prototype._convertFromCellCoord=function(n){return(n-this.padding)/this.scale},_o.prototype._convertToCellCoord=function(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))},_o.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var n=this.cells,e=Hi+this.cells.length+1+1,r=0,a=0;a<this.cells.length;a++)r+=this.cells[a].length;var u=new Int32Array(e+r+this.keys.length+this.bboxes.length);u[0]=this.extent,u[1]=this.n,u[2]=this.padding;for(var d=e,m=0;m<n.length;m++){var y=n[m];u[Hi+m]=d,u.set(y,d),d+=y.length}return u[Hi+n.length]=d,u.set(this.keys,d),u[Hi+n.length+1]=d+=this.keys.length,u.set(this.bboxes,d),d+=this.bboxes.length,u.buffer};var Fs=oe(pd);const V1={};function Ct(n,e,r={}){Object.defineProperty(n,"_classRegistryKey",{value:e,writeable:!1}),V1[e]={klass:n,omit:r.omit||[]}}Ct(Object,"Object"),Fs.serialize=function(n,e){const r=n.toArrayBuffer();return e&&e.push(r),{buffer:r}},Fs.deserialize=function(n){return new Fs(n.buffer)},Object.defineProperty(Fs,"name",{value:"Grid"}),Ct(Fs,"Grid"),Ct(nr,"Color"),Ct(Error,"Error"),Ct(Gi,"AJAXError"),Ct(Ci,"ResolvedImage"),Ct(F1,"StylePropertyFunction"),Ct(R1,"StyleExpression",{omit:["_evaluator"]}),Ct(Cl,"ZoomDependentExpression"),Ct(Du,"ZoomConstantExpression"),Ct(zo,"CompoundExpression",{omit:["_evaluate"]});for(const n in Sl)V1[Sl[n]._classRegistryKey]||Ct(Sl[n],`Expression${n}`);function Gu(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function $u(n){return C.ImageBitmap&&n instanceof C.ImageBitmap}function Ta(n,e){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp)return n;if(Gu(n)||$u(n))return e&&e.push(n),n;if(ArrayBuffer.isView(n)){const r=n;return e&&e.push(r.buffer),r}if(n instanceof C.ImageData)return e&&e.push(n.data.buffer),n;if(Array.isArray(n)){const r=[];for(const a of n)r.push(Ta(a,e));return r}if(typeof n=="object"){const r=n.constructor,a=r._classRegistryKey;if(!a)throw new Error(`can't serialize object of unregistered class ${a}`);const u=r.serialize?r.serialize(n,e):{};if(!r.serialize){for(const d in n)n.hasOwnProperty(d)&&(V1[a].omit.indexOf(d)>=0||(u[d]=Ta(n[d],e)));n instanceof Error&&(u.message=n.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return a!=="Object"&&(u.$name=a),u}throw new Error("can't serialize object of type "+typeof n)}function Bs(n){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||Gu(n)||$u(n)||ArrayBuffer.isView(n)||n instanceof C.ImageData)return n;if(Array.isArray(n))return n.map(Bs);if(typeof n=="object"){const e=n.$name||"Object",{klass:r}=V1[e];if(!r)throw new Error(`can't deserialize unregistered class ${e}`);if(r.deserialize)return r.deserialize(n);const a=Object.create(r.prototype);for(const u of Object.keys(n))u!=="$name"&&(a[u]=Bs(n[u]));return a}throw new Error("can't deserialize object of type "+typeof n)}const xt={"Latin-1 Supplement":n=>n>=128&&n<=255,Arabic:n=>n>=1536&&n<=1791,"Arabic Supplement":n=>n>=1872&&n<=1919,"Arabic Extended-A":n=>n>=2208&&n<=2303,"Hangul Jamo":n=>n>=4352&&n<=4607,"Unified Canadian Aboriginal Syllabics":n=>n>=5120&&n<=5759,Khmer:n=>n>=6016&&n<=6143,"Unified Canadian Aboriginal Syllabics Extended":n=>n>=6320&&n<=6399,"General Punctuation":n=>n>=8192&&n<=8303,"Letterlike Symbols":n=>n>=8448&&n<=8527,"Number Forms":n=>n>=8528&&n<=8591,"Miscellaneous Technical":n=>n>=8960&&n<=9215,"Control Pictures":n=>n>=9216&&n<=9279,"Optical Character Recognition":n=>n>=9280&&n<=9311,"Enclosed Alphanumerics":n=>n>=9312&&n<=9471,"Geometric Shapes":n=>n>=9632&&n<=9727,"Miscellaneous Symbols":n=>n>=9728&&n<=9983,"Miscellaneous Symbols and Arrows":n=>n>=11008&&n<=11263,"CJK Radicals Supplement":n=>n>=11904&&n<=12031,"Kangxi Radicals":n=>n>=12032&&n<=12255,"Ideographic Description Characters":n=>n>=12272&&n<=12287,"CJK Symbols and Punctuation":n=>n>=12288&&n<=12351,Hiragana:n=>n>=12352&&n<=12447,Katakana:n=>n>=12448&&n<=12543,Bopomofo:n=>n>=12544&&n<=12591,"Hangul Compatibility Jamo":n=>n>=12592&&n<=12687,Kanbun:n=>n>=12688&&n<=12703,"Bopomofo Extended":n=>n>=12704&&n<=12735,"CJK Strokes":n=>n>=12736&&n<=12783,"Katakana Phonetic Extensions":n=>n>=12784&&n<=12799,"Enclosed CJK Letters and Months":n=>n>=12800&&n<=13055,"CJK Compatibility":n=>n>=13056&&n<=13311,"CJK Unified Ideographs Extension A":n=>n>=13312&&n<=19903,"Yijing Hexagram Symbols":n=>n>=19904&&n<=19967,"CJK Unified Ideographs":n=>n>=19968&&n<=40959,"Yi Syllables":n=>n>=40960&&n<=42127,"Yi Radicals":n=>n>=42128&&n<=42191,"Hangul Jamo Extended-A":n=>n>=43360&&n<=43391,"Hangul Syllables":n=>n>=44032&&n<=55215,"Hangul Jamo Extended-B":n=>n>=55216&&n<=55295,"Private Use Area":n=>n>=57344&&n<=63743,"CJK Compatibility Ideographs":n=>n>=63744&&n<=64255,"Arabic Presentation Forms-A":n=>n>=64336&&n<=65023,"Vertical Forms":n=>n>=65040&&n<=65055,"CJK Compatibility Forms":n=>n>=65072&&n<=65103,"Small Form Variants":n=>n>=65104&&n<=65135,"Arabic Presentation Forms-B":n=>n>=65136&&n<=65279,"Halfwidth and Fullwidth Forms":n=>n>=65280&&n<=65519};function Zu(n){for(const e of n)if(Wu(e.charCodeAt(0)))return!0;return!1}function fd(n){for(const e of n)if(!xh(e.charCodeAt(0)))return!1;return!0}function xh(n){return!(xt.Arabic(n)||xt["Arabic Supplement"](n)||xt["Arabic Extended-A"](n)||xt["Arabic Presentation Forms-A"](n)||xt["Arabic Presentation Forms-B"](n))}function Wu(n){return!(n!==746&&n!==747&&(n<4352||!(xt["Bopomofo Extended"](n)||xt.Bopomofo(n)||xt["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||xt["CJK Compatibility Ideographs"](n)||xt["CJK Compatibility"](n)||xt["CJK Radicals Supplement"](n)||xt["CJK Strokes"](n)||!(!xt["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||n===12336)||xt["CJK Unified Ideographs Extension A"](n)||xt["CJK Unified Ideographs"](n)||xt["Enclosed CJK Letters and Months"](n)||xt["Hangul Compatibility Jamo"](n)||xt["Hangul Jamo Extended-A"](n)||xt["Hangul Jamo Extended-B"](n)||xt["Hangul Jamo"](n)||xt["Hangul Syllables"](n)||xt.Hiragana(n)||xt["Ideographic Description Characters"](n)||xt.Kanbun(n)||xt["Kangxi Radicals"](n)||xt["Katakana Phonetic Extensions"](n)||xt.Katakana(n)&&n!==12540||!(!xt["Halfwidth and Fullwidth Forms"](n)||n===65288||n===65289||n===65293||n>=65306&&n<=65310||n===65339||n===65341||n===65343||n>=65371&&n<=65503||n===65507||n>=65512&&n<=65519)||!(!xt["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||xt["Unified Canadian Aboriginal Syllabics"](n)||xt["Unified Canadian Aboriginal Syllabics Extended"](n)||xt["Vertical Forms"](n)||xt["Yijing Hexagram Symbols"](n)||xt["Yi Syllables"](n)||xt["Yi Radicals"](n))))}function wh(n){return!(Wu(n)||function(e){return!!(xt["Latin-1 Supplement"](e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||xt["General Punctuation"](e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||xt["Letterlike Symbols"](e)||xt["Number Forms"](e)||xt["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||xt["Control Pictures"](e)&&e!==9251||xt["Optical Character Recognition"](e)||xt["Enclosed Alphanumerics"](e)||xt["Geometric Shapes"](e)||xt["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||xt["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||xt["CJK Symbols and Punctuation"](e)||xt.Katakana(e)||xt["Private Use Area"](e)||xt["CJK Compatibility Forms"](e)||xt["Small Form Variants"](e)||xt["Halfwidth and Fullwidth Forms"](e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(n))}function bh(n){return n>=1424&&n<=2303||xt["Arabic Presentation Forms-A"](n)||xt["Arabic Presentation Forms-B"](n)}function md(n,e){return!(!e&&bh(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||xt.Khmer(n))}function _d(n){for(const e of n)if(bh(e.charCodeAt(0)))return!0;return!1}const qu="deferred",Hu="loading",Xu="loaded";let Ea=null,h="unavailable",i=null;const l=function(n){n&&typeof n=="string"&&n.indexOf("NetworkError")>-1&&(h="error"),Ea&&Ea(n)};function f(){g.fire(new Ei("pluginStateChange",{pluginStatus:h,pluginURL:i}))}const g=new Rn,v=function(){return h},T=function(){if(h!==qu||!i)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");h=Hu,f(),i&&ss({url:i},n=>{n?l(n):(h=Xu,f())})},S={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>h===Xu||S.applyArabicShaping!=null,isLoading:()=>h===Hu,setState(n){h=n.pluginStatus,i=n.pluginURL},isParsed:()=>S.applyArabicShaping!=null&&S.processBidirectionalText!=null&&S.processStyledBidirectionalText!=null,getPluginURL:()=>i};class P{constructor(e,r){this.zoom=e,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.transition=r.transition,this.pitch=r.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(e){return function(r,a){for(const u of r)if(!md(u.charCodeAt(0),a))return!1;return!0}(e,S.isLoaded())}}class L{constructor(e,r){this.property=e,this.value=r,this.expression=function(a,u){if(Ml(a))return new F1(a,u);if(va(a)){const d=Pl(a,u);if(d.result==="error")throw new Error(d.value.map(m=>`${m.key}: ${m.message}`).join(", "));return d.value}{let d=a;return typeof a=="string"&&u.type==="color"&&(d=nr.parse(a)),{kind:"constant",evaluate:()=>d}}}(r===void 0?e.specification.default:r,e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,r,a){return this.property.possiblyEvaluate(this,e,r,a)}}class k{constructor(e){this.property=e,this.value=new L(e,void 0)}transitioned(e,r){return new $(this.property,this.value,r,Zt({},e.transition,this.transition),e.now)}untransitioned(){return new $(this.property,this.value,null,{},0)}}class F{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return yr(this._values[e].value.value)}setValue(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new k(this._values[e].property)),this._values[e].value=new L(this._values[e].property,r===null?void 0:yr(r))}getTransition(e){return yr(this._values[e].transition)}setTransition(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new k(this._values[e].property)),this._values[e].transition=yr(r)||void 0}serialize(){const e={};for(const r of Object.keys(this._values)){const a=this.getValue(r);a!==void 0&&(e[r]=a);const u=this.getTransition(r);u!==void 0&&(e[`${r}-transition`]=u)}return e}transitioned(e,r){const a=new q(this._properties);for(const u of Object.keys(this._values))a._values[u]=this._values[u].transitioned(e,r._values[u]);return a}untransitioned(){const e=new q(this._properties);for(const r of Object.keys(this._values))e._values[r]=this._values[r].untransitioned();return e}}class ${constructor(e,r,a,u,d){const m=u.delay||0,y=u.duration||0;d=d||0,this.property=e,this.value=r,this.begin=d+m,this.end=this.begin+y,e.specification.transition&&(u.delay||u.duration)&&(this.prior=a)}possiblyEvaluate(e,r,a){const u=e.now||0,d=this.value.possiblyEvaluate(e,r,a),m=this.prior;if(m){if(u>this.end)return this.prior=null,d;if(this.value.isDataDriven())return this.prior=null,d;if(u<this.begin)return m.possiblyEvaluate(e,r,a);{const y=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(m.possiblyEvaluate(e,r,a),d,Ve(y))}}return d}}class q{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,r,a){const u=new Y(this._properties);for(const d of Object.keys(this._values))u._values[d]=this._values[d].possiblyEvaluate(e,r,a);return u}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class X{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return yr(this._values[e].value)}setValue(e,r){this._values[e]=new L(this._values[e].property,r===null?void 0:yr(r))}serialize(){const e={};for(const r of Object.keys(this._values)){const a=this.getValue(r);a!==void 0&&(e[r]=a)}return e}possiblyEvaluate(e,r,a){const u=new Y(this._properties);for(const d of Object.keys(this._values))u._values[d]=this._values[d].possiblyEvaluate(e,r,a);return u}}class H{constructor(e,r,a){this.property=e,this.value=r,this.parameters=a}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,r,a,u){return this.property.evaluate(this.value,this.parameters,e,r,a,u)}}class Y{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class B{constructor(e){this.specification=e}possiblyEvaluate(e,r){return e.expression.evaluate(r)}interpolate(e,r,a){const u=xl[this.specification.type];return u?u(e,r,a):e}}class W{constructor(e,r){this.specification=e,this.overrides=r}possiblyEvaluate(e,r,a,u){return new H(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(r,null,{},a,u)}:e.expression,r)}interpolate(e,r,a){if(e.value.kind!=="constant"||r.value.kind!=="constant")return e;if(e.value.value===void 0||r.value.value===void 0)return new H(this,{kind:"constant",value:void 0},e.parameters);const u=xl[this.specification.type];return u?new H(this,{kind:"constant",value:u(e.value.value,r.value.value,a)},e.parameters):e}evaluate(e,r,a,u,d,m){return e.kind==="constant"?e.value:e.evaluate(r,a,u,d,m)}}class te{constructor(e){this.specification=e}possiblyEvaluate(e,r,a,u){return!!e.expression.evaluate(r,null,{},a,u)}interpolate(){return!1}}class re{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const r=new P(0,{});for(const a in e){const u=e[a];u.specification.overridable&&this.overridableProperties.push(a);const d=this.defaultPropertyValues[a]=new L(u,void 0),m=this.defaultTransitionablePropertyValues[a]=new k(u);this.defaultTransitioningPropertyValues[a]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=d.possiblyEvaluate(r)}}}function pe(n,e){return 256*(n=Ee(Math.floor(n),0,255))+Ee(Math.floor(e),0,255)}Ct(W,"DataDrivenProperty"),Ct(B,"DataConstantProperty"),Ct(te,"ColorRampProperty");const me={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class fe{constructor(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Se{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,r){return e._trim(),r&&(e.isTransferred=!0,r.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function be(n,e=1){let r=0,a=0;return{members:n.map(u=>{const d=me[u.type].BYTES_PER_ELEMENT,m=r=Le(r,Math.max(e,d)),y=u.components||1;return a=Math.max(a,d),r+=d*y,{name:u.name,type:u.type,components:y,offset:m}}),size:Le(r,Math.max(a,e)),alignment:e}}function Le(n,e){return Math.ceil(n/e)*e}class ot extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r){const a=this.length;return this.resize(a+1),this.emplace(a,e,r)}emplace(e,r,a){const u=2*e;return this.int16[u+0]=r,this.int16[u+1]=a,e}}ot.prototype.bytesPerElement=4,Ct(ot,"StructArrayLayout2i4");class Ae extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,a){const u=this.length;return this.resize(u+1),this.emplace(u,e,r,a)}emplace(e,r,a,u){const d=3*e;return this.int16[d+0]=r,this.int16[d+1]=a,this.int16[d+2]=u,e}}Ae.prototype.bytesPerElement=6,Ct(Ae,"StructArrayLayout3i6");class qe extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,a,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,a,u)}emplace(e,r,a,u,d){const m=4*e;return this.int16[m+0]=r,this.int16[m+1]=a,this.int16[m+2]=u,this.int16[m+3]=d,e}}qe.prototype.bytesPerElement=8,Ct(qe,"StructArrayLayout4i8");class Fe extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,u,d,m,y){const w=this.length;return this.resize(w+1),this.emplace(w,e,r,a,u,d,m,y)}emplace(e,r,a,u,d,m,y,w){const b=6*e,M=12*e,A=3*e;return this.int16[b+0]=r,this.int16[b+1]=a,this.uint8[M+4]=u,this.uint8[M+5]=d,this.uint8[M+6]=m,this.uint8[M+7]=y,this.float32[A+2]=w,e}}Fe.prototype.bytesPerElement=12,Ct(Fe,"StructArrayLayout2i4ub1f12");class nt extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,a,u)}emplace(e,r,a,u,d){const m=4*e;return this.float32[m+0]=r,this.float32[m+1]=a,this.float32[m+2]=u,this.float32[m+3]=d,e}}nt.prototype.bytesPerElement=16,Ct(nt,"StructArrayLayout4f16");class ke extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,u,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,a,u,d)}emplace(e,r,a,u,d,m){const y=6*e,w=3*e;return this.uint16[y+0]=r,this.uint16[y+1]=a,this.uint16[y+2]=u,this.uint16[y+3]=d,this.float32[w+2]=m,e}}ke.prototype.bytesPerElement=12,Ct(ke,"StructArrayLayout4ui1f12");class We extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,a,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,a,u)}emplace(e,r,a,u,d){const m=4*e;return this.uint16[m+0]=r,this.uint16[m+1]=a,this.uint16[m+2]=u,this.uint16[m+3]=d,e}}We.prototype.bytesPerElement=8,Ct(We,"StructArrayLayout4ui8");class at extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,a,u,d,m){const y=this.length;return this.resize(y+1),this.emplace(y,e,r,a,u,d,m)}emplace(e,r,a,u,d,m,y){const w=6*e;return this.int16[w+0]=r,this.int16[w+1]=a,this.int16[w+2]=u,this.int16[w+3]=d,this.int16[w+4]=m,this.int16[w+5]=y,e}}at.prototype.bytesPerElement=12,Ct(at,"StructArrayLayout6i12");class Qe extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,a,u,d,m,y,w,b,M,A,I){const z=this.length;return this.resize(z+1),this.emplace(z,e,r,a,u,d,m,y,w,b,M,A,I)}emplace(e,r,a,u,d,m,y,w,b,M,A,I,z){const R=12*e;return this.int16[R+0]=r,this.int16[R+1]=a,this.int16[R+2]=u,this.int16[R+3]=d,this.uint16[R+4]=m,this.uint16[R+5]=y,this.uint16[R+6]=w,this.uint16[R+7]=b,this.int16[R+8]=M,this.int16[R+9]=A,this.int16[R+10]=I,this.int16[R+11]=z,e}}Qe.prototype.bytesPerElement=24,Ct(Qe,"StructArrayLayout4i4ui4i24");class lt extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,u,d,m){const y=this.length;return this.resize(y+1),this.emplace(y,e,r,a,u,d,m)}emplace(e,r,a,u,d,m,y){const w=10*e,b=5*e;return this.int16[w+0]=r,this.int16[w+1]=a,this.int16[w+2]=u,this.float32[b+2]=d,this.float32[b+3]=m,this.float32[b+4]=y,e}}lt.prototype.bytesPerElement=20,Ct(lt,"StructArrayLayout3i3f20");class Dt extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint32[1*e+0]=r,e}}Dt.prototype.bytesPerElement=4,Ct(Dt,"StructArrayLayout1ul4");class Gt extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,a,u,d,m,y,w,b,M,A,I,z){const R=this.length;return this.resize(R+1),this.emplace(R,e,r,a,u,d,m,y,w,b,M,A,I,z)}emplace(e,r,a,u,d,m,y,w,b,M,A,I,z,R){const O=20*e,Z=10*e;return this.int16[O+0]=r,this.int16[O+1]=a,this.int16[O+2]=u,this.int16[O+3]=d,this.int16[O+4]=m,this.float32[Z+3]=y,this.float32[Z+4]=w,this.float32[Z+5]=b,this.float32[Z+6]=M,this.int16[O+14]=A,this.uint32[Z+8]=I,this.uint16[O+18]=z,this.uint16[O+19]=R,e}}Gt.prototype.bytesPerElement=40,Ct(Gt,"StructArrayLayout5i4f1i1ul2ui40");class Pt extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,a,u,d,m,y){const w=this.length;return this.resize(w+1),this.emplace(w,e,r,a,u,d,m,y)}emplace(e,r,a,u,d,m,y,w){const b=8*e;return this.int16[b+0]=r,this.int16[b+1]=a,this.int16[b+2]=u,this.int16[b+4]=d,this.int16[b+5]=m,this.int16[b+6]=y,this.int16[b+7]=w,e}}Pt.prototype.bytesPerElement=16,Ct(Pt,"StructArrayLayout3i2i2i16");class Ot extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,a,u,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,a,u,d)}emplace(e,r,a,u,d,m){const y=4*e,w=8*e;return this.float32[y+0]=r,this.float32[y+1]=a,this.float32[y+2]=u,this.int16[w+6]=d,this.int16[w+7]=m,e}}Ot.prototype.bytesPerElement=16,Ct(Ot,"StructArrayLayout2f1f2i16");class rn extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,a,u)}emplace(e,r,a,u,d){const m=12*e,y=3*e;return this.uint8[m+0]=r,this.uint8[m+1]=a,this.float32[y+1]=u,this.float32[y+2]=d,e}}rn.prototype.bytesPerElement=12,Ct(rn,"StructArrayLayout2ub2f12");class en extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a){const u=this.length;return this.resize(u+1),this.emplace(u,e,r,a)}emplace(e,r,a,u){const d=3*e;return this.float32[d+0]=r,this.float32[d+1]=a,this.float32[d+2]=u,e}}en.prototype.bytesPerElement=12,Ct(en,"StructArrayLayout3f12");class Lt extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,a){const u=this.length;return this.resize(u+1),this.emplace(u,e,r,a)}emplace(e,r,a,u){const d=3*e;return this.uint16[d+0]=r,this.uint16[d+1]=a,this.uint16[d+2]=u,e}}Lt.prototype.bytesPerElement=6,Ct(Lt,"StructArrayLayout3ui6");class vn extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,a,u,d,m,y,w,b,M,A,I,z,R,O,Z,J,le,Q,ae,he){const ue=this.length;return this.resize(ue+1),this.emplace(ue,e,r,a,u,d,m,y,w,b,M,A,I,z,R,O,Z,J,le,Q,ae,he)}emplace(e,r,a,u,d,m,y,w,b,M,A,I,z,R,O,Z,J,le,Q,ae,he,ue){const De=30*e,Ie=15*e,Ze=60*e;return this.int16[De+0]=r,this.int16[De+1]=a,this.int16[De+2]=u,this.float32[Ie+2]=d,this.float32[Ie+3]=m,this.uint16[De+8]=y,this.uint16[De+9]=w,this.uint32[Ie+5]=b,this.uint32[Ie+6]=M,this.uint32[Ie+7]=A,this.uint16[De+16]=I,this.uint16[De+17]=z,this.uint16[De+18]=R,this.float32[Ie+10]=O,this.float32[Ie+11]=Z,this.uint8[Ze+48]=J,this.uint8[Ze+49]=le,this.uint8[Ze+50]=Q,this.uint32[Ie+13]=ae,this.int16[De+28]=he,this.uint8[Ze+58]=ue,e}}vn.prototype.bytesPerElement=60,Ct(vn,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class bn extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,a,u,d,m,y,w,b,M,A,I,z,R,O,Z,J,le,Q,ae,he,ue,De,Ie,Ze,st,Be,Xe,Ke,et){const ut=this.length;return this.resize(ut+1),this.emplace(ut,e,r,a,u,d,m,y,w,b,M,A,I,z,R,O,Z,J,le,Q,ae,he,ue,De,Ie,Ze,st,Be,Xe,Ke,et)}emplace(e,r,a,u,d,m,y,w,b,M,A,I,z,R,O,Z,J,le,Q,ae,he,ue,De,Ie,Ze,st,Be,Xe,Ke,et,ut){const Ge=38*e,_t=19*e;return this.int16[Ge+0]=r,this.int16[Ge+1]=a,this.int16[Ge+2]=u,this.float32[_t+2]=d,this.float32[_t+3]=m,this.int16[Ge+8]=y,this.int16[Ge+9]=w,this.int16[Ge+10]=b,this.int16[Ge+11]=M,this.int16[Ge+12]=A,this.int16[Ge+13]=I,this.uint16[Ge+14]=z,this.uint16[Ge+15]=R,this.uint16[Ge+16]=O,this.uint16[Ge+17]=Z,this.uint16[Ge+18]=J,this.uint16[Ge+19]=le,this.uint16[Ge+20]=Q,this.uint16[Ge+21]=ae,this.uint16[Ge+22]=he,this.uint16[Ge+23]=ue,this.uint16[Ge+24]=De,this.uint16[Ge+25]=Ie,this.uint16[Ge+26]=Ze,this.uint16[Ge+27]=st,this.uint16[Ge+28]=Be,this.uint32[_t+15]=Xe,this.float32[_t+16]=Ke,this.float32[_t+17]=et,this.float32[_t+18]=ut,e}}bn.prototype.bytesPerElement=76,Ct(bn,"StructArrayLayout3i2f6i15ui1ul3f76");class Tn extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.float32[1*e+0]=r,e}}Tn.prototype.bytesPerElement=4,Ct(Tn,"StructArrayLayout1f4");class En extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,a,u,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,a,u,d)}emplace(e,r,a,u,d,m){const y=5*e;return this.float32[y+0]=r,this.float32[y+1]=a,this.float32[y+2]=u,this.float32[y+3]=d,this.float32[y+4]=m,e}}En.prototype.bytesPerElement=20,Ct(En,"StructArrayLayout5f20");class Nr extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,a,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,a,u)}emplace(e,r,a,u,d){const m=6*e;return this.uint32[3*e+0]=r,this.uint16[m+2]=a,this.uint16[m+3]=u,this.uint16[m+4]=d,e}}Nr.prototype.bytesPerElement=12,Ct(Nr,"StructArrayLayout1ul3ui12");class Mr extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r){const a=this.length;return this.resize(a+1),this.emplace(a,e,r)}emplace(e,r,a){const u=2*e;return this.uint16[u+0]=r,this.uint16[u+1]=a,e}}Mr.prototype.bytesPerElement=4,Ct(Mr,"StructArrayLayout2ui4");class Ii extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint16[1*e+0]=r,e}}Ii.prototype.bytesPerElement=2,Ct(Ii,"StructArrayLayout1ui2");class go extends Se{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r){const a=this.length;return this.resize(a+1),this.emplace(a,e,r)}emplace(e,r,a){const u=2*e;return this.float32[u+0]=r,this.float32[u+1]=a,e}}go.prototype.bytesPerElement=8,Ct(go,"StructArrayLayout2f8");class $n extends fe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}$n.prototype.size=40;class Sn extends Gt{get(e){return new $n(this,e)}}Ct(Sn,"CollisionBoxArray");class pn extends fe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}pn.prototype.size=60;class ar extends vn{get(e){return new pn(this,e)}}Ct(ar,"PlacedSymbolArray");class Xr extends fe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Xr.prototype.size=76;class Nn extends bn{get(e){return new Xr(this,e)}}Ct(Nn,"SymbolInstanceArray");class ri extends Tn{getoffsetX(e){return this.float32[1*e+0]}}Ct(ri,"GlyphOffsetArray");class G1 extends ot{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}Ct(G1,"SymbolLineVertexArray");class Os extends fe{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Os.prototype.size=12;class Dl extends Nr{get(e){return new Os(this,e)}}Ct(Dl,"FeatureIndexArray");class Oo extends Mr{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}Ct(Oo,"FillExtrusionCentroidArray");const us=be([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Us=be([{name:"a_dash",components:4,type:"Uint16"}]);var $1={exports:{}},Rl={exports:{}};Rl.exports=function(n,e){var r,a,u,d,m,y,w,b;for(a=n.length-(r=3&n.length),u=e,m=3432918353,y=461845907,b=0;b<a;)w=255&n.charCodeAt(b)|(255&n.charCodeAt(++b))<<8|(255&n.charCodeAt(++b))<<16|(255&n.charCodeAt(++b))<<24,++b,u=27492+(65535&(d=5*(65535&(u=(u^=w=(65535&(w=(w=(65535&w)*m+(((w>>>16)*m&65535)<<16)&4294967295)<<15|w>>>17))*y+(((w>>>16)*y&65535)<<16)&4294967295)<<13|u>>>19))+((5*(u>>>16)&65535)<<16)&4294967295))+((58964+(d>>>16)&65535)<<16);switch(w=0,r){case 3:w^=(255&n.charCodeAt(b+2))<<16;case 2:w^=(255&n.charCodeAt(b+1))<<8;case 1:u^=w=(65535&(w=(w=(65535&(w^=255&n.charCodeAt(b)))*m+(((w>>>16)*m&65535)<<16)&4294967295)<<15|w>>>17))*y+(((w>>>16)*y&65535)<<16)&4294967295}return u^=n.length,u=2246822507*(65535&(u^=u>>>16))+((2246822507*(u>>>16)&65535)<<16)&4294967295,u=3266489909*(65535&(u^=u>>>13))+((3266489909*(u>>>16)&65535)<<16)&4294967295,(u^=u>>>16)>>>0};var Ku=Rl.exports,f7={exports:{}};f7.exports=function(n,e){for(var r,a=n.length,u=e^a,d=0;a>=4;)r=1540483477*(65535&(r=255&n.charCodeAt(d)|(255&n.charCodeAt(++d))<<8|(255&n.charCodeAt(++d))<<16|(255&n.charCodeAt(++d))<<24))+((1540483477*(r>>>16)&65535)<<16),u=1540483477*(65535&u)+((1540483477*(u>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),a-=4,++d;switch(a){case 3:u^=(255&n.charCodeAt(d+2))<<16;case 2:u^=(255&n.charCodeAt(d+1))<<8;case 1:u=1540483477*(65535&(u^=255&n.charCodeAt(d)))+((1540483477*(u>>>16)&65535)<<16)}return u=1540483477*(65535&(u^=u>>>13))+((1540483477*(u>>>16)&65535)<<16),(u^=u>>>15)>>>0};var m7=Ku,Xy=f7.exports;$1.exports=m7,$1.exports.murmur3=m7,$1.exports.murmur2=Xy;var gd=oe($1.exports);class Th{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,r,a,u){this.ids.push(_7(e)),this.positions.push(r,a,u)}getPositions(e){const r=_7(e);let a=0,u=this.ids.length-1;for(;a<u;){const m=a+u>>1;this.ids[m]>=r?u=m:a=m+1}const d=[];for(;this.ids[a]===r;)d.push({index:this.positions[3*a],start:this.positions[3*a+1],end:this.positions[3*a+2]}),a++;return d}static serialize(e,r){const a=new Float64Array(e.ids),u=new Uint32Array(e.positions);return yd(a,u,0,a.length-1),r&&r.push(a.buffer,u.buffer),{ids:a,positions:u}}static deserialize(e){const r=new Th;return r.ids=e.ids,r.positions=e.positions,r.indexed=!0,r}}function _7(n){const e=+n;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:gd(String(n))}function yd(n,e,r,a){for(;r<a;){const u=n[r+a>>1];let d=r-1,m=a+1;for(;;){do d++;while(n[d]<u);do m--;while(n[m]>u);if(d>=m)break;Eh(n,d,m),Eh(e,3*d,3*m),Eh(e,3*d+1,3*m+1),Eh(e,3*d+2,3*m+2)}m-r<a-m?(yd(n,e,r,m),r=m+1):(yd(n,e,m+1,a),a=m)}}function Eh(n,e,r){const a=n[e];n[e]=n[r],n[r]=a}Ct(Th,"FeaturePositionMap");class Ns{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,r){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,r),this.initialized=!0),!!this.location}}class Sh extends Ns{constructor(e){super(e),this.current=0}set(e,r,a){this.fetchUniformLocation(e,r)&&this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class g7 extends Ns{constructor(e){super(e),this.current=[0,0,0,0]}set(e,r,a){this.fetchUniformLocation(e,r)&&(a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3])))}}class y7 extends Ns{constructor(e){super(e),this.current=nr.transparent}set(e,r,a){this.fetchUniformLocation(e,r)&&(a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a)))}}const Ky=new Float32Array(16),Yy=new Float32Array(9),Jy=new Float32Array(4);function vd(n){return[pe(255*n.r,255*n.g),pe(255*n.b,255*n.a)]}class Yu{constructor(e,r,a){this.value=e,this.uniformNames=r.map(u=>`u_${u}`),this.type=a}setUniform(e,r,a,u,d){r.set(e,d,u.constantOr(this.value))}getBinding(e,r){return this.type==="color"?new y7(e):new Sh(e)}}class Z1{constructor(e,r){this.uniformNames=r.map(a=>`u_${a}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,r,a,u,d){const m=d==="u_pattern"||d==="u_dash"?this.pattern:d==="u_pixel_ratio"?this.pixelRatio:null;m&&r.set(e,d,m)}getBinding(e,r){return r==="u_pattern"||r==="u_dash"?new g7(e):new Sh(e)}}class js{constructor(e,r,a,u){this.expression=e,this.type=a,this.maxValue=0,this.paintVertexAttributes=r.map(d=>({name:`a_${d}`,type:"Float32",components:a==="color"?2:1,offset:0})),this.paintVertexArray=new u}populatePaintArray(e,r,a,u,d,m){const y=this.paintVertexArray.length,w=this.expression.evaluate(new P(0),r,{},d,u,m);this.paintVertexArray.resize(e),this._setPaintValue(y,e,w)}updatePaintArray(e,r,a,u,d){const m=this.expression.evaluate({zoom:0},a,u,void 0,d);this._setPaintValue(e,r,m)}_setPaintValue(e,r,a){if(this.type==="color"){const u=vd(a);for(let d=e;d<r;d++)this.paintVertexArray.emplace(d,u[0],u[1])}else{for(let u=e;u<r;u++)this.paintVertexArray.emplace(u,a);this.maxValue=Math.max(this.maxValue,Math.abs(a))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Uo{constructor(e,r,a,u,d,m){this.expression=e,this.uniformNames=r.map(y=>`u_${y}_t`),this.type=a,this.useIntegerZoom=u,this.zoom=d,this.maxValue=0,this.paintVertexAttributes=r.map(y=>({name:`a_${y}`,type:"Float32",components:a==="color"?4:2,offset:0})),this.paintVertexArray=new m}populatePaintArray(e,r,a,u,d,m){const y=this.expression.evaluate(new P(this.zoom),r,{},d,u,m),w=this.expression.evaluate(new P(this.zoom+1),r,{},d,u,m),b=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(b,e,y,w)}updatePaintArray(e,r,a,u,d){const m=this.expression.evaluate({zoom:this.zoom},a,u,void 0,d),y=this.expression.evaluate({zoom:this.zoom+1},a,u,void 0,d);this._setPaintValue(e,r,m,y)}_setPaintValue(e,r,a,u){if(this.type==="color"){const d=vd(a),m=vd(u);for(let y=e;y<r;y++)this.paintVertexArray.emplace(y,d[0],d[1],m[0],m[1])}else{for(let d=e;d<r;d++)this.paintVertexArray.emplace(d,a,u);this.maxValue=Math.max(this.maxValue,Math.abs(a),Math.abs(u))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,r,a,u,d){const m=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,y=Ee(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);r.set(e,d,y)}getBinding(e,r){return new Sh(e)}}class Sa{constructor(e,r,a,u,d){this.expression=e,this.layerId=d,this.paintVertexAttributes=(a==="array"?Us:us).members;for(let m=0;m<r.length;++m);this.paintVertexArray=new u}populatePaintArray(e,r,a){const u=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(u,e,r.patterns&&r.patterns[this.layerId],a)}updatePaintArray(e,r,a,u,d,m){this._setPaintValues(e,r,a.patterns&&a.patterns[this.layerId],m)}_setPaintValues(e,r,a,u){if(!u||!a)return;const d=u[a];if(!d)return;const{tl:m,br:y,pixelRatio:w}=d;for(let b=e;b<r;b++)this.paintVertexArray.emplace(b,m[0],m[1],y[0],y[1],w)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ma{constructor(e,r,a=()=>!0){this.binders={},this._buffers=[];const u=[];for(const d in e.paint._values){if(!a(d))continue;const m=e.paint.get(d);if(!(m instanceof H&&ga(m.property.specification)))continue;const y=ev(d,e.type),w=m.value,b=m.property.specification.type,M=!!m.property.useIntegerZoom,A=d==="line-dasharray"||d.endsWith("pattern"),I=d==="line-dasharray"&&e.layout.get("line-cap").value.kind!=="constant";if(w.kind!=="constant"||I)if(w.kind==="source"||I||A){const z=v7(d,b,"source");this.binders[d]=A?new Sa(w,y,b,z,e.id):new js(w,y,b,z),u.push(`/a_${d}`)}else{const z=v7(d,b,"composite");this.binders[d]=new Uo(w,y,b,M,r,z),u.push(`/z_${d}`)}else this.binders[d]=A?new Z1(w.value,y):new Yu(w.value,y,b),u.push(`/u_${d}`)}this.cacheKey=u.sort().join("")}getMaxValue(e){const r=this.binders[e];return r instanceof js||r instanceof Uo?r.maxValue:0}populatePaintArrays(e,r,a,u,d,m){for(const y in this.binders){const w=this.binders[y];(w instanceof js||w instanceof Uo||w instanceof Sa)&&w.populatePaintArray(e,r,a,u,d,m)}}setConstantPatternPositions(e){for(const r in this.binders){const a=this.binders[r];a instanceof Z1&&a.setConstantPatternPositions(e)}}updatePaintArrays(e,r,a,u,d,m){let y=!1;for(const w in e){const b=r.getPositions(w);for(const M of b){const A=a.feature(M.index);for(const I in this.binders){const z=this.binders[I];if((z instanceof js||z instanceof Uo||z instanceof Sa)&&z.expression.isStateDependent===!0){const R=u.paint.get(I);z.expression=R.value,z.updatePaintArray(M.start,M.end,A,e[w],d,m),y=!0}}}}return y}defines(){const e=[];for(const r in this.binders){const a=this.binders[r];(a instanceof Yu||a instanceof Z1)&&e.push(...a.uniformNames.map(u=>`#define HAS_UNIFORM_${u}`))}return e}getBinderAttributes(){const e=[];for(const r in this.binders){const a=this.binders[r];if(a instanceof js||a instanceof Uo||a instanceof Sa)for(let u=0;u<a.paintVertexAttributes.length;u++)e.push(a.paintVertexAttributes[u].name)}return e}getBinderUniforms(){const e=[];for(const r in this.binders){const a=this.binders[r];if(a instanceof Yu||a instanceof Z1||a instanceof Uo)for(const u of a.uniformNames)e.push(u)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const r=[];for(const a in this.binders){const u=this.binders[a];if(u instanceof Yu||u instanceof Z1||u instanceof Uo)for(const d of u.uniformNames)r.push({name:d,property:a,binding:u.getBinding(e,d)})}return r}setUniforms(e,r,a,u,d){for(const{name:m,property:y,binding:w}of a)this.binders[y].setUniform(e,w,d,u.get(y),m)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const r=this.binders[e];(r instanceof js||r instanceof Uo||r instanceof Sa)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}}upload(e){for(const r in this.binders){const a=this.binders[r];(a instanceof js||a instanceof Uo||a instanceof Sa)&&a.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const r=this.binders[e];(r instanceof js||r instanceof Uo||r instanceof Sa)&&r.destroy()}}}class Fl{constructor(e,r,a=()=>!0){this.programConfigurations={};for(const u of e)this.programConfigurations[u.id]=new Ma(u,r,a);this.needsUpload=!1,this._featureMap=new Th,this._bufferOffset=0}populatePaintArrays(e,r,a,u,d,m,y){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(e,r,u,d,m,y);r.id!==void 0&&this._featureMap.add(r.id,a,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,r,a,u,d){for(const m of a)this.needsUpload=this.programConfigurations[m.id].updatePaintArrays(e,this._featureMap,r,m,u,d)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Qy={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function ev(n,e){return Qy[n]||[n.replace(`${e}-`,"").replace(/-/g,"_")]}const tv={"line-pattern":{source:ke,composite:ke},"fill-pattern":{source:ke,composite:ke},"fill-extrusion-pattern":{source:ke,composite:ke},"line-dasharray":{source:We,composite:We}},nv={color:{source:go,composite:nt},number:{source:Tn,composite:go}};function v7(n,e,r){const a=tv[n];return a&&a[r]||nv[e][r]}Ct(Yu,"ConstantBinder"),Ct(Z1,"PatternConstantBinder"),Ct(js,"SourceExpressionBinder"),Ct(Sa,"PatternCompositeBinder"),Ct(Uo,"CompositeExpressionBinder"),Ct(Ma,"ProgramConfiguration",{omit:["_buffers"]}),Ct(Fl,"ProgramConfigurationSet");const x7="-transition";class No extends Rn{constructor(e,r){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&e.type!=="sky"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new X(r.layout)),r.paint)){this._transitionablePaint=new F(r.paint);for(const a in e.paint)this.setPaintProperty(a,e.paint[a],{validate:!1});for(const a in e.layout)this.setLayoutProperty(a,e.layout[a],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Y(r.paint)}}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,r,a={}){r!=null&&this._validate(dd,`layers.${this.id}.layout.${e}`,e,r,a)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,r):this.visibility=r)}getPaintProperty(e){return rs(e,x7)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,r,a={}){if(r!=null&&this._validate(hd,`layers.${this.id}.paint.${e}`,e,r,a))return!1;if(rs(e,x7))return this._transitionablePaint.setTransition(e.slice(0,-11),r||void 0),!1;{const u=this._transitionablePaint._values[e],d=u.value.isDataDriven(),m=u.value;this._transitionablePaint.setValue(e,r),this._handleSpecialPaintPropertyUpdate(e);const y=this._transitionablePaint._values[e].value,w=y.isDataDriven(),b=rs(e,"pattern")||e==="line-dasharray";return w||d||b||this._handleOverridablePaintPropertyUpdate(e,m,y)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,r,a){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,r){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,r)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),tr(e,(r,a)=>!(r===void 0||a==="layout"&&!Object.keys(r).length||a==="paint"&&!Object.keys(r).length))}_validate(e,r,a,u,d={}){return(!d||d.validate!==!1)&&vh(this,e.call(yh,{key:r,layerType:this.type,objectKey:a,value:u,styleSpec:je,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const r=this.paint.get(e);if(r instanceof H&&ga(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=U1(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const rv=be([{name:"a_pos",components:2,type:"Int16"}],4),iv=be([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class lr{constructor(e=[]){this.segments=e}prepareSegment(e,r,a,u){let d=this.segments[this.segments.length-1];return e>lr.MAX_VERTEX_ARRAY_LENGTH&&Un(`Max vertices per segment is ${lr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!d||d.vertexLength+e>lr.MAX_VERTEX_ARRAY_LENGTH||d.sortKey!==u)&&(d={vertexOffset:r.length,primitiveOffset:a.length,vertexLength:0,primitiveLength:0},u!==void 0&&(d.sortKey=u),this.segments.push(d)),d}get(){return this.segments}destroy(){for(const e of this.segments)for(const r in e.vaos)e.vaos[r].destroy()}static simpleSegment(e,r,a,u){return new lr([{vertexOffset:e,primitiveOffset:r,vertexLength:a,primitiveLength:u,vaos:{},sortKey:0}])}}lr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ct(lr,"SegmentVector");var Bt=8192;class Ca{constructor(e,r){e&&(r?this.setSouthWest(e).setNorthEast(r):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof Mn?new Mn(e.lng,e.lat):Mn.convert(e),this}setSouthWest(e){return this._sw=e instanceof Mn?new Mn(e.lng,e.lat):Mn.convert(e),this}extend(e){const r=this._sw,a=this._ne;let u,d;if(e instanceof Mn)u=e,d=e;else{if(!(e instanceof Ca))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Ca.convert(e)):this.extend(Mn.convert(e)):typeof e=="object"&&e!==null&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(Mn.convert(e)):this;if(u=e._sw,d=e._ne,!u||!d)return this}return r||a?(r.lng=Math.min(u.lng,r.lng),r.lat=Math.min(u.lat,r.lat),a.lng=Math.max(d.lng,a.lng),a.lat=Math.max(d.lat,a.lat)):(this._sw=new Mn(u.lng,u.lat),this._ne=new Mn(d.lng,d.lat)),this}getCenter(){return new Mn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Mn(this.getWest(),this.getNorth())}getSouthEast(){return new Mn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:r,lat:a}=Mn.convert(e);let u=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(u=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=a&&a<=this._ne.lat&&u}static convert(e){return!e||e instanceof Ca?e:new Ca(e)}}var Mh=1e-6,ki=typeof Float32Array<"u"?Float32Array:Array;function w7(){var n=new ki(9);return ki!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function b7(n,e,r){var a=e[0],u=e[1],d=e[2],m=e[3],y=e[4],w=e[5],b=e[6],M=e[7],A=e[8],I=r[0],z=r[1],R=r[2],O=r[3],Z=r[4],J=r[5],le=r[6],Q=r[7],ae=r[8];return n[0]=I*a+z*m+R*b,n[1]=I*u+z*y+R*M,n[2]=I*d+z*w+R*A,n[3]=O*a+Z*m+J*b,n[4]=O*u+Z*y+J*M,n[5]=O*d+Z*w+J*A,n[6]=le*a+Q*m+ae*b,n[7]=le*u+Q*y+ae*M,n[8]=le*d+Q*w+ae*A,n}function jo(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function xd(n,e){var r=e[0],a=e[1],u=e[2],d=e[3],m=e[4],y=e[5],w=e[6],b=e[7],M=e[8],A=e[9],I=e[10],z=e[11],R=e[12],O=e[13],Z=e[14],J=e[15],le=r*y-a*m,Q=r*w-u*m,ae=r*b-d*m,he=a*w-u*y,ue=a*b-d*y,De=u*b-d*w,Ie=M*O-A*R,Ze=M*Z-I*R,st=M*J-z*R,Be=A*Z-I*O,Xe=A*J-z*O,Ke=I*J-z*Z,et=le*Ke-Q*Xe+ae*Be+he*st-ue*Ze+De*Ie;return et?(n[0]=(y*Ke-w*Xe+b*Be)*(et=1/et),n[1]=(u*Xe-a*Ke-d*Be)*et,n[2]=(O*De-Z*ue+J*he)*et,n[3]=(I*ue-A*De-z*he)*et,n[4]=(w*st-m*Ke-b*Ze)*et,n[5]=(r*Ke-u*st+d*Ze)*et,n[6]=(Z*ae-R*De-J*Q)*et,n[7]=(M*De-I*ae+z*Q)*et,n[8]=(m*Xe-y*st+b*Ie)*et,n[9]=(a*st-r*Xe-d*Ie)*et,n[10]=(R*ue-O*ae+J*le)*et,n[11]=(A*ae-M*ue-z*le)*et,n[12]=(y*Ze-m*Be-w*Ie)*et,n[13]=(r*Be-a*Ze+u*Ie)*et,n[14]=(O*Q-R*he-Z*le)*et,n[15]=(M*he-A*Q+I*le)*et,n):null}function Bl(n,e,r){var a=e[0],u=e[1],d=e[2],m=e[3],y=e[4],w=e[5],b=e[6],M=e[7],A=e[8],I=e[9],z=e[10],R=e[11],O=e[12],Z=e[13],J=e[14],le=e[15],Q=r[0],ae=r[1],he=r[2],ue=r[3];return n[0]=Q*a+ae*y+he*A+ue*O,n[1]=Q*u+ae*w+he*I+ue*Z,n[2]=Q*d+ae*b+he*z+ue*J,n[3]=Q*m+ae*M+he*R+ue*le,n[4]=(Q=r[4])*a+(ae=r[5])*y+(he=r[6])*A+(ue=r[7])*O,n[5]=Q*u+ae*w+he*I+ue*Z,n[6]=Q*d+ae*b+he*z+ue*J,n[7]=Q*m+ae*M+he*R+ue*le,n[8]=(Q=r[8])*a+(ae=r[9])*y+(he=r[10])*A+(ue=r[11])*O,n[9]=Q*u+ae*w+he*I+ue*Z,n[10]=Q*d+ae*b+he*z+ue*J,n[11]=Q*m+ae*M+he*R+ue*le,n[12]=(Q=r[12])*a+(ae=r[13])*y+(he=r[14])*A+(ue=r[15])*O,n[13]=Q*u+ae*w+he*I+ue*Z,n[14]=Q*d+ae*b+he*z+ue*J,n[15]=Q*m+ae*M+he*R+ue*le,n}function Ju(n,e,r){var a,u,d,m,y,w,b,M,A,I,z,R,O=r[0],Z=r[1],J=r[2];return e===n?(n[12]=e[0]*O+e[4]*Z+e[8]*J+e[12],n[13]=e[1]*O+e[5]*Z+e[9]*J+e[13],n[14]=e[2]*O+e[6]*Z+e[10]*J+e[14],n[15]=e[3]*O+e[7]*Z+e[11]*J+e[15]):(u=e[1],d=e[2],m=e[3],y=e[4],w=e[5],b=e[6],M=e[7],A=e[8],I=e[9],z=e[10],R=e[11],n[0]=a=e[0],n[1]=u,n[2]=d,n[3]=m,n[4]=y,n[5]=w,n[6]=b,n[7]=M,n[8]=A,n[9]=I,n[10]=z,n[11]=R,n[12]=a*O+y*Z+A*J+e[12],n[13]=u*O+w*Z+I*J+e[13],n[14]=d*O+b*Z+z*J+e[14],n[15]=m*O+M*Z+R*J+e[15]),n}function Ol(n,e,r){var a=r[0],u=r[1],d=r[2];return n[0]=e[0]*a,n[1]=e[1]*a,n[2]=e[2]*a,n[3]=e[3]*a,n[4]=e[4]*u,n[5]=e[5]*u,n[6]=e[6]*u,n[7]=e[7]*u,n[8]=e[8]*d,n[9]=e[9]*d,n[10]=e[10]*d,n[11]=e[11]*d,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function wd(n,e,r){var a=Math.sin(r),u=Math.cos(r),d=e[4],m=e[5],y=e[6],w=e[7],b=e[8],M=e[9],A=e[10],I=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=d*u+b*a,n[5]=m*u+M*a,n[6]=y*u+A*a,n[7]=w*u+I*a,n[8]=b*u-d*a,n[9]=M*u-m*a,n[10]=A*u-y*a,n[11]=I*u-w*a,n}function Ch(n,e,r){var a=Math.sin(r),u=Math.cos(r),d=e[0],m=e[1],y=e[2],w=e[3],b=e[8],M=e[9],A=e[10],I=e[11];return e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=d*u-b*a,n[1]=m*u-M*a,n[2]=y*u-A*a,n[3]=w*u-I*a,n[8]=d*a+b*u,n[9]=m*a+M*u,n[10]=y*a+A*u,n[11]=w*a+I*u,n}function T7(n,e){return n[0]=e[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function E7(n,e,r){var a,u,d,m=r[0],y=r[1],w=r[2],b=Math.hypot(m,y,w);return b<Mh?null:(m*=b=1/b,y*=b,w*=b,a=Math.sin(e),u=Math.cos(e),n[0]=m*m*(d=1-u)+u,n[1]=y*m*d+w*a,n[2]=w*m*d-y*a,n[3]=0,n[4]=m*y*d-w*a,n[5]=y*y*d+u,n[6]=w*y*d+m*a,n[7]=0,n[8]=m*w*d+y*a,n[9]=y*w*d-m*a,n[10]=w*w*d+u,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});var ov=Bl;function bd(){var n=new ki(3);return ki!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function S7(n){var e=new ki(3);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}function Qu(n){return Math.hypot(n[0],n[1],n[2])}function W1(n,e,r){var a=new ki(3);return a[0]=n,a[1]=e,a[2]=r,a}function Vs(n,e,r){return n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n}function Td(n,e,r){return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],n}function M7(n,e,r){return n[0]=e[0]*r[0],n[1]=e[1]*r[1],n[2]=e[2]*r[2],n}function e0(n,e,r){return n[0]=Math.min(e[0],r[0]),n[1]=Math.min(e[1],r[1]),n[2]=Math.min(e[2],r[2]),n}function t0(n,e,r){return n[0]=Math.max(e[0],r[0]),n[1]=Math.max(e[1],r[1]),n[2]=Math.max(e[2],r[2]),n}function Xi(n,e,r){return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n}function n0(n,e,r,a){return n[0]=e[0]+r[0]*a,n[1]=e[1]+r[1]*a,n[2]=e[2]+r[2]*a,n}function ii(n,e){var r=e[0],a=e[1],u=e[2],d=r*r+a*a+u*u;return d>0&&(d=1/Math.sqrt(d)),n[0]=e[0]*d,n[1]=e[1]*d,n[2]=e[2]*d,n}function yo(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function Ed(n,e,r){var a=e[0],u=e[1],d=e[2],m=r[0],y=r[1],w=r[2];return n[0]=u*w-d*y,n[1]=d*m-a*w,n[2]=a*y-u*m,n}function rr(n,e,r){var a=e[0],u=e[1],d=e[2],m=r[3]*a+r[7]*u+r[11]*d+r[15];return n[0]=(r[0]*a+r[4]*u+r[8]*d+r[12])/(m=m||1),n[1]=(r[1]*a+r[5]*u+r[9]*d+r[13])/m,n[2]=(r[2]*a+r[6]*u+r[10]*d+r[14])/m,n}function C7(n,e,r){var a=r[0],u=r[1],d=r[2],m=e[0],y=e[1],w=e[2],b=u*w-d*y,M=d*m-a*w,A=a*y-u*m,I=u*A-d*M,z=d*b-a*A,R=a*M-u*b,O=2*r[3];return M*=O,A*=O,z*=2,R*=2,n[0]=m+(b*=O)+(I*=2),n[1]=y+M+z,n[2]=w+A+R,n}var r0,Vo=Td,sv=M7,av=Qu;function P7(n,e,r){return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n}function A7(n,e){var r=e[0],a=e[1],u=e[2],d=e[3],m=r*r+a*a+u*u+d*d;return m>0&&(m=1/Math.sqrt(m)),n[0]=r*m,n[1]=a*m,n[2]=u*m,n[3]=d*m,n}function Ul(n,e,r){var a=e[0],u=e[1],d=e[2],m=e[3];return n[0]=r[0]*a+r[4]*u+r[8]*d+r[12]*m,n[1]=r[1]*a+r[5]*u+r[9]*d+r[13]*m,n[2]=r[2]*a+r[6]*u+r[10]*d+r[14]*m,n[3]=r[3]*a+r[7]*u+r[11]*d+r[15]*m,n}function I7(){var n=new ki(4);return ki!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function k7(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function L7(n,e,r){r*=.5;var a=e[0],u=e[1],d=e[2],m=e[3],y=Math.sin(r),w=Math.cos(r);return n[0]=a*w+m*y,n[1]=u*w+d*y,n[2]=d*w-u*y,n[3]=m*w-a*y,n}function z7(n,e,r){r*=.5;var a=e[0],u=e[1],d=e[2],m=e[3],y=Math.sin(r),w=Math.cos(r);return n[0]=a*w-d*y,n[1]=u*w+m*y,n[2]=d*w+a*y,n[3]=m*w-u*y,n}bd(),r0=new ki(4),ki!=Float32Array&&(r0[0]=0,r0[1]=0,r0[2]=0,r0[3]=0);var lv=A7;bd(),W1(1,0,0),W1(0,1,0),I7(),I7(),w7();const cv=be([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:D7}=cv,R7=be([{name:"a_pos_3",components:3,type:"Int16"}]);var i0=be([{name:"a_pos",type:"Int16",components:2}]);class Sd{constructor(e,r){this.pos=e,this.dir=r}intersectsPlane(e,r,a){const u=yo(r,this.dir);if(Math.abs(u)<1e-6)return!1;const d=((e[0]-this.pos[0])*r[0]+(e[1]-this.pos[1])*r[1]+(e[2]-this.pos[2])*r[2])/u;return a[0]=this.pos[0]+this.dir[0]*d,a[1]=this.pos[1]+this.dir[1]*d,a[2]=this.pos[2]+this.dir[2]*d,!0}closestPointOnSphere(e,r,a){if(function(z,R){var O=z[0],Z=z[1],J=z[2],le=R[0],Q=R[1],ae=R[2];return Math.abs(O-le)<=Mh*Math.max(1,Math.abs(O),Math.abs(le))&&Math.abs(Z-Q)<=Mh*Math.max(1,Math.abs(Z),Math.abs(Q))&&Math.abs(J-ae)<=Mh*Math.max(1,Math.abs(J),Math.abs(ae))}(this.pos,e)||r===0)return a[0]=a[1]=a[2]=0,!1;const[u,d,m]=this.dir,y=this.pos[0]-e[0],w=this.pos[1]-e[1],b=this.pos[2]-e[2],M=u*u+d*d+m*m,A=2*(y*u+w*d+b*m),I=A*A-4*M*(y*y+w*w+b*b-r*r);if(I<0){const z=Math.max(-A/2,0),R=y+u*z,O=w+d*z,Z=b+m*z,J=Math.hypot(R,O,Z);return a[0]=R*r/J,a[1]=O*r/J,a[2]=Z*r/J,!1}{const z=(-A-Math.sqrt(I))/(2*M);if(z<0){const R=Math.hypot(y,w,b);return a[0]=y*r/R,a[1]=w*r/R,a[2]=b*r/R,!1}return a[0]=y+u*z,a[1]=w+d*z,a[2]=b+m*z,!0}}}class Md{constructor(e,r,a,u,d){this.TL=e,this.TR=r,this.BR=a,this.BL=u,this.horizon=d}static fromInvProjectionMatrix(e,r,a){const u=[-1,1,1],d=[1,1,1],m=[1,-1,1],y=[-1,-1,1],w=rr(u,u,e),b=rr(d,d,e),M=rr(m,m,e),A=rr(y,y,e);return new Md(w,b,M,A,r/a)}}class Cd{constructor(e,r){this.points=e,this.planes=r}static fromInvProjectionMatrix(e,r,a,u){const d=Math.pow(2,a),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(w=>{const b=Ul([],w,e),M=1/b[3]/r*d;return function(A,I,z){return A[0]=I[0]*z[0],A[1]=I[1]*z[1],A[2]=I[2]*z[2],A[3]=I[3]*z[3],A}(b,b,[M,M,u?1/b[3]:M,M])}),y=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(w=>{const b=ii([],Ed([],Vo([],m[w[0]],m[w[1]]),Vo([],m[w[2]],m[w[1]]))),M=-yo(b,m[w[1]]);return b.concat(M)});return new Cd(m,y)}}class oi{static fromPoints(e){const r=[1/0,1/0,1/0],a=[-1/0,-1/0,-1/0];for(const u of e)e0(r,r,u),t0(a,a,u);return new oi(r,a)}static applyTransform(e,r){const a=e.getCorners();for(let u=0;u<a.length;++u)rr(a[u],a[u],r);return oi.fromPoints(a)}constructor(e,r){this.min=e,this.max=r,this.center=Xi([],Vs([],this.min,this.max),.5)}quadrant(e){const r=[e%2==0,e<2],a=S7(this.min),u=S7(this.max);for(let d=0;d<r.length;d++)a[d]=r[d]?this.min[d]:this.center[d],u[d]=r[d]?this.center[d]:this.max[d];return u[2]=this.max[2],new oi(a,u)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,r=this.max;return[[e[0],e[1],e[2]],[r[0],e[1],e[2]],[r[0],r[1],e[2]],[e[0],r[1],e[2]],[e[0],e[1],r[2]],[r[0],e[1],r[2]],[r[0],r[1],r[2]],[e[0],r[1],r[2]]]}intersects(e){const r=this.getCorners();let a=!0;for(let u=0;u<e.planes.length;u++){const d=e.planes[u];let m=0;for(let y=0;y<r.length;y++)m+=yo(d,r[y])+d[3]>=0;if(m===0)return 0;m!==r.length&&(a=!1)}if(a)return 2;for(let u=0;u<3;u++){let d=Number.MAX_VALUE,m=-Number.MAX_VALUE;for(let y=0;y<e.points.length;y++){const w=e.points[y][u]-this.min[u];d=Math.min(d,w),m=Math.max(m,w)}if(m<0||d>this.max[u]-this.min[u])return 0}return 1}}const Pd=5,F7=6,hs=Bt/Math.PI/2,uv=16383,Nl=64,o0=[Nl,32,16],vo=-hs,xo=hs,hv=[new oi([vo,vo,vo],[xo,xo,xo]),new oi([vo,vo,vo],[0,0,xo]),new oi([0,vo,vo],[xo,0,xo]),new oi([vo,0,vo],[0,xo,xo]),new oi([0,0,vo],[xo,xo,xo])];function Ph(n){return n*hs/l0}function B7(n,e,r,a=!0){const u=Xi([],n._camera.position,n.worldSize),d=[e,r,1,1];Ul(d,d,n.pixelMatrixInverse),P7(d,d,1/d[3]);const m=ii([],Vo([],d,u)),y=n.globeMatrix,w=[y[12],y[13],y[14]],b=Vo([],w,u),M=Qu(b),A=ii([],b),I=n.worldSize/(2*Math.PI),z=yo(A,m),R=Math.asin(I/M);if(R<Math.acos(z)){if(!a)return null;const st=[],Be=[];Xi(st,m,M/z),ii(Be,Vo(Be,st,b)),ii(m,Vs(m,b,Xi(m,Be,Math.tan(R)*M)))}const O=[];new Sd(u,m).closestPointOnSphere(w,I,O);const Z=ii([],ao(y,0)),J=ii([],ao(y,1)),le=ii([],ao(y,2)),Q=yo(Z,O),ae=yo(J,O),he=yo(le,O),ue=$t(Math.asin(-ae/I));let De=$t(Math.atan2(Q,he));De=n.center.lng+function(st,Be){const Xe=(Be-st+180)%360-180;return Xe<-180?Xe+360:Xe}(n.center.lng,De);const Ie=ps(De),Ze=Ee(fs(ue),0,1);return new K1(Ie,Ze)}class dv{constructor(e,r,a){this.a=Vo([],e,a),this.b=Vo([],r,a),this.center=a;const u=ii([],this.a),d=ii([],this.b);this.angle=Math.acos(yo(u,d))}}function Ad(n,e){if(n.angle===0)return null;let r;return r=n.a[e]===0?1/n.angle*.5*Math.PI:1/n.angle*Math.atan(n.b[e]/n.a[e]/Math.sin(n.angle)-1/Math.tan(n.angle)),r<0||r>1?null:function(a,u,d,m){const y=Math.sin(d);return a*(Math.sin((1-m)*d)/y)+u*(Math.sin(m*d)/y)}(n.a[e],n.b[e],n.angle,Ee(r,0,1))+n.center[e]}function ds(n){if(n.z<=1)return hv[n.z+2*n.y+n.x];const e=Id(Ah(n));return oi.fromPoints(e)}function jl(n,e,r){return Xi(n,n,1-r),n0(n,n,e,r)}function O7(n,e){const r=X1(e.zoom);if(r===0)return ds(n);const a=Ah(n),u=Id(a),d=ps(a.getWest())*e.worldSize,m=ps(a.getEast())*e.worldSize,y=fs(a.getNorth())*e.worldSize,w=fs(a.getSouth())*e.worldSize,b=[d,y,0],M=[m,y,0],A=[d,w,0],I=[m,w,0],z=xd([],e.globeMatrix);return rr(b,b,z),rr(M,M,z),rr(A,A,z),rr(I,I,z),u[0]=jl(u[0],A,r),u[1]=jl(u[1],I,r),u[2]=jl(u[2],M,r),u[3]=jl(u[3],b,r),oi.fromPoints(u)}function U7(n,e,r){for(const a of n)rr(a,a,e),Xi(a,a,r)}function pv(n,e,r){const a=e/n.worldSize,u=n.globeMatrix;if(r.z<=1){const Ie=ds(r).getCorners();return U7(Ie,u,a),oi.fromPoints(Ie)}const d=Ah(r),m=Id(d);U7(m,u,a);const y=Number.MAX_VALUE,w=[-y,-y,-y],b=[y,y,y];if(d.contains(n.center)){for(const st of m)e0(b,b,st),t0(w,w,st);w[2]=0;const Ie=n.point,Ze=[Ie.x*a,Ie.y*a,0];return e0(b,b,Ze),t0(w,w,Ze),new oi(b,w)}const M=[u[12]*a,u[13]*a,u[14]*a],A=d.getCenter(),I=Ee(n.center.lat,-Vr,Vr),z=Ee(A.lat,-Vr,Vr),R=ps(n.center.lng),O=fs(I);let Z=R-ps(A.lng);const J=O-fs(z);Z>.5?Z-=1:Z<-.5&&(Z+=1);let le=0;Math.abs(Z)>Math.abs(J)?le=Z>=0?1:3:(le=J>=0?0:2,n0(M,M,[u[4]*a,u[5]*a,u[6]*a],-Math.sin(St(J>=0?d.getSouth():d.getNorth()))*hs));const Q=m[le],ae=m[(le+1)%4],he=new dv(Q,ae,M),ue=[Ad(he,0)||Q[0],Ad(he,1)||Q[1],Ad(he,2)||Q[2]],De=X1(n.zoom);if(De>0){const Ie=function({x:st,y:Be,z:Xe},Ke,et,ut,Ge){const _t=1/(1<<Xe);let At=st*_t,vt=At+_t,qt=Be*_t,dt=qt+_t,Rt=0;const Ht=(At+vt)/2-ut;return Ht>.5?Rt=-1:Ht<-.5&&(Rt=1),At=((At+Rt)*Ke-(ut*=Ke))*et+ut,vt=((vt+Rt)*Ke-ut)*et+ut,qt=(qt*Ke-(Ge*=Ke))*et+Ge,dt=(dt*Ke-Ge)*et+Ge,[[At,dt,0],[vt,dt,0],[vt,qt,0],[At,qt,0]]}(r,e,n._pixelsPerMercatorPixel,R,O);for(let st=0;st<m.length;st++)jl(m[st],Ie[st],De);const Ze=Vs([],Ie[le],Ie[(le+1)%4]);Xi(Ze,Ze,.5),jl(ue,Ze,De)}for(const Ie of m)e0(b,b,Ie),t0(w,w,Ie);return b[2]=Math.min(Q[2],ae[2]),e0(b,b,ue),t0(w,w,ue),new oi(b,w)}function Ah({x:n,y:e,z:r}){const a=1/(1<<r),u=new Mn(Ki(n*a),jr((e+1)*a)),d=new Mn(Ki((n+1)*a),jr(e*a));return new Ca(u,d)}function Id(n){const e=St(n.getNorth()),r=St(n.getSouth()),a=Math.cos(e),u=Math.cos(r),d=Math.sin(e),m=Math.sin(r),y=n.getWest(),w=n.getEast();return[q1(u,m,y),q1(u,m,w),q1(a,d,w),q1(a,d,y)]}function q1(n,e,r,a=hs){return r=St(r),[n*Math.sin(r)*a,-e*a,n*Math.cos(r)*a]}function H1(n,e,r){return q1(Math.cos(St(n)),Math.sin(St(n)),e,r)}function s0(n,e,r,a){const u=1<<r.z,d=(n/Bt+r.x)/u;return H1(jr((e/Bt+r.y)/u),Ki(d),a)}function Ih({min:n,max:e}){return uv/Math.max(e[0]-n[0],e[1]-n[1],e[2]-n[2])}const N7=new Float64Array(16);function a0(n){const e=Ih(n),r=T7(N7,[e,e,e]);return Ju(r,r,((a=[])[0]=-(u=n.min)[0],a[1]=-u[1],a[2]=-u[2],a));var a,u}function kd(n){const e=(a=n.min,(r=N7)[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=a[0],r[13]=a[1],r[14]=a[2],r[15]=1,r);var r,a;const u=1/Ih(n);return Ol(e,e,[u,u,u])}function j7(n,e,r,a,u){const d=function(w){const b=Bt/(2*Math.PI);return w/(2*Math.PI)/b}(r),m=[n,e,-r/(2*Math.PI)],y=jo(new Float64Array(16));return Ju(y,y,m),Ol(y,y,[d,d,d]),wd(y,y,St(-u)),Ch(y,y,St(-a)),y}function X1(n){return ct(Pd,F7,n)}function V7(n,e){const r=H1(e.lat,e.lng),a=function(R){const O=H1(R._center.lat,R._center.lng);let Z=Ed([],W1(0,1,0),O);const J=E7([],-R.angle,O);Z=rr(Z,Z,J),E7(J,-R._pitch,Z);const le=ii([],O);return Xi(le,le,Ph(R.cameraToCenterDistance/R.pixelsPerMeter)),rr(le,le,J),Vs([],O,le)}(n);return m=(u=Td([],a,r))[0],y=u[1],w=u[2],b=(d=r)[0],M=d[1],A=d[2],z=(I=Math.sqrt(m*m+y*y+w*w)*Math.sqrt(b*b+M*M+A*A))&&yo(u,d)/I,Math.acos(Math.min(Math.max(z,-1),1));var u,d,m,y,w,b,M,A,I,z}function Ld(n,e){return V7(n,e)>Math.PI/2*1.01}const G7=St(85),fv=Math.cos(G7),mv=Math.sin(G7),l0=63710088e-1,$7=2*Math.PI*l0;class Pa{constructor(e,r){if(isNaN(e)||isNaN(r))throw new Error(`Invalid LngLat object: (${e}, ${r})`);if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Pa(yt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const r=Math.PI/180,a=this.lat*r,u=e.lat*r,d=Math.sin(a)*Math.sin(u)+Math.cos(a)*Math.cos(u)*Math.cos((e.lng-this.lng)*r);return l0*Math.acos(Math.min(d,1))}toBounds(e=0){const r=360*e/40075017,a=r/Math.cos(Math.PI/180*this.lat);return new Ca(new Pa(this.lng-a,this.lat-r),new Pa(this.lng+a,this.lat+r))}toEcef(e){const r=Ph(e);return H1(this.lat,this.lng,hs+r)}static convert(e){if(e instanceof Pa)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Pa(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Pa(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Mn=Pa;function zd(n){return $7*Math.cos(n*Math.PI/180)}function ps(n){return(180+n)/360}function fs(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Go(n,e){return n/zd(e)}function Ki(n){return 360*n-180}function jr(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}function Z7(n,e){return n*zd(jr(e))}const Vr=85.051129;function W7(n){return 1/Math.cos(n*Math.PI/180)}class K1{constructor(e,r,a=0){this.x=+e,this.y=+r,this.z=+a}static fromLngLat(e,r=0){const a=Mn.convert(e);return new K1(ps(a.lng),fs(a.lat),Go(r,a.lat))}toLngLat(){return new Mn(Ki(this.x),jr(this.y))}toAltitude(){return Z7(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/$7*W7(jr(this.y))}}function Dd(n,e,r,a,u,d,m,y,w){const b=(e+a)/2,M=(r+u)/2,A=new ze(b,M);y(A),function(I,z,R,O,Z,J){const le=R-Z,Q=O-J;return Math.abs((O-z)*le-(R-I)*Q)/Math.hypot(le,Q)}(A.x,A.y,d.x,d.y,m.x,m.y)>=w?(Dd(n,e,r,b,M,d,A,y,w),Dd(n,b,M,a,u,A,m,y,w)):n.push(m)}function q7(n,e,r){let a=n[0],u=a.x,d=a.y;e(a);const m=[a];for(let y=1;y<n.length;y++){const w=n[y],{x:b,y:M}=w;e(w),Dd(m,u,d,b,M,a,w,e,r),u=b,d=M,a=w}return m}function Rd(n,e,r,a){if(a(e,r)){const u=e.add(r)._mult(.5);Rd(n,e,u,a),Rd(n,u,r,a)}else n.push(r)}function _v(n,e){let r=n[0];const a=[r];for(let u=1;u<n.length;u++){const d=n[u];Rd(a,r,d,e),r=d}return a}const Fd=Math.pow(2,14)-1,H7=-Fd-1;function gv(n,e){const r=Math.round(n.x*e),a=Math.round(n.y*e);return n.x=Ee(r,H7,Fd),n.y=Ee(a,H7,Fd),(r<n.x||r>n.x+1||a<n.y||a>n.y+1)&&Un("Geometry exceeds allowed extent, reduce your vector tile buffer size"),n}function Gs(n,e,r){const a=n.loadGeometry(),u=n.extent,d=Bt/u;if(e&&r&&r.projection.isReprojectedInTileSpace){const m=1<<e.z,{scale:y,x:w,y:b,projection:M}=r,A=I=>{const z=Ki((e.x+I.x/u)/m),R=jr((e.y+I.y/u)/m),O=M.project(z,R);I.x=(O.x*y-w)*u,I.y=(O.y*y-b)*u};for(let I=0;I<a.length;I++)if(n.type!==1)a[I]=q7(a[I],A,1);else{const z=[];for(const R of a[I])R.x<0||R.x>=u||R.y<0||R.y>=u||(A(R),z.push(R));a[I]=z}}for(const m of a)for(const y of m)gv(y,d);return a}function Vl(n,e){return{type:n.type,id:n.id,properties:n.properties,geometry:e?Gs(n):[]}}function kh(n,e,r,a,u){n.emplaceBack(2*e+(a+1)/2,2*r+(u+1)/2)}function Lh(n,e,r){n.emplaceBack(e.x,e.y,e.z,r[0]*16384,r[1]*16384,r[2]*16384)}class Bd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new ot,this.indexArray=new Lt,this.segments=new lr,this.programConfigurations=new Fl(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,a,u){const d=this.layers[0],m=[];let y=null;d.type==="circle"&&(y=d.layout.get("circle-sort-key"));for(const{feature:b,id:M,index:A,sourceLayerIndex:I}of e){const z=this.layers[0]._featureFilter.needGeometry,R=Vl(b,z);if(!this.layers[0]._featureFilter.filter(new P(this.zoom),R,a))continue;const O=y?y.evaluate(R,{},a):void 0,Z={id:M,properties:b.properties,type:b.type,sourceLayerIndex:I,index:A,geometry:z?R.geometry:Gs(b,a,u),patterns:{},sortKey:O};m.push(Z)}y&&m.sort((b,M)=>b.sortKey-M.sortKey);let w=null;u.projection.name==="globe"&&(this.globeExtVertexArray=new at,w=u.projection);for(const b of m){const{geometry:M,index:A,sourceLayerIndex:I}=b,z=e[A].feature;this.addFeature(b,M,A,r.availableImages,a,w),r.featureIndex.insert(z,M,A,I,this.index)}}update(e,r,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,a,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,rv.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,iv.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,r,a,u,d,m){for(const y of r)for(const w of y){const b=w.x,M=w.y;if(b<0||b>=Bt||M<0||M>=Bt)continue;if(m){const z=m.projectTilePoint(b,M,d),R=m.upVector(d,b,M),O=this.globeExtVertexArray;Lh(O,z,R),Lh(O,z,R),Lh(O,z,R),Lh(O,z,R)}const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),I=A.vertexLength;kh(this.layoutVertexArray,b,M,-1,-1),kh(this.layoutVertexArray,b,M,1,-1),kh(this.layoutVertexArray,b,M,1,1),kh(this.layoutVertexArray,b,M,-1,1),this.indexArray.emplaceBack(I,I+1,I+2),this.indexArray.emplaceBack(I,I+2,I+3),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,{},u,d)}}function X7(n,e){for(let r=0;r<n.length;r++)if(Gl(e,n[r]))return!0;for(let r=0;r<e.length;r++)if(Gl(n,e[r]))return!0;return!!Od(n,e)}function yv(n,e,r){return!!Gl(n,e)||!!Ud(e,n,r)}function K7(n,e){if(n.length===1)return J7(e,n[0]);for(let r=0;r<e.length;r++){const a=e[r];for(let u=0;u<a.length;u++)if(Gl(n,a[u]))return!0}for(let r=0;r<n.length;r++)if(J7(e,n[r]))return!0;for(let r=0;r<e.length;r++)if(Od(n,e[r]))return!0;return!1}function vv(n,e,r){if(n.length>1){if(Od(n,e))return!0;for(let a=0;a<e.length;a++)if(Ud(e[a],n,r))return!0}for(let a=0;a<n.length;a++)if(Ud(n[a],e,r))return!0;return!1}function Od(n,e){if(n.length===0||e.length===0)return!1;for(let r=0;r<n.length-1;r++){const a=n[r],u=n[r+1];for(let d=0;d<e.length-1;d++)if(xv(a,u,e[d],e[d+1]))return!0}return!1}function xv(n,e,r,a){return vr(n,r,a)!==vr(e,r,a)&&vr(n,e,r)!==vr(n,e,a)}function Ud(n,e,r){const a=r*r;if(e.length===1)return n.distSqr(e[0])<a;for(let u=1;u<e.length;u++)if(Y7(n,e[u-1],e[u])<a)return!0;return!1}function Y7(n,e,r){const a=e.distSqr(r);if(a===0)return n.distSqr(e);const u=((n.x-e.x)*(r.x-e.x)+(n.y-e.y)*(r.y-e.y))/a;return n.distSqr(u<0?e:u>1?r:r.sub(e)._mult(u)._add(e))}function J7(n,e){let r,a,u,d=!1;for(let m=0;m<n.length;m++){r=n[m];for(let y=0,w=r.length-1;y<r.length;w=y++)a=r[y],u=r[w],a.y>e.y!=u.y>e.y&&e.x<(u.x-a.x)*(e.y-a.y)/(u.y-a.y)+a.x&&(d=!d)}return d}function Gl(n,e){let r=!1;for(let a=0,u=n.length-1;a<n.length;u=a++){const d=n[a],m=n[u];d.y>e.y!=m.y>e.y&&e.x<(m.x-d.x)*(e.y-d.y)/(m.y-d.y)+d.x&&(r=!r)}return r}function Q7(n,e,r,a,u){for(const m of n)if(e<=m.x&&r<=m.y&&a>=m.x&&u>=m.y)return!0;const d=[new ze(e,r),new ze(e,u),new ze(a,u),new ze(a,r)];if(n.length>2){for(const m of d)if(Gl(n,m))return!0}for(let m=0;m<n.length-1;m++)if(wv(n[m],n[m+1],d))return!0;return!1}function wv(n,e,r){const a=r[0],u=r[2];if(n.x<a.x&&e.x<a.x||n.x>u.x&&e.x>u.x||n.y<a.y&&e.y<a.y||n.y>u.y&&e.y>u.y)return!1;const d=vr(n,e,r[0]);return d!==vr(n,e,r[1])||d!==vr(n,e,r[2])||d!==vr(n,e,r[3])}function Y1(n,e,r){const a=e.paint.get(n).value;return a.kind==="constant"?a.value:r.programConfigurations.get(e.id).getMaxValue(n)}function zh(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function ef(n,e,r,a,u){if(!e[0]&&!e[1])return n;const d=ze.convert(e)._mult(u);r==="viewport"&&d._rotate(-a);const m=[];for(let y=0;y<n.length;y++)m.push(n[y].sub(d));return m}function tf(n,e,r,a){const u=ze.convert(n)._mult(a);return e==="viewport"&&u._rotate(-r),u}Ct(Bd,"CircleBucket",{omit:["layers"]});const bv=new re({"circle-sort-key":new W(je.layout_circle["circle-sort-key"])});var Tv={paint:new re({"circle-radius":new W(je.paint_circle["circle-radius"]),"circle-color":new W(je.paint_circle["circle-color"]),"circle-blur":new W(je.paint_circle["circle-blur"]),"circle-opacity":new W(je.paint_circle["circle-opacity"]),"circle-translate":new B(je.paint_circle["circle-translate"]),"circle-translate-anchor":new B(je.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new B(je.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new B(je.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new W(je.paint_circle["circle-stroke-width"]),"circle-stroke-color":new W(je.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new W(je.paint_circle["circle-stroke-opacity"])}),layout:bv};function nf(n,e,r,a,u,d,m,y,w){if(d&&n.queryGeometry.isAboveHorizon)return!1;d&&(w*=n.pixelToTileUnitsFactor);const b=n.tileID.canonical,M=r.projection.upVectorScale(b,r.center.lat,r.worldSize).metersToTile;for(const A of e)for(const I of A){const z=I.add(y),R=u&&r.elevation?r.elevation.exaggeration()*u.getElevationAt(z.x,z.y,!0):0,O=r.projection.projectTilePoint(z.x,z.y,b);if(R>0){const Q=r.projection.upVector(b,z.x,z.y);O.x+=Q[0]*M*R,O.y+=Q[1]*M*R,O.z+=Q[2]*M*R}const Z=d?z:Ev(O.x,O.y,O.z,a),J=d?n.tilespaceRays.map(Q=>Mv(Q,R)):n.queryGeometry.screenGeometry,le=Ul([],[O.x,O.y,O.z,1],a);if(!m&&d?w*=le[3]/r.cameraToCenterDistance:m&&!d&&(w*=r.cameraToCenterDistance/le[3]),d){const Q=jr((I.y/Bt+b.y)/(1<<b.z));w/=r.projection.pixelsPerMeter(Q,1)/Go(1,Q)}if(yv(J,Z,w))return!0}return!1}function Ev(n,e,r,a){const u=Ul([],[n,e,r,1],a);return new ze(u[0]/u[3],u[1]/u[3])}const rf=W1(0,0,0),Sv=W1(0,0,1);function Mv(n,e){const r=bd();return rf[2]=e,n.intersectsPlane(rf,Sv,r),new ze(r[0],r[1])}class of extends Bd{}function sf(n,{width:e,height:r},a,u){if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==e*r*a)throw new RangeError("mismatched image size")}else u=new Uint8Array(e*r*a);return n.width=e,n.height=r,n.data=u,n}function af(n,e,r){const{width:a,height:u}=e;a===n.width&&u===n.height||(Nd(n,e,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,a),height:Math.min(n.height,u)},r),n.width=a,n.height=u,n.data=e.data)}function Nd(n,e,r,a,u,d){if(u.width===0||u.height===0)return e;if(u.width>n.width||u.height>n.height||r.x>n.width-u.width||r.y>n.height-u.height)throw new RangeError("out of range source coordinates for image copy");if(u.width>e.width||u.height>e.height||a.x>e.width-u.width||a.y>e.height-u.height)throw new RangeError("out of range destination coordinates for image copy");const m=n.data,y=e.data;for(let w=0;w<u.height;w++){const b=((r.y+w)*n.width+r.x)*d,M=((a.y+w)*e.width+a.x)*d;for(let A=0;A<u.width*d;A++)y[M+A]=m[b+A]}return e}Ct(of,"HeatmapBucket",{omit:["layers"]});class $s{constructor(e,r){sf(this,e,1,r)}resize(e){af(this,new $s(e),1)}clone(){return new $s({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,a,u,d){Nd(e,r,a,u,d,1)}}class Li{constructor(e,r){sf(this,e,4,r)}resize(e){af(this,new Li(e),4)}replace(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Li({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,a,u,d){Nd(e,r,a,u,d,4)}}Ct($s,"AlphaImage"),Ct(Li,"RGBAImage");var Cv={paint:new re({"heatmap-radius":new W(je.paint_heatmap["heatmap-radius"]),"heatmap-weight":new W(je.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new B(je.paint_heatmap["heatmap-intensity"]),"heatmap-color":new te(je.paint_heatmap["heatmap-color"]),"heatmap-opacity":new B(je.paint_heatmap["heatmap-opacity"])})};function jd(n){const e={},r=n.resolution||256,a=n.clips?n.clips.length:1,u=n.image||new Li({width:r,height:a}),d=(m,y,w)=>{e[n.evaluationKey]=w;const b=n.expression.evaluate(e);u.data[m+y+0]=Math.floor(255*b.r/b.a),u.data[m+y+1]=Math.floor(255*b.g/b.a),u.data[m+y+2]=Math.floor(255*b.b/b.a),u.data[m+y+3]=Math.floor(255*b.a)};if(n.clips)for(let m=0,y=0;m<a;++m,y+=4*r)for(let w=0,b=0;w<r;w++,b+=4){const M=w/(r-1),{start:A,end:I}=n.clips[m];d(y,b,A*(1-M)+I*M)}else for(let m=0,y=0;m<r;m++,y+=4)d(0,y,m/(r-1));return u}var Pv={paint:new re({"hillshade-illumination-direction":new B(je.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new B(je.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new B(je.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new B(je.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new B(je.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new B(je.paint_hillshade["hillshade-accent-color"])})};const Av=be([{name:"a_pos",components:2,type:"Int16"}],4),{members:Iv}=Av;var Vd={exports:{}};function Dh(n,e,r){r=r||2;var a,u,d,m,y,w,b,M=e&&e.length,A=M?e[0]*r:n.length,I=lf(n,0,A,r,!0),z=[];if(!I||I.next===I.prev)return z;if(M&&(I=function(O,Z,J,le){var Q,ae,he,ue=[];for(Q=0,ae=Z.length;Q<ae;Q++)(he=lf(O,Z[Q]*le,Q<ae-1?Z[Q+1]*le:O.length,le,!1))===he.next&&(he.steiner=!0),ue.push(Ov(he));for(ue.sort(Rv),Q=0;Q<ue.length;Q++)J=Fv(ue[Q],J);return J}(n,e,I,r)),n.length>80*r){a=d=n[0],u=m=n[1];for(var R=r;R<A;R+=r)(y=n[R])<a&&(a=y),(w=n[R+1])<u&&(u=w),y>d&&(d=y),w>m&&(m=w);b=(b=Math.max(d-a,m-u))!==0?32767/b:0}return c0(I,z,r,a,u,b,0),z}function lf(n,e,r,a,u){var d,m;if(u===Zd(n,e,r,a)>0)for(d=e;d<r;d+=a)m=hf(d,n[d],n[d+1],m);else for(d=r-a;d>=e;d-=a)m=hf(d,n[d],n[d+1],m);return m&&Rh(m,m.next)&&(h0(m),m=m.next),m}function $l(n,e){if(!n)return n;e||(e=n);var r,a=n;do if(r=!1,a.steiner||!Rh(a,a.next)&&cr(a.prev,a,a.next)!==0)a=a.next;else{if(h0(a),(a=e=a.prev)===a.next)break;r=!0}while(r||a!==e);return e}function c0(n,e,r,a,u,d,m){if(n){!m&&d&&function(M,A,I,z){var R=M;do R.z===0&&(R.z=Gd(R.x,R.y,A,I,z)),R.prevZ=R.prev,R.nextZ=R.next,R=R.next;while(R!==M);R.prevZ.nextZ=null,R.prevZ=null,function(O){var Z,J,le,Q,ae,he,ue,De,Ie=1;do{for(J=O,O=null,ae=null,he=0;J;){for(he++,le=J,ue=0,Z=0;Z<Ie&&(ue++,le=le.nextZ);Z++);for(De=Ie;ue>0||De>0&&le;)ue!==0&&(De===0||!le||J.z<=le.z)?(Q=J,J=J.nextZ,ue--):(Q=le,le=le.nextZ,De--),ae?ae.nextZ=Q:O=Q,Q.prevZ=ae,ae=Q;J=le}ae.nextZ=null,Ie*=2}while(he>1)}(R)}(n,a,u,d);for(var y,w,b=n;n.prev!==n.next;)if(y=n.prev,w=n.next,d?Lv(n,a,u,d):kv(n))e.push(y.i/r|0),e.push(n.i/r|0),e.push(w.i/r|0),h0(n),n=w.next,b=w.next;else if((n=w)===b){m?m===1?c0(n=zv($l(n),e,r),e,r,a,u,d,2):m===2&&Dv(n,e,r,a,u,d):c0($l(n),e,r,a,u,d,1);break}}}function kv(n){var e=n.prev,r=n,a=n.next;if(cr(e,r,a)>=0)return!1;for(var u=e.x,d=r.x,m=a.x,y=e.y,w=r.y,b=a.y,M=u<d?u<m?u:m:d<m?d:m,A=y<w?y<b?y:b:w<b?w:b,I=u>d?u>m?u:m:d>m?d:m,z=y>w?y>b?y:b:w>b?w:b,R=a.next;R!==e;){if(R.x>=M&&R.x<=I&&R.y>=A&&R.y<=z&&J1(u,y,d,w,m,b,R.x,R.y)&&cr(R.prev,R,R.next)>=0)return!1;R=R.next}return!0}function Lv(n,e,r,a){var u=n.prev,d=n,m=n.next;if(cr(u,d,m)>=0)return!1;for(var y=u.x,w=d.x,b=m.x,M=u.y,A=d.y,I=m.y,z=y<w?y<b?y:b:w<b?w:b,R=M<A?M<I?M:I:A<I?A:I,O=y>w?y>b?y:b:w>b?w:b,Z=M>A?M>I?M:I:A>I?A:I,J=Gd(z,R,e,r,a),le=Gd(O,Z,e,r,a),Q=n.prevZ,ae=n.nextZ;Q&&Q.z>=J&&ae&&ae.z<=le;){if(Q.x>=z&&Q.x<=O&&Q.y>=R&&Q.y<=Z&&Q!==u&&Q!==m&&J1(y,M,w,A,b,I,Q.x,Q.y)&&cr(Q.prev,Q,Q.next)>=0||(Q=Q.prevZ,ae.x>=z&&ae.x<=O&&ae.y>=R&&ae.y<=Z&&ae!==u&&ae!==m&&J1(y,M,w,A,b,I,ae.x,ae.y)&&cr(ae.prev,ae,ae.next)>=0))return!1;ae=ae.nextZ}for(;Q&&Q.z>=J;){if(Q.x>=z&&Q.x<=O&&Q.y>=R&&Q.y<=Z&&Q!==u&&Q!==m&&J1(y,M,w,A,b,I,Q.x,Q.y)&&cr(Q.prev,Q,Q.next)>=0)return!1;Q=Q.prevZ}for(;ae&&ae.z<=le;){if(ae.x>=z&&ae.x<=O&&ae.y>=R&&ae.y<=Z&&ae!==u&&ae!==m&&J1(y,M,w,A,b,I,ae.x,ae.y)&&cr(ae.prev,ae,ae.next)>=0)return!1;ae=ae.nextZ}return!0}function zv(n,e,r){var a=n;do{var u=a.prev,d=a.next.next;!Rh(u,d)&&cf(u,a,a.next,d)&&u0(u,d)&&u0(d,u)&&(e.push(u.i/r|0),e.push(a.i/r|0),e.push(d.i/r|0),h0(a),h0(a.next),a=n=d),a=a.next}while(a!==n);return $l(a)}function Dv(n,e,r,a,u,d){var m=n;do{for(var y=m.next.next;y!==m.prev;){if(m.i!==y.i&&Uv(m,y)){var w=uf(m,y);return m=$l(m,m.next),w=$l(w,w.next),c0(m,e,r,a,u,d,0),void c0(w,e,r,a,u,d,0)}y=y.next}m=m.next}while(m!==n)}function Rv(n,e){return n.x-e.x}function Fv(n,e){var r=function(u,d){var m,y=d,w=u.x,b=u.y,M=-1/0;do{if(b<=y.y&&b>=y.next.y&&y.next.y!==y.y){var A=y.x+(b-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(A<=w&&A>M&&(M=A,m=y.x<y.next.x?y:y.next,A===w))return m}y=y.next}while(y!==d);if(!m)return null;var I,z=m,R=m.x,O=m.y,Z=1/0;y=m;do w>=y.x&&y.x>=R&&w!==y.x&&J1(b<O?w:M,b,R,O,b<O?M:w,b,y.x,y.y)&&(I=Math.abs(b-y.y)/(w-y.x),u0(y,u)&&(I<Z||I===Z&&(y.x>m.x||y.x===m.x&&Bv(m,y)))&&(m=y,Z=I)),y=y.next;while(y!==z);return m}(n,e);if(!r)return e;var a=uf(r,n);return $l(a,a.next),$l(r,r.next)}function Bv(n,e){return cr(n.prev,n,e.prev)<0&&cr(e.next,n,n.next)<0}function Gd(n,e,r,a,u){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-r)*u|0)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-a)*u|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ov(n){var e=n,r=n;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==n);return r}function J1(n,e,r,a,u,d,m,y){return(u-m)*(e-y)>=(n-m)*(d-y)&&(n-m)*(a-y)>=(r-m)*(e-y)&&(r-m)*(d-y)>=(u-m)*(a-y)}function Uv(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function(r,a){var u=r;do{if(u.i!==r.i&&u.next.i!==r.i&&u.i!==a.i&&u.next.i!==a.i&&cf(u,u.next,r,a))return!0;u=u.next}while(u!==r);return!1}(n,e)&&(u0(n,e)&&u0(e,n)&&function(r,a){var u=r,d=!1,m=(r.x+a.x)/2,y=(r.y+a.y)/2;do u.y>y!=u.next.y>y&&u.next.y!==u.y&&m<(u.next.x-u.x)*(y-u.y)/(u.next.y-u.y)+u.x&&(d=!d),u=u.next;while(u!==r);return d}(n,e)&&(cr(n.prev,n,e.prev)||cr(n,e.prev,e))||Rh(n,e)&&cr(n.prev,n,n.next)>0&&cr(e.prev,e,e.next)>0)}function cr(n,e,r){return(e.y-n.y)*(r.x-e.x)-(e.x-n.x)*(r.y-e.y)}function Rh(n,e){return n.x===e.x&&n.y===e.y}function cf(n,e,r,a){var u=Bh(cr(n,e,r)),d=Bh(cr(n,e,a)),m=Bh(cr(r,a,n)),y=Bh(cr(r,a,e));return u!==d&&m!==y||!(u!==0||!Fh(n,r,e))||!(d!==0||!Fh(n,a,e))||!(m!==0||!Fh(r,n,a))||!(y!==0||!Fh(r,e,a))}function Fh(n,e,r){return e.x<=Math.max(n.x,r.x)&&e.x>=Math.min(n.x,r.x)&&e.y<=Math.max(n.y,r.y)&&e.y>=Math.min(n.y,r.y)}function Bh(n){return n>0?1:n<0?-1:0}function u0(n,e){return cr(n.prev,n,n.next)<0?cr(n,e,n.next)>=0&&cr(n,n.prev,e)>=0:cr(n,e,n.prev)<0||cr(n,n.next,e)<0}function uf(n,e){var r=new $d(n.i,n.x,n.y),a=new $d(e.i,e.x,e.y),u=n.next,d=e.prev;return n.next=e,e.prev=n,r.next=u,u.prev=r,a.next=r,r.prev=a,d.next=a,a.prev=d,a}function hf(n,e,r,a){var u=new $d(n,e,r);return a?(u.next=a.next,u.prev=a,a.next.prev=u,a.next=u):(u.prev=u,u.next=u),u}function h0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function $d(n,e,r){this.i=n,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Zd(n,e,r,a){for(var u=0,d=e,m=r-a;d<r;d+=a)u+=(n[m]-n[d])*(n[d+1]+n[m+1]),m=d;return u}Vd.exports=Dh,Vd.exports.default=Dh,Dh.deviation=function(n,e,r,a){var u=e&&e.length,d=Math.abs(Zd(n,0,u?e[0]*r:n.length,r));if(u)for(var m=0,y=e.length;m<y;m++)d-=Math.abs(Zd(n,e[m]*r,m<y-1?e[m+1]*r:n.length,r));var w=0;for(m=0;m<a.length;m+=3){var b=a[m]*r,M=a[m+1]*r,A=a[m+2]*r;w+=Math.abs((n[b]-n[A])*(n[M+1]-n[b+1])-(n[b]-n[M])*(n[A+1]-n[b+1]))}return d===0&&w===0?0:Math.abs((w-d)/d)},Dh.flatten=function(n){for(var e=n[0][0].length,r={vertices:[],holes:[],dimensions:e},a=0,u=0;u<n.length;u++){for(var d=0;d<n[u].length;d++)for(var m=0;m<e;m++)r.vertices.push(n[u][d][m]);u>0&&r.holes.push(a+=n[u-1].length)}return r};var Wd=oe(Vd.exports);function Nv(n,e,r,a,u){df(n,e,r||0,a||n.length-1,u||jv)}function df(n,e,r,a,u){for(;a>r;){if(a-r>600){var d=a-r+1,m=e-r+1,y=Math.log(d),w=.5*Math.exp(2*y/3),b=.5*Math.sqrt(y*w*(d-w)/d)*(m-d/2<0?-1:1);df(n,e,Math.max(r,Math.floor(e-m*w/d+b)),Math.min(a,Math.floor(e+(d-m)*w/d+b)),u)}var M=n[e],A=r,I=a;for(d0(n,r,e),u(n[a],M)>0&&d0(n,r,a);A<I;){for(d0(n,A,I),A++,I--;u(n[A],M)<0;)A++;for(;u(n[I],M)>0;)I--}u(n[r],M)===0?d0(n,r,I):d0(n,++I,a),I<=e&&(r=I+1),e<=I&&(a=I-1)}}function d0(n,e,r){var a=n[e];n[e]=n[r],n[r]=a}function jv(n,e){return n<e?-1:n>e?1:0}function qd(n,e){const r=n.length;if(r<=1)return[n];const a=[];let u,d;for(let m=0;m<r;m++){const y=sa(n[m]);y!==0&&(n[m].area=Math.abs(y),d===void 0&&(d=y<0),d===y<0?(u&&a.push(u),u=[n[m]]):u.push(n[m]))}if(u&&a.push(u),e>1)for(let m=0;m<a.length;m++)a[m].length<=e||(Nv(a[m],e,1,a[m].length-1,Vv),a[m]=a[m].slice(0,e));return a}function Vv(n,e){return e.area-n.area}function Hd(n,e,r){const a=r.patternDependencies;let u=!1;for(const d of e){const m=d.paint.get(`${n}-pattern`);m.isConstant()||(u=!0);const y=m.constantOr(null);y&&(u=!0,a[y]=!0)}return u}function Xd(n,e,r,a,u){const d=u.patternDependencies;for(const m of e){const y=m.paint.get(`${n}-pattern`).value;if(y.kind!=="constant"){let w=y.evaluate({zoom:a},r,{},u.availableImages);w=w&&w.name?w.name:w,d[w]=!0,r.patterns[m.id]=w}}return r}class Oh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ot,this.indexArray=new Lt,this.indexArray2=new Mr,this.programConfigurations=new Fl(e.layers,e.zoom),this.segments=new lr,this.segments2=new lr,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.projection=e.projection}populate(e,r,a,u){this.hasPattern=Hd("fill",this.layers,r);const d=this.layers[0].layout.get("fill-sort-key"),m=[];for(const{feature:y,id:w,index:b,sourceLayerIndex:M}of e){const A=this.layers[0]._featureFilter.needGeometry,I=Vl(y,A);if(!this.layers[0]._featureFilter.filter(new P(this.zoom),I,a))continue;const z=d?d.evaluate(I,{},a,r.availableImages):void 0,R={id:w,properties:y.properties,type:y.type,sourceLayerIndex:M,index:b,geometry:A?I.geometry:Gs(y,a,u),patterns:{},sortKey:z};m.push(R)}d&&m.sort((y,w)=>y.sortKey-w.sortKey);for(const y of m){const{geometry:w,index:b,sourceLayerIndex:M}=y;if(this.hasPattern){const A=Xd("fill",this.layers,y,this.zoom,r);this.patternFeatures.push(A)}else this.addFeature(y,w,b,a,{},r.availableImages);r.featureIndex.insert(e[b].feature,w,b,M,this.index)}}update(e,r,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,a,u)}addFeatures(e,r,a,u,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,r,a,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Iv),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,r,a,u,d,m=[]){for(const y of qd(r,500)){let w=0;for(const R of y)w+=R.length;const b=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),M=b.vertexLength,A=[],I=[];for(const R of y){if(R.length===0)continue;R!==y[0]&&I.push(A.length/2);const O=this.segments2.prepareSegment(R.length,this.layoutVertexArray,this.indexArray2),Z=O.vertexLength;this.layoutVertexArray.emplaceBack(R[0].x,R[0].y),this.indexArray2.emplaceBack(Z+R.length-1,Z),A.push(R[0].x),A.push(R[0].y);for(let J=1;J<R.length;J++)this.layoutVertexArray.emplaceBack(R[J].x,R[J].y),this.indexArray2.emplaceBack(Z+J-1,Z+J),A.push(R[J].x),A.push(R[J].y);O.vertexLength+=R.length,O.primitiveLength+=R.length}const z=Wd(A,I);for(let R=0;R<z.length;R+=3)this.indexArray.emplaceBack(M+z[R],M+z[R+1],M+z[R+2]);b.vertexLength+=w,b.primitiveLength+=z.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,d,m,u)}}Ct(Oh,"FillBucket",{omit:["layers","patternFeatures"]});const Gv=new re({"fill-sort-key":new W(je.layout_fill["fill-sort-key"])});var $v={paint:new re({"fill-antialias":new B(je.paint_fill["fill-antialias"]),"fill-opacity":new W(je.paint_fill["fill-opacity"]),"fill-color":new W(je.paint_fill["fill-color"]),"fill-outline-color":new W(je.paint_fill["fill-outline-color"]),"fill-translate":new B(je.paint_fill["fill-translate"]),"fill-translate-anchor":new B(je.paint_fill["fill-translate-anchor"]),"fill-pattern":new W(je.paint_fill["fill-pattern"])}),layout:Gv};const Zv=be([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Wv=be([{name:"a_centroid_pos",components:2,type:"Uint16"}]),qv=be([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Hv}=Zv;var Uh={},Xv=we,pf=Q1;function Q1(n,e,r,a,u){this.properties={},this.extent=r,this.type=0,this._pbf=n,this._geometry=-1,this._keys=a,this._values=u,n.readFields(Kv,this,e)}function Kv(n,e,r){n==1?e.id=r.readVarint():n==2?function(a,u){for(var d=a.readVarint()+a.pos;a.pos<d;){var m=u._keys[a.readVarint()],y=u._values[a.readVarint()];u.properties[m]=y}}(r,e):n==3?e.type=r.readVarint():n==4&&(e._geometry=r.pos)}function Yv(n){for(var e,r,a=0,u=0,d=n.length,m=d-1;u<d;m=u++)a+=((r=n[m]).x-(e=n[u]).x)*(e.y+r.y);return a}Q1.types=["Unknown","Point","LineString","Polygon"],Q1.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var e,r=n.readVarint()+n.pos,a=1,u=0,d=0,m=0,y=[];n.pos<r;){if(u<=0){var w=n.readVarint();a=7&w,u=w>>3}if(u--,a===1||a===2)d+=n.readSVarint(),m+=n.readSVarint(),a===1&&(e&&y.push(e),e=[]),e.push(new Xv(d,m));else{if(a!==7)throw new Error("unknown command "+a);e&&e.push(e[0].clone())}}return e&&y.push(e),y},Q1.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var e=n.readVarint()+n.pos,r=1,a=0,u=0,d=0,m=1/0,y=-1/0,w=1/0,b=-1/0;n.pos<e;){if(a<=0){var M=n.readVarint();r=7&M,a=M>>3}if(a--,r===1||r===2)(u+=n.readSVarint())<m&&(m=u),u>y&&(y=u),(d+=n.readSVarint())<w&&(w=d),d>b&&(b=d);else if(r!==7)throw new Error("unknown command "+r)}return[m,w,y,b]},Q1.prototype.toGeoJSON=function(n,e,r){var a,u,d=this.extent*Math.pow(2,r),m=this.extent*n,y=this.extent*e,w=this.loadGeometry(),b=Q1.types[this.type];function M(z){for(var R=0;R<z.length;R++){var O=z[R];z[R]=[360*(O.x+m)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(O.y+y)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var A=[];for(a=0;a<w.length;a++)A[a]=w[a][0];M(w=A);break;case 2:for(a=0;a<w.length;a++)M(w[a]);break;case 3:for(w=function(z){var R=z.length;if(R<=1)return[z];for(var O,Z,J=[],le=0;le<R;le++){var Q=Yv(z[le]);Q!==0&&(Z===void 0&&(Z=Q<0),Z===Q<0?(O&&J.push(O),O=[z[le]]):O.push(z[le]))}return O&&J.push(O),J}(w),a=0;a<w.length;a++)for(u=0;u<w[a].length;u++)M(w[a][u])}w.length===1?w=w[0]:b="Multi"+b;var I={type:"Feature",geometry:{type:b,coordinates:w},properties:this.properties};return"id"in this&&(I.id=this.id),I};var Jv=pf,ff=mf;function mf(n,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(Qv,this,e),this.length=this._features.length}function Qv(n,e,r){n===15?e.version=r.readVarint():n===1?e.name=r.readString():n===5?e.extent=r.readVarint():n===2?e._features.push(r.pos):n===3?e._keys.push(r.readString()):n===4&&e._values.push(function(a){for(var u=null,d=a.readVarint()+a.pos;a.pos<d;){var m=a.readVarint()>>3;u=m===1?a.readString():m===2?a.readFloat():m===3?a.readDouble():m===4?a.readVarint64():m===5?a.readVarint():m===6?a.readSVarint():m===7?a.readBoolean():null}return u}(r))}mf.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var e=this._pbf.readVarint()+this._pbf.pos;return new Jv(this._pbf,e,this.extent,this._keys,this._values)};var ex=ff;function tx(n,e,r){if(n===3){var a=new ex(r,r.readVarint()+r.pos);a.length&&(e[a.name]=a)}}var Kd=Uh.VectorTile=function(n,e){this.layers=n.readFields(tx,{},e)},Nh=Uh.VectorTileFeature=pf;function jh(n,e,r,a){const u=[],d=a===0?(m,y,w,b,M,A)=>{m.push(new ze(A,w+(A-y)/(b-y)*(M-w)))}:(m,y,w,b,M,A)=>{m.push(new ze(y+(A-w)/(M-w)*(b-y),A))};for(const m of n){const y=[];for(const w of m){if(w.length<=2)continue;const b=[];for(let I=0;I<w.length-1;I++){const z=w[I].x,R=w[I].y,O=w[I+1].x,Z=w[I+1].y,J=a===0?z:R,le=a===0?O:Z;J<e?le>e&&d(b,z,R,O,Z,e):J>r?le<r&&d(b,z,R,O,Z,r):b.push(w[I]),le<e&&J>=e&&d(b,z,R,O,Z,e),le>r&&J<=r&&d(b,z,R,O,Z,r)}let M=w[w.length-1];const A=a===0?M.x:M.y;A>=e&&A<=r&&b.push(M),b.length&&(M=b[b.length-1],b[0].x===M.x&&b[0].y===M.y||b.push(b[0]),y.push(b))}y.length&&u.push(y)}return u}Uh.VectorTileLayer=ff;const nx=Nh.types,rx=Math.pow(2,13);function p0(n,e,r,a,u,d,m,y){n.emplaceBack((e<<1)+m,(r<<1)+d,(Math.floor(a*rx)<<1)+u,Math.round(y))}function f0(n,e,r){n.emplaceBack(e.x,e.y,e.z,r[0]*16384,r[1]*16384,r[2]*16384)}class _f{constructor(){this.acc=new ze(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ze(e.x,e.y),this.max=new ze(e.x,e.y))}append(e,r){this.currentPolyCount.edges++,this.acc._add(e);const a=this.min,u=this.max;e.x<a.x?a.x=e.x:e.x>u.x&&(u.x=e.x),e.y<a.y?a.y=e.y:e.y>u.y&&(u.y=e.y),((e.x===0||e.x===Bt)&&e.x===r.x)!=((e.y===0||e.y===Bt)&&e.y===r.y)&&this.processBorderOverlap(e,r),r.x<0!=e.x<0&&this.addBorderIntersection(0,un(r.y,e.y,(0-r.x)/(e.x-r.x))),r.x>Bt!=e.x>Bt&&this.addBorderIntersection(1,un(r.y,e.y,(Bt-r.x)/(e.x-r.x))),r.y<0!=e.y<0&&this.addBorderIntersection(2,un(r.x,e.x,(0-r.y)/(e.y-r.y))),r.y>Bt!=e.y>Bt&&this.addBorderIntersection(3,un(r.x,e.x,(Bt-r.y)/(e.y-r.y)))}addBorderIntersection(e,r){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const a=this.borders[e];r<a[0]&&(a[0]=r),r>a[1]&&(a[1]=r)}processBorderOverlap(e,r){if(e.x===r.x){if(e.y===r.y)return;const a=e.x===0?0:1;this.addBorderIntersection(a,r.y),this.addBorderIntersection(a,e.y)}else{const a=e.y===0?2:3;this.addBorderIntersection(a,r.x),this.addBorderIntersection(a,e.x)}}centroid(){const e=this.polyCount.reduce((r,a)=>r+a.edges,0);return e!==0?this.acc.div(e)._round():new ze(0,0)}span(){return new ze(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,r)=>e+ +(r[0]!==Number.MAX_VALUE),0)}}class m0{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new qe,this.centroidVertexArray=new Oo,this.indexArray=new Lt,this.programConfigurations=new Fl(e.layers,e.zoom),this.segments=new lr,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.enableTerrain=e.enableTerrain}populate(e,r,a,u){this.features=[],this.hasPattern=Hd("fill-extrusion",this.layers,r),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(d){const m=Math.exp(Math.PI*(1-d.y/(1<<d.z)*2));return 80150034*m/(m*m+1)/Bt/(1<<d.z)}(a),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:d,id:m,index:y,sourceLayerIndex:w}of e){const b=this.layers[0]._featureFilter.needGeometry,M=Vl(d,b);if(!this.layers[0]._featureFilter.filter(new P(this.zoom),M,a))continue;const A={id:m,sourceLayerIndex:w,index:y,geometry:b?M.geometry:Gs(d,a,u),properties:d.properties,type:d.type,patterns:{}},I=this.layoutVertexArray.length;this.hasPattern?this.features.push(Xd("fill-extrusion",this.layers,A,this.zoom,r)):this.addFeature(A,A.geometry,y,a,{},r.availableImages,u),r.featureIndex.insert(d,A.geometry,y,w,this.index,I)}this.sortBorders()}addFeatures(e,r,a,u,d){for(const m of this.features){const{geometry:y}=m;this.addFeature(m,y,m.index,r,a,u,d)}this.sortBorders()}update(e,r,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,a,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Hv),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,qv.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Wv.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,r,a,u,d,m,y){const w=[new ze(0,0),new ze(Bt,Bt)],b=y.projection,M=b.name==="globe",A=this.enableTerrain&&!M?new _f:null,I=nx[e.type]==="Polygon";M&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new at);const z=qd(r,500);for(let J=z.length-1;J>=0;J--){const le=z[J];(le.length===0||(R=le[0]).every(Q=>Q.x<=0)||R.every(Q=>Q.x>=Bt)||R.every(Q=>Q.y<=0)||R.every(Q=>Q.y>=Bt))&&z.splice(J,1)}var R;let O;if(M)O=Tf(z,w,u);else{O=[];for(const J of z)O.push({polygon:J,bounds:w})}const Z=I?this.edgeRadius:0;for(const{polygon:J,bounds:le}of O){let Q=0,ae=0;for(const ue of J)I&&!ue[0].equals(ue[ue.length-1])&&ue.push(ue[0]),ae+=I?ue.length-1:ue.length;const he=this.segments.prepareSegment((I?5:4)*ae,this.layoutVertexArray,this.indexArray);if(I){const ue=[],De=[];Q=he.vertexLength;for(const Ze of J){let st,Be;Ze.length&&Ze!==J[0]&&De.push(ue.length/2),st=Ze[1].sub(Ze[0])._perp()._unit();for(let Xe=1;Xe<Ze.length;Xe++){const Ke=Ze[Xe],et=Ze[Xe===Ze.length-1?1:Xe+1];let{x:ut,y:Ge}=Ke;if(Z){Be=et.sub(Ke)._perp()._unit();const _t=st.add(Be)._unit(),At=Z*Math.min(4,1/(st.x*_t.x+st.y*_t.y));ut+=At*_t.x,Ge+=At*_t.y,st=Be}p0(this.layoutVertexArray,ut,Ge,0,0,1,1,0),he.vertexLength++,ue.push(Ke.x,Ke.y),M&&f0(this.layoutVertexExtArray,b.projectTilePoint(ut,Ge,u),b.upVector(u,ut,Ge))}}const Ie=Wd(ue,De);for(let Ze=0;Ze<Ie.length;Ze+=3)this.indexArray.emplaceBack(Q+Ie[Ze],Q+Ie[Ze+2],Q+Ie[Ze+1]),he.primitiveLength++}for(const ue of J){A&&ue.length&&A.startRing(ue[0]);let De,Ie,Ze,st=ue.length>4&&xf(ue[ue.length-2],ue[0],ue[1]),Be=Z?ix(ue[ue.length-2],ue[0],ue[1],Z):0;Ie=ue[1].sub(ue[0])._perp()._unit();let Xe=!0;for(let Ke=1,et=0;Ke<ue.length;Ke++){let ut=ue[Ke-1],Ge=ue[Ke];const _t=ue[Ke===ue.length-1?1:Ke+1];if(A&&I&&A.currentPolyCount.top++,vf(Ge,ut,le)){Z&&(Ie=_t.sub(Ge)._perp()._unit(),Xe=!Xe);continue}A&&A.append(Ge,ut);const At=Ge.sub(ut)._perp(),vt=At.x/(Math.abs(At.x)+Math.abs(At.y)),qt=At.y>0?1:0,dt=ut.dist(Ge);if(et+dt>32768&&(et=0),Z){Ze=_t.sub(Ge)._perp()._unit();let Xt=yf(ut,Ge,_t,gf(Ie,Ze),Z);isNaN(Xt)&&(Xt=0);const Ut=Ge.sub(ut)._unit();ut=ut.add(Ut.mult(Be))._round(),Ge=Ge.add(Ut.mult(-Xt))._round(),Be=Xt,Ie=Ze}const Rt=he.vertexLength,Ht=ue.length>4&&xf(ut,Ge,_t);let dn=wf(et,st,Xe);if(p0(this.layoutVertexArray,ut.x,ut.y,vt,qt,0,0,dn),p0(this.layoutVertexArray,ut.x,ut.y,vt,qt,0,1,dn),et+=dt,dn=wf(et,Ht,!Xe),st=Ht,p0(this.layoutVertexArray,Ge.x,Ge.y,vt,qt,0,0,dn),p0(this.layoutVertexArray,Ge.x,Ge.y,vt,qt,0,1,dn),he.vertexLength+=4,this.indexArray.emplaceBack(Rt+0,Rt+1,Rt+2),this.indexArray.emplaceBack(Rt+1,Rt+3,Rt+2),he.primitiveLength+=2,Z){const Xt=Q+(Ke===1?ue.length-2:Ke-2),Ut=Ke===1?Q:Xt+1;if(this.indexArray.emplaceBack(Rt+1,Xt,Rt+3),this.indexArray.emplaceBack(Xt,Ut,Rt+3),he.primitiveLength+=2,De===void 0&&(De=Rt),!vf(_t,ue[Ke],le)){const Fn=Ke===ue.length-1?De:he.vertexLength;this.indexArray.emplaceBack(Rt+2,Rt+3,Fn),this.indexArray.emplaceBack(Rt+3,Fn+1,Fn),this.indexArray.emplaceBack(Rt+3,Ut,Fn+1),he.primitiveLength+=3}Xe=!Xe}if(M){const Xt=this.layoutVertexExtArray,Ut=b.projectTilePoint(ut.x,ut.y,u),Fn=b.projectTilePoint(Ge.x,Ge.y,u),Kt=b.upVector(u,ut.x,ut.y),Yt=b.upVector(u,Ge.x,Ge.y);f0(Xt,Ut,Kt),f0(Xt,Ut,Kt),f0(Xt,Fn,Yt),f0(Xt,Fn,Yt)}}I&&(Q+=ue.length-1)}}if(A&&A.polyCount.length>0){if(A.borders){A.vertexArrayOffset=this.centroidVertexArray.length;const J=A.borders,le=this.featuresOnBorder.push(A)-1;for(let Q=0;Q<4;Q++)J[Q][0]!==Number.MAX_VALUE&&this.borders[Q].push(le)}this.encodeCentroid(A.borders?void 0:A.centroid(),A)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,d,m,u)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((r,a)=>this.featuresOnBorder[r].borders[e][0]-this.featuresOnBorder[a].borders[e][0])}encodeCentroid(e,r,a=!0){let u,d;if(e)if(e.y!==0){const y=r.span()._mult(this.tileToMeter);u=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(y.x/10)),d=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(y.y/10))}else u=Math.ceil(7*(e.x+450)),d=0;else u=0,d=+a;let m=a?this.centroidVertexArray.length:r.vertexArrayOffset;for(const y of r.polyCount){a&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*y.edges+y.top);for(let w=0;w<y.top;w++)this.centroidVertexArray.emplace(m++,u,d);for(let w=0;w<2*y.edges;w++)this.centroidVertexArray.emplace(m++,0,d),this.centroidVertexArray.emplace(m++,u,d)}}}function gf(n,e){const r=n.add(e)._unit();return n.x*r.x+n.y*r.y}function ix(n,e,r,a){const u=e.sub(n)._perp()._unit(),d=r.sub(e)._perp()._unit();return yf(n,e,r,gf(u,d),a)}function yf(n,e,r,a,u){const d=Math.sqrt(1-a*a);return Math.min(n.dist(e)/3,e.dist(r)/3,u*d/a)}function vf(n,e,r){return n.x<r[0].x&&e.x<r[0].x||n.x>r[1].x&&e.x>r[1].x||n.y<r[0].y&&e.y<r[0].y||n.y>r[1].y&&e.y>r[1].y}function xf(n,e,r){if(n.x<0||n.x>=Bt||e.x<0||e.x>=Bt||r.x<0||r.x>=Bt)return!1;const a=r.sub(e),u=a.perp(),d=n.sub(e);return(a.x*d.x+a.y*d.y)/Math.sqrt((a.x*a.x+a.y*a.y)*(d.x*d.x+d.y*d.y))>-.866&&u.x*d.x+u.y*d.y<0}function wf(n,e,r){const a=e?2|n:-3&n;return r?1|a:-2&a}function bf(){const n=Math.PI/32,e=Math.tan(n),r=l0;return r*Math.sqrt(1+2*e*e)-r}function Tf(n,e,r){const a=1<<r.z,u=Ki(r.x/a),d=Ki((r.x+1)/a),m=jr(r.y/a),y=jr((r.y+1)/a);return function(w,b,M,A,I=0,z){const R=[];if(!w.length||!M||!A)return R;const O=(ue,De)=>{for(const Ie of ue)R.push({polygon:Ie,bounds:De})},Z=Math.ceil(Math.log2(M)),J=Math.ceil(Math.log2(A)),le=Z-J,Q=[];for(let ue=0;ue<Math.abs(le);ue++)Q.push(le>0?0:1);for(let ue=0;ue<Math.min(Z,J);ue++)Q.push(0),Q.push(1);let ae=w;if(ae=jh(ae,b[0].y-I,b[1].y+I,1),ae=jh(ae,b[0].x-I,b[1].x+I,0),!ae.length)return R;const he=[];for(Q.length?he.push({polygons:ae,bounds:b,depth:0}):O(ae,b);he.length;){const ue=he.pop(),De=ue.depth,Ie=Q[De],Ze=ue.bounds[0],st=ue.bounds[1],Be=Ie===0?Ze.x:Ze.y,Xe=Ie===0?st.x:st.y,Ke=z?z(Ie,Be,Xe):.5*(Be+Xe),et=jh(ue.polygons,Be-I,Ke+I,Ie),ut=jh(ue.polygons,Ke-I,Xe+I,Ie);if(et.length){const Ge=[Ze,new ze(Ie===0?Ke:st.x,Ie===1?Ke:st.y)];Q.length>De+1?he.push({polygons:et,bounds:Ge,depth:De+1}):O(et,Ge)}if(ut.length){const Ge=[new ze(Ie===0?Ke:Ze.x,Ie===1?Ke:Ze.y),st];Q.length>De+1?he.push({polygons:ut,bounds:Ge,depth:De+1}):O(ut,Ge)}}return R}(n,e,Math.ceil((d-u)/11.25),Math.ceil((m-y)/11.25),1,(w,b,M)=>{if(w===0)return .5*(b+M);{const A=jr((r.y+b/Bt)/a);return(fs(.5*(jr((r.y+M/Bt)/a)+A))*a-r.y)*Bt}})}Ct(m0,"FillExtrusionBucket",{omit:["layers","features"]}),Ct(_f,"PartMetadata");const ox=new re({"fill-extrusion-edge-radius":new B(je["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var sx={paint:new re({"fill-extrusion-opacity":new B(je["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new W(je["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new B(je["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new B(je["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new W(je["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new W(je["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new W(je["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new B(je["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new B(je["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new B(je["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new B(je["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:ox};function Ef(n,e,r){var a=2*Math.PI*6378137/256/Math.pow(2,r);return[n*a-2*Math.PI*6378137/2,e*a-2*Math.PI*6378137/2]}class Vh{constructor(e,r,a){this.z=e,this.x=r,this.y=a,this.key=_0(0,e,e,r,a)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,r){const a=function(d,m,y){var w=Ef(256*d,256*(m=Math.pow(2,y)-m-1),y),b=Ef(256*(d+1),256*(m+1),y);return w[0]+","+w[1]+","+b[0]+","+b[1]}(this.x,this.y,this.z),u=function(d,m,y){let w,b="";for(let M=d;M>0;M--)w=1<<M-1,b+=(m&w?1:0)+(y&w?2:0);return b}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",a)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Sf{constructor(e,r){this.wrap=e,this.canonical=r,this.key=_0(e,r.z,r.z,r.x,r.y)}}class si{constructor(e,r,a,u,d){this.overscaledZ=e,this.wrap=r,this.canonical=new Vh(a,+u,+d),this.key=r===0&&e===a?this.canonical.key:_0(r,e,a,u,d)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const r=this.canonical.z-e;return e>this.canonical.z?new si(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new si(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(e,r=!0){if(this.overscaledZ===e&&r)return this.key;if(e>this.canonical.z)return _0(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y);{const a=this.canonical.z-e;return _0(this.wrap*+r,e,e,this.canonical.x>>a,this.canonical.y>>a)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const r=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r}children(e){if(this.overscaledZ>=e)return[new si(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,a=2*this.canonical.x,u=2*this.canonical.y;return[new si(r,this.wrap,r,a,u),new si(r,this.wrap,r,a+1,u),new si(r,this.wrap,r,a,u+1),new si(r,this.wrap,r,a+1,u+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new si(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new si(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Sf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function _0(n,e,r,a,u){const d=1<<Math.min(r,22);let m=d*(u%d)+a%d;return n&&r<22&&(m+=d*d*((n<0?-2*n-1:2*n)%(1<<2*(22-r)))),16*(32*m+r)+(e-r)}Ct(Vh,"CanonicalTileID"),Ct(si,"OverscaledTileID",{omit:["projMatrix"]});class ec extends ze{constructor(e,r,a){super(e,r),this.z=a}}function g0(n,e){return n.x*e.x+n.y*e.y}function Mf(n,e){if(n.length===1){let r=0;const a=e[r++];let u;for(;!u||a.equals(u);)if(u=e[r++],!u)return 1/0;for(;r<e.length;r++){const d=e[r],m=n[0],y=u.sub(a),w=d.sub(a),b=m.sub(a),M=g0(y,y),A=g0(y,w),I=g0(w,w),z=g0(b,y),R=g0(b,w),O=M*I-A*A,Z=(I*z-A*R)/O,J=(M*R-A*z)/O,le=a.z*(1-Z-J)+u.z*Z+d.z*J;if(isFinite(le))return le}return 1/0}{let r=1/0;for(const a of e)r=Math.min(r,a.z);return r}}function Cf(n,e,r,a,u,d,m,y){const w=m*u.getElevationAt(n,e,!0,!0),b=d[0]!==0,M=b?d[1]===0?m*(d[0]/7-450):m*function(A,I,z){const R=Math.floor(I[0]/8),O=Math.floor(I[1]/8),Z=10*(I[0]-8*R),J=10*(I[1]-8*O),le=A.getElevationAt(R,O,!0,!0),Q=A.getMeterToDEM(z),ae=Math.floor(.5*(Z*Q-1)),he=Math.floor(.5*(J*Q-1)),ue=A.tileCoordToPixel(R,O),De=2*ae+1,Ie=2*he+1,Ze=function(ut,Ge,_t,At,vt){return[ut.getElevationAtPixel(Ge,_t,!0),ut.getElevationAtPixel(Ge+vt,_t,!0),ut.getElevationAtPixel(Ge,_t+vt,!0),ut.getElevationAtPixel(Ge+At,_t+vt,!0)]}(A,ue.x-ae,ue.y-he,De,Ie),st=Math.abs(Ze[0]-Ze[1]),Be=Math.abs(Ze[2]-Ze[3]),Xe=Math.abs(Ze[0]-Ze[2])+Math.abs(Ze[1]-Ze[3]),Ke=Math.min(.25,.5*Q*(st+Be)/De),et=Math.min(.25,.5*Q*Xe/Ie);return le+Math.max(Ke*Z,et*J)}(u,d,y):w;return{base:w+(r===0)?-1:r,top:b?Math.max(M+a,w+r+2):w+a}}const ax=be([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:lx}=ax,cx=be([{name:"a_packed",components:4,type:"Float32"}]),{members:ux}=cx,hx=Nh.types,dx=Math.cos(Math.PI/180*37.5);class Gh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new Fe,this.layoutVertexArray2=new nt,this.indexArray=new Lt,this.programConfigurations=new Fl(e.layers,e.zoom),this.segments=new lr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,a,u){this.hasPattern=Hd("line",this.layers,r);const d=this.layers[0].layout.get("line-sort-key"),m=[];for(const{feature:M,id:A,index:I,sourceLayerIndex:z}of e){const R=this.layers[0]._featureFilter.needGeometry,O=Vl(M,R);if(!this.layers[0]._featureFilter.filter(new P(this.zoom),O,a))continue;const Z=d?d.evaluate(O,{},a):void 0,J={id:A,properties:M.properties,type:M.type,sourceLayerIndex:z,index:I,geometry:R?O.geometry:Gs(M,a,u),patterns:{},sortKey:Z};m.push(J)}d&&m.sort((M,A)=>M.sortKey-A.sortKey);const{lineAtlas:y,featureIndex:w}=r,b=this.addConstantDashes(y);for(const M of m){const{geometry:A,index:I,sourceLayerIndex:z}=M;if(b&&this.addFeatureDashes(M,y),this.hasPattern){const R=Xd("line",this.layers,M,this.zoom,r);this.patternFeatures.push(R)}else this.addFeature(M,A,I,a,y.positions,r.availableImages);w.insert(e[I].feature,A,I,z,this.index)}}addConstantDashes(e){let r=!1;for(const a of this.layers){const u=a.paint.get("line-dasharray").value,d=a.layout.get("line-cap").value;if(u.kind!=="constant"||d.kind!=="constant")r=!0;else{const m=d.value,y=u.value;if(!y)continue;e.addDash(y,m)}}return r}addFeatureDashes(e,r){const a=this.zoom;for(const u of this.layers){const d=u.paint.get("line-dasharray").value,m=u.layout.get("line-cap").value;if(d.kind==="constant"&&m.kind==="constant")continue;let y,w;if(d.kind==="constant"){if(y=d.value,!y)continue}else y=d.evaluate({zoom:a},e);w=m.kind==="constant"?m.value:m.evaluate({zoom:a},e),r.addDash(y,w),e.patterns[u.id]=r.getKey(y,w)}}update(e,r,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,a,u)}addFeatures(e,r,a,u,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,r,a,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,ux)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,lx),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,r,a,u,d,m){const y=this.layers[0].layout,w=y.get("line-join").evaluate(e,{}),b=y.get("line-cap").evaluate(e,{}),M=y.get("line-miter-limit"),A=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const I of r)this.addLine(I,e,w,b,M,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,d,m,u)}addLine(e,r,a,u,d,m){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let J=0;J<e.length-1;J++)this.totalDistance+=e[J].dist(e[J+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const y=hx[r.type]==="Polygon";let w=e.length;for(;w>=2&&e[w-1].equals(e[w-2]);)w--;let b=0;for(;b<w-1&&e[b].equals(e[b+1]);)b++;if(w<(y?3:2))return;a==="bevel"&&(d=1.05);const M=this.overscaling<=16?15*Bt/(512*this.overscaling):0,A=this.segments.prepareSegment(10*w,this.layoutVertexArray,this.indexArray);let I,z,R,O,Z;this.e1=this.e2=-1,y&&(I=e[w-2],Z=e[b].sub(I)._unit()._perp());for(let J=b;J<w;J++){if(R=J===w-1?y?e[b+1]:void 0:e[J+1],R&&e[J].equals(R))continue;Z&&(O=Z),I&&(z=I),I=e[J],Z=R?R.sub(I)._unit()._perp():O,O=O||Z;let le=O.add(Z);le.x===0&&le.y===0||le._unit();const Q=O.x*Z.x+O.y*Z.y,ae=le.x*Z.x+le.y*Z.y,he=ae!==0?1/ae:1/0,ue=2*Math.sqrt(2-2*ae),De=ae<dx&&z&&R,Ie=O.x*Z.y-O.y*Z.x>0;if(De&&J>b){const Be=I.dist(z);if(Be>2*M){const Xe=I.sub(I.sub(z)._mult(M/Be)._round());this.updateDistance(z,Xe),this.addCurrentVertex(Xe,O,0,0,A),z=Xe}}const Ze=z&&R;let st=Ze?a:y?"butt":u;if(Ze&&st==="round"&&(he<m?st="miter":he<=2&&(st="fakeround")),st==="miter"&&he>d&&(st="bevel"),st==="bevel"&&(he>2&&(st="flipbevel"),he<d&&(st="miter")),z&&this.updateDistance(z,I),st==="miter")le._mult(he),this.addCurrentVertex(I,le,0,0,A);else if(st==="flipbevel"){if(he>100)le=Z.mult(-1);else{const Be=he*O.add(Z).mag()/O.sub(Z).mag();le._perp()._mult(Be*(Ie?-1:1))}this.addCurrentVertex(I,le,0,0,A),this.addCurrentVertex(I,le.mult(-1),0,0,A)}else if(st==="bevel"||st==="fakeround"){const Be=-Math.sqrt(he*he-1),Xe=Ie?Be:0,Ke=Ie?0:Be;if(z&&this.addCurrentVertex(I,O,Xe,Ke,A),st==="fakeround"){const et=Math.round(180*ue/Math.PI/20);for(let ut=1;ut<et;ut++){let Ge=ut/et;if(Ge!==.5){const At=Ge-.5;Ge+=Ge*At*(Ge-1)*((1.0904+Q*(Q*(3.55645-1.43519*Q)-3.2452))*At*At+(.848013+Q*(.215638*Q-1.06021)))}const _t=Z.sub(O)._mult(Ge)._add(O)._unit()._mult(Ie?-1:1);this.addHalfVertex(I,_t.x,_t.y,!1,Ie,0,A)}}R&&this.addCurrentVertex(I,Z,-Xe,-Ke,A)}else if(st==="butt")this.addCurrentVertex(I,le,0,0,A);else if(st==="square"){const Be=z?1:-1;z||this.addCurrentVertex(I,le,Be,Be,A),this.addCurrentVertex(I,le,0,0,A),z&&this.addCurrentVertex(I,le,Be,Be,A)}else st==="round"&&(z&&(this.addCurrentVertex(I,O,0,0,A),this.addCurrentVertex(I,O,1,1,A,!0)),R&&(this.addCurrentVertex(I,Z,-1,-1,A,!0),this.addCurrentVertex(I,Z,0,0,A)));if(De&&J<w-1){const Be=I.dist(R);if(Be>2*M){const Xe=I.add(R.sub(I)._mult(M/Be)._round());this.updateDistance(I,Xe),this.addCurrentVertex(Xe,Z,0,0,A),I=Xe}}}}addCurrentVertex(e,r,a,u,d,m=!1){const y=r.y*u-r.x,w=-r.y-r.x*u;this.addHalfVertex(e,r.x+r.y*a,r.y-r.x*a,m,!1,a,d),this.addHalfVertex(e,y,w,m,!0,-u,d)}addHalfVertex({x:e,y:r},a,u,d,m,y,w){this.layoutVertexArray.emplaceBack((e<<1)+(d?1:0),(r<<1)+(m?1:0),Math.round(63*a)+128,Math.round(63*u)+128,1+(y===0?0:y<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const b=w.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,b),w.primitiveLength++),m?this.e2=b:this.e1=b}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,r){this.distance+=e.dist(r),this.updateScaledDistance()}}Ct(Gh,"LineBucket",{omit:["layers","patternFeatures"]});const px=new re({"line-cap":new W(je.layout_line["line-cap"]),"line-join":new W(je.layout_line["line-join"]),"line-miter-limit":new B(je.layout_line["line-miter-limit"]),"line-round-limit":new B(je.layout_line["line-round-limit"]),"line-sort-key":new W(je.layout_line["line-sort-key"])});var Pf={paint:new re({"line-opacity":new W(je.paint_line["line-opacity"]),"line-color":new W(je.paint_line["line-color"]),"line-translate":new B(je.paint_line["line-translate"]),"line-translate-anchor":new B(je.paint_line["line-translate-anchor"]),"line-width":new W(je.paint_line["line-width"]),"line-gap-width":new W(je.paint_line["line-gap-width"]),"line-offset":new W(je.paint_line["line-offset"]),"line-blur":new W(je.paint_line["line-blur"]),"line-dasharray":new W(je.paint_line["line-dasharray"]),"line-pattern":new W(je.paint_line["line-pattern"]),"line-gradient":new te(je.paint_line["line-gradient"]),"line-trim-offset":new B(je.paint_line["line-trim-offset"])}),layout:px};const Af=new class extends W{possiblyEvaluate(n,e){return e=new P(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(n,e)}evaluate(n,e,r,a){return e=Zt({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(n,e,r,a)}}(Pf.paint.properties["line-width"].specification);function If(n,e){return e>0?e+2*n:n}Af.useIntegerZoom=!0;const fx=be([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mx=be([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),_x=be([{name:"a_projected_pos",components:4,type:"Float32"}],4);be([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const gx=be([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),yx=be([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);be([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const kf=be([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),vx=be([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);be([{name:"triangle",components:3,type:"Uint16"}]),be([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),be([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),be([{type:"Float32",name:"offsetX"}]),be([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Lr=24;const $o=128;function Yd(n,e){const{expression:r}=e;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new P(n+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:a,interpolationType:u}=r;let d=0;for(;d<a.length&&a[d]<=n;)d++;d=Math.max(0,d-1);let m=d;for(;m<a.length&&a[m]<n+1;)m++;m=Math.min(a.length-1,m);const y=a[d],w=a[m];return r.kind==="composite"?{kind:"composite",minZoom:y,maxZoom:w,interpolationType:u}:{kind:"camera",minZoom:y,maxZoom:w,minSize:r.evaluate(new P(y)),maxSize:r.evaluate(new P(w)),interpolationType:u}}}function $h(n,{uSize:e,uSizeT:r},{lowerSize:a,upperSize:u}){return n.kind==="source"?a/$o:n.kind==="composite"?un(a/$o,u/$o,r):e}function tc(n,e){let r=0,a=0;if(n.kind==="constant")a=n.layoutSize;else if(n.kind!=="source"){const{interpolationType:u,minZoom:d,maxZoom:m}=n,y=u?Ee(mo.interpolationFactor(u,e,d,m),0,1):0;n.kind==="camera"?a=un(n.minSize,n.maxSize,y):r=y}return{uSizeT:r,uSize:a}}var xx=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:$o,evaluateSizeForFeature:$h,evaluateSizeForZoom:tc,getSizeData:Yd});function wx(n,e,r){return n.sections.forEach(a=>{a.text=function(u,d,m){const y=d.layout.get("text-transform").evaluate(m,{});return y==="uppercase"?u=u.toLocaleUpperCase():y==="lowercase"&&(u=u.toLocaleLowerCase()),S.applyArabicShaping&&(u=S.applyArabicShaping(u)),u}(a.text,e,r)}),n}const y0={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function bx(n){return n==="︶"||n==="﹈"||n==="︸"||n==="﹄"||n==="﹂"||n==="︾"||n==="︼"||n==="︺"||n==="︘"||n==="﹀"||n==="︐"||n==="︓"||n==="︔"||n==="｀"||n==="￣"||n==="︑"||n==="︒"}function Tx(n){return n==="︵"||n==="﹇"||n==="︷"||n==="﹃"||n==="﹁"||n==="︽"||n==="︻"||n==="︹"||n==="︗"||n==="︿"}var Lf=In,zf=function(n,e,r,a,u){var d,m,y=8*u-a-1,w=(1<<y)-1,b=w>>1,M=-7,A=r?u-1:0,I=r?-1:1,z=n[e+A];for(A+=I,d=z&(1<<-M)-1,z>>=-M,M+=y;M>0;d=256*d+n[e+A],A+=I,M-=8);for(m=d&(1<<-M)-1,d>>=-M,M+=a;M>0;m=256*m+n[e+A],A+=I,M-=8);if(d===0)d=1-b;else{if(d===w)return m?NaN:1/0*(z?-1:1);m+=Math.pow(2,a),d-=b}return(z?-1:1)*m*Math.pow(2,d-a)},Df=function(n,e,r,a,u,d){var m,y,w,b=8*d-u-1,M=(1<<b)-1,A=M>>1,I=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,z=a?0:d-1,R=a?1:-1,O=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(y=isNaN(e)?1:0,m=M):(m=Math.floor(Math.log(e)/Math.LN2),e*(w=Math.pow(2,-m))<1&&(m--,w*=2),(e+=m+A>=1?I/w:I*Math.pow(2,1-A))*w>=2&&(m++,w/=2),m+A>=M?(y=0,m=M):m+A>=1?(y=(e*w-1)*Math.pow(2,u),m+=A):(y=e*Math.pow(2,A-1)*Math.pow(2,u),m=0));u>=8;n[r+z]=255&y,z+=R,y/=256,u-=8);for(m=m<<u|y,b+=u;b>0;n[r+z]=255&m,z+=R,m/=256,b-=8);n[r+z-R]|=128*O};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function In(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}In.Varint=0,In.Fixed64=1,In.Bytes=2,In.Fixed32=5;var Jd=4294967296,Rf=1/Jd,Ff=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Zs(n){return n.type===In.Bytes?n.readVarint()+n.pos:n.pos+1}function nc(n,e,r){return r?4294967296*e+(n>>>0):4294967296*(e>>>0)+(n>>>0)}function Bf(n,e,r){var a=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(a);for(var u=r.pos-1;u>=n;u--)r.buf[u+a]=r.buf[u]}function Ex(n,e){for(var r=0;r<n.length;r++)e.writeVarint(n[r])}function Sx(n,e){for(var r=0;r<n.length;r++)e.writeSVarint(n[r])}function Mx(n,e){for(var r=0;r<n.length;r++)e.writeFloat(n[r])}function Cx(n,e){for(var r=0;r<n.length;r++)e.writeDouble(n[r])}function Px(n,e){for(var r=0;r<n.length;r++)e.writeBoolean(n[r])}function Ax(n,e){for(var r=0;r<n.length;r++)e.writeFixed32(n[r])}function Ix(n,e){for(var r=0;r<n.length;r++)e.writeSFixed32(n[r])}function kx(n,e){for(var r=0;r<n.length;r++)e.writeFixed64(n[r])}function Lx(n,e){for(var r=0;r<n.length;r++)e.writeSFixed64(n[r])}function Zh(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16)+16777216*n[e+3]}function rc(n,e,r){n[r]=e,n[r+1]=e>>>8,n[r+2]=e>>>16,n[r+3]=e>>>24}function Of(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16)+(n[e+3]<<24)}In.prototype={destroy:function(){this.buf=null},readFields:function(n,e,r){for(r=r||this.length;this.pos<r;){var a=this.readVarint(),u=a>>3,d=this.pos;this.type=7&a,n(u,e,this),this.pos===d&&this.skip(a)}return e},readMessage:function(n,e){return this.readFields(n,e,this.readVarint()+this.pos)},readFixed32:function(){var n=Zh(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=Of(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=Zh(this.buf,this.pos)+Zh(this.buf,this.pos+4)*Jd;return this.pos+=8,n},readSFixed64:function(){var n=Zh(this.buf,this.pos)+Of(this.buf,this.pos+4)*Jd;return this.pos+=8,n},readFloat:function(){var n=zf(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=zf(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var e,r,a=this.buf;return e=127&(r=a[this.pos++]),r<128?e:(e|=(127&(r=a[this.pos++]))<<7,r<128?e:(e|=(127&(r=a[this.pos++]))<<14,r<128?e:(e|=(127&(r=a[this.pos++]))<<21,r<128?e:function(u,d,m){var y,w,b=m.buf;if(y=(112&(w=b[m.pos++]))>>4,w<128||(y|=(127&(w=b[m.pos++]))<<3,w<128)||(y|=(127&(w=b[m.pos++]))<<10,w<128)||(y|=(127&(w=b[m.pos++]))<<17,w<128)||(y|=(127&(w=b[m.pos++]))<<24,w<128)||(y|=(1&(w=b[m.pos++]))<<31,w<128))return nc(u,y,d);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=a[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var n=this.readVarint()+this.pos,e=this.pos;return this.pos=n,n-e>=12&&Ff?function(r,a,u){return Ff.decode(r.subarray(a,u))}(this.buf,e,n):function(r,a,u){for(var d="",m=a;m<u;){var y,w,b,M=r[m],A=null,I=M>239?4:M>223?3:M>191?2:1;if(m+I>u)break;I===1?M<128&&(A=M):I===2?(192&(y=r[m+1]))==128&&(A=(31&M)<<6|63&y)<=127&&(A=null):I===3?(w=r[m+2],(192&(y=r[m+1]))==128&&(192&w)==128&&((A=(15&M)<<12|(63&y)<<6|63&w)<=2047||A>=55296&&A<=57343)&&(A=null)):I===4&&(w=r[m+2],b=r[m+3],(192&(y=r[m+1]))==128&&(192&w)==128&&(192&b)==128&&((A=(15&M)<<18|(63&y)<<12|(63&w)<<6|63&b)<=65535||A>=1114112)&&(A=null)),A===null?(A=65533,I=1):A>65535&&(A-=65536,d+=String.fromCharCode(A>>>10&1023|55296),A=56320|1023&A),d+=String.fromCharCode(A),m+=I}return d}(this.buf,e,n)},readBytes:function(){var n=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,n);return this.pos=n,e},readPackedVarint:function(n,e){if(this.type!==In.Bytes)return n.push(this.readVarint(e));var r=Zs(this);for(n=n||[];this.pos<r;)n.push(this.readVarint(e));return n},readPackedSVarint:function(n){if(this.type!==In.Bytes)return n.push(this.readSVarint());var e=Zs(this);for(n=n||[];this.pos<e;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==In.Bytes)return n.push(this.readBoolean());var e=Zs(this);for(n=n||[];this.pos<e;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==In.Bytes)return n.push(this.readFloat());var e=Zs(this);for(n=n||[];this.pos<e;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==In.Bytes)return n.push(this.readDouble());var e=Zs(this);for(n=n||[];this.pos<e;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==In.Bytes)return n.push(this.readFixed32());var e=Zs(this);for(n=n||[];this.pos<e;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==In.Bytes)return n.push(this.readSFixed32());var e=Zs(this);for(n=n||[];this.pos<e;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==In.Bytes)return n.push(this.readFixed64());var e=Zs(this);for(n=n||[];this.pos<e;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==In.Bytes)return n.push(this.readSFixed64());var e=Zs(this);for(n=n||[];this.pos<e;)n.push(this.readSFixed64());return n},skip:function(n){var e=7&n;if(e===In.Varint)for(;this.buf[this.pos++]>127;);else if(e===In.Bytes)this.pos=this.readVarint()+this.pos;else if(e===In.Fixed32)this.pos+=4;else{if(e!==In.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(n,e){this.writeVarint(n<<3|e)},realloc:function(n){for(var e=this.length||16;e<this.pos+n;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),rc(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),rc(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),rc(this.buf,-1&n,this.pos),rc(this.buf,Math.floor(n*Rf),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),rc(this.buf,-1&n,this.pos),rc(this.buf,Math.floor(n*Rf),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(e,r){var a,u;if(e>=0?(a=e%4294967296|0,u=e/4294967296|0):(u=~(-e/4294967296),4294967295^(a=~(-e%4294967296))?a=a+1|0:(a=0,u=u+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),function(d,m,y){y.buf[y.pos++]=127&d|128,d>>>=7,y.buf[y.pos++]=127&d|128,d>>>=7,y.buf[y.pos++]=127&d|128,d>>>=7,y.buf[y.pos++]=127&d|128,y.buf[y.pos]=127&(d>>>=7)}(a,0,r),function(d,m){var y=(7&d)<<4;m.buf[m.pos++]|=y|((d>>>=3)?128:0),d&&(m.buf[m.pos++]=127&d|((d>>>=7)?128:0),d&&(m.buf[m.pos++]=127&d|((d>>>=7)?128:0),d&&(m.buf[m.pos++]=127&d|((d>>>=7)?128:0),d&&(m.buf[m.pos++]=127&d|((d>>>=7)?128:0),d&&(m.buf[m.pos++]=127&d)))))}(u,r)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(!!n)},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var e=this.pos;this.pos=function(a,u,d){for(var m,y,w=0;w<u.length;w++){if((m=u.charCodeAt(w))>55295&&m<57344){if(!y){m>56319||w+1===u.length?(a[d++]=239,a[d++]=191,a[d++]=189):y=m;continue}if(m<56320){a[d++]=239,a[d++]=191,a[d++]=189,y=m;continue}m=y-55296<<10|m-56320|65536,y=null}else y&&(a[d++]=239,a[d++]=191,a[d++]=189,y=null);m<128?a[d++]=m:(m<2048?a[d++]=m>>6|192:(m<65536?a[d++]=m>>12|224:(a[d++]=m>>18|240,a[d++]=m>>12&63|128),a[d++]=m>>6&63|128),a[d++]=63&m|128)}return d}(this.buf,n,this.pos);var r=this.pos-e;r>=128&&Bf(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(n){this.realloc(4),Df(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),Df(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var e=n.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=n[r]},writeRawMessage:function(n,e){this.pos++;var r=this.pos;n(e,this);var a=this.pos-r;a>=128&&Bf(r,a,this),this.pos=r-1,this.writeVarint(a),this.pos+=a},writeMessage:function(n,e,r){this.writeTag(n,In.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(n,e){e.length&&this.writeMessage(n,Ex,e)},writePackedSVarint:function(n,e){e.length&&this.writeMessage(n,Sx,e)},writePackedBoolean:function(n,e){e.length&&this.writeMessage(n,Px,e)},writePackedFloat:function(n,e){e.length&&this.writeMessage(n,Mx,e)},writePackedDouble:function(n,e){e.length&&this.writeMessage(n,Cx,e)},writePackedFixed32:function(n,e){e.length&&this.writeMessage(n,Ax,e)},writePackedSFixed32:function(n,e){e.length&&this.writeMessage(n,Ix,e)},writePackedFixed64:function(n,e){e.length&&this.writeMessage(n,kx,e)},writePackedSFixed64:function(n,e){e.length&&this.writeMessage(n,Lx,e)},writeBytesField:function(n,e){this.writeTag(n,In.Bytes),this.writeBytes(e)},writeFixed32Field:function(n,e){this.writeTag(n,In.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(n,e){this.writeTag(n,In.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(n,e){this.writeTag(n,In.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(n,e){this.writeTag(n,In.Fixed64),this.writeSFixed64(e)},writeVarintField:function(n,e){this.writeTag(n,In.Varint),this.writeVarint(e)},writeSVarintField:function(n,e){this.writeTag(n,In.Varint),this.writeSVarint(e)},writeStringField:function(n,e){this.writeTag(n,In.Bytes),this.writeString(e)},writeFloatField:function(n,e){this.writeTag(n,In.Fixed32),this.writeFloat(e)},writeDoubleField:function(n,e){this.writeTag(n,In.Fixed64),this.writeDouble(e)},writeBooleanField:function(n,e){this.writeVarintField(n,!!e)}};var Wh=oe(Lf);const Qd=3;function zx(n,e,r){e.glyphs=[],n===1&&r.readMessage(Dx,e)}function Dx(n,e,r){if(n===3){const{id:a,bitmap:u,width:d,height:m,left:y,top:w,advance:b}=r.readMessage(Rx,{});e.glyphs.push({id:a,bitmap:new $s({width:d+2*Qd,height:m+2*Qd},u),metrics:{width:d,height:m,left:y,top:w,advance:b}})}else n===4?e.ascender=r.readSVarint():n===5&&(e.descender=r.readSVarint())}function Rx(n,e,r){n===1?e.id=r.readVarint():n===2?e.bitmap=r.readBytes():n===3?e.width=r.readVarint():n===4?e.height=r.readVarint():n===5?e.left=r.readSVarint():n===6?e.top=r.readSVarint():n===7&&(e.advance=r.readVarint())}const Uf=Qd;function e4(n){let e=0,r=0;for(const m of n)e+=m.w*m.h,r=Math.max(r,m.w);n.sort((m,y)=>y.h-m.h);const a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let u=0,d=0;for(const m of n)for(let y=a.length-1;y>=0;y--){const w=a[y];if(!(m.w>w.w||m.h>w.h)){if(m.x=w.x,m.y=w.y,d=Math.max(d,m.y+m.h),u=Math.max(u,m.x+m.w),m.w===w.w&&m.h===w.h){const b=a.pop();y<a.length&&(a[y]=b)}else m.h===w.h?(w.x+=m.w,w.w-=m.w):m.w===w.w?(w.y+=m.h,w.h-=m.h):(a.push({x:w.x+m.w,y:w.y,w:w.w-m.w,h:m.h}),w.y+=m.h,w.h-=m.h);break}}return{w:u,h:d,fill:e/(u*d)||0}}const gi=1;class t4{constructor(e,{pixelRatio:r,version:a,stretchX:u,stretchY:d,content:m}){this.paddedRect=e,this.pixelRatio=r,this.stretchX=u,this.stretchY=d,this.content=m,this.version=a}get tl(){return[this.paddedRect.x+gi,this.paddedRect.y+gi]}get br(){return[this.paddedRect.x+this.paddedRect.w-gi,this.paddedRect.y+this.paddedRect.h-gi]}get displaySize(){return[(this.paddedRect.w-2*gi)/this.pixelRatio,(this.paddedRect.h-2*gi)/this.pixelRatio]}}class Nf{constructor(e,r){const a={},u={};this.haveRenderCallbacks=[];const d=[];this.addImages(e,a,d),this.addImages(r,u,d);const{w:m,h:y}=e4(d),w=new Li({width:m||1,height:y||1});for(const b in e){const M=e[b],A=a[b].paddedRect;Li.copy(M.data,w,{x:0,y:0},{x:A.x+gi,y:A.y+gi},M.data)}for(const b in r){const M=r[b],A=u[b].paddedRect,I=A.x+gi,z=A.y+gi,R=M.data.width,O=M.data.height;Li.copy(M.data,w,{x:0,y:0},{x:I,y:z},M.data),Li.copy(M.data,w,{x:0,y:O-1},{x:I,y:z-1},{width:R,height:1}),Li.copy(M.data,w,{x:0,y:0},{x:I,y:z+O},{width:R,height:1}),Li.copy(M.data,w,{x:R-1,y:0},{x:I-1,y:z},{width:1,height:O}),Li.copy(M.data,w,{x:0,y:0},{x:I+R,y:z},{width:1,height:O})}this.image=w,this.iconPositions=a,this.patternPositions=u}addImages(e,r,a){for(const u in e){const d=e[u],m={x:0,y:0,w:d.data.width+2*gi,h:d.data.height+2*gi};a.push(m),r[u]=new t4(m,d),d.hasRenderCallback&&this.haveRenderCallbacks.push(u)}}patchUpdatedImages(e,r){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(a=>e.hasImage(a)),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const a in e.updatedImages)this.patchUpdatedImage(this.iconPositions[a],e.getImage(a),r),this.patchUpdatedImage(this.patternPositions[a],e.getImage(a),r)}patchUpdatedImage(e,r,a){if(!e||!r||e.version===r.version)return;e.version=r.version;const[u,d]=e.tl;a.update(r.data,void 0,{x:u,y:d})}}Ct(t4,"ImagePosition"),Ct(Nf,"ImageAtlas");const Yi={horizontal:1,vertical:2,horizontalOnly:3},jf=-17;class v0{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,r){const a=new v0;return a.scale=e||1,a.fontStack=r,a}static forImage(e){const r=new v0;return r.imageName=e,r}}class ic{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,r){const a=new ic;for(let u=0;u<e.sections.length;u++){const d=e.sections[u];d.image?a.addImageSection(d):a.addTextSection(d,r)}return a}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(r,a){let u="";for(let d=0;d<r.length;d++){const m=r.charCodeAt(d+1)||null,y=r.charCodeAt(d-1)||null;u+=!a&&(m&&wh(m)&&!y0[r[d+1]]||y&&wh(y)&&!y0[r[d-1]])||!y0[r[d]]?r[d]:y0[r[d]]}return u}(this.text,e)}trim(){let e=0;for(let a=0;a<this.text.length&&qh[this.text.charCodeAt(a)];a++)e++;let r=this.text.length;for(let a=this.text.length-1;a>=0&&a>=e&&qh[this.text.charCodeAt(a)];a--)r--;this.text=this.text.substring(e,r),this.sectionIndex=this.sectionIndex.slice(e,r)}substring(e,r){const a=new ic;return a.text=this.text.substring(e,r),a.sectionIndex=this.sectionIndex.slice(e,r),a.sections=this.sections,a}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,r)=>Math.max(e,this.sections[r].scale),0)}addTextSection(e,r){this.text+=e.text,this.sections.push(v0.forText(e.scale,e.fontStack||r));const a=this.sections.length-1;for(let u=0;u<e.text.length;++u)this.sectionIndex.push(a)}addImageSection(e){const r=e.image?e.image.name:"";if(r.length===0)return void Un("Can't add FormattedSection with an empty image.");const a=this.getNextImageSectionCharCode();a?(this.text+=String.fromCharCode(a),this.sections.push(v0.forImage(r)),this.sectionIndex.push(this.sections.length-1)):Un("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function n4(n,e,r,a,u,d,m,y,w,b,M,A,I,z,R){const O=ic.fromFeature(n,u);A===Yi.vertical&&O.verticalizePunctuation(I);let Z=[];const J=function(ue,De,Ie,Ze,st,Be){if(!ue)return[];const Xe=[],Ke=function(_t,At,vt,qt,dt,Rt){let Ht=0;for(let dn=0;dn<_t.length();dn++){const Xt=_t.getSection(dn);Ht+=Vf(_t.getCharCode(dn),Xt,qt,dt,At,Rt)}return Ht/Math.max(1,Math.ceil(Ht/vt))}(ue,De,Ie,Ze,st,Be),et=ue.text.indexOf("​")>=0;let ut=0;for(let _t=0;_t<ue.length();_t++){const At=ue.getSection(_t),vt=ue.getCharCode(_t);if(qh[vt]||(ut+=Vf(vt,At,Ze,st,De,Be)),_t<ue.length()-1){const qt=!((Ge=vt)<11904||!(xt["Bopomofo Extended"](Ge)||xt.Bopomofo(Ge)||xt["CJK Compatibility Forms"](Ge)||xt["CJK Compatibility Ideographs"](Ge)||xt["CJK Compatibility"](Ge)||xt["CJK Radicals Supplement"](Ge)||xt["CJK Strokes"](Ge)||xt["CJK Symbols and Punctuation"](Ge)||xt["CJK Unified Ideographs Extension A"](Ge)||xt["CJK Unified Ideographs"](Ge)||xt["Enclosed CJK Letters and Months"](Ge)||xt["Halfwidth and Fullwidth Forms"](Ge)||xt.Hiragana(Ge)||xt["Ideographic Description Characters"](Ge)||xt["Kangxi Radicals"](Ge)||xt["Katakana Phonetic Extensions"](Ge)||xt.Katakana(Ge)||xt["Vertical Forms"](Ge)||xt["Yi Radicals"](Ge)||xt["Yi Syllables"](Ge)));(Fx[vt]||qt||At.imageName)&&Xe.push($f(_t+1,ut,Ke,Xe,Bx(vt,ue.getCharCode(_t+1),qt&&et),!1))}}var Ge;return Zf($f(ue.length(),ut,Ke,Xe,0,!0))}(O,b,d,e,a,z),{processBidirectionalText:le,processStyledBidirectionalText:Q}=S;if(le&&O.sections.length===1){const ue=le(O.toString(),J);for(const De of ue){const Ie=new ic;Ie.text=De,Ie.sections=O.sections;for(let Ze=0;Ze<De.length;Ze++)Ie.sectionIndex.push(0);Z.push(Ie)}}else if(Q){const ue=Q(O.text,O.sectionIndex,J);for(const De of ue){const Ie=new ic;Ie.text=De[0],Ie.sectionIndex=De[1],Ie.sections=O.sections,Z.push(Ie)}}else Z=function(ue,De){const Ie=[],Ze=ue.text;let st=0;for(const Be of De)Ie.push(ue.substring(st,Be)),st=Be;return st<Ze.length&&Ie.push(ue.substring(st,Ze.length)),Ie}(O,J);const ae=[],he={positionedLines:ae,text:O.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:A,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(ue,De,Ie,Ze,st,Be,Xe,Ke,et,ut,Ge,_t){let At=0,vt=0,qt=0;const dt=Ke==="right"?1:Ke==="left"?0:.5;let Rt=!1;for(const Kt of st){const Yt=Kt.getSections();for(const Cn of Yt){if(Cn.imageName)continue;const kn=De[Cn.fontStack];if(kn&&(Rt=kn.ascender!==void 0&&kn.descender!==void 0,!Rt))break}if(!Rt)break}let Ht=0;for(const Kt of st){Kt.trim();const Yt=Kt.getMaxScale(),Cn=(Yt-1)*Lr,kn={positionedGlyphs:[],lineOffset:0};ue.positionedLines[Ht]=kn;const Ln=kn.positionedGlyphs;let Pn=0;if(!Kt.length()){vt+=Be,++Ht;continue}let qn=0,Jn=0;for(let An=0;An<Kt.length();An++){const xr=Kt.getSection(An),hr=Kt.getSectionIndex(An),Xn=Kt.getCharCode(An);let fn=xr.scale,dr=null,zn=null,ai=null,pr=Lr,zr=0;const Cr=!(et===Yi.horizontal||!Ge&&!Wu(Xn)||Ge&&(qh[Xn]||(dn=Xn,xt.Arabic(dn)||xt["Arabic Supplement"](dn)||xt["Arabic Extended-A"](dn)||xt["Arabic Presentation Forms-A"](dn)||xt["Arabic Presentation Forms-B"](dn))));if(xr.imageName){const li=Ze[xr.imageName];if(!li)continue;ai=xr.imageName,ue.iconsInText=ue.iconsInText||!0,zn=li.paddedRect;const Pr=li.displaySize;fn=fn*Lr/_t,dr={width:Pr[0],height:Pr[1],left:gi,top:-Uf,advance:Cr?Pr[1]:Pr[0],localGlyph:!1},zr=Rt?-dr.height*fn:jf+Yt*Lr-Pr[1]*fn,pr=dr.advance;const qo=(Cr?Pr[0]:Pr[1])*fn-Lr*Yt;qo>0&&qo>Pn&&(Pn=qo)}else{const li=Ie[xr.fontStack];if(!li)continue;li[Xn]&&(zn=li[Xn]);const Pr=De[xr.fontStack];if(!Pr)continue;const qo=Pr.glyphs[Xn];if(!qo)continue;if(dr=qo.metrics,pr=Xn!==8203?Lr:0,Rt){const hc=Pr.ascender!==void 0?Math.abs(Pr.ascender):0,A0=Pr.descender!==void 0?Math.abs(Pr.descender):0,I0=(hc+A0)*fn;qn<I0&&(qn=I0,Jn=(hc-A0)/2*fn),zr=-hc*fn}else zr=jf+(Yt-fn)*Lr}Cr?(ue.verticalizable=!0,Ln.push({glyph:Xn,imageName:ai,x:At,y:vt+zr,vertical:Cr,scale:fn,localGlyph:dr.localGlyph,fontStack:xr.fontStack,sectionIndex:hr,metrics:dr,rect:zn}),At+=pr*fn+ut):(Ln.push({glyph:Xn,imageName:ai,x:At,y:vt+zr,vertical:Cr,scale:fn,localGlyph:dr.localGlyph,fontStack:xr.fontStack,sectionIndex:hr,metrics:dr,rect:zn}),At+=dr.advance*fn+ut)}Ln.length!==0&&(qt=Math.max(At-ut,qt),Rt?Wf(Ln,dt,Pn,Jn,Be*Yt/2):Wf(Ln,dt,Pn,0,Be/2)),At=0;const ur=Be*Yt+Pn;kn.lineOffset=Math.max(Pn,Cn),vt+=ur,++Ht}var dn;const Xt=vt,{horizontalAlign:Ut,verticalAlign:Fn}=r4(Xe);(function(Kt,Yt,Cn,kn,Ln,Pn){const qn=(Yt-Cn)*Ln,Jn=-Pn*kn;for(const ur of Kt)for(const An of ur.positionedGlyphs)An.x+=qn,An.y+=Jn})(ue.positionedLines,dt,Ut,Fn,qt,Xt),ue.top+=-Fn*Xt,ue.bottom=ue.top+Xt,ue.left+=-Ut*qt,ue.right=ue.left+qt,ue.hasBaseline=Rt}(he,e,r,a,Z,m,y,w,A,b,I,R),!function(ue){for(const De of ue)if(De.positionedGlyphs.length!==0)return!1;return!0}(ae)&&he}const qh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Fx={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Vf(n,e,r,a,u,d){if(e.imageName){const m=a[e.imageName];return m?m.displaySize[0]*e.scale*Lr/d+u:0}{const m=r[e.fontStack],y=m&&m.glyphs[n];return y?y.metrics.advance*e.scale+u:0}}function Gf(n,e,r,a){const u=Math.pow(n-e,2);return a?n<e?u/2:2*u:u+Math.abs(r)*r}function Bx(n,e,r){let a=0;return n===10&&(a-=1e4),r&&(a+=150),n!==40&&n!==65288||(a+=50),e!==41&&e!==65289||(a+=50),a}function $f(n,e,r,a,u,d){let m=null,y=Gf(e,r,u,d);for(const w of a){const b=Gf(e-w.x,r,u,d)+w.badness;b<=y&&(m=w,y=b)}return{index:n,x:e,priorBreak:m,badness:y}}function Zf(n){return n?Zf(n.priorBreak).concat(n.index):[]}function r4(n){let e=.5,r=.5;switch(n){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function Wf(n,e,r,a,u){if(!(e||r||a||u))return;const d=n.length-1,m=n[d],y=(m.x+m.metrics.advance*m.scale)*e;for(let w=0;w<=d;w++)n[w].x-=y,n[w].y+=r+a+u}function Ox(n,e,r){const{horizontalAlign:a,verticalAlign:u}=r4(r),d=e[0]-n.displaySize[0]*a,m=e[1]-n.displaySize[1]*u;return{image:n,top:m,bottom:m+n.displaySize[1],left:d,right:d+n.displaySize[0]}}function qf(n,e,r,a,u,d){const m=n.image;let y;if(m.content){const Z=m.content,J=m.pixelRatio||1;y=[Z[0]/J,Z[1]/J,m.displaySize[0]-Z[2]/J,m.displaySize[1]-Z[3]/J]}const w=e.left*d,b=e.right*d;let M,A,I,z;r==="width"||r==="both"?(z=u[0]+w-a[3],A=u[0]+b+a[1]):(z=u[0]+(w+b-m.displaySize[0])/2,A=z+m.displaySize[0]);const R=e.top*d,O=e.bottom*d;return r==="height"||r==="both"?(M=u[1]+R-a[0],I=u[1]+O+a[2]):(M=u[1]+(R+O-m.displaySize[1])/2,I=M+m.displaySize[1]),{image:m,top:M,right:A,bottom:I,left:z,collisionPadding:y}}class Ws extends ze{constructor(e,r,a,u,d){super(e,r),this.angle=u,this.z=a,d!==void 0&&(this.segment=d)}clone(){return new Ws(this.x,this.y,this.z,this.angle,this.segment)}}function Hf(n,e,r,a,u){if(e.segment===void 0)return!0;let d=e,m=e.segment+1,y=0;for(;y>-r/2;){if(m--,m<0)return!1;y-=n[m].dist(d),d=n[m]}y+=n[m].dist(n[m+1]),m++;const w=[];let b=0;for(;y<r/2;){const M=n[m],A=n[m+1];if(!A)return!1;let I=n[m-1].angleTo(M)-M.angleTo(A);for(I=Math.abs((I+3*Math.PI)%(2*Math.PI)-Math.PI),w.push({distance:y,angleDelta:I}),b+=I;y-w[0].distance>a;)b-=w.shift().angleDelta;if(b>u)return!1;m++,y+=M.dist(A)}return!0}function Xf(n){let e=0;for(let r=0;r<n.length-1;r++)e+=n[r].dist(n[r+1]);return e}function Kf(n,e,r){return n?.6*e*r:0}function Yf(n,e){return Math.max(n?n.right-n.left:0,e?e.right-e.left:0)}function Ux(n,e,r,a,u,d){const m=Kf(r,u,d),y=Yf(r,a)*d;let w=0;const b=Xf(n)/2;for(let M=0;M<n.length-1;M++){const A=n[M],I=n[M+1],z=A.dist(I);if(w+z>b){const R=(b-w)/z,O=un(A.x,I.x,R),Z=un(A.y,I.y,R),J=new Ws(O,Z,0,I.angleTo(A),M);return!m||Hf(n,J,y,m,e)?J:void 0}w+=z}}function Nx(n,e,r,a,u,d,m,y,w){const b=Kf(a,d,m),M=Yf(a,u),A=M*m,I=n[0].x===0||n[0].x===w||n[0].y===0||n[0].y===w;return e-A<e/4&&(e=A+e/4),Jf(n,I?e/2*y%e:(M/2+2*d)*m*y%e,e,b,r,A,I,!1,w)}function Jf(n,e,r,a,u,d,m,y,w){const b=d/2,M=Xf(n);let A=0,I=e-r,z=[];for(let R=0;R<n.length-1;R++){const O=n[R],Z=n[R+1],J=O.dist(Z),le=Z.angleTo(O);for(;I+r<A+J;){I+=r;const Q=(I-A)/J,ae=un(O.x,Z.x,Q),he=un(O.y,Z.y,Q);if(ae>=0&&ae<w&&he>=0&&he<w&&I-b>=0&&I+b<=M){const ue=new Ws(ae,he,0,le,R);ue._round(),a&&!Hf(n,ue,d,a,u)||z.push(ue)}}A+=J}return y||z.length||m||(z=Jf(n,A/2,r,a,u,d,m,!0,w)),z}function Qf(n,e,r,a,u){const d=[];for(let m=0;m<n.length;m++){const y=n[m];let w;for(let b=0;b<y.length-1;b++){let M=y[b],A=y[b+1];M.x<e&&A.x<e||(M.x<e?M=new ze(e,M.y+(e-M.x)/(A.x-M.x)*(A.y-M.y))._round():A.x<e&&(A=new ze(e,M.y+(e-M.x)/(A.x-M.x)*(A.y-M.y))._round()),M.y<r&&A.y<r||(M.y<r?M=new ze(M.x+(r-M.y)/(A.y-M.y)*(A.x-M.x),r)._round():A.y<r&&(A=new ze(M.x+(r-M.y)/(A.y-M.y)*(A.x-M.x),r)._round()),M.x>=a&&A.x>=a||(M.x>=a?M=new ze(a,M.y+(a-M.x)/(A.x-M.x)*(A.y-M.y))._round():A.x>=a&&(A=new ze(a,M.y+(a-M.x)/(A.x-M.x)*(A.y-M.y))._round()),M.y>=u&&A.y>=u||(M.y>=u?M=new ze(M.x+(u-M.y)/(A.y-M.y)*(A.x-M.x),u)._round():A.y>=u&&(A=new ze(M.x+(u-M.y)/(A.y-M.y)*(A.x-M.x),u)._round()),w&&M.equals(w[w.length-1])||(w=[M],d.push(w)),w.push(A)))))}}return d}Ct(Ws,"Anchor");const x0=1e20;function e8(n,e,r,a,u,d,m,y,w){for(let b=e;b<e+a;b++)t8(n,r*d+b,d,u,m,y,w);for(let b=r;b<r+u;b++)t8(n,b*d+e,1,a,m,y,w)}function t8(n,e,r,a,u,d,m){d[0]=0,m[0]=-x0,m[1]=x0,u[0]=n[e];for(let y=1,w=0,b=0;y<a;y++){u[y]=n[e+y*r];const M=y*y;do{const A=d[w];b=(u[y]-u[A]+M-A*A)/(y-A)/2}while(b<=m[w]&&--w>-1);w++,d[w]=y,m[w]=b,m[w+1]=x0}for(let y=0,w=0;y<a;y++){for(;m[w+1]<y;)w++;const b=d[w],M=y-b;n[e+y*r]=u[b]+M*M}}const Zo=2,i4={none:0,ideographs:1,all:2};class oc{constructor(e,r,a){this.requestManager=e,this.localGlyphMode=r,this.localFontFamily=a,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,r){const a=[];for(const u in e)for(const d of e[u])a.push({stack:u,id:d});kt(a,({stack:u,id:d},m)=>{let y=this.entries[u];y||(y=this.entries[u]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let w=y.glyphs[d];if(w!==void 0)return void m(null,{stack:u,id:d,glyph:w});if(w=this._tinySDF(y,u,d),w)return y.glyphs[d]=w,void m(null,{stack:u,id:d,glyph:w});const b=Math.floor(d/256);if(256*b>65535)return void m(new Error("glyphs > 65535 not supported"));if(y.ranges[b])return void m(null,{stack:u,id:d,glyph:w});let M=y.requests[b];M||(M=y.requests[b]=[],oc.loadGlyphRange(u,b,this.url,this.requestManager,(A,I)=>{if(I){y.ascender=I.ascender,y.descender=I.descender;for(const z in I.glyphs)this._doesCharSupportLocalGlyph(+z)||(y.glyphs[+z]=I.glyphs[+z]);y.ranges[b]=!0}for(const z of M)z(A,I);delete y.requests[b]})),M.push((A,I)=>{A?m(A):I&&m(null,{stack:u,id:d,glyph:I.glyphs[d]||null})})},(u,d)=>{if(u)r(u);else if(d){const m={};for(const{stack:y,id:w,glyph:b}of d)m[y]===void 0&&(m[y]={}),m[y].glyphs===void 0&&(m[y].glyphs={}),m[y].glyphs[w]=b&&{id:b.id,bitmap:b.bitmap.clone(),metrics:b.metrics},m[y].ascender=this.entries[y].ascender,m[y].descender=this.entries[y].descender;r(null,m)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==i4.none&&(this.localGlyphMode===i4.all?!!this.localFontFamily:!!this.localFontFamily&&(xt["CJK Unified Ideographs"](e)||xt["Hangul Syllables"](e)||xt.Hiragana(e)||xt.Katakana(e)||xt["CJK Symbols and Punctuation"](e)))}_tinySDF(e,r,a){const u=this.localFontFamily;if(!u||!this._doesCharSupportLocalGlyph(a))return;let d=e.tinySDF;if(!d){let O="400";/bold/i.test(r)?O="900":/medium/i.test(r)?O="500":/light/i.test(r)&&(O="200"),d=e.tinySDF=new oc.TinySDF({fontFamily:u,fontWeight:O,fontSize:24*Zo,buffer:3*Zo,radius:8*Zo}),d.fontWeight=O}if(this.localGlyphs[d.fontWeight][a])return this.localGlyphs[d.fontWeight][a];const m=String.fromCharCode(a),{data:y,width:w,height:b,glyphWidth:M,glyphHeight:A,glyphLeft:I,glyphTop:z,glyphAdvance:R}=d.draw(m);return this.localGlyphs[d.fontWeight][a]={id:a,bitmap:new $s({width:w,height:b},y),metrics:{width:M/Zo,height:A/Zo,left:I/Zo,top:z/Zo-27,advance:R/Zo,localGlyph:!0}}}}oc.loadGlyphRange=function(n,e,r,a,u){const d=256*e,m=d+255,y=a.transformRequest(a.normalizeGlyphsURL(r).replace("{fontstack}",n).replace("{range}",`${d}-${m}`),Or.Glyphs);ss(y,(w,b)=>{if(w)u(w);else if(b){const M={},A=function(I){return new Wh(I).readFields(zx,{})}(b);for(const I of A.glyphs)M[I.id]=I;u(null,{glyphs:M,ascender:A.ascender,descender:A.descender})}})},oc.TinySDF=class{constructor({fontSize:n=24,buffer:e=3,radius:r=8,cutoff:a=.25,fontFamily:u="sans-serif",fontWeight:d="normal",fontStyle:m="normal"}={}){this.buffer=e,this.cutoff=a,this.radius=r;const y=this.size=n+4*e,w=this._createCanvas(y),b=this.ctx=w.getContext("2d",{willReadFrequently:!0});b.font=`${m} ${d} ${n}px ${u}`,b.textBaseline="alphabetic",b.textAlign="left",b.fillStyle="black",this.gridOuter=new Float64Array(y*y),this.gridInner=new Float64Array(y*y),this.f=new Float64Array(y),this.z=new Float64Array(y+1),this.v=new Uint16Array(y)}_createCanvas(n){const e=document.createElement("canvas");return e.width=e.height=n,e}draw(n){const{width:e,actualBoundingBoxAscent:r,actualBoundingBoxDescent:a,actualBoundingBoxLeft:u,actualBoundingBoxRight:d}=this.ctx.measureText(n),m=Math.ceil(r),y=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(d-u))),w=Math.min(this.size-this.buffer,m+Math.ceil(a)),b=y+2*this.buffer,M=w+2*this.buffer,A=Math.max(b*M,0),I=new Uint8ClampedArray(A),z={data:I,width:b,height:M,glyphWidth:y,glyphHeight:w,glyphTop:m,glyphLeft:0,glyphAdvance:e};if(y===0||w===0)return z;const{ctx:R,buffer:O,gridInner:Z,gridOuter:J}=this;R.clearRect(O,O,y,w),R.fillText(n,O,O+m);const le=R.getImageData(O,O,y,w);J.fill(x0,0,A),Z.fill(0,0,A);for(let Q=0;Q<w;Q++)for(let ae=0;ae<y;ae++){const he=le.data[4*(Q*y+ae)+3]/255;if(he===0)continue;const ue=(Q+O)*b+ae+O;if(he===1)J[ue]=0,Z[ue]=x0;else{const De=.5-he;J[ue]=De>0?De*De:0,Z[ue]=De<0?De*De:0}}e8(J,0,0,b,M,b,this.f,this.v,this.z),e8(Z,O,O,y,w,b,this.f,this.v,this.z);for(let Q=0;Q<A;Q++){const ae=Math.sqrt(J[Q])-Math.sqrt(Z[Q]);I[Q]=Math.round(255-255*(ae/this.radius+this.cutoff))}return z}};const sc=gi;function n8(n,e,r,a){const u=[],d=n.image,m=d.pixelRatio,y=d.paddedRect.w-2*sc,w=d.paddedRect.h-2*sc,b=n.right-n.left,M=n.bottom-n.top,A=d.stretchX||[[0,y]],I=d.stretchY||[[0,w]],z=(Be,Xe)=>Be+Xe[1]-Xe[0],R=A.reduce(z,0),O=I.reduce(z,0),Z=y-R,J=w-O;let le=0,Q=R,ae=0,he=O,ue=0,De=Z,Ie=0,Ze=J;if(d.content&&a){const Be=d.content;le=Hh(A,0,Be[0]),ae=Hh(I,0,Be[1]),Q=Hh(A,Be[0],Be[2]),he=Hh(I,Be[1],Be[3]),ue=Be[0]-le,Ie=Be[1]-ae,De=Be[2]-Be[0]-Q,Ze=Be[3]-Be[1]-he}const st=(Be,Xe,Ke,et)=>{const ut=Xh(Be.stretch-le,Q,b,n.left),Ge=Kh(Be.fixed-ue,De,Be.stretch,R),_t=Xh(Xe.stretch-ae,he,M,n.top),At=Kh(Xe.fixed-Ie,Ze,Xe.stretch,O),vt=Xh(Ke.stretch-le,Q,b,n.left),qt=Kh(Ke.fixed-ue,De,Ke.stretch,R),dt=Xh(et.stretch-ae,he,M,n.top),Rt=Kh(et.fixed-Ie,Ze,et.stretch,O),Ht=new ze(ut,_t),dn=new ze(vt,_t),Xt=new ze(vt,dt),Ut=new ze(ut,dt),Fn=new ze(Ge/m,At/m),Kt=new ze(qt/m,Rt/m),Yt=e*Math.PI/180;if(Yt){const Ln=Math.sin(Yt),Pn=Math.cos(Yt),qn=[Pn,-Ln,Ln,Pn];Ht._matMult(qn),dn._matMult(qn),Ut._matMult(qn),Xt._matMult(qn)}const Cn=Be.stretch+Be.fixed,kn=Xe.stretch+Xe.fixed;return{tl:Ht,tr:dn,bl:Ut,br:Xt,tex:{x:d.paddedRect.x+sc+Cn,y:d.paddedRect.y+sc+kn,w:Ke.stretch+Ke.fixed-Cn,h:et.stretch+et.fixed-kn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Fn,pixelOffsetBR:Kt,minFontScaleX:De/m/b,minFontScaleY:Ze/m/M,isSDF:r}};if(a&&(d.stretchX||d.stretchY)){const Be=r8(A,Z,R),Xe=r8(I,J,O);for(let Ke=0;Ke<Be.length-1;Ke++){const et=Be[Ke],ut=Be[Ke+1];for(let Ge=0;Ge<Xe.length-1;Ge++)u.push(st(et,Xe[Ge],ut,Xe[Ge+1]))}}else u.push(st({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:y+1},{fixed:0,stretch:w+1}));return u}function Hh(n,e,r){let a=0;for(const u of n)a+=Math.max(e,Math.min(r,u[1]))-Math.max(e,Math.min(r,u[0]));return a}function r8(n,e,r){const a=[{fixed:-sc,stretch:0}];for(const[u,d]of n){const m=a[a.length-1];a.push({fixed:u-m.stretch,stretch:m.stretch}),a.push({fixed:u-m.stretch,stretch:m.stretch+(d-u)})}return a.push({fixed:e+sc,stretch:r}),a}function Xh(n,e,r,a){return n/e*r+a}function Kh(n,e,r,a){return n-e*r/a}function jx(n,e,r,a){const u=e+n.positionedLines[a].lineOffset;return a===0?r+u/2:r+(u+(e+n.positionedLines[a-1].lineOffset))/2}class Vx{constructor(e=[],r=Gx){if(this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:r,compare:a}=this,u=r[e];for(;e>0;){const d=e-1>>1,m=r[d];if(a(u,m)>=0)break;r[e]=m,e=d}r[e]=u}_down(e){const{data:r,compare:a}=this,u=this.length>>1,d=r[e];for(;e<u;){let m=1+(e<<1),y=r[m];const w=m+1;if(w<this.length&&a(r[w],y)<0&&(m=w,y=r[w]),a(y,d)>=0)break;r[e]=y,e=m}r[e]=d}}function Gx(n,e){return n<e?-1:n>e?1:0}function $x(n,e=1,r=!1){let a=1/0,u=1/0,d=-1/0,m=-1/0;const y=n[0];for(let z=0;z<y.length;z++){const R=y[z];(!z||R.x<a)&&(a=R.x),(!z||R.y<u)&&(u=R.y),(!z||R.x>d)&&(d=R.x),(!z||R.y>m)&&(m=R.y)}const w=Math.min(d-a,m-u);let b=w/2;const M=new Vx([],Zx);if(w===0)return new ze(a,u);for(let z=a;z<d;z+=w)for(let R=u;R<m;R+=w)M.push(new ac(z+b,R+b,b,n));let A=function(z){let R=0,O=0,Z=0;const J=z[0];for(let le=0,Q=J.length,ae=Q-1;le<Q;ae=le++){const he=J[le],ue=J[ae],De=he.x*ue.y-ue.x*he.y;O+=(he.x+ue.x)*De,Z+=(he.y+ue.y)*De,R+=3*De}return new ac(O/R,Z/R,0,z)}(n),I=M.length;for(;M.length;){const z=M.pop();(z.d>A.d||!A.d)&&(A=z,r&&console.log("found best %d after %d probes",Math.round(1e4*z.d)/1e4,I)),z.max-A.d<=e||(b=z.h/2,M.push(new ac(z.p.x-b,z.p.y-b,b,n)),M.push(new ac(z.p.x+b,z.p.y-b,b,n)),M.push(new ac(z.p.x-b,z.p.y+b,b,n)),M.push(new ac(z.p.x+b,z.p.y+b,b,n)),I+=4)}return r&&(console.log(`num probes: ${I}`),console.log(`best distance: ${A.d}`)),A.p}function Zx(n,e){return e.max-n.max}class ac{constructor(e,r,a,u){this.p=new ze(e,r),this.h=a,this.d=function(d,m){let y=!1,w=1/0;for(let b=0;b<m.length;b++){const M=m[b];for(let A=0,I=M.length,z=I-1;A<I;z=A++){const R=M[A],O=M[z];R.y>d.y!=O.y>d.y&&d.x<(O.x-R.x)*(d.y-R.y)/(O.y-R.y)+R.x&&(y=!y),w=Math.min(w,Y7(d,R,O))}}return(y?1:-1)*Math.sqrt(w)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}}const lc=7,o4=Number.POSITIVE_INFINITY,Wx=Math.sqrt(2);function i8(n,[e,r]){let a=0,u=0;if(r===o4){e<0&&(e=0);const d=e/Wx;switch(n){case"top-right":case"top-left":u=d-lc;break;case"bottom-right":case"bottom-left":u=-d+lc;break;case"bottom":u=-e+lc;break;case"top":u=e-lc}switch(n){case"top-right":case"bottom-right":a=-d;break;case"top-left":case"bottom-left":a=d;break;case"left":a=e;break;case"right":a=-e}}else{switch(e=Math.abs(e),r=Math.abs(r),n){case"top-right":case"top-left":case"top":u=r-lc;break;case"bottom-right":case"bottom-left":case"bottom":u=-r+lc}switch(n){case"top-right":case"bottom-right":case"right":a=-e;break;case"top-left":case"bottom-left":case"left":a=e}}return[a,u]}function qx(n,e,r,a,u,d,m,y,w,b){n.createArrays(),n.tilePixelRatio=Bt/(512*n.overscaling),n.compareText={},n.iconsNeedLinear=!1;const M=n.layers[0].layout,A=n.layers[0]._unevaluatedLayout._values,I={};if(n.textSizeData.kind==="composite"){const{minZoom:O,maxZoom:Z}=n.textSizeData;I.compositeTextSizes=[A["text-size"].possiblyEvaluate(new P(O),y),A["text-size"].possiblyEvaluate(new P(Z),y)]}if(n.iconSizeData.kind==="composite"){const{minZoom:O,maxZoom:Z}=n.iconSizeData;I.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new P(O),y),A["icon-size"].possiblyEvaluate(new P(Z),y)]}I.layoutTextSize=A["text-size"].possiblyEvaluate(new P(w+1),y),I.layoutIconSize=A["icon-size"].possiblyEvaluate(new P(w+1),y),I.textMaxSize=A["text-size"].possiblyEvaluate(new P(18),y);const z=M.get("text-rotation-alignment")==="map"&&M.get("symbol-placement")!=="point",R=M.get("text-size");for(const O of n.features){const Z=M.get("text-font").evaluate(O,{},y).join(","),J=R.evaluate(O,{},y),le=I.layoutTextSize.evaluate(O,{},y),Q=(I.layoutIconSize.evaluate(O,{},y),{horizontal:{},vertical:void 0}),ae=O.text;let he,ue=[0,0];if(ae){const Ze=ae.toString(),st=M.get("text-letter-spacing").evaluate(O,{},y)*Lr,Be=M.get("text-line-height").evaluate(O,{},y)*Lr,Xe=fd(Ze)?st:0,Ke=M.get("text-anchor").evaluate(O,{},y),et=M.get("text-variable-anchor");if(!et){const vt=M.get("text-radial-offset").evaluate(O,{},y);ue=vt?i8(Ke,[vt*Lr,o4]):M.get("text-offset").evaluate(O,{},y).map(qt=>qt*Lr)}let ut=z?"center":M.get("text-justify").evaluate(O,{},y);const Ge=M.get("symbol-placement")==="point",_t=Ge?M.get("text-max-width").evaluate(O,{},y)*Lr:1/0,At=vt=>{n.allowVerticalPlacement&&Zu(Ze)&&(Q.vertical=n4(ae,e,r,u,Z,_t,Be,Ke,vt,Xe,ue,Yi.vertical,!0,le,J))};if(!z&&et){const vt=ut==="auto"?et.map(dt=>s4(dt)):[ut];let qt=!1;for(let dt=0;dt<vt.length;dt++){const Rt=vt[dt];if(!Q.horizontal[Rt])if(qt)Q.horizontal[Rt]=Q.horizontal[0];else{const Ht=n4(ae,e,r,u,Z,_t,Be,"center",Rt,Xe,ue,Yi.horizontal,!1,le,J);Ht&&(Q.horizontal[Rt]=Ht,qt=Ht.positionedLines.length===1)}}At("left")}else{if(ut==="auto"&&(ut=s4(Ke)),Ge||M.get("text-writing-mode").indexOf("horizontal")>=0||!Zu(Ze)){const vt=n4(ae,e,r,u,Z,_t,Be,Ke,ut,Xe,ue,Yi.horizontal,!1,le,J);vt&&(Q.horizontal[ut]=vt)}At(Ge?"left":ut)}}let De=!1;if(O.icon&&O.icon.name){const Ze=a[O.icon.name];Ze&&(he=Ox(u[O.icon.name],M.get("icon-offset").evaluate(O,{},y),M.get("icon-anchor").evaluate(O,{},y)),De=Ze.sdf,n.sdfIcons===void 0?n.sdfIcons=Ze.sdf:n.sdfIcons!==Ze.sdf&&Un("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ze.pixelRatio!==n.pixelRatio||M.get("icon-rotate").constantOr(1)!==0)&&(n.iconsNeedLinear=!0))}const Ie=s8(Q.horizontal)||Q.vertical;n.iconsInText||(n.iconsInText=!!Ie&&Ie.iconsInText),(Ie||he)&&Hx(n,O,Q,he,a,I,le,0,ue,De,m,y,b)}d&&n.generateCollisionDebugBuffers(w,n.collisionBoxArray)}function s4(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Hx(n,e,r,a,u,d,m,y,w,b,M,A,I){let z=d.textMaxSize.evaluate(e,{},A);z===void 0&&(z=m);const R=n.layers[0].layout,O=R.get("icon-offset").evaluate(e,{},A),Z=s8(r.horizontal)||r.vertical,J=I.name==="globe",le=Lr,Q=m/le,ae=n.tilePixelRatio*z/le,he=(Ke=n.overscaling,n.zoom>18&&Ke>2&&(Ke>>=1),Math.max(Bt/(512*Ke),1)*R.get("symbol-spacing")),ue=R.get("text-padding")*n.tilePixelRatio,De=R.get("icon-padding")*n.tilePixelRatio,Ie=St(R.get("text-max-angle")),Ze=R.get("text-rotation-alignment")==="map"&&R.get("symbol-placement")!=="point",st=R.get("icon-rotation-alignment")==="map"&&R.get("symbol-placement")!=="point",Be=R.get("symbol-placement"),Xe=he/2;var Ke;const et=R.get("icon-text-fit");let ut;a&&et!=="none"&&(n.allowVerticalPlacement&&r.vertical&&(ut=qf(a,r.vertical,et,R.get("icon-text-fit-padding"),O,Q)),Z&&(a=qf(a,Z,et,R.get("icon-text-fit-padding"),O,Q)));const Ge=(_t,At,vt)=>{if(At.x<0||At.x>=Bt||At.y<0||At.y>=Bt)return;let qt=null;if(J){const{x:dt,y:Rt,z:Ht}=I.projectTilePoint(At.x,At.y,vt);qt={anchor:new Ws(dt,Rt,Ht,0,void 0),up:I.upVector(vt,At.x,At.y)}}(function(dt,Rt,Ht,dn,Xt,Ut,Fn,Kt,Yt,Cn,kn,Ln,Pn,qn,Jn,ur,An,xr,hr,Xn,fn,dr,zn,ai,pr){const zr=dt.addToLineVertexArray(Rt,dn);let Cr,li,Pr,qo,hc,A0,I0,U8=0,N8=0,j8=0,V8=0,w4=-1,b4=-1;const ys={};let G8=gd("");const ql=Ht?Ht.anchor:Rt;let T4=0,E4=0;if(Yt._unevaluatedLayout.getValue("text-radial-offset")===void 0?[T4,E4]=Yt.layout.get("text-offset").evaluate(fn,{},pr).map(zi=>zi*Lr):(T4=Yt.layout.get("text-radial-offset").evaluate(fn,{},pr)*Lr,E4=o4),dt.allowVerticalPlacement&&Xt.vertical){const zi=Xt.vertical;if(Jn)A0=a4(zi),Kt&&(I0=a4(Kt));else{const Di=Yt.layout.get("text-rotate").evaluate(fn,{},pr)+90;Pr=Yh(Cn,ql,Rt,kn,Ln,Pn,zi,qn,Di,ur),Kt&&(qo=Yh(Cn,ql,Rt,kn,Ln,Pn,Kt,xr,Di))}}if(Ut){const zi=Yt.layout.get("icon-rotate").evaluate(fn,{},pr),Di=Yt.layout.get("icon-text-fit")!=="none",k0=n8(Ut,zi,zn,Di),M4=Kt?n8(Kt,zi,zn,Di):void 0;li=Yh(Cn,ql,Rt,kn,Ln,Pn,Ut,xr,zi),U8=4*k0.length;const $8=dt.iconSizeData;let Hl=null;$8.kind==="source"?(Hl=[$o*Yt.layout.get("icon-size").evaluate(fn,{},pr)],Hl[0]>Aa&&Un(`${dt.layerIds[0]}: Value for "icon-size" is >= ${w0}. Reduce your "icon-size".`)):$8.kind==="composite"&&(Hl=[$o*dr.compositeIconSizes[0].evaluate(fn,{},pr),$o*dr.compositeIconSizes[1].evaluate(fn,{},pr)],(Hl[0]>Aa||Hl[1]>Aa)&&Un(`${dt.layerIds[0]}: Value for "icon-size" is >= ${w0}. Reduce your "icon-size".`)),dt.addSymbols(dt.icon,k0,Hl,Xn,hr,fn,!1,Ht,Rt,zr.lineStartIndex,zr.lineLength,-1,ai,pr),w4=dt.icon.placedSymbolArray.length-1,M4&&(N8=4*M4.length,dt.addSymbols(dt.icon,M4,Hl,Xn,hr,fn,Yi.vertical,Ht,Rt,zr.lineStartIndex,zr.lineLength,-1,ai,pr),b4=dt.icon.placedSymbolArray.length-1)}for(const zi in Xt.horizontal){const Di=Xt.horizontal[zi];Cr||(G8=gd(Di.text),Jn?hc=a4(Di):Cr=Yh(Cn,ql,Rt,kn,Ln,Pn,Di,qn,Yt.layout.get("text-rotate").evaluate(fn,{},pr),ur));const k0=Di.positionedLines.length===1;if(j8+=o8(dt,Ht,Rt,Di,Fn,Yt,Jn,fn,ur,zr,Xt.vertical?Yi.horizontal:Yi.horizontalOnly,k0?Object.keys(Xt.horizontal):[zi],ys,w4,dr,ai,pr),k0)break}Xt.vertical&&(V8+=o8(dt,Ht,Rt,Xt.vertical,Fn,Yt,Jn,fn,ur,zr,Yi.vertical,["vertical"],ys,b4,dr,ai,pr));let Ra=-1;const S4=(zi,Di)=>zi?Math.max(zi,Di):Di;Ra=S4(hc,Ra),Ra=S4(A0,Ra),Ra=S4(I0,Ra);const bw=Ra>-1?1:0;dt.glyphOffsetArray.length>=ka.MAX_GLYPHS&&Un("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),fn.sortKey!==void 0&&dt.addToSortKeyRanges(dt.symbolInstances.length,fn.sortKey),dt.symbolInstances.emplaceBack(ql.x,ql.y,ql.z,Rt.x,Rt.y,ys.right>=0?ys.right:-1,ys.center>=0?ys.center:-1,ys.left>=0?ys.left:-1,ys.vertical>=0?ys.vertical:-1,w4,b4,G8,Cr!==void 0?Cr:dt.collisionBoxArray.length,Cr!==void 0?Cr+1:dt.collisionBoxArray.length,Pr!==void 0?Pr:dt.collisionBoxArray.length,Pr!==void 0?Pr+1:dt.collisionBoxArray.length,li!==void 0?li:dt.collisionBoxArray.length,li!==void 0?li+1:dt.collisionBoxArray.length,qo||dt.collisionBoxArray.length,qo?qo+1:dt.collisionBoxArray.length,kn,j8,V8,U8,N8,bw,0,T4,E4,Ra)})(n,At,qt,_t,r,a,u,ut,n.layers[0],n.collisionBoxArray,e.index,e.sourceLayerIndex,n.index,ue,Ze,w,0,De,st,O,e,d,b,M,A)};if(Be==="line")for(const _t of Qf(e.geometry,0,0,Bt,Bt)){const At=Nx(_t,he,Ie,r.vertical||Z,a,le,ae,n.overscaling,Bt);for(const vt of At)Z&&Xx(n,Z.text,Xe,vt)||Ge(_t,vt,A)}else if(Be==="line-center"){for(const _t of e.geometry)if(_t.length>1){const At=Ux(_t,Ie,r.vertical||Z,a,le,ae);At&&Ge(_t,At,A)}}else if(e.type==="Polygon")for(const _t of qd(e.geometry,0)){const At=$x(_t,16);Ge(_t[0],new Ws(At.x,At.y,0,0,void 0),A)}else if(e.type==="LineString")for(const _t of e.geometry)Ge(_t,new Ws(_t[0].x,_t[0].y,0,0,void 0),A);else if(e.type==="Point")for(const _t of e.geometry)for(const At of _t)Ge([At],new Ws(At.x,At.y,0,0,void 0),A)}const w0=255,Aa=w0*$o;function o8(n,e,r,a,u,d,m,y,w,b,M,A,I,z,R,O,Z){const J=function(ae,he,ue,De,Ie,Ze,st,Be){const Xe=[];if(he.positionedLines.length===0)return Xe;const Ke=De.layout.get("text-rotate").evaluate(Ze,{})*Math.PI/180,et=function(vt){const qt=vt[0],dt=vt[1],Rt=qt*dt;return Rt>0?[qt,-dt]:Rt<0?[-qt,dt]:qt===0?[dt,qt]:[dt,-qt]}(ue);let ut=Math.abs(he.top-he.bottom);for(const vt of he.positionedLines)ut-=vt.lineOffset;const Ge=he.positionedLines.length,_t=ut/Ge;let At=he.top-ue[1];for(let vt=0;vt<Ge;++vt){const qt=he.positionedLines[vt];At=jx(he,_t,At,vt);for(const dt of qt.positionedGlyphs){if(!dt.rect)continue;const Rt=dt.rect||{};let Ht=Uf+1,dn=!0,Xt=1,Ut=0;if(dt.imageName){const zn=st[dt.imageName];if(!zn)continue;if(zn.sdf){Un("SDF images are not supported in formatted text and will be ignored.");continue}dn=!1,Xt=zn.pixelRatio,Ht=gi/Xt}const Fn=(Ie||Be)&&dt.vertical,Kt=dt.metrics.advance*dt.scale/2,Yt=dt.metrics,Cn=dt.rect;if(Cn===null)continue;Be&&he.verticalizable&&(Ut=dt.imageName?Kt-dt.metrics.width*dt.scale/2:0);const kn=Ie?[dt.x+Kt,dt.y]:[0,0];let Ln=[0,0],Pn=[0,0],qn=!1;Ie||(Fn?(Pn=[dt.x+Kt+et[0],dt.y+et[1]-Ut],qn=!0):Ln=[dt.x+Kt+ue[0],dt.y+ue[1]-Ut]);const Jn=Cn.w*dt.scale/(Xt*(dt.localGlyph?Zo:1)),ur=Cn.h*dt.scale/(Xt*(dt.localGlyph?Zo:1));let An,xr,hr,Xn;if(Fn){const zn=dt.y-At,ai=new ze(-Kt,Kt-zn),pr=-Math.PI/2,zr=new ze(...Pn);An=new ze(-Kt+Ln[0],Ln[1]),An._rotateAround(pr,ai)._add(zr),An.x+=-zn+Kt,An.y-=(Yt.left-Ht)*dt.scale;const Cr=dt.imageName?Yt.advance*dt.scale:Lr*dt.scale,li=String.fromCharCode(dt.glyph);bx(li)?An.x+=(1-Ht)*dt.scale:Tx(li)?An.x+=Cr-Yt.height*dt.scale+(-Ht-1)*dt.scale:An.x+=dt.imageName||Yt.width+2*Ht===Cn.w&&Yt.height+2*Ht===Cn.h?(Cr-ur)/2:(Cr-(Yt.height+2*Ht)*dt.scale)/2,xr=new ze(An.x,An.y-Jn),hr=new ze(An.x+ur,An.y),Xn=new ze(An.x+ur,An.y-Jn)}else{const zn=(Yt.left-Ht)*dt.scale-Kt+Ln[0],ai=(-Yt.top-Ht)*dt.scale+Ln[1],pr=zn+Jn,zr=ai+ur;An=new ze(zn,ai),xr=new ze(pr,ai),hr=new ze(zn,zr),Xn=new ze(pr,zr)}if(Ke){let zn;zn=Ie?new ze(0,0):qn?new ze(et[0],et[1]):new ze(ue[0],ue[1]),An._rotateAround(Ke,zn),xr._rotateAround(Ke,zn),hr._rotateAround(Ke,zn),Xn._rotateAround(Ke,zn)}const fn=new ze(0,0),dr=new ze(0,0);Xe.push({tl:An,tr:xr,bl:hr,br:Xn,tex:Rt,writingMode:he.writingMode,glyphOffset:kn,sectionIndex:dt.sectionIndex,isSDF:dn,pixelOffsetTL:fn,pixelOffsetBR:dr,minFontScaleX:0,minFontScaleY:0})}}return Xe}(0,a,w,d,m,y,u,n.allowVerticalPlacement),le=n.textSizeData;let Q=null;le.kind==="source"?(Q=[$o*d.layout.get("text-size").evaluate(y,{},Z)],Q[0]>Aa&&Un(`${n.layerIds[0]}: Value for "text-size" is >= ${w0}. Reduce your "text-size".`)):le.kind==="composite"&&(Q=[$o*R.compositeTextSizes[0].evaluate(y,{},Z),$o*R.compositeTextSizes[1].evaluate(y,{},Z)],(Q[0]>Aa||Q[1]>Aa)&&Un(`${n.layerIds[0]}: Value for "text-size" is >= ${w0}. Reduce your "text-size".`)),n.addSymbols(n.text,J,Q,w,m,y,M,e,r,b.lineStartIndex,b.lineLength,z,O,Z);for(const ae of A)I[ae]=n.text.placedSymbolArray.length-1;return 4*J.length}function s8(n){for(const e in n)return n[e];return null}function Yh(n,e,r,a,u,d,m,y,w,b){let M=m.top,A=m.bottom,I=m.left,z=m.right;const R=m.collisionPadding;if(R&&(I-=R[0],M-=R[1],z+=R[2],A+=R[3]),w){const O=new ze(I,M),Z=new ze(z,M),J=new ze(I,A),le=new ze(z,A),Q=St(w);let ae=new ze(0,0);b&&(ae=new ze(b[0],b[1])),O._rotateAround(Q,ae),Z._rotateAround(Q,ae),J._rotateAround(Q,ae),le._rotateAround(Q,ae),I=Math.min(O.x,Z.x,J.x,le.x),z=Math.max(O.x,Z.x,J.x,le.x),M=Math.min(O.y,Z.y,J.y,le.y),A=Math.max(O.y,Z.y,J.y,le.y)}return n.emplaceBack(e.x,e.y,e.z,r.x,r.y,I,M,z,A,y,a,u,d),n.length-1}function a4(n){n.collisionPadding&&(n.top-=n.collisionPadding[1],n.bottom+=n.collisionPadding[3]);const e=n.bottom-n.top;return e>0?Math.max(10,e):null}function Xx(n,e,r,a){const u=n.compareText;if(e in u){const d=u[e];for(let m=d.length-1;m>=0;m--)if(a.dist(d[m])<r)return!0}else u[e]=[];return u[e].push(a),!1}function a8(n,e){const r=n.fovAboveCenter,a=n.elevation?n.elevation.getMinElevationBelowMSL()*e:0,u=(n._camera.position[2]*n.worldSize-a)/Math.cos(n._pitch),d=Math.sin(r)*u/Math.sin(Math.max(Math.PI/2-n._pitch-r,.01)),m=Math.sin(n._pitch)*d+u;return Math.min(1.01*m,u*(1/n._horizonShift))}function Zl(n,e){if(!e.isReprojectedInTileSpace)return{scale:1<<n.z,x:n.x,y:n.y,x2:n.x+1,y2:n.y+1,projection:e};const r=Math.pow(2,-n.z),a=n.x*r,u=(n.x+1)*r,d=n.y*r,m=(n.y+1)*r,y=Ki(a),w=Ki(u),b=jr(d),M=jr(m),A=e.project(y,b),I=e.project(w,b),z=e.project(w,M),R=e.project(y,M);let O=Math.min(A.x,I.x,z.x,R.x),Z=Math.min(A.y,I.y,z.y,R.y),J=Math.max(A.x,I.x,z.x,R.x),le=Math.max(A.y,I.y,z.y,R.y);const Q=r/16;function ae(ue,De,Ie,Ze,st,Be){const Xe=(Ie+st)/2,Ke=(Ze+Be)/2,et=e.project(Ki(Xe),jr(Ke)),ut=Math.max(0,O-et.x,Z-et.y,et.x-J,et.y-le);O=Math.min(O,et.x),J=Math.max(J,et.x),Z=Math.min(Z,et.y),le=Math.max(le,et.y),ut>Q&&(ae(ue,et,Ie,Ze,Xe,Ke),ae(et,De,Xe,Ke,st,Be))}ae(A,I,a,d,u,d),ae(I,z,u,d,u,m),ae(z,R,u,m,a,m),ae(R,A,a,m,a,d),O-=Q,Z-=Q,J+=Q,le+=Q;const he=1/Math.max(J-O,le-Z);return{scale:he,x:O*he,y:Z*he,x2:J*he,y2:le*he,projection:e}}const Kx=jo(new Float32Array(16));class Ia{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,r){return{x:0,y:0,z:0}}unproject(e,r){return new Mn(0,0)}projectTilePoint(e,r,a){return{x:e,y:r,z:0}}locationPoint(e,r,a=!0){return e._coordinatePoint(e.locationCoordinate(r),a)}pixelsPerMeter(e,r){return Go(1,e)*r}pixelSpaceConversion(e,r,a){return 1}farthestPixelDistance(e){return a8(e,e.pixelsPerMeter)}pointCoordinate(e,r,a,u){const d=e.horizonLineFromTop(!1),m=new ze(r,Math.max(d,a));return e.rayIntersectionCoordinate(e.pointRayIntersection(m,u))}pointCoordinate3D(e,r,a){const u=new ze(r,a);if(e.elevation)return e.elevation.pointCoordinate(u);{const d=this.pointCoordinate(e,u.x,u.y,0);return[d.x,d.y,d.z]}}isPointAboveHorizon(e,r){if(e.elevation)return!this.pointCoordinate3D(e,r.x,r.y);const a=e.horizonLineFromTop();return r.y<a}createInversionMatrix(e,r){return Kx}createTileMatrix(e,r,a){let u,d,m;const y=a.canonical,w=jo(new Float64Array(16));if(this.isReprojectedInTileSpace){const b=Zl(y,this);u=1,d=b.x+a.wrap*b.scale,m=b.y,Ol(w,w,[u/b.scale,u/b.scale,e.pixelsPerMeter/r])}else u=r/e.zoomScale(y.z),d=(y.x+Math.pow(2,y.z)*a.wrap)*u,m=y.y*u;return Ju(w,w,[d,m,0]),Ol(w,w,[u/Bt,u/Bt,1]),w}upVector(e,r,a){return[0,0,1]}upVectorScale(e,r,a){return{metersToTile:1}}}class Yx extends Ia{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[r,a]=this.parallels=e.parallels||[29.5,45.5],u=Math.sin(St(r));this.n=(u+Math.sin(St(a)))/2,this.c=1+u*(2*this.n-u),this.r0=Math.sqrt(this.c)/this.n}project(e,r){const{n:a,c:u,r0:d}=this,m=St(e-this.center[0]),y=St(r),w=Math.sqrt(u-2*a*Math.sin(y))/a;return{x:w*Math.sin(m*a),y:w*Math.cos(m*a)-d,z:0}}unproject(e,r){const{n:a,c:u,r0:d}=this,m=d+r;let y=Math.atan2(e,Math.abs(m))*Math.sign(m);m*a<0&&(y-=Math.PI*Math.sign(e)*Math.sign(m));const w=St(this.center[0])*a;y=yt(y,-Math.PI-w,Math.PI-w);const b=Ee($t(y/a)+this.center[0],-180,180),M=Math.asin(Ee((u-(e*e+m*m)*a*a)/(2*a),-1,1)),A=Ee($t(M),-Vr,Vr);return new Mn(b,A)}}const b0=1.340264,T0=-.081106,E0=893e-6,S0=.003796,Jh=Math.sqrt(3)/2;class Jx extends Ia{project(e,r){r=r/180*Math.PI,e=e/180*Math.PI;const a=Math.asin(Jh*Math.sin(r)),u=a*a,d=u*u*u;return{x:.5*(e*Math.cos(a)/(Jh*(b0+3*T0*u+d*(7*E0+9*S0*u)))/Math.PI+.5),y:1-.5*(a*(b0+T0*u+d*(E0+S0*u))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let a=r=(2*(1-r)-1)*Math.PI,u=a*a,d=u*u*u;for(let M,A,I,z=0;z<12&&(A=a*(b0+T0*u+d*(E0+S0*u))-r,I=b0+3*T0*u+d*(7*E0+9*S0*u),M=A/I,a=Ee(a-M,-Math.PI/3,Math.PI/3),u=a*a,d=u*u*u,!(Math.abs(M)<1e-12));++z);const m=Jh*e*(b0+3*T0*u+d*(7*E0+9*S0*u))/Math.cos(a),y=Math.asin(Math.sin(a)/Jh),w=Ee(180*m/Math.PI,-180,180),b=Ee(180*y/Math.PI,-Vr,Vr);return new Mn(w,b)}}class Qx extends Ia{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){return{x:.5+e/360,y:.5-r/360,z:0}}unproject(e,r){const a=360*(e-.5),u=Ee(360*(.5-r),-Vr,Vr);return new Mn(a,u)}}const cc=Math.PI/2;function Qh(n){return Math.tan((cc+n)/2)}class ew extends Ia{constructor(e){super(e),this.center=e.center||[0,30];const[r,a]=this.parallels=e.parallels||[30,30];let u=St(r),d=St(a);this.southernCenter=u+d<0,this.southernCenter&&(u=-u,d=-d);const m=Math.cos(u),y=Qh(u);this.n=u===d?Math.sin(u):Math.log(m/Math.cos(d))/Math.log(Qh(d)/y),this.f=m*Math.pow(Qh(u),this.n)/this.n}project(e,r){r=St(r),this.southernCenter&&(r=-r),e=St(e-this.center[0]);const a=1e-6,{n:u,f:d}=this;d>0?r<-cc+a&&(r=-cc+a):r>cc-a&&(r=cc-a);const m=d/Math.pow(Qh(r),u);let y=m*Math.sin(u*e),w=d-m*Math.cos(u*e);return y=.5*(y/Math.PI+.5),w=.5*(w/Math.PI+.5),{x:y,y:this.southernCenter?w:1-w,z:0}}unproject(e,r){e=(2*e-.5)*Math.PI,this.southernCenter&&(r=1-r),r=(2*(1-r)-.5)*Math.PI;const{n:a,f:u}=this,d=u-r,m=Math.sign(d),y=Math.sign(a)*Math.sqrt(e*e+d*d);let w=Math.atan2(e,Math.abs(d))*m;d*a<0&&(w-=Math.PI*Math.sign(e)*m);const b=Ee($t(w/a)+this.center[0],-180,180),M=Ee($t(2*Math.atan(Math.pow(u/y,1/a))-cc),-Vr,Vr);return new Mn(b,this.southernCenter?-M:M)}}class l8 extends Ia{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,r){return{x:ps(e),y:fs(r),z:0}}unproject(e,r){const a=Ki(e),u=jr(r);return new Mn(a,u)}}const c8=St(Vr);class tw extends Ia{project(e,r){const a=(r=St(r))*r,u=a*a;return{x:.5*((e=St(e))*(.8707-.131979*a+u*(u*(.003971*a-.001529*u)-.013791))/Math.PI+.5),y:1-.5*(r*(1.007226+a*(.015085+u*(.028874*a-.044475-.005916*u)))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let a=r=(2*(1-r)-1)*Math.PI,u=25,d=0,m=a*a;do{m=a*a;const b=m*m;d=(a*(1.007226+m*(.015085+b*(.028874*m-.044475-.005916*b)))-r)/(1.007226+m*(.045255+b*(.259866*m-.311325-.005916*11*b))),a=Ee(a-d,-c8,c8)}while(Math.abs(d)>1e-6&&--u>0);m=a*a;const y=Ee($t(e/(.8707+m*(m*(m*m*m*(.003971-.001529*m)-.013791)-.131979))),-180,180),w=$t(a);return new Mn(y,w)}}const u8=St(Vr);class nw extends Ia{project(e,r){r=St(r),e=St(e);const a=Math.cos(r),u=2/Math.PI,d=Math.acos(a*Math.cos(e/2)),m=Math.sin(d)/d,y=.5*(e*u+2*a*Math.sin(e/2)/m)||0,w=.5*(r+Math.sin(r)/m)||0;return{x:.5*(y/Math.PI+.5),y:1-.5*(w/Math.PI+1),z:0}}unproject(e,r){let a=e=(2*e-.5)*Math.PI,u=r=(2*(1-r)-1)*Math.PI,d=25;const m=1e-6;let y=0,w=0;do{const b=Math.cos(u),M=Math.sin(u),A=2*M*b,I=M*M,z=b*b,R=Math.cos(a/2),O=Math.sin(a/2),Z=2*R*O,J=O*O,le=1-z*R*R,Q=le?1/le:0,ae=le?Math.acos(b*R)*Math.sqrt(1/le):0,he=.5*(2*ae*b*O+2*a/Math.PI)-e,ue=.5*(ae*M+u)-r,De=.5*Q*(z*J+ae*b*R*I)+1/Math.PI,Ie=Q*(Z*A/4-ae*M*O),Ze=.125*Q*(A*O-ae*M*z*Z),st=.5*Q*(I*R+ae*J*b)+.5,Be=Ie*Ze-st*De;y=(ue*Ie-he*st)/Be,w=(he*Ze-ue*De)/Be,a=Ee(a-y,-Math.PI,Math.PI),u=Ee(u-w,-u8,u8)}while((Math.abs(y)>m||Math.abs(w)>m)&&--d>0);return new Mn($t(a),$t(u))}}class h8 extends Ia{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(St(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){const{scale:a,cosPhi:u}=this;return{x:St(e)*u*a+.5,y:-Math.sin(St(r))/u*a+.5,z:0}}unproject(e,r){const{scale:a,cosPhi:u}=this,d=-(r-.5)/a,m=Ee($t((e-.5)/a)/u,-180,180),y=Math.asin(Ee(d*u,-1,1)),w=Ee($t(y),-Vr,Vr);return new Mn(m,w)}}class rw extends l8{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,r,a){const u=s0(e,r,a);return rr(u,u,a0(ds(a))),{x:u[0],y:u[1],z:u[2]}}locationPoint(e,r){const a=H1(r.lat,r.lng),u=ii([],a),d=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(r),e._centerAltitude):e._centerAltitude;n0(a,a,u,Go(1,0)*Bt*d);const m=jo(new Float64Array(16));return Bl(m,e.pixelMatrix,e.globeMatrix),rr(a,a,m),new ze(a[0],a[1])}pixelsPerMeter(e,r){return Go(1,0)*r}pixelSpaceConversion(e,r,a){const u=Go(1,e)*r,d=un(Go(1,45)*r,u,a);return this.pixelsPerMeter(e,r)/d}createTileMatrix(e,r,a){const u=kd(ds(a.canonical));return Bl(new Float64Array(16),e.globeMatrix,u)}createInversionMatrix(e,r){const{center:a}=e,u=a0(ds(r));return Ch(u,u,St(a.lng)),wd(u,u,St(a.lat)),Ol(u,u,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(u)}pointCoordinate(e,r,a,u){return B7(e,r,a,!0)||new K1(0,0)}pointCoordinate3D(e,r,a){const u=this.pointCoordinate(e,r,a,0);return[u.x,u.y,u.z]}isPointAboveHorizon(e,r){return!B7(e,r.x,r.y,!1)}farthestPixelDistance(e){const r=function(u,d){const m=u.cameraToCenterDistance,y=u._centerAltitude*d,w=u._camera,b=u._camera.forward(),M=Vs([],Xi([],b,-m),[0,0,y]),A=u.worldSize/(2*Math.PI),I=[0,0,-A],z=u.width/u.height,R=Math.tan(u.fovAboveCenter),O=Xi([],w.up(),R),Z=Xi([],w.right(),R*z),J=ii([],Vs([],Vs([],b,O),Z)),le=[];let Q;if(new Sd(M,J).closestPointOnSphere(I,A,le)){const ae=Vs([],le,I),he=Vo([],ae,M);Q=Math.cos(u.fovAboveCenter)*Qu(he)}else{const ae=Vo([],M,I),he=Vo([],I,M);ii(he,he);const ue=Qu(ae)-A;Q=Math.sqrt(ue*(ue+2*A));const De=Math.acos(Q/(A+ue))-Math.acos(yo(b,he));Q*=Math.cos(De)}return 1.01*Q}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),a=X1(e.zoom);if(a>0){const u=a8(e,Go(1,e.center.lat)*e.worldSize),d=e.worldSize/(2*Math.PI),m=Math.max(e.width,e.height)/e.worldSize*Math.PI;return un(r,u+d*(1-Math.cos(m)),Math.pow(a,10))}return r}upVector(e,r,a){return s0(r,a,e,1)}upVectorScale(e){return{metersToTile:Ph(Ih(ds(e)))}}}function d8(n){const e=n.parallels,r=!!e&&Math.abs(e[0]+e[1])<.01;switch(n.name){case"mercator":return new l8(n);case"equirectangular":return new Qx(n);case"naturalEarth":return new tw(n);case"equalEarth":return new Jx(n);case"winkelTripel":return new nw(n);case"albers":return r?new h8(n):new Yx(n);case"lambertConformalConic":return r?new h8(n):new ew(n);case"globe":return new rw(n)}throw new Error(`Invalid projection name: ${n.name}`)}const iw=Nh.types,ow=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function e3(n,e,r,a,u,d,m,y,w,b,M,A,I){const z=y?Math.min(Aa,Math.round(y[0])):0,R=y?Math.min(Aa,Math.round(y[1])):0;n.emplaceBack(e,r,Math.round(32*a),Math.round(32*u),d,m,(z<<1)+(w?1:0),R,16*b,16*M,256*A,256*I)}function t3(n,e,r,a,u,d,m){n.emplaceBack(e,r,a,u,d,m)}function n3(n,e,r,a,u){n.emplaceBack(e,r,a,u),n.emplaceBack(e,r,a,u),n.emplaceBack(e,r,a,u),n.emplaceBack(e,r,a,u)}function sw(n){for(const e of n.sections)if(_d(e.text))return!0;return!1}class l4{constructor(e){this.layoutVertexArray=new Qe,this.indexArray=new Lt,this.programConfigurations=e,this.segments=new lr,this.dynamicLayoutVertexArray=new nt,this.opacityVertexArray=new Dt,this.placedSymbolArray=new ar,this.globeExtVertexArray=new lt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,r,a,u){this.isEmpty()||(a&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,fx.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,_x.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,ow,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,mx.members,!0)),this.opacityVertexBuffer.itemSize=1),(a||u)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Ct(l4,"SymbolBuffers");class c4{constructor(e,r,a){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new a,this.segments=new lr,this.collisionVertexArray=new rn,this.collisionVertexArrayExt=new en}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,gx.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,yx.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Ct(c4,"CollisionBuffers");class ka{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(m=>m.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=jo([]),this.placementViewportMatrix=jo([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Yd(this.zoom,r["text-size"]),this.iconSizeData=Yd(this.zoom,r["icon-size"]);const a=this.layers[0].layout,u=a.get("symbol-sort-key"),d=a.get("symbol-z-order");this.canOverlap=a.get("text-allow-overlap")||a.get("icon-allow-overlap")||a.get("text-ignore-placement")||a.get("icon-ignore-placement"),this.sortFeaturesByKey=d!=="viewport-y"&&u.constantOr(1)!==void 0,this.sortFeaturesByY=(d==="viewport-y"||d==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=a.get("text-writing-mode").map(m=>Yi[m]),this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new l4(new Fl(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new l4(new Fl(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new ri,this.lineVertexArray=new G1,this.symbolInstances=new Nn}calculateGlyphDependencies(e,r,a,u,d){for(let m=0;m<e.length;m++)if(r[e.charCodeAt(m)]=!0,u&&d){const y=y0[e.charAt(m)];y&&(r[y.charCodeAt(0)]=!0)}}populate(e,r,a,u){const d=this.layers[0],m=d.layout,y=this.projection.name==="globe",w=m.get("text-font"),b=m.get("text-field"),M=m.get("icon-image"),A=(b.value.kind!=="constant"||b.value.value instanceof ni&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),I=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,z=m.get("symbol-sort-key");if(this.features=[],!A&&!I)return;const R=r.iconDependencies,O=r.glyphDependencies,Z=r.availableImages,J=new P(this.zoom);for(const{feature:le,id:Q,index:ae,sourceLayerIndex:he}of e){const ue=d._featureFilter.needGeometry,De=Vl(le,ue);if(!d._featureFilter.filter(J,De,a))continue;if(ue||(De.geometry=Gs(le,a,u)),y&&le.type!==1&&a.z<=5){const Be=De.geometry,Xe=.98078528056,Ke=(et,ut)=>yo(s0(et.x,et.y,a,1),s0(ut.x,ut.y,a,1))<Xe;for(let et=0;et<Be.length;et++)Be[et]=_v(Be[et],Ke)}let Ie,Ze;if(A){const Be=d.getValueAndResolveTokens("text-field",De,a,Z),Xe=ni.factory(Be);sw(Xe)&&(this.hasRTLText=!0),(!this.hasRTLText||v()==="unavailable"||this.hasRTLText&&S.isParsed())&&(Ie=wx(Xe,d,De))}if(I){const Be=d.getValueAndResolveTokens("icon-image",De,a,Z);Ze=Be instanceof Ci?Be:Ci.fromString(Be)}if(!Ie&&!Ze)continue;const st=this.sortFeaturesByKey?z.evaluate(De,{},a):void 0;if(this.features.push({id:Q,text:Ie,icon:Ze,index:ae,sourceLayerIndex:he,geometry:De.geometry,properties:le.properties,type:iw[le.type],sortKey:st}),Ze&&(R[Ze.name]=!0),Ie){const Be=w.evaluate(De,{},a).join(","),Xe=m.get("text-rotation-alignment")==="map"&&m.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Yi.vertical)>=0;for(const Ke of Ie.sections)if(Ke.image)R[Ke.image.name]=!0;else{const et=Zu(Ie.toString()),ut=Ke.fontStack||Be,Ge=O[ut]=O[ut]||{};this.calculateGlyphDependencies(Ke.text,Ge,Xe,this.allowVerticalPlacement,et)}}}m.get("symbol-placement")==="line"&&(this.features=function(le){const Q={},ae={},he=[];let ue=0;function De(Be){he.push(le[Be]),ue++}function Ie(Be,Xe,Ke){const et=ae[Be];return delete ae[Be],ae[Xe]=et,he[et].geometry[0].pop(),he[et].geometry[0]=he[et].geometry[0].concat(Ke[0]),et}function Ze(Be,Xe,Ke){const et=Q[Xe];return delete Q[Xe],Q[Be]=et,he[et].geometry[0].shift(),he[et].geometry[0]=Ke[0].concat(he[et].geometry[0]),et}function st(Be,Xe,Ke){const et=Ke?Xe[0][Xe[0].length-1]:Xe[0][0];return`${Be}:${et.x}:${et.y}`}for(let Be=0;Be<le.length;Be++){const Xe=le[Be],Ke=Xe.geometry,et=Xe.text?Xe.text.toString():null;if(!et){De(Be);continue}const ut=st(et,Ke),Ge=st(et,Ke,!0);if(ut in ae&&Ge in Q&&ae[ut]!==Q[Ge]){const _t=Ze(ut,Ge,Ke),At=Ie(ut,Ge,he[_t].geometry);delete Q[ut],delete ae[Ge],ae[st(et,he[At].geometry,!0)]=At,he[_t].geometry=null}else ut in ae?Ie(ut,Ge,Ke):Ge in Q?Ze(ut,Ge,Ke):(De(Be),Q[ut]=ue-1,ae[Ge]=ue-1)}return he.filter(Be=>Be.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((le,Q)=>le.sortKey-Q.sortKey)}update(e,r,a,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,r,this.layers,a,u),this.icon.programConfigurations.updatePaintArrays(e,r,this.layers,a,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=d8(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,r){const a=this.lineVertexArray.length;if(e.segment!==void 0)for(const{x:u,y:d}of r)this.lineVertexArray.emplaceBack(u,d);return{lineStartIndex:a,lineLength:this.lineVertexArray.length-a}}addSymbols(e,r,a,u,d,m,y,w,b,M,A,I,z,R){const O=e.indexArray,Z=e.layoutVertexArray,J=e.globeExtVertexArray,le=e.segments.prepareSegment(4*r.length,Z,O,this.canOverlap?m.sortKey:void 0),Q=this.glyphOffsetArray.length,ae=le.vertexLength,he=this.allowVerticalPlacement&&y===Yi.vertical?Math.PI/2:0,ue=m.text&&m.text.sections;for(let Ie=0;Ie<r.length;Ie++){const{tl:Ze,tr:st,bl:Be,br:Xe,tex:Ke,pixelOffsetTL:et,pixelOffsetBR:ut,minFontScaleX:Ge,minFontScaleY:_t,glyphOffset:At,isSDF:vt,sectionIndex:qt}=r[Ie],dt=le.vertexLength,Rt=At[1];if(e3(Z,b.x,b.y,Ze.x,Rt+Ze.y,Ke.x,Ke.y,a,vt,et.x,et.y,Ge,_t),e3(Z,b.x,b.y,st.x,Rt+st.y,Ke.x+Ke.w,Ke.y,a,vt,ut.x,et.y,Ge,_t),e3(Z,b.x,b.y,Be.x,Rt+Be.y,Ke.x,Ke.y+Ke.h,a,vt,et.x,ut.y,Ge,_t),e3(Z,b.x,b.y,Xe.x,Rt+Xe.y,Ke.x+Ke.w,Ke.y+Ke.h,a,vt,ut.x,ut.y,Ge,_t),w){const{x:Ht,y:dn,z:Xt}=w.anchor,[Ut,Fn,Kt]=w.up;t3(J,Ht,dn,Xt,Ut,Fn,Kt),t3(J,Ht,dn,Xt,Ut,Fn,Kt),t3(J,Ht,dn,Xt,Ut,Fn,Kt),t3(J,Ht,dn,Xt,Ut,Fn,Kt),n3(e.dynamicLayoutVertexArray,Ht,dn,Xt,he)}else n3(e.dynamicLayoutVertexArray,b.x,b.y,b.z,he);O.emplaceBack(dt,dt+1,dt+2),O.emplaceBack(dt+1,dt+2,dt+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(At[0]),Ie!==r.length-1&&qt===r[Ie+1].sectionIndex||e.programConfigurations.populatePaintArrays(Z.length,m,m.index,{},z,R,ue&&ue[qt])}const De=w?w.anchor:b;e.placedSymbolArray.emplaceBack(De.x,De.y,De.z,b.x,b.y,Q,this.glyphOffsetArray.length-Q,ae,M,A,b.segment,a?a[0]:0,a?a[1]:0,u[0],u[1],y,0,!1,0,I,0)}_commitLayoutVertex(e,r,a,u,d,m,y){e.emplaceBack(r,a,u,d,m,Math.round(y.x),Math.round(y.y))}_addCollisionDebugVertices(e,r,a,u,d,m,y){const w=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),b=w.vertexLength,M=y.tileAnchorX,A=y.tileAnchorY;for(let z=0;z<4;z++)a.collisionVertexArray.emplaceBack(0,0,0,0);a.collisionVertexArrayExt.emplaceBack(r,-e.padding,-e.padding),a.collisionVertexArrayExt.emplaceBack(r,e.padding,-e.padding),a.collisionVertexArrayExt.emplaceBack(r,e.padding,e.padding),a.collisionVertexArrayExt.emplaceBack(r,-e.padding,e.padding),this._commitLayoutVertex(a.layoutVertexArray,u,d,m,M,A,new ze(e.x1,e.y1)),this._commitLayoutVertex(a.layoutVertexArray,u,d,m,M,A,new ze(e.x2,e.y1)),this._commitLayoutVertex(a.layoutVertexArray,u,d,m,M,A,new ze(e.x2,e.y2)),this._commitLayoutVertex(a.layoutVertexArray,u,d,m,M,A,new ze(e.x1,e.y2)),w.vertexLength+=4;const I=a.indexArray;I.emplaceBack(b,b+1),I.emplaceBack(b+1,b+2),I.emplaceBack(b+2,b+3),I.emplaceBack(b+3,b),w.primitiveLength+=4}_addTextDebugCollisionBoxes(e,r,a,u,d,m){for(let y=u;y<d;y++){const w=a.get(y),b=this.getSymbolInstanceTextSize(e,m,r,y);this._addCollisionDebugVertices(w,b,this.textCollisionBox,w.projectedAnchorX,w.projectedAnchorY,w.projectedAnchorZ,m)}}_addIconDebugCollisionBoxes(e,r,a,u,d,m){for(let y=u;y<d;y++){const w=a.get(y),b=this.getSymbolInstanceIconSize(e,r,m.placedIconSymbolIndex);this._addCollisionDebugVertices(w,b,this.iconCollisionBox,w.projectedAnchorX,w.projectedAnchorY,w.projectedAnchorZ,m)}}generateCollisionDebugBuffers(e,r){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new c4(Pt,kf.members,Mr),this.iconCollisionBox=new c4(Pt,kf.members,Mr);const a=tc(this.iconSizeData,e),u=tc(this.textSizeData,e);for(let d=0;d<this.symbolInstances.length;d++){const m=this.symbolInstances.get(d);this._addTextDebugCollisionBoxes(u,e,r,m.textBoxStartIndex,m.textBoxEndIndex,m),this._addTextDebugCollisionBoxes(u,e,r,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m),this._addIconDebugCollisionBoxes(a,e,r,m.iconBoxStartIndex,m.iconBoxEndIndex,m),this._addIconDebugCollisionBoxes(a,e,r,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex,m)}}getSymbolInstanceTextSize(e,r,a,u){const d=this.text.placedSymbolArray.get(r.rightJustifiedTextSymbolIndex>=0?r.rightJustifiedTextSymbolIndex:r.centerJustifiedTextSymbolIndex>=0?r.centerJustifiedTextSymbolIndex:r.leftJustifiedTextSymbolIndex>=0?r.leftJustifiedTextSymbolIndex:r.verticalPlacedTextSymbolIndex>=0?r.verticalPlacedTextSymbolIndex:u),m=$h(this.textSizeData,e,d)/Lr;return this.tilePixelRatio*m}getSymbolInstanceIconSize(e,r,a){const u=this.icon.placedSymbolArray.get(a),d=$h(this.iconSizeData,e,u);return this.tilePixelRatio*d}_commitDebugCollisionVertexUpdate(e,r,a){e.emplaceBack(r,-a,-a),e.emplaceBack(r,a,-a),e.emplaceBack(r,a,a),e.emplaceBack(r,-a,a)}_updateTextDebugCollisionBoxes(e,r,a,u,d,m){for(let y=u;y<d;y++){const w=a.get(y),b=this.getSymbolInstanceTextSize(e,m,r,y);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,b,w.padding)}}_updateIconDebugCollisionBoxes(e,r,a,u,d,m){for(let y=u;y<d;y++){const w=a.get(y),b=this.getSymbolInstanceIconSize(e,r,m);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,b,w.padding)}}updateCollisionDebugBuffers(e,r){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const a=tc(this.iconSizeData,e),u=tc(this.textSizeData,e);for(let d=0;d<this.symbolInstances.length;d++){const m=this.symbolInstances.get(d);this._updateTextDebugCollisionBoxes(u,e,r,m.textBoxStartIndex,m.textBoxEndIndex,m),this._updateTextDebugCollisionBoxes(u,e,r,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m),this._updateIconDebugCollisionBoxes(a,e,r,m.iconBoxStartIndex,m.iconBoxEndIndex,m.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(a,e,r,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex,m.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,r,a,u,d,m,y,w,b){const M={};if(r<a){const{x1:A,y1:I,x2:z,y2:R,padding:O,projectedAnchorX:Z,projectedAnchorY:J,projectedAnchorZ:le,tileAnchorX:Q,tileAnchorY:ae,featureIndex:he}=e.get(r);M.textBox={x1:A,y1:I,x2:z,y2:R,padding:O,projectedAnchorX:Z,projectedAnchorY:J,projectedAnchorZ:le,tileAnchorX:Q,tileAnchorY:ae},M.textFeatureIndex=he}if(u<d){const{x1:A,y1:I,x2:z,y2:R,padding:O,projectedAnchorX:Z,projectedAnchorY:J,projectedAnchorZ:le,tileAnchorX:Q,tileAnchorY:ae,featureIndex:he}=e.get(u);M.verticalTextBox={x1:A,y1:I,x2:z,y2:R,padding:O,projectedAnchorX:Z,projectedAnchorY:J,projectedAnchorZ:le,tileAnchorX:Q,tileAnchorY:ae},M.verticalTextFeatureIndex=he}if(m<y){const{x1:A,y1:I,x2:z,y2:R,padding:O,projectedAnchorX:Z,projectedAnchorY:J,projectedAnchorZ:le,tileAnchorX:Q,tileAnchorY:ae,featureIndex:he}=e.get(m);M.iconBox={x1:A,y1:I,x2:z,y2:R,padding:O,projectedAnchorX:Z,projectedAnchorY:J,projectedAnchorZ:le,tileAnchorX:Q,tileAnchorY:ae},M.iconFeatureIndex=he}if(w<b){const{x1:A,y1:I,x2:z,y2:R,padding:O,projectedAnchorX:Z,projectedAnchorY:J,projectedAnchorZ:le,tileAnchorX:Q,tileAnchorY:ae,featureIndex:he}=e.get(w);M.verticalIconBox={x1:A,y1:I,x2:z,y2:R,padding:O,projectedAnchorX:Z,projectedAnchorY:J,projectedAnchorZ:le,tileAnchorX:Q,tileAnchorY:ae},M.verticalIconFeatureIndex=he}return M}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const a=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,a.textBoxStartIndex,a.textBoxEndIndex,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a.iconBoxStartIndex,a.iconBoxEndIndex,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,r){const a=e.placedSymbolArray.get(r),u=a.vertexStartIndex+4*a.numGlyphs;for(let d=a.vertexStartIndex;d<u;d+=4)e.indexArray.emplaceBack(d,d+1,d+2),e.indexArray.emplaceBack(d+1,d+2,d+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(e),a=Math.cos(e),u=[],d=[],m=[];for(let y=0;y<this.symbolInstances.length;++y){m.push(y);const w=this.symbolInstances.get(y);u.push(0|Math.round(r*w.tileAnchorX+a*w.tileAnchorY)),d.push(w.featureIndex)}return m.sort((y,w)=>u[y]-u[w]||d[w]-d[y]),m}addToSortKeyRanges(e,r){const a=this.sortKeyRanges[this.sortKeyRanges.length-1];a&&a.sortKey===r?a.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const a=this.symbolInstances.get(r);this.featureSortOrder.push(a.featureIndex);const{rightJustifiedTextSymbolIndex:u,centerJustifiedTextSymbolIndex:d,leftJustifiedTextSymbolIndex:m,verticalPlacedTextSymbolIndex:y,placedIconSymbolIndex:w,verticalPlacedIconSymbolIndex:b}=a;u>=0&&this.addIndicesForPlacedSymbol(this.text,u),d>=0&&d!==u&&this.addIndicesForPlacedSymbol(this.text,d),m>=0&&m!==d&&m!==u&&this.addIndicesForPlacedSymbol(this.text,m),y>=0&&this.addIndicesForPlacedSymbol(this.text,y),w>=0&&this.addIndicesForPlacedSymbol(this.icon,w),b>=0&&this.addIndicesForPlacedSymbol(this.icon,b)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Ct(ka,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),ka.MAX_GLYPHS=65535,ka.addDynamicAttributes=n3;const aw=new re({"symbol-placement":new B(je.layout_symbol["symbol-placement"]),"symbol-spacing":new B(je.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new B(je.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new W(je.layout_symbol["symbol-sort-key"]),"symbol-z-order":new B(je.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new B(je.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new B(je.layout_symbol["icon-ignore-placement"]),"icon-optional":new B(je.layout_symbol["icon-optional"]),"icon-rotation-alignment":new B(je.layout_symbol["icon-rotation-alignment"]),"icon-size":new W(je.layout_symbol["icon-size"]),"icon-text-fit":new B(je.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new B(je.layout_symbol["icon-text-fit-padding"]),"icon-image":new W(je.layout_symbol["icon-image"]),"icon-rotate":new W(je.layout_symbol["icon-rotate"]),"icon-padding":new B(je.layout_symbol["icon-padding"]),"icon-keep-upright":new B(je.layout_symbol["icon-keep-upright"]),"icon-offset":new W(je.layout_symbol["icon-offset"]),"icon-anchor":new W(je.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new B(je.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new B(je.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new B(je.layout_symbol["text-rotation-alignment"]),"text-field":new W(je.layout_symbol["text-field"]),"text-font":new W(je.layout_symbol["text-font"]),"text-size":new W(je.layout_symbol["text-size"]),"text-max-width":new W(je.layout_symbol["text-max-width"]),"text-line-height":new W(je.layout_symbol["text-line-height"]),"text-letter-spacing":new W(je.layout_symbol["text-letter-spacing"]),"text-justify":new W(je.layout_symbol["text-justify"]),"text-radial-offset":new W(je.layout_symbol["text-radial-offset"]),"text-variable-anchor":new B(je.layout_symbol["text-variable-anchor"]),"text-anchor":new W(je.layout_symbol["text-anchor"]),"text-max-angle":new B(je.layout_symbol["text-max-angle"]),"text-writing-mode":new B(je.layout_symbol["text-writing-mode"]),"text-rotate":new W(je.layout_symbol["text-rotate"]),"text-padding":new B(je.layout_symbol["text-padding"]),"text-keep-upright":new B(je.layout_symbol["text-keep-upright"]),"text-transform":new W(je.layout_symbol["text-transform"]),"text-offset":new W(je.layout_symbol["text-offset"]),"text-allow-overlap":new B(je.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new B(je.layout_symbol["text-ignore-placement"]),"text-optional":new B(je.layout_symbol["text-optional"])});var u4={paint:new re({"icon-opacity":new W(je.paint_symbol["icon-opacity"]),"icon-color":new W(je.paint_symbol["icon-color"]),"icon-halo-color":new W(je.paint_symbol["icon-halo-color"]),"icon-halo-width":new W(je.paint_symbol["icon-halo-width"]),"icon-halo-blur":new W(je.paint_symbol["icon-halo-blur"]),"icon-translate":new B(je.paint_symbol["icon-translate"]),"icon-translate-anchor":new B(je.paint_symbol["icon-translate-anchor"]),"text-opacity":new W(je.paint_symbol["text-opacity"]),"text-color":new W(je.paint_symbol["text-color"],{runtimeType:mi,getOverride:n=>n.textColor,hasOverride:n=>!!n.textColor}),"text-halo-color":new W(je.paint_symbol["text-halo-color"]),"text-halo-width":new W(je.paint_symbol["text-halo-width"]),"text-halo-blur":new W(je.paint_symbol["text-halo-blur"]),"text-translate":new B(je.paint_symbol["text-translate"]),"text-translate-anchor":new B(je.paint_symbol["text-translate-anchor"])}),layout:aw};class p8{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:aa,this.defaultValue=e}evaluate(e){if(e.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ct(p8,"FormatSectionOverride",{omit:["defaultValue"]});class r3 extends No{constructor(e){super(e,u4)}recalculate(e,r){super.recalculate(e,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const a=this.layout.get("text-writing-mode");if(a){const u=[];for(const d of a)u.indexOf(d)<0&&u.push(d);this.layout._values["text-writing-mode"]=u}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,r,a,u){const d=this.layout.get(e).evaluate(r,{},a,u),m=this._unevaluatedLayout._values[e];return m.isDataDriven()||va(m.value)||!d?d:function(y,w){return w.replace(/{([^{}]+)}/g,(b,M)=>M in y?String(y[M]):"")}(r.properties,d)}createBucket(e){return new ka(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of u4.paint.overridableProperties){if(!r3.hasPaintOverride(this.layout,e))continue;const r=this.paint.get(e),a=new p8(r),u=new R1(a,r.property.specification);let d=null;d=r.value.kind==="constant"||r.value.kind==="source"?new Du("source",u):new Cl("composite",u,r.value.zoomStops,r.value._interpolationType),this.paint._values[e]=new H(r.property,d,r.parameters)}}_handleOverridablePaintPropertyUpdate(e,r,a){return!(!this.layout||r.isDataDriven()||a.isDataDriven())&&r3.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,r){const a=e.get("text-field"),u=u4.paint.properties[r];let d=!1;const m=y=>{for(const w of y)if(u.overrides&&u.overrides.hasOverride(w))return void(d=!0)};if(a.value.kind==="constant"&&a.value.value instanceof ni)m(a.value.value.sections);else if(a.value.kind==="source"){const y=b=>{d||(b instanceof ks&&Yn(b.value)===ul?m(b.value.sections):b instanceof ls?m(b.sections):b.eachChild(y))},w=a.value;w._styleExpression&&y(w._styleExpression.expression)}return d}getProgramConfiguration(e){return new Ma(this,e)}}var lw={paint:new re({"background-color":new B(je.paint_background["background-color"]),"background-pattern":new B(je.paint_background["background-pattern"]),"background-opacity":new B(je.paint_background["background-opacity"])})},cw={paint:new re({"raster-opacity":new B(je.paint_raster["raster-opacity"]),"raster-hue-rotate":new B(je.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new B(je.paint_raster["raster-brightness-min"]),"raster-brightness-max":new B(je.paint_raster["raster-brightness-max"]),"raster-saturation":new B(je.paint_raster["raster-saturation"]),"raster-contrast":new B(je.paint_raster["raster-contrast"]),"raster-resampling":new B(je.paint_raster["raster-resampling"]),"raster-fade-duration":new B(je.paint_raster["raster-fade-duration"])})};class uw extends No{constructor(e){super(e,{}),this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var hw={paint:new re({"sky-type":new B(je.paint_sky["sky-type"]),"sky-atmosphere-sun":new B(je.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new B(je.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new B(je.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new B(je.paint_sky["sky-gradient-radius"]),"sky-gradient":new te(je.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new B(je.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new B(je.paint_sky["sky-atmosphere-color"]),"sky-opacity":new B(je.paint_sky["sky-opacity"])})};function h4(n,e,r){const a=[0,0,1],u=k7([]);return z7(u,u,r?-St(n)+Math.PI:St(n)),L7(u,u,-St(e)),C7(a,a,u),ii(a,a)}const dw={circle:class extends No{constructor(n){super(n,Tv)}createBucket(n){return new Bd(n)}queryRadius(n){const e=n;return Y1("circle-radius",this,e)+Y1("circle-stroke-width",this,e)+zh(this.paint.get("circle-translate"))}queryIntersectsFeature(n,e,r,a,u,d,m,y){const w=tf(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),d.angle,n.pixelToTileUnitsFactor),b=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r);return nf(n,a,d,m,y,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",w,b)}getProgramIds(){return["circle"]}getProgramConfiguration(n){return new Ma(this,n)}},heatmap:class extends No{createBucket(n){return new of(n)}constructor(n){super(n,Cv),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=jd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(n){return Y1("heatmap-radius",this,n)}queryIntersectsFeature(n,e,r,a,u,d,m,y){const w=this.paint.get("heatmap-radius").evaluate(e,r);return nf(n,a,d,m,y,!0,!0,new ze(0,0),w)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(n){return new Ma(this,n)}},hillshade:class extends No{constructor(n){super(n,Pv)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends No{constructor(n){super(n,$v)}getProgramIds(){const n=this.paint.get("fill-pattern"),e=n&&n.constantOr(1),r=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getProgramConfiguration(n){return new Ma(this,n)}recalculate(n,e){super.recalculate(n,e);const r=this.paint._values["fill-outline-color"];r.value.kind==="constant"&&r.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Oh(n)}queryRadius(){return zh(this.paint.get("fill-translate"))}queryIntersectsFeature(n,e,r,a,u,d){return!n.queryGeometry.isAboveHorizon&&K7(ef(n.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),d.angle,n.pixelToTileUnitsFactor),a)}isTileClipped(){return!0}},"fill-extrusion":class extends No{constructor(n){super(n,sx)}createBucket(n){return new m0(n)}queryRadius(){return zh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(n){return new Ma(this,n)}queryIntersectsFeature(n,e,r,a,u,d,m,y,w){const b=tf(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),d.angle,n.pixelToTileUnitsFactor),M=this.paint.get("fill-extrusion-height").evaluate(e,r),A=this.paint.get("fill-extrusion-base").evaluate(e,r),I=[0,0],z=y&&d.elevation,R=d.elevation?d.elevation.exaggeration():1,O=n.tile.getBucket(this);if(z&&O instanceof m0){const ae=O.centroidVertexArray,he=w+1;he<ae.length&&(I[0]=ae.geta_centroid_pos0(he),I[1]=ae.geta_centroid_pos1(he))}if(I[0]===0&&I[1]===1)return!1;d.projection.name==="globe"&&(a=Tf([a],[new ze(0,0),new ze(Bt,Bt)],n.tileID.canonical).map(ae=>ae.polygon).flat());const Z=z?y:null,[J,le]=function(ae,he,ue,De,Ie,Ze,st,Be,Xe,Ke,et){return ae.projection.name==="globe"?function(ut,Ge,_t,At,vt,qt,dt,Rt,Ht,dn,Xt){const Ut=[],Fn=[],Kt=ut.projection.upVectorScale(Xt,ut.center.lat,ut.worldSize).metersToTile,Yt=[0,0,0,1],Cn=[0,0,0,1],kn=(Pn,qn,Jn,ur)=>{Pn[0]=qn,Pn[1]=Jn,Pn[2]=ur,Pn[3]=1},Ln=bf();_t>0&&(_t+=Ln),At+=Ln;for(const Pn of Ge){const qn=[],Jn=[];for(const ur of Pn){const An=ur.x+vt.x,xr=ur.y+vt.y,hr=ut.projection.projectTilePoint(An,xr,Xt),Xn=ut.projection.upVector(Xt,ur.x,ur.y);let fn=_t,dr=At;if(dt){const zn=Cf(An,xr,_t,At,dt,Rt,Ht,dn);fn+=zn.base,dr+=zn.top}_t!==0?kn(Yt,hr.x+Xn[0]*Kt*fn,hr.y+Xn[1]*Kt*fn,hr.z+Xn[2]*Kt*fn):kn(Yt,hr.x,hr.y,hr.z),kn(Cn,hr.x+Xn[0]*Kt*dr,hr.y+Xn[1]*Kt*dr,hr.z+Xn[2]*Kt*dr),rr(Yt,Yt,qt),rr(Cn,Cn,qt),qn.push(new ec(Yt[0],Yt[1],Yt[2])),Jn.push(new ec(Cn[0],Cn[1],Cn[2]))}Ut.push(qn),Fn.push(Jn)}return[Ut,Fn]}(ae,he,ue,De,Ie,Ze,st,Be,Xe,Ke,et):st?function(ut,Ge,_t,At,vt,qt,dt,Rt,Ht){const dn=[],Xt=[],Ut=[0,0,0,1];for(const Fn of ut){const Kt=[],Yt=[];for(const Cn of Fn){const kn=Cn.x+At.x,Ln=Cn.y+At.y,Pn=Cf(kn,Ln,Ge,_t,qt,dt,Rt,Ht);Ut[0]=kn,Ut[1]=Ln,Ut[2]=Pn.base,Ut[3]=1,Ul(Ut,Ut,vt),Ut[3]=Math.max(Ut[3],1e-5);const qn=new ec(Ut[0]/Ut[3],Ut[1]/Ut[3],Ut[2]/Ut[3]);Ut[0]=kn,Ut[1]=Ln,Ut[2]=Pn.top,Ut[3]=1,Ul(Ut,Ut,vt),Ut[3]=Math.max(Ut[3],1e-5);const Jn=new ec(Ut[0]/Ut[3],Ut[1]/Ut[3],Ut[2]/Ut[3]);Kt.push(qn),Yt.push(Jn)}dn.push(Kt),Xt.push(Yt)}return[dn,Xt]}(he,ue,De,Ie,Ze,st,Be,Xe,Ke):function(ut,Ge,_t,At,vt){const qt=[],dt=[],Rt=vt[8]*Ge,Ht=vt[9]*Ge,dn=vt[10]*Ge,Xt=vt[11]*Ge,Ut=vt[8]*_t,Fn=vt[9]*_t,Kt=vt[10]*_t,Yt=vt[11]*_t;for(const Cn of ut){const kn=[],Ln=[];for(const Pn of Cn){const qn=Pn.x+At.x,Jn=Pn.y+At.y,ur=vt[0]*qn+vt[4]*Jn+vt[12],An=vt[1]*qn+vt[5]*Jn+vt[13],xr=vt[2]*qn+vt[6]*Jn+vt[14],hr=vt[3]*qn+vt[7]*Jn+vt[15],Xn=ur+Rt,fn=An+Ht,dr=xr+dn,zn=Math.max(hr+Xt,1e-5),ai=ur+Ut,pr=An+Fn,zr=xr+Kt,Cr=Math.max(hr+Yt,1e-5);kn.push(new ec(Xn/zn,fn/zn,dr/zn)),Ln.push(new ec(ai/Cr,pr/Cr,zr/Cr))}qt.push(kn),dt.push(Ln)}return[qt,dt]}(he,ue,De,Ie,Ze)}(d,a,A,M,b,m,Z,I,R,d.center.lat,n.tileID.canonical),Q=n.queryGeometry;return function(ae,he,ue){let De=1/0;K7(ue,he)&&(De=Mf(ue,he[0]));for(let Ie=0;Ie<he.length;Ie++){const Ze=he[Ie],st=ae[Ie];for(let Be=0;Be<Ze.length-1;Be++){const Xe=Ze[Be],Ke=[Xe,Ze[Be+1],st[Be+1],st[Be],Xe];X7(ue,Ke)&&(De=Math.min(De,Mf(ue,Ke)))}}return De!==1/0&&De}(J,le,Q.isPointQuery()?Q.screenBounds:Q.screenGeometry)}},line:class extends No{constructor(n){super(n,Pf),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof wu,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(n,e){super.recalculate(n,e),this.paint._values["line-floorwidth"]=Af.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Gh(n)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(n){return new Ma(this,n)}queryRadius(n){const e=n,r=If(Y1("line-width",this,e),Y1("line-gap-width",this,e)),a=Y1("line-offset",this,e);return r/2+Math.abs(a)+zh(this.paint.get("line-translate"))}queryIntersectsFeature(n,e,r,a,u,d){if(n.queryGeometry.isAboveHorizon)return!1;const m=ef(n.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),d.angle,n.pixelToTileUnitsFactor),y=n.pixelToTileUnitsFactor/2*If(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),w=this.paint.get("line-offset").evaluate(e,r);return w&&(a=function(b,M){const A=[],I=new ze(0,0);for(let z=0;z<b.length;z++){const R=b[z],O=[];for(let Z=0;Z<R.length;Z++){const J=R[Z],le=R[Z+1],Q=Z===0?I:J.sub(R[Z-1])._unit()._perp(),ae=Z===R.length-1?I:le.sub(J)._unit()._perp(),he=Q._add(ae)._unit();he._mult(1/(he.x*ae.x+he.y*ae.y)),O.push(he._mult(M)._add(J))}A.push(O)}return A}(a,w*n.pixelToTileUnitsFactor)),function(b,M,A){for(let I=0;I<M.length;I++){const z=M[I];if(b.length>=3){for(let R=0;R<z.length;R++)if(Gl(b,z[R]))return!0}if(vv(b,z,A))return!0}return!1}(m,a,y)}isTileClipped(){return!0}},symbol:r3,background:class extends No{constructor(n){super(n,lw)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends No{constructor(n){super(n,cw)}getProgramIds(){return["raster"]}},sky:class extends No{constructor(n){super(n,hw),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="sky-gradient"?this._updateColorRamp():n!=="sky-atmosphere-sun"&&n!=="sky-atmosphere-halo-color"&&n!=="sky-atmosphere-color"&&n!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=jd({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(n){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=n.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(n,e){if(this.paint.get("sky-type")==="atmosphere"){const a=this.paint.get("sky-atmosphere-sun"),u=!a,d=n.style.light,m=d.properties.get("position");return u&&d.properties.get("anchor")==="viewport"&&Un("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),u?h4(m.azimuthal,90-m.polar,e):h4(a[0],90-a[1],e)}const r=this.paint.get("sky-gradient-center");return h4(r[0],90-r[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(n){this._skyboxInvalidated=!1,this._lightPosition=n.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const n=this.paint.get("sky-type");return n==="atmosphere"?["skyboxCapture","skybox"]:n==="gradient"?["skyboxGradient"]:null}}};class M0{constructor(e,r,a,u){this.context=e,this.format=a,this.texture=e.gl.createTexture(),this.update(r,u)}update(e,r,a){const{width:u,height:d}=e,{context:m}=this,{gl:y}=m,{HTMLImageElement:w,HTMLCanvasElement:b,HTMLVideoElement:M,ImageData:A,ImageBitmap:I}=C;if(y.bindTexture(y.TEXTURE_2D,this.texture),m.pixelStoreUnpackFlipY.set(!1),m.pixelStoreUnpack.set(1),m.pixelStoreUnpackPremultiplyAlpha.set(this.format===y.RGBA&&(!r||r.premultiply!==!1)),a||this.size&&this.size[0]===u&&this.size[1]===d){const{x:z,y:R}=a||{x:0,y:0};e instanceof w||e instanceof b||e instanceof M||e instanceof A||I&&e instanceof I?y.texSubImage2D(y.TEXTURE_2D,0,z,R,y.RGBA,y.UNSIGNED_BYTE,e):y.texSubImage2D(y.TEXTURE_2D,0,z,R,u,d,y.RGBA,y.UNSIGNED_BYTE,e.data)}else this.size=[u,d],e instanceof w||e instanceof b||e instanceof M||e instanceof A||I&&e instanceof I?y.texImage2D(y.TEXTURE_2D,0,this.format,this.format,y.UNSIGNED_BYTE,e):y.texImage2D(y.TEXTURE_2D,0,this.format,u,d,0,this.format,y.UNSIGNED_BYTE,e.data);this.useMipmap=!!(r&&r.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&y.generateMipmap(y.TEXTURE_2D)}bind(e,r){const{context:a}=this,{gl:u}=a;u.bindTexture(u.TEXTURE_2D,this.texture),e!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.useMipmap?e===u.NEAREST?u.NEAREST_MIPMAP_NEAREST:u.LINEAR_MIPMAP_NEAREST:e),this.filter=e),r!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,r),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class pw{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class fw{constructor(){this.tasks={},this.taskQueue=[],Io(["process"],this),this.invoker=new pw(this.process),this.nextId=0}add(e,r){const a=this.nextId++,u=function({type:d,isSymbolTile:m,zoom:y}){return y=y||0,d==="message"?0:d!=="maybePrepare"||m?d!=="parseTile"||m?d==="parseTile"&&m?300-y:d==="maybePrepare"&&m?400-y:500:200-y:100-y}(r);if(u===0){ji();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[a]={fn:e,metadata:r,priority:u,id:a},this.taskQueue.push(a),this.invoker.trigger(),{cancel:()=>{delete this.tasks[a]}}}process(){ji();try{if(this.taskQueue=this.taskQueue.filter(a=>!!this.tasks[a]),!this.taskQueue.length)return;const e=this.pick();if(e===null)return;const r=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!r)return;r.fn()}finally{}}pick(){let e=null,r=1/0;for(let u=0;u<this.taskQueue.length;u++){const d=this.tasks[this.taskQueue[u]];d.priority<r&&(r=d.priority,e=u)}if(e===null)return null;const a=this.taskQueue[e];return this.taskQueue.splice(e,1),a}remove(){this.invoker.remove()}}class f8{constructor(e){this._stringToNumber={},this._numberToString=[];for(let r=0;r<e.length;r++){const a=e[r];this._stringToNumber[a]=r,this._numberToString[r]=a}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const mw=["tile","layer","source","sourceLayer","state"];class m8{constructor(e,r,a,u,d){this.type="Feature",this._vectorTileFeature=e,this._z=r,this._x=a,this._y=u,this.properties=e.properties,this.id=d}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(e.id=this.id);for(const r of mw)this[r]!==void 0&&(e[r]=this[r]);return e}}const wo=32,ms=33,La=new Uint16Array(8184);for(let n=0;n<2046;n++){let e=n+2,r=0,a=0,u=0,d=0,m=0,y=0;for(1&e?u=d=m=wo:r=a=y=wo;(e>>=1)>1;){const b=r+u>>1,M=a+d>>1;1&e?(u=r,d=a,r=m,a=y):(r=u,a=d,u=m,d=y),m=b,y=M}const w=4*n;La[w+0]=r,La[w+1]=a,La[w+2]=u,La[w+3]=d}const _s=new Uint16Array(2178),za=new Uint8Array(1089),i3=new Uint16Array(1089);function _8(n){return n===0?-.03125:n===32?.03125:0}var g8=be([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const y8={type:2,extent:Bt,loadGeometry:()=>[[new ze(0,0),new ze(Bt+1,0),new ze(Bt+1,Bt+1),new ze(0,Bt+1),new ze(0,0)]]};class d4{constructor(e,r,a,u,d){this.tileID=e,this.uid=Zn(),this.uses=0,this.tileSize=r,this.tileZoom=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=d,this.expiredRequestCount=0,this.state="loading",u&&u.transform&&(this.projection=u.transform.projection)}registerFadeDuration(e){const r=e+this.timeAdded;r<qr.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Zl(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,r,a){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(u,d){const m={};if(!d)return m;for(const y of u){const w=y.layerIds.map(b=>d.getLayer(b)).filter(Boolean);if(w.length!==0){y.layers=w,y.stateDependentLayerIds&&(y.stateDependentLayers=y.stateDependentLayerIds.map(b=>w.filter(M=>M.id===b)[0]));for(const b of w)m[b.id]=y}}return m}(e.buckets,r.style),this.hasSymbolBuckets=!1;for(const u in this.buckets){const d=this.buckets[u];if(d instanceof ka){if(this.hasSymbolBuckets=!0,!a)break;d.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const u in this.buckets){const d=this.buckets[u];if(d instanceof ka&&d.hasRTLText){this.hasRTLText=!0,S.isLoading()||S.isLoaded()||v()!=="deferred"||T();break}}this.queryPadding=0;for(const u in this.buckets){const d=this.buckets[u];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(u).queryRadius(d))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Sn}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const a in this.buckets){const u=this.buckets[a];u.uploadPending()&&u.upload(e)}const r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new M0(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new M0(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new M0(e,this.lineAtlas.image,r.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,r,a,u,d,m,y,w){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:u,pixelPosMatrix:y,transform:m,params:d,tileTransform:this.tileTransform},e,r,a):{}}querySourceFeatures(e,r){const a=this.latestFeatureIndex;if(!a||!a.rawTileData)return;const u=a.loadVTLayers(),d=r?r.sourceLayer:"",m=u._geojsonTileLayer||u[d];if(!m)return;const y=U1(r&&r.filter),{z:w,x:b,y:M}=this.tileID.canonical,A={z:w,x:b,y:M};for(let I=0;I<m.length;I++){const z=m.feature(I);if(y.needGeometry){const Z=Vl(z,!0);if(!y.filter(new P(this.tileID.overscaledZ),Z,this.tileID.canonical))continue}else if(!y.filter(new P(this.tileID.overscaledZ),z))continue;const R=a.getId(z,d),O=new m8(z,w,b,M,R);O.tile=A,e.push(O)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const r=this.expirationTime;if(e.cacheControl){const a=Fr(e.cacheControl);a["max-age"]&&(this.expirationTime=Date.now()+1e3*a["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const a=Date.now();let u=!1;if(this.expirationTime>a)u=!1;else if(r)if(this.expirationTime<r)u=!0;else{const d=this.expirationTime-r;d?this.expirationTime=a+Math.max(d,3e4):u=!0}else u=!0;u?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,r){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0||!r)return;const a=this.latestFeatureIndex.loadVTLayers(),u=r.style.listImages();for(const d in this.buckets){if(!r.style.hasLayer(d))continue;const m=this.buckets[d],y=m.layers[0].sourceLayer||"_geojsonTileLayer",w=a[y],b=e[y];if(!w||!b||Object.keys(b).length===0)continue;if(m.update(b,w,u,this.imageAtlas&&this.imageAtlas.patternPositions||{}),m instanceof Gh||m instanceof Oh){const A=r.style._getSourceCache(m.layers[0].source);r._terrain&&r._terrain.enabled&&A&&m.programConfigurations.needsUpload&&r._terrain._clearRenderCacheForTile(A.id,this.tileID)}const M=r&&r.style&&r.style.getLayer(d);M&&(this.queryPadding=Math.max(this.queryPadding,M.queryRadius(m)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<qr.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=qr.now()+e}setTexture(e,r){const a=r.context,u=a.gl;this.texture=this.texture||r.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new M0(a,e,u.RGBA,{useMipmap:!0}),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE))}setDependencies(e,r){const a={};for(const u of r)a[u]=!0;this.dependencies[e]=a}hasDependency(e,r){for(const a of e){const u=this.dependencies[a];if(u){for(const d of r)if(u[d])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,r){if(!r||r.name==="mercator"||this._tileDebugBuffer)return;const a=Gs(y8,this.tileID.canonical,this.tileTransform)[0],u=new ot,d=new Ii;for(let m=0;m<a.length;m++){const{x:y,y:w}=a[m];u.emplaceBack(y,w),d.emplaceBack(m)}d.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(d),this._tileDebugBuffer=e.createVertexBuffer(u,i0.members),this._tileDebugSegments=lr.simpleSegment(0,0,u.length,d.length)}_makeTileBoundsBuffers(e,r){if(this._tileBoundsBuffer||!r||r.name==="mercator")return;const a=Gs(y8,this.tileID.canonical,this.tileTransform)[0];let u,d;if(this.isRaster){const m=function(y,w){const b=Zl(y,w),M=Math.pow(2,y.z);for(let Z=0;Z<ms;Z++)for(let J=0;J<ms;J++){const le=Ki((y.x+(J+_8(J))/wo)/M),Q=jr((y.y+(Z+_8(Z))/wo)/M),ae=w.project(le,Q),he=Z*ms+J;_s[2*he+0]=Math.round((ae.x*b.scale-b.x)*Bt),_s[2*he+1]=Math.round((ae.y*b.scale-b.y)*Bt)}za.fill(0),i3.fill(0);for(let Z=2045;Z>=0;Z--){const J=4*Z,le=La[J+0],Q=La[J+1],ae=La[J+2],he=La[J+3],ue=le+ae>>1,De=Q+he>>1,Ie=ue+De-Q,Ze=De+le-ue,st=Q*ms+le,Be=he*ms+ae,Xe=De*ms+ue,Ke=Math.hypot((_s[2*st+0]+_s[2*Be+0])/2-_s[2*Xe+0],(_s[2*st+1]+_s[2*Be+1])/2-_s[2*Xe+1])>=16;za[Xe]=za[Xe]||(Ke?1:0),Z<1022&&(za[Xe]=za[Xe]||za[(Q+Ze>>1)*ms+(le+Ie>>1)]||za[(he+Ze>>1)*ms+(ae+Ie>>1)])}const A=new qe,I=new Lt;let z=0;function R(Z,J){const le=J*ms+Z;return i3[le]===0&&(A.emplaceBack(_s[2*le+0],_s[2*le+1],Z*Bt/wo,J*Bt/wo),i3[le]=++z),i3[le]-1}function O(Z,J,le,Q,ae,he){const ue=Z+le>>1,De=J+Q>>1;if(Math.abs(Z-ae)+Math.abs(J-he)>1&&za[De*ms+ue])O(ae,he,Z,J,ue,De),O(le,Q,ae,he,ue,De);else{const Ie=R(Z,J),Ze=R(le,Q),st=R(ae,he);I.emplaceBack(Ie,Ze,st)}}return O(0,0,wo,wo,wo,0),O(wo,wo,0,0,0,wo),{vertices:A,indices:I}}(this.tileID.canonical,r);u=m.vertices,d=m.indices}else{u=new qe,d=new Lt;for(const{x:y,y:w}of a)u.emplaceBack(y,w,0,0);const m=Wd(u.int16,void 0,4);for(let y=0;y<m.length;y+=3)d.emplaceBack(m[y],m[y+1],m[y+2])}this._tileBoundsBuffer=e.createVertexBuffer(u,g8.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(d),this._tileBoundsSegments=lr.simpleSegment(0,0,u.length,d.length)}_makeGlobeTileDebugBuffers(e,r){const a=r.projection;if(!a||a.name!=="globe"||r.freezeTileCoverage)return;const u=this.tileID.canonical,d=a0(O7(u,r)),m=X1(r.zoom);let y;m>0&&(y=xd(new Float64Array(16),r.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,u,r,d,y,m),this._makeGlobeTileDebugTextBuffer(e,u,r,d,y,m)}_globePoint(e,r,a,u,d,m,y){let w=s0(e,r,a);if(m){const b=1<<a.z,M=ps(u.center.lng),A=fs(u.center.lat),I=(a.x+.5)/b-M;let z=0;I>.5?z=-1:I<-.5&&(z=1);let R=(e/Bt+a.x)/b+z,O=(r/Bt+a.y)/b;R=(R-M)*u._pixelsPerMercatorPixel+M,O=(O-A)*u._pixelsPerMercatorPixel+A;const Z=[R*u.worldSize,O*u.worldSize,0];rr(Z,Z,m),w=jl(w,Z,y)}return rr(w,w,d)}_makeGlobeTileDebugBorderBuffer(e,r,a,u,d,m){const y=new ot,w=new Ii,b=new Ae,M=(I,z,R,O,Z)=>{const J=(R-I)/(Z-1),le=(O-z)/(Z-1),Q=y.length;for(let ae=0;ae<Z;ae++){const he=I+ae*J,ue=z+ae*le;y.emplaceBack(he,ue);const De=this._globePoint(he,ue,r,a,u,d,m);b.emplaceBack(De[0],De[1],De[2]),w.emplaceBack(Q+ae)}},A=Bt;M(0,0,A,0,16),M(A,0,A,A,16),M(A,A,0,A,16),M(0,A,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(w),this._tileDebugBuffer=e.createVertexBuffer(y,i0.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(b,R7.members),this._tileDebugSegments=lr.simpleSegment(0,0,y.length,w.length)}_makeGlobeTileDebugTextBuffer(e,r,a,u,d,m){const y=Bt/4,w=new ot,b=new Lt,M=new Ae,A=25;b.reserve(32),w.reserve(A),M.reserve(A);const I=(z,R)=>A*z+R;for(let z=0;z<A;z++){const R=z*y;for(let O=0;O<A;O++){const Z=O*y;w.emplaceBack(Z,R);const J=this._globePoint(Z,R,r,a,u,d,m);M.emplaceBack(J[0],J[1],J[2])}}for(let z=0;z<4;z++)for(let R=0;R<4;R++){const O=I(z,R),Z=I(z,R+1),J=I(z+1,R),le=I(z+1,R+1);b.emplaceBack(O,Z,J),b.emplaceBack(J,Z,le)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(b),this._tileDebugTextBuffer=e.createVertexBuffer(w,i0.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(M,R7.members),this._tileDebugTextSegments=lr.simpleSegment(0,0,A,32)}}class _w{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,r,a){const u=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},Zt(this.stateChanges[e][u],a),this.deletedStates[e]===null){this.deletedStates[e]={};for(const d in this.state[e])d!==u&&(this.deletedStates[e][d]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][u]===null){this.deletedStates[e][u]={};for(const d in this.state[e][u])a[d]||(this.deletedStates[e][u][d]=null)}else for(const d in a)this.deletedStates[e]&&this.deletedStates[e][u]&&this.deletedStates[e][u][d]===null&&delete this.deletedStates[e][u][d]}removeFeatureState(e,r,a){if(this.deletedStates[e]===null)return;const u=String(r);if(this.deletedStates[e]=this.deletedStates[e]||{},a&&r!==void 0)this.deletedStates[e][u]!==null&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][a]=null);else if(r!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][u])for(a in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][a]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}getState(e,r){const a=String(r),u=Zt({},(this.state[e]||{})[a],(this.stateChanges[e]||{})[a]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const d=this.deletedStates[e][r];if(d===null)return{};for(const m in d)delete u[m]}return u}initializeTileState(e,r){e.setFeatureState(this.state,r)}coalesceChanges(e,r){const a={};for(const u in this.stateChanges){this.state[u]=this.state[u]||{};const d={};for(const m in this.stateChanges[u])this.state[u][m]||(this.state[u][m]={}),Zt(this.state[u][m],this.stateChanges[u][m]),d[m]=this.state[u][m];a[u]=d}for(const u in this.deletedStates){this.state[u]=this.state[u]||{};const d={};if(this.deletedStates[u]===null)for(const m in this.state[u])d[m]={},this.state[u][m]={};else for(const m in this.deletedStates[u]){if(this.deletedStates[u][m]===null)this.state[u][m]={};else if(this.state[u][m])for(const y of Object.keys(this.deletedStates[u][m]))delete this.state[u][m][y];d[m]=this.state[u][m]}a[u]=a[u]||{},Zt(a[u],d)}if(this.stateChanges={},this.deletedStates={},Object.keys(a).length!==0)for(const u in e)e[u].setFeatureState(a,r)}}class v8{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,r){const a=this.toIdx(e,r);return{min:this.minimums[a],max:this.maximums[a]}}isLeaf(e,r){return this.leaves[this.toIdx(e,r)]}toIdx(e,r){return r*this.size+e}}function x8(n,e,r,a){let u=0,d=Number.MAX_VALUE;for(let m=0;m<3;m++)if(Math.abs(a[m])<1e-15){if(r[m]<n[m]||r[m]>e[m])return null}else{const y=1/a[m];let w=(n[m]-r[m])*y,b=(e[m]-r[m])*y;if(w>b){const M=w;w=b,b=M}if(w>u&&(u=w),b<d&&(d=b),u>d)return null}return u}function w8(n,e,r,a,u,d,m,y,w,b,M){const A=a-n,I=u-e,z=d-r,R=m-n,O=y-e,Z=w-r,J=M[1]*Z-M[2]*O,le=M[2]*R-M[0]*Z,Q=M[0]*O-M[1]*R,ae=A*J+I*le+z*Q;if(Math.abs(ae)<1e-15)return null;const he=1/ae,ue=b[0]-n,De=b[1]-e,Ie=b[2]-r,Ze=(ue*J+De*le+Ie*Q)*he;if(Ze<0||Ze>1)return null;const st=De*z-Ie*I,Be=Ie*A-ue*z,Xe=ue*I-De*A,Ke=(M[0]*st+M[1]*Be+M[2]*Xe)*he;return Ke<0||Ze+Ke>1?null:(R*st+O*Be+Z*Xe)*he}function b8(n,e,r){return(n-e)/(r-e)}function T8(n,e,r,a,u,d,m,y,w){const b=1<<r,M=d-a,A=m-u,I=(n+1)/b*M+a,z=(e+0)/b*A+u,R=(e+1)/b*A+u;y[0]=(n+0)/b*M+a,y[1]=z,w[0]=I,w[1]=R}class E8{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const r=function(d){const m=Math.ceil(Math.log2(d.dim/8)),y=[];let w=Math.ceil(Math.pow(2,m));const b=1/w,M=(z,R,O,Z,J)=>{const le=Z?1:0,Q=(z+1)*O-le,ae=R*O,he=(R+1)*O-le;J[0]=z*O,J[1]=ae,J[2]=Q,J[3]=he};let A=new v8(w);const I=[];for(let z=0;z<w*w;z++){M(z%w,Math.floor(z/w),b,!1,I);const R=Da(I[0],I[1],d),O=Da(I[2],I[1],d),Z=Da(I[2],I[3],d),J=Da(I[0],I[3],d);A.minimums.push(Math.min(R,O,Z,J)),A.maximums.push(Math.max(R,O,Z,J)),A.leaves.push(1)}for(y.push(A),w/=2;w>=1;w/=2){const z=y[y.length-1];A=new v8(w);for(let R=0;R<w*w;R++){M(R%w,Math.floor(R/w),2,!0,I);const O=z.getElevation(I[0],I[1]),Z=z.getElevation(I[2],I[1]),J=z.getElevation(I[2],I[3]),le=z.getElevation(I[0],I[3]),Q=z.isLeaf(I[0],I[1]),ae=z.isLeaf(I[2],I[1]),he=z.isLeaf(I[2],I[3]),ue=z.isLeaf(I[0],I[3]),De=Math.min(O.min,Z.min,J.min,le.min),Ie=Math.max(O.max,Z.max,J.max,le.max),Ze=Q&&ae&&he&&ue;A.maximums.push(Ie),A.minimums.push(De),A.leaves.push(Ie-De<=5&&Ze?1:0)}y.push(A)}return y}(this.dem),a=r.length-1,u=r[a];this._addNode(u.minimums[0],u.maximums[0],u.leaves[0]),this._construct(r,0,0,a,0)}raycastRoot(e,r,a,u,d,m,y=1){return x8([e,r,-100],[a,u,this.maximums[0]*y],d,m)}raycast(e,r,a,u,d,m,y=1){if(!this.nodeCount)return null;const w=this.raycastRoot(e,r,a,u,d,m,y);if(w==null)return null;const b=[],M=[],A=[],I=[],z=[{idx:0,t:w,nodex:0,nodey:0,depth:0}];for(;z.length>0;){const{idx:R,t:O,nodex:Z,nodey:J,depth:le}=z.pop();if(this.leaves[R]){T8(Z,J,le,e,r,a,u,A,I);const ae=1<<le,he=(Z+0)/ae,ue=(Z+1)/ae,De=(J+0)/ae,Ie=(J+1)/ae,Ze=Da(he,De,this.dem)*y,st=Da(ue,De,this.dem)*y,Be=Da(ue,Ie,this.dem)*y,Xe=Da(he,Ie,this.dem)*y,Ke=w8(A[0],A[1],Ze,I[0],A[1],st,I[0],I[1],Be,d,m),et=w8(I[0],I[1],Be,A[0],I[1],Xe,A[0],A[1],Ze,d,m),ut=Math.min(Ke!==null?Ke:Number.MAX_VALUE,et!==null?et:Number.MAX_VALUE);if(ut!==Number.MAX_VALUE)return ut;{const Ge=n0([],d,m,O);if(S8(Ze,st,Xe,Be,b8(Ge[0],A[0],I[0]),b8(Ge[1],A[1],I[1]))>=Ge[2])return O}continue}let Q=0;for(let ae=0;ae<this._siblingOffset.length;ae++){T8((Z<<1)+this._siblingOffset[ae][0],(J<<1)+this._siblingOffset[ae][1],le+1,e,r,a,u,A,I),A[2]=-100,I[2]=this.maximums[this.childOffsets[R]+ae]*y;const he=x8(A,I,d,m);if(he!=null){const ue=he;b[ae]=ue;let De=!1;for(let Ie=0;Ie<Q&&!De;Ie++)ue>=b[M[Ie]]&&(M.splice(Ie,0,ae),De=!0);De||(M[Q]=ae),Q++}}for(let ae=0;ae<Q;ae++){const he=M[ae];z.push({idx:this.childOffsets[R]+he,t:b[he],nodex:(Z<<1)+this._siblingOffset[he][0],nodey:(J<<1)+this._siblingOffset[he][1],depth:le+1})}}return null}_addNode(e,r,a){return this.minimums.push(e),this.maximums.push(r),this.leaves.push(a),this.childOffsets.push(0),this.nodeCount++}_construct(e,r,a,u,d){if(e[u].isLeaf(r,a)===1)return;this.childOffsets[d]||(this.childOffsets[d]=this.nodeCount);const m=u-1,y=e[m];let w=0,b=0;for(let M=0;M<this._siblingOffset.length;M++){const A=2*r+this._siblingOffset[M][0],I=2*a+this._siblingOffset[M][1],z=y.getElevation(A,I),R=y.isLeaf(A,I),O=this._addNode(z.min,z.max,R);R&&(w|=1<<M),b||(b=O)}for(let M=0;M<this._siblingOffset.length;M++)w&1<<M||this._construct(e,2*r+this._siblingOffset[M][0],2*a+this._siblingOffset[M][1],m,b+M)}}function S8(n,e,r,a,u,d){return un(un(n,r,d),un(e,a,d),u)}function Da(n,e,r){const a=r.dim,u=Ee(n*a-.5,0,a-1),d=Ee(e*a-.5,0,a-1),m=Math.floor(u),y=Math.floor(d),w=Math.min(m+1,a-1),b=Math.min(y+1,a-1);return S8(r.get(m,y),r.get(w,y),r.get(m,b),r.get(w,b),u-m,d-y)}const M8={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function gw(n,e,r){return(256*n*256+256*e+r)/10-1e4}function yw(n,e,r){return 256*n+e+r/256-32768}class o3{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,r,a,u=!1,d=!1){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(a&&a!=="mapbox"&&a!=="terrarium")return Un(`"${a}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=r.height;const m=this.dim=r.height-2,y=new Uint32Array(r.data.buffer);if(this.pixels=new Uint8Array(r.data.buffer),this.encoding=a||"mapbox",this.borderReady=u,!u){for(let w=0;w<m;w++)y[this._idx(-1,w)]=y[this._idx(0,w)],y[this._idx(m,w)]=y[this._idx(m-1,w)],y[this._idx(w,-1)]=y[this._idx(w,0)],y[this._idx(w,m)]=y[this._idx(w,m-1)];y[this._idx(-1,-1)]=y[this._idx(0,0)],y[this._idx(m,-1)]=y[this._idx(m-1,0)],y[this._idx(-1,m)]=y[this._idx(0,m-1)],y[this._idx(m,m)]=y[this._idx(m-1,m-1)],d&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new E8(this)}get(e,r,a=!1){a&&(e=Ee(e,-1,this.dim),r=Ee(r,-1,this.dim));const u=4*this._idx(e,r);return(this.encoding==="terrarium"?yw:gw)(this.pixels[u],this.pixels[u+1],this.pixels[u+2])}static getUnpackVector(e){return M8[e]}get unpackVector(){return M8[this.encoding]}_idx(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(e+1)}static pack(e,r){const a=[0,0,0,0],u=o3.getUnpackVector(r);let d=Math.floor((e+u[3])/u[2]);return a[2]=d%256,d=Math.floor(d/256),a[1]=d%256,d=Math.floor(d/256),a[0]=d,a}getPixels(){return new Li({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,r,a){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let u=r*this.dim,d=r*this.dim+this.dim,m=a*this.dim,y=a*this.dim+this.dim;switch(r){case-1:u=d-1;break;case 1:d=u+1}switch(a){case-1:m=y-1;break;case 1:y=m+1}const w=-r*this.dim,b=-a*this.dim;for(let M=m;M<y;M++)for(let A=u;A<d;A++){const I=4*this._idx(A,M),z=4*this._idx(A+w,M+b);this.pixels[I+0]=e.pixels[z+0],this.pixels[I+1]=e.pixels[z+1],this.pixels[I+2]=e.pixels[z+2],this.pixels[I+3]=e.pixels[z+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Ct(o3,"DEMData"),Ct(E8,"DemMinMaxQuadTree",{omit:["dem"]});class vw{constructor(e,r){this.max=e,this.onRemove=r,this.reset()}reset(){for(const e in this.data)for(const r of this.data[e])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(e,r,a){const u=e.wrapped().key;this.data[u]===void 0&&(this.data[u]=[]);const d={value:r,timeout:void 0};if(a!==void 0&&(d.timeout=setTimeout(()=>{this.remove(e,d)},a)),this.data[u].push(d),this.order.push(u),this.order.length>this.max){const m=this._getAndRemoveByKey(this.order[0]);m&&this.onRemove(m)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const r=this.data[e].shift();return r.timeout&&clearTimeout(r.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),r.value}getByKey(e){const r=this.data[e];return r?r[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,r){if(!this.has(e))return this;const a=e.wrapped().key,u=r===void 0?0:this.data[a].indexOf(r),d=this.data[a][u];return this.data[a].splice(u,1),d.timeout&&clearTimeout(d.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(d.value),this.order.splice(this.order.indexOf(a),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(e){const r=[];for(const a in this.data)for(const u of this.data[a])e(u.value)||r.push(u);for(const a of r)this.remove(a.value.tileID,a)}}class uc{constructor(e,r,a){this.func=e,this.mask=r,this.range=a}}uc.ReadOnly=!1,uc.ReadWrite=!0,uc.disabled=new uc(519,uc.ReadOnly,[0,1]);const p4=7680;class f4{constructor(e,r,a,u,d,m){this.test=e,this.ref=r,this.mask=a,this.fail=u,this.depthFail=d,this.pass=m}}f4.disabled=new f4({func:519,mask:0},0,0,p4,p4,p4);class gs{constructor(e,r,a){this.blendFunction=e,this.blendColor=r,this.mask=a}}gs.Replace=[1,0],gs.disabled=new gs(gs.Replace,nr.transparent,[!1,!1,!1,!1]),gs.unblended=new gs(gs.Replace,nr.transparent,[!0,!0,!0,!0]),gs.alphaBlended=new gs([1,771],nr.transparent,[!0,!0,!0,!0]);const m4=1029,_4=2305;class Wo{constructor(e,r,a){this.enable=e,this.mode=r,this.frontFace=a}}Wo.disabled=new Wo(!1,m4,_4),Wo.backCCW=new Wo(!0,m4,_4),Wo.backCW=new Wo(!0,m4,2304),Wo.frontCW=new Wo(!0,1028,2304),Wo.frontCCW=new Wo(!0,1028,_4);class Wl extends Rn{constructor(e,r,a){super(),this.id=e,this._onlySymbols=a,r.on("data",u=>{u.dataType==="source"&&u.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&u.dataType==="source"&&u.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),r.on("error",()=>{this._sourceErrored=!0}),this._source=r,this._tiles={},this._cache=new vw(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=r.minTileCacheSize,this._maxTileCacheSize=r.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new _w,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(e){this.map=e,this._minTileCacheSize=this._minTileCacheSize===void 0&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const r=this._tiles[e];if(r.state!=="loaded"&&r.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,r){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,r)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const r in this._tiles){const a=this._tiles[r];a.upload(e),a.prepare(this.map.style.imageManager)}}getIds(){return Nt(this._tiles).map(e=>e.tileID).sort(C8).map(e=>e.key)}getRenderableIds(e){const r=[];for(const a in this._tiles)this._isIdRenderable(+a,e)&&r.push(this._tiles[a]);return e?r.sort((a,u)=>{const d=a.tileID,m=u.tileID,y=new ze(d.canonical.x,d.canonical.y)._rotate(this.transform.angle),w=new ze(m.canonical.x,m.canonical.y)._rotate(this.transform.angle);return d.overscaledZ-m.overscaledZ||w.y-y.y||w.x-y.x}).map(a=>a.tileID.key):r.map(a=>a.tileID).sort(C8).map(a=>a.key)}hasRenderableParent(e){const r=this.findLoadedParent(e,0);return!!r&&this._isIdRenderable(r.tileID.key)}_isIdRenderable(e,r){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(r||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(+e,"reloading")}}_reloadTile(e,r){const a=this._tiles[e];a&&(a.state!=="loading"&&(a.state=r),this._loadTile(a,this._tileLoaded.bind(this,a,e,r)))}_tileLoaded(e,r,a,u){if(u)if(e.state="errored",u.status!==404)this._source.fire(new sn(u,{tile:e}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const d=this.map.painter.terrain;this.update(this.transform,d.getScaledDemTileSize(),!0),d.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=qr.now(),a==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),this._source.type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Ei("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const r=this.getRenderableIds();for(let u=0;u<r.length;u++){const d=r[u];if(e.neighboringTiles&&e.neighboringTiles[d]){const m=this.getTileByID(d);a(e,m),a(m,e)}}function a(u,d){if(!u.dem||u.dem.borderReady)return;u.needsHillshadePrepare=!0,u.needsDEMTextureUpload=!0;let m=d.tileID.canonical.x-u.tileID.canonical.x;const y=d.tileID.canonical.y-u.tileID.canonical.y,w=Math.pow(2,u.tileID.canonical.z),b=d.tileID.key;m===0&&y===0||Math.abs(y)>1||(Math.abs(m)>1&&(Math.abs(m+w)===1?m+=w:Math.abs(m-w)===1&&(m-=w)),d.dem&&u.dem&&(u.dem.backfillBorder(d.dem,m,y),u.neighboringTiles&&u.neighboringTiles[b]&&(u.neighboringTiles[b].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,r,a,u){for(const d in this._tiles){let m=this._tiles[d];if(u[d]||!m.hasData()||m.tileID.overscaledZ<=r||m.tileID.overscaledZ>a)continue;let y=m.tileID;for(;m&&m.tileID.overscaledZ>r+1;){const b=m.tileID.scaledTo(m.tileID.overscaledZ-1);m=this._tiles[b.key],m&&m.hasData()&&(y=b)}let w=y;for(;w.overscaledZ>r;)if(w=w.scaledTo(w.overscaledZ-1),e[w.key]){u[y.key]=y;break}}}findLoadedParent(e,r){if(e.key in this._loadedParentTiles){const a=this._loadedParentTiles[e.key];return a&&a.tileID.overscaledZ>=r?a:null}for(let a=e.overscaledZ-1;a>=r;a--){const u=e.scaledTo(a),d=this._getLoadedTile(u);if(d)return d}}_getLoadedTile(e){const r=this._tiles[e.key];return r&&r.hasData()?r:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,r){r=r||this._source.tileSize;const a=Math.ceil(e.width/r)+1,u=Math.ceil(e.height/r)+1,d=Math.floor(a*u*5),m=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,d):d,y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(y)}handleWrapJump(e){const r=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,r){const a={};for(const u in this._tiles){const d=this._tiles[u];d.tileID=d.tileID.unwrapTo(d.tileID.wrap+r),a[d.tileID.key]=d}this._tiles=a;for(const u in this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(const u in this._tiles)this._setTileReloadTimer(+u,this._tiles[u])}}update(e,r,a){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!a)return;let u;this.updateCacheSize(e,r),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?u=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(y=>new si(y.canonical.z,y.wrap,y.canonical.z,y.canonical.x,y.canonical.y)):(u=e.coveringTiles({tileSize:r||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!a,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(u=u.filter(y=>this._source.hasTile(y)))):u=[];const d=this._updateRetainedTiles(u);if(P8(this._source.type)&&u.length!==0){const y={},w={},b=Object.keys(d);for(const A of b){const I=d[A],z=this._tiles[A];if(!z||z.fadeEndTime&&z.fadeEndTime<=qr.now())continue;const R=this.findLoadedParent(I,Math.max(I.overscaledZ-Wl.maxOverzooming,this._source.minzoom));R&&(this._addTile(R.tileID),y[R.tileID.key]=R.tileID),w[A]=I}const M=u[u.length-1].overscaledZ;for(const A in this._tiles){const I=this._tiles[A];if(d[A]||!I.hasData())continue;let z=I.tileID;for(;z.overscaledZ>M;){z=z.scaledTo(z.overscaledZ-1);const R=this._tiles[z.key];if(R&&R.hasData()&&w[z.key]){d[A]=I.tileID;break}}}for(const A in y)d[A]||(this._coveredTiles[A]=!0,d[A]=y[A])}for(const y in d)this._tiles[y].clearFadeHold();const m=function(y,w){const b=[];for(const M in y)M in w||b.push(M);return b}(this._tiles,d);for(const y of m){const w=this._tiles[y];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(+y)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const r={};if(e.length===0)return r;const a={},u=e.reduce((b,M)=>Math.min(b,M.overscaledZ),1/0),d=e[0].overscaledZ,m=Math.max(d-Wl.maxOverzooming,this._source.minzoom),y=Math.max(d+Wl.maxUnderzooming,this._source.minzoom),w={};for(const b of e){const M=this._addTile(b);r[b.key]=b,M.hasData()||u<this._source.maxzoom&&(w[b.key]=b)}this._retainLoadedChildren(w,u,y,r);for(const b of e){let M=this._tiles[b.key];if(M.hasData())continue;if(b.canonical.z>=this._source.maxzoom){const I=b.children(this._source.maxzoom)[0],z=this.getTile(I);if(z&&z.hasData()){r[I.key]=I;continue}}else{const I=b.children(this._source.maxzoom);if(r[I[0].key]&&r[I[1].key]&&r[I[2].key]&&r[I[3].key])continue}let A=M.wasRequested();for(let I=b.overscaledZ-1;I>=m;--I){const z=b.scaledTo(I);if(a[z.key]||(a[z.key]=!0,M=this.getTile(z),!M&&A&&(M=this._addTile(z)),M&&(r[z.key]=z,A=M.wasRequested(),M.hasData())))break}}return r}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const r=[];let a,u=this._tiles[e].tileID;for(;u.overscaledZ>0;){if(u.key in this._loadedParentTiles){a=this._loadedParentTiles[u.key];break}r.push(u.key);const d=u.scaledTo(u.overscaledZ-1);if(a=this._getLoadedTile(d),a)break;u=d}for(const d of r)this._loadedParentTiles[d]=a}}_addTile(e){let r=this._tiles[e.key];if(r)return r;r=this._cache.getAndRemove(e),r&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));const a=!!r;if(!a){const u=this.map?this.map.painter:null;r=new d4(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,u,this._isRaster),this._loadTile(r,this._tileLoaded.bind(this,r,e.key,r.state))}return r?(r.uses++,this._tiles[e.key]=r,a||this._source.fire(new Ei("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r):null}_setTileReloadTimer(e,r){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const a=r.getExpiryTimeout();a&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},a))}_removeTile(e){const r=this._tiles[e];r&&(r.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),r.uses>0||(r.hasData()&&r.state!=="reloading"?this._cache.add(r.tileID,r,r.getExpiryTimeout()):(r.aborted=!0,this._abortTile(r),this._unloadTile(r))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,r,a){const u=[],d=this.transform;if(!d)return u;const m=d.projection.name==="globe",y=ps(d.center.lng);for(const w in this._tiles){const b=this._tiles[w];if(a&&b.clearQueryDebugViz(),b.holdingForFade())continue;let M;if(m){const A=b.tileID.canonical;if(A.z===0){const I=[Math.abs(Ee(y,...C0(A,-1))-y),Math.abs(Ee(y,...C0(A,1))-y)];M=[0,2*I.indexOf(Math.min(...I))-1]}else{const I=[Math.abs(Ee(y,...C0(A,-1))-y),Math.abs(Ee(y,...C0(A,0))-y),Math.abs(Ee(y,...C0(A,1))-y)];M=[I.indexOf(Math.min(...I))-1]}}else M=[0];for(const A of M){const I=e.containsTile(b,d,r,A);I&&u.push(I)}}return u}getVisibleCoordinates(e){const r=this.getRenderableIds(e).map(a=>this._tiles[a].tileID);for(const a of r)a.projMatrix=this.transform.calculateProjMatrix(a.toUnwrapped());return r}hasTransition(){if(this._source.hasTransition())return!0;if(P8(this._source.type))for(const e in this._tiles){const r=this._tiles[e];if(r.fadeEndTime!==void 0&&r.fadeEndTime>=qr.now())return!0}return!1}setFeatureState(e,r,a){this._state.updateState(e=e||"_geojsonTileLayer",r,a)}removeFeatureState(e,r,a){this._state.removeFeatureState(e=e||"_geojsonTileLayer",r,a)}getFeatureState(e,r){return this._state.getState(e=e||"_geojsonTileLayer",r)}setDependencies(e,r,a){const u=this._tiles[e];u&&u.setDependencies(r,a)}reloadTilesForDependencies(e,r){for(const a in this._tiles)this._tiles[a].hasDependency(e,r)&&this._reloadTile(+a,"reloading");this._cache.filter(a=>!a.hasDependency(e,r))}_preloadTiles(e,r){if(!this._sourceLoaded){const y=()=>{this._sourceLoaded&&(this._source.off("data",y),this._preloadTiles(e,r))};return void this._source.on("data",y)}const a=new Map,u=Array.isArray(e)?e:[e],d=this.map.painter.terrain,m=this.usedForTerrain&&d?d.getScaledDemTileSize():this._source.tileSize;for(const y of u){const w=y.coveringTiles({tileSize:m,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const b of w)a.set(b.key,b);this.usedForTerrain&&y.updateElevation(!1)}kt(Array.from(a.values()),(y,w)=>{const b=new d4(y,this._source.tileSize*y.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(b,M=>{this._source.type==="raster-dem"&&b.dem&&this._backfillDEM(b),w(M,b)})},r)}}function C8(n,e){const r=Math.abs(2*n.wrap)-+(n.wrap<0),a=Math.abs(2*e.wrap)-+(e.wrap<0);return n.overscaledZ-e.overscaledZ||a-r||e.canonical.y-n.canonical.y||e.canonical.x-n.canonical.x}function P8(n){return n==="raster"||n==="image"||n==="video"||n==="custom"}function C0(n,e){const r=1<<n.z;return[n.x/r+e,(n.x+1)/r+e]}Wl.maxOverzooming=10,Wl.maxUnderzooming=3;class s3{constructor(e,r,a){this._demTile=e,this._dem=this._demTile.dem,this._scale=r,this._offset=a}static create(e,r,a){const u=a||e.findDEMTileFor(r);if(!u||!u.dem)return;const d=u.dem,m=u.tileID,y=1<<r.canonical.z-m.canonical.z;return new s3(u,u.tileSize/Bt/y,[(r.canonical.x/y-m.canonical.x)*d.dim,(r.canonical.y/y-m.canonical.y)*d.dim])}tileCoordToPixel(e,r){const a=r*this._scale+this._offset[1],u=Math.floor(e*this._scale+this._offset[0]),d=Math.floor(a);return new ze(u,d)}getElevationAt(e,r,a,u){const d=e*this._scale+this._offset[0],m=r*this._scale+this._offset[1],y=Math.floor(d),w=Math.floor(m),b=this._dem;return u=!!u,a?un(un(b.get(y,w,u),b.get(y,w+1,u),m-w),un(b.get(y+1,w,u),b.get(y+1,w+1,u),m-w),d-y):b.get(y,w,u)}getElevationAtPixel(e,r,a){return this._dem.get(e,r,!!a)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Go(1,e)*this._dem.stride}}class A8{constructor(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Fs(Bt,16,0),this.featureIndexArray=new Dl,this.promoteId=r}insert(e,r,a,u,d,m=0){const y=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(a,u,d,m);const w=this.grid;for(let b=0;b<r.length;b++){const M=r[b],A=[1/0,1/0,-1/0,-1/0];for(let I=0;I<M.length;I++){const z=M[I];A[0]=Math.min(A[0],z.x),A[1]=Math.min(A[1],z.y),A[2]=Math.max(A[2],z.x),A[3]=Math.max(A[3],z.y)}A[0]<Bt&&A[1]<Bt&&A[2]>=0&&A[3]>=0&&w.insert(y,A[0],A[1],A[2],A[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Kd(new Wh(this.rawTileData)).layers,this.sourceLayerCoder=new f8(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,r,a,u){this.loadVTLayers();const d=e.params||{},m=U1(d.filter),y=e.tileResult,w=e.transform,b=y.bufferedTilespaceBounds,M=this.grid.query(b.min.x,b.min.y,b.max.x,b.max.y,(R,O,Z,J)=>Q7(y.bufferedTilespaceGeometry,R,O,Z,J));M.sort(xw);let A=null;w.elevation&&M.length>0&&(A=s3.create(w.elevation,this.tileID));const I={};let z;for(let R=0;R<M.length;R++){const O=M[R];if(O===z)continue;z=O;const Z=this.featureIndexArray.get(O);let J=null;this.loadMatchingFeature(I,Z,m,d.layers,d.availableImages,r,a,u,(le,Q,ae,he=0)=>(J||(J=Gs(le,this.tileID.canonical,e.tileTransform)),Q.queryIntersectsFeature(y,le,ae,J,this.z,e.transform,e.pixelPosMatrix,A,he)))}return I}loadMatchingFeature(e,r,a,u,d,m,y,w,b){const{featureIndex:M,bucketIndex:A,sourceLayerIndex:I,layoutVertexArrayOffset:z}=r,R=this.bucketLayerIDs[A];if(u&&!function(le,Q){for(let ae=0;ae<le.length;ae++)if(Q.indexOf(le[ae])>=0)return!0;return!1}(u,R))return;const O=this.sourceLayerCoder.decode(I),Z=this.vtLayers[O].feature(M);if(a.needGeometry){const le=Vl(Z,!0);if(!a.filter(new P(this.tileID.overscaledZ),le,this.tileID.canonical))return}else if(!a.filter(new P(this.tileID.overscaledZ),Z))return;const J=this.getId(Z,O);for(let le=0;le<R.length;le++){const Q=R[le];if(u&&u.indexOf(Q)<0)continue;const ae=m[Q];if(!ae)continue;let he={};J!==void 0&&w&&(he=w.getState(ae.sourceLayer||"_geojsonTileLayer",J));const ue=Zt({},y[Q]);ue.paint=I8(ue.paint,ae.paint,Z,he,d),ue.layout=I8(ue.layout,ae.layout,Z,he,d);const De=!b||b(Z,ae,he,z);if(!De)continue;const Ie=new m8(Z,this.z,this.x,this.y,J);Ie.layer=ue;let Ze=e[Q];Ze===void 0&&(Ze=e[Q]=[]),Ze.push({featureIndex:M,feature:Ie,intersectionZ:De})}}lookupSymbolFeatures(e,r,a,u,d,m,y,w){const b={};this.loadVTLayers();const M=U1(d);for(const A of e)this.loadMatchingFeature(b,{bucketIndex:a,sourceLayerIndex:u,featureIndex:A,layoutVertexArrayOffset:0},M,m,y,w,r);return b}loadFeature(e){const{featureIndex:r,sourceLayerIndex:a}=e;this.loadVTLayers();const u=this.sourceLayerCoder.decode(a),d=this.vtFeatures[u];if(d[r])return d[r];const m=this.vtLayers[u].feature(r);return d[r]=m,m}hasLayer(e){for(const r of this.bucketLayerIDs)for(const a of r)if(e===a)return!0;return!1}getId(e,r){let a=e.id;if(this.promoteId){const u=typeof this.promoteId=="string"?this.promoteId:this.promoteId[r];u!=null&&(a=e.properties[u]),typeof a=="boolean"&&(a=Number(a))}return a}}function I8(n,e,r,a,u){return on(n,(d,m)=>{const y=e instanceof Y?e.get(m):null;return y&&y.evaluate?y.evaluate(r,a,u):y})}function xw(n,e){return e-n}Ct(A8,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class k8{constructor(e,r){this.width=e,this.height=r,this.nextRow=0,this.image=new $s({width:e,height:r}),this.positions={},this.uploaded=!1}getDash(e,r){const a=this.getKey(e,r);return this.positions[a]}trim(){const e=this.width,r=this.height=On(this.nextRow);this.image.resize({width:e,height:r})}getKey(e,r){return e.join(",")+r}getDashRanges(e,r,a){const u=[];let d=e.length%2==1?-e[e.length-1]*a:0,m=e[0]*a,y=!0;u.push({left:d,right:m,isDash:y,zeroLength:e[0]===0});let w=e[0];for(let b=1;b<e.length;b++){y=!y;const M=e[b];d=w*a,w+=M,m=w*a,u.push({left:d,right:m,isDash:y,zeroLength:M===0})}return u}addRoundDash(e,r,a){const u=r/2;for(let d=-a;d<=a;d++){const m=this.width*(this.nextRow+a+d);let y=0,w=e[y];for(let b=0;b<this.width;b++){b/w.right>1&&(w=e[++y]);const M=Math.abs(b-w.left),A=Math.abs(b-w.right),I=Math.min(M,A);let z;const R=d/a*(u+1);if(w.isDash){const O=u-Math.abs(R);z=Math.sqrt(I*I+O*O)}else z=u-Math.sqrt(I*I+R*R);this.image.data[m+b]=Math.max(0,Math.min(255,z+128))}}}addRegularDash(e,r){for(let w=e.length-1;w>=0;--w){const b=e[w],M=e[w+1];b.zeroLength?e.splice(w,1):M&&M.isDash===b.isDash&&(M.left=b.left,e.splice(w,1))}const a=e[0],u=e[e.length-1];a.isDash===u.isDash&&(a.left=u.left-this.width,u.right=a.right+this.width);const d=this.width*this.nextRow;let m=0,y=e[m];for(let w=0;w<this.width;w++){w/y.right>1&&(y=e[++m]);const b=Math.abs(w-y.left),M=Math.abs(w-y.right),A=Math.min(b,M);this.image.data[d+w]=Math.max(0,Math.min(255,(y.isDash?A:-A)+r+128))}}addDash(e,r){const a=this.getKey(e,r);if(this.positions[a])return this.positions[a];const u=r==="round",d=u?7:0,m=2*d+1;if(this.nextRow+m>this.height)return Un("LineAtlas out of space"),null;e.length===0&&e.push(1);let y=0;for(let M=0;M<e.length;M++)e[M]<0&&(Un("Negative value is found in line dasharray, replacing values with 0"),e[M]=0),y+=e[M];if(y!==0){const M=this.width/y,A=this.getDashRanges(e,this.width,M);u?this.addRoundDash(A,M,d):this.addRegularDash(A,r==="square"?.5*M:0)}const w=this.nextRow+d;this.nextRow+=m;const b={tl:[w,d],br:[y,0]};return this.positions[a]=b,b}}Ct(k8,"LineAtlas");const L8=1*Zo;class z8{constructor(e){const r={},a=[];for(const y in e){const w=e[y],b=r[y]={};for(const M in w.glyphs){const A=w.glyphs[+M];if(!A||A.bitmap.width===0||A.bitmap.height===0)continue;const I=A.metrics.localGlyph?L8:1,z={x:0,y:0,w:A.bitmap.width+2*I,h:A.bitmap.height+2*I};a.push(z),b[M]=z}}const{w:u,h:d}=e4(a),m=new $s({width:u||1,height:d||1});for(const y in e){const w=e[y];for(const b in w.glyphs){const M=w.glyphs[+b];if(!M||M.bitmap.width===0||M.bitmap.height===0)continue;const A=r[y][b],I=M.metrics.localGlyph?L8:1;$s.copy(M.bitmap,m,{x:0,y:0},{x:A.x+I,y:A.y+I},M.bitmap)}}this.image=m,this.positions=r}}Ct(z8,"GlyphAtlas");class ww{constructor(e){this.tileID=new si(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Zl(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,r,a,u,d){this.status="parsing",this.data=e,this.collisionBoxArray=new Sn;const m=new f8(Object.keys(e.layers).sort()),y=new A8(this.tileID,this.promoteId);y.bucketLayerIDs=[];const w={},b=new k8(256,256),M={featureIndex:y,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:b,availableImages:a},A=r.familiesBySource[this.source];for(const he in A){const ue=e.layers[he];if(!ue)continue;let De=!1,Ie=!1;for(const Be of A[he])Be[0].type==="symbol"?De=!0:Ie=!0;if(this.isSymbolTile===!0&&!De||this.isSymbolTile===!1&&!Ie)continue;ue.version===1&&Un(`Vector tile source "${this.source}" layer "${he}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ze=m.encode(he),st=[];for(let Be=0;Be<ue.length;Be++){const Xe=ue.feature(Be),Ke=y.getId(Xe,he);st.push({feature:Xe,id:Ke,index:Be,sourceLayerIndex:Ze})}for(const Be of A[he]){const Xe=Be[0];this.isSymbolTile!==void 0&&Xe.type==="symbol"!==this.isSymbolTile||Xe.minzoom&&this.zoom<Math.floor(Xe.minzoom)||Xe.maxzoom&&this.zoom>=Xe.maxzoom||Xe.visibility!=="none"&&(g4(Be,this.zoom,a),(w[Xe.id]=Xe.createBucket({index:y.bucketLayerIDs.length,layers:Be,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ze,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:a})).populate(st,M,this.tileID.canonical,this.tileTransform),y.bucketLayerIDs.push(Be.map(Ke=>Ke.id)))}}let I,z,R,O;b.trim();const Z={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},J=()=>{if(I)return d(I);if(z&&R&&O){const he=new z8(z),ue=new Nf(R,O);for(const De in w){const Ie=w[De];Ie instanceof ka?(g4(Ie.layers,this.zoom,a),qx(Ie,z,he.positions,R,ue.iconPositions,this.showCollisionBoxes,a,this.tileID.canonical,this.tileZoom,this.projection)):Ie.hasPattern&&(Ie instanceof Gh||Ie instanceof Oh||Ie instanceof m0)&&(g4(Ie.layers,this.zoom,a),Ie.addFeatures(M,this.tileID.canonical,ue.patternPositions,a,this.tileTransform))}this.status="done",d(null,{buckets:Nt(w).filter(De=>!De.isEmpty()),featureIndex:y,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:he.image,lineAtlas:b,imageAtlas:ue,glyphMap:this.returnDependencies?z:null,iconMap:this.returnDependencies?R:null,glyphPositions:this.returnDependencies?he.positions:null})}},le=on(M.glyphDependencies,he=>Object.keys(he).map(Number));Object.keys(le).length?u.send("getGlyphs",{uid:this.uid,stacks:le},(he,ue)=>{I||(I=he,z=ue,J())},void 0,!1,Z):z={};const Q=Object.keys(M.iconDependencies);Q.length?u.send("getImages",{icons:Q,source:this.source,tileID:this.tileID,type:"icons"},(he,ue)=>{I||(I=he,R=ue,J())},void 0,!1,Z):R={};const ae=Object.keys(M.patternDependencies);ae.length?u.send("getImages",{icons:ae,source:this.source,tileID:this.tileID,type:"patterns"},(he,ue)=>{I||(I=he,O=ue,J())},void 0,!1,Z):O={},J()}}function g4(n,e,r){const a=new P(e);for(const u of n)u.recalculate(a,r)}class D8{constructor(e){this.entries={},this.scheduler=e}request(e,r,a,u){const d=this.entries[e]=this.entries[e]||{callbacks:[]};if(d.result){const[m,y]=d.result;return this.scheduler?this.scheduler.add(()=>{u(m,y)},r):u(m,y),()=>{}}return d.callbacks.push(u),d.cancel||(d.cancel=a((m,y)=>{d.result=[m,y];for(const w of d.callbacks)this.scheduler?this.scheduler.add(()=>{w(m,y)},r):w(m,y);setTimeout(()=>delete this.entries[e],3e3)})),()=>{d.result||(d.callbacks=d.callbacks.filter(m=>m!==u),d.callbacks.length||(d.cancel(),delete this.entries[e]))}}}function R8(n,e,r){const a=JSON.stringify(n.request);return n.data&&(this.deduped.entries[a]={result:[null,n.data]}),this.deduped.request(a,{type:"parseTile",isSymbolTile:n.isSymbolTile,zoom:n.tileZoom},u=>{const d=ss(n.request,(m,y,w,b)=>{m?u(m):y&&u(null,{vectorTile:r?void 0:new Kd(new Wh(y)),rawData:y,cacheControl:w,expires:b})});return()=>{d.cancel(),u()}},e)}const F8=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class y4{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,a]=new Uint8Array(e,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");const u=a>>4;if(u!==1)throw new Error(`Got v${u} data when expected v1.`);const d=F8[15&a];if(!d)throw new Error("Unrecognized array type.");const[m]=new Uint16Array(e,2,1),[y]=new Uint32Array(e,4,1);return new y4(y,m,d,e)}constructor(e,r=64,a=Float64Array,u){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=a,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const d=F8.indexOf(this.ArrayType),m=2*e*this.ArrayType.BYTES_PER_ELEMENT,y=e*this.IndexArrayType.BYTES_PER_ELEMENT,w=(8-y%8)%8;if(d<0)throw new Error(`Unexpected typed array class: ${a}.`);u&&u instanceof ArrayBuffer?(this.data=u,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+y+w,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+m+y+w),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+y+w,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+d]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=e)}add(e,r){const a=this._pos>>1;return this.ids[a]=a,this.coords[this._pos++]=e,this.coords[this._pos++]=r,a}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return v4(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,r,a,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:d,coords:m,nodeSize:y}=this,w=[0,d.length-1,0],b=[];for(;w.length;){const M=w.pop()||0,A=w.pop()||0,I=w.pop()||0;if(A-I<=y){for(let Z=I;Z<=A;Z++){const J=m[2*Z],le=m[2*Z+1];J>=e&&J<=a&&le>=r&&le<=u&&b.push(d[Z])}continue}const z=I+A>>1,R=m[2*z],O=m[2*z+1];R>=e&&R<=a&&O>=r&&O<=u&&b.push(d[z]),(M===0?e<=R:r<=O)&&(w.push(I),w.push(z-1),w.push(1-M)),(M===0?a>=R:u>=O)&&(w.push(z+1),w.push(A),w.push(1-M))}return b}within(e,r,a){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:u,coords:d,nodeSize:m}=this,y=[0,u.length-1,0],w=[],b=a*a;for(;y.length;){const M=y.pop()||0,A=y.pop()||0,I=y.pop()||0;if(A-I<=m){for(let Z=I;Z<=A;Z++)O8(d[2*Z],d[2*Z+1],e,r)<=b&&w.push(u[Z]);continue}const z=I+A>>1,R=d[2*z],O=d[2*z+1];O8(R,O,e,r)<=b&&w.push(u[z]),(M===0?e-a<=R:r-a<=O)&&(y.push(I),y.push(z-1),y.push(1-M)),(M===0?e+a>=R:r+a>=O)&&(y.push(z+1),y.push(A),y.push(1-M))}return w}}function v4(n,e,r,a,u,d){if(u-a<=r)return;const m=a+u>>1;B8(n,e,m,a,u,d),v4(n,e,r,a,m-1,1-d),v4(n,e,r,m+1,u,1-d)}function B8(n,e,r,a,u,d){for(;u>a;){if(u-a>600){const b=u-a+1,M=r-a+1,A=Math.log(b),I=.5*Math.exp(2*A/3),z=.5*Math.sqrt(A*I*(b-I)/b)*(M-b/2<0?-1:1);B8(n,e,r,Math.max(a,Math.floor(r-M*I/b+z)),Math.min(u,Math.floor(r+(b-M)*I/b+z)),d)}const m=e[2*r+d];let y=a,w=u;for(P0(n,e,a,r),e[2*u+d]>m&&P0(n,e,a,u);y<w;){for(P0(n,e,y,w),y++,w--;e[2*y+d]<m;)y++;for(;e[2*w+d]>m;)w--}e[2*a+d]===m?P0(n,e,a,w):(w++,P0(n,e,w,u)),w<=r&&(a=w+1),r<=w&&(u=w-1)}}function P0(n,e,r,a){x4(n,r,a),x4(e,2*r,2*a),x4(e,2*r+1,2*a+1)}function x4(n,e,r){const a=n[e];n[e]=n[r],n[r]=a}function O8(n,e,r,a){const u=n-r,d=e-a;return u*u+d*d}s.ARRAY_TYPE=ki,s.AUTH_ERR_MSG=de,s.Aabb=oi,s.Actor=class{constructor(n,e,r){this.target=n,this.parent=e,this.mapId=r,this.callbacks={},this.cancelCallbacks={},Io(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=ji()?n:C,this.scheduler=new fw}send(n,e,r,a,u=!1,d){const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=d,this.callbacks[m]=r);const y=os(this.globalScope)?void 0:[];return this.target.postMessage({id:m,type:n,hasCallback:!!r,targetMapId:a,mustQueue:u,sourceMapId:this.mapId,data:Ta(e,y)},y),{cancel:()=>{r&&delete this.callbacks[m],this.target.postMessage({id:m,type:"<cancel>",targetMapId:a,sourceMapId:this.mapId})}}}receive(n){const e=n.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if(e.type==="<cancel>"){const a=this.cancelCallbacks[r];delete this.cancelCallbacks[r],a&&a.cancel()}else if(e.mustQueue||ji()){const a=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add(()=>this.processTask(r,e),a&&a.metadata||{type:"message"})}else this.processTask(r,e)}processTask(n,e){if(e.type==="<response>"){const r=this.callbacks[n];delete this.callbacks[n],r&&(e.error?r(Bs(e.error)):r(null,Bs(e.data)))}else{const r=os(this.globalScope)?void 0:[],a=e.hasCallback?(d,m)=>{delete this.cancelCallbacks[n],this.target.postMessage({id:n,type:"<response>",sourceMapId:this.mapId,error:d?Ta(d):null,data:Ta(m,r)},r)}:d=>{},u=Bs(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,u,a);else if(this.parent.getWorkerSource){const d=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,d[0],u.source)[d[1]](u,a)}else a(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=Vh,s.Color=nr,s.ColorMode=gs,s.CullFaceMode=Wo,s.DEMData=o3,s.DataConstantProperty=B,s.DedupedRequest=D8,s.DepthMode=uc,s.EXTENT=Bt,s.Elevation=class{isDataAvailableAtPoint(n){const e=this._source();if(this.isUsingMockSource()||!e||n.y<0||n.y>1)return!1;const r=e.getSource().maxzoom,a=1<<r,u=Math.floor(n.x),d=Math.floor((n.x-u)*a),m=Math.floor(n.y*a),y=this.findDEMTileFor(new si(r,u,r,d,m));return!(!y||!y.dem)}getAtPointOrZero(n,e=0){return this.getAtPoint(n,e)||0}getAtPoint(n,e,r=!0){if(this.isUsingMockSource())return null;e==null&&(e=null);const a=this._source();if(!a||n.y<0||n.y>1)return e;const u=a.getSource().maxzoom,d=1<<u,m=Math.floor(n.x),y=n.x-m,w=new si(u,m,u,Math.floor(y*d),Math.floor(n.y*d)),b=this.findDEMTileFor(w);if(!b||!b.dem)return e;const M=b.dem,A=1<<b.tileID.canonical.z,I=(y*A-b.tileID.canonical.x)*M.dim,z=(n.y*A-b.tileID.canonical.y)*M.dim,R=Math.floor(I),O=Math.floor(z);return(r?this.exaggeration():1)*un(un(M.get(R,O),M.get(R,O+1),z-O),un(M.get(R+1,O),M.get(R+1,O+1),z-O),I-R)}getAtTileOffset(n,e,r){const a=1<<n.canonical.z;return this.getAtPointOrZero(new K1(n.wrap+(n.canonical.x+e/Bt)/a,(n.canonical.y+r/Bt)/a))}getAtTileOffsetFunc(n,e,r,a){return u=>{const d=this.getAtTileOffset(n,u.x,u.y),m=a.upVector(n.canonical,u.x,u.y);return Xi(m,m,d*a.upVectorScale(n.canonical,e,r).metersToTile),m}}getForTilePoints(n,e,r,a){if(this.isUsingMockSource())return!1;const u=s3.create(this,n,a);return!!u&&(e.forEach(d=>{d[2]=this.exaggeration()*u.getElevationAt(d[0],d[1],r)}),!0)}getMinMaxForTile(n){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(n);if(!e||!e.dem)return null;const r=e.dem.tree,a=e.tileID,u=1<<n.canonical.z-a.canonical.z;let d=n.canonical.x/u-a.canonical.x,m=n.canonical.y/u-a.canonical.y,y=0;for(let w=0;w<n.canonical.z-a.canonical.z&&!r.leaves[y];w++){d*=2,m*=2;const b=2*Math.floor(m)+Math.floor(d);y=r.childOffsets[y]+b,d%=1,m%=1}return{min:this.exaggeration()*r.minimums[y],max:this.exaggeration()*r.maximums[y]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(n,e,r){throw new Error("Pure virtual method called.")}pointCoordinate(n){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(n){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=sn,s.EvaluationParameters=P,s.Event=Ei,s.Evented=Rn,s.FillExtrusionBucket=m0,s.Frustum=Cd,s.FrustumCorners=Md,s.GLOBE_RADIUS=hs,s.GLOBE_SCALE_MATCH_LATITUDE=45,s.GLOBE_ZOOM_THRESHOLD_MAX=F7,s.GLOBE_ZOOM_THRESHOLD_MIN=Pd,s.GlobeSharedBuffers=class{constructor(n){this._createGrid(n),this._createPoles(n)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const n of this._poleSegments)n.destroy();for(const n of this._gridSegments)n.withSkirts.destroy(),n.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const n of this._wireframeSegments)n.destroy()}}_fillGridMeshWithLods(n,e){const r=new ot,a=new Lt,u=[],d=n+1+2,m=e[0]+1,y=e[0]+1+(1+e.length),w=(b,M,A)=>{let I=b===d-1?b-2:b===0?b:b-1;return I+=A?24575:0,[I,M]};for(let b=0;b<d;++b)r.emplaceBack(...w(b,0,!0));for(let b=0;b<m;++b)for(let M=0;M<d;++M)r.emplaceBack(...w(M,b,(M===0||M===d-1)&&!0));for(let b=0;b<e.length;++b){const M=e[b];for(let A=0;A<d;++A)r.emplaceBack(...w(A,M,!0))}for(let b=0;b<e.length;++b){const M=a.length,A=e[b]+1+2,I=new Lt;for(let O=0;O<A-1;O++){const Z=O===A-2,J=Z?d*(y-e.length+b-O):d;for(let le=0;le<d-1;le++){const Q=O*d+le;O===0||Z||le===0||le===d-2?(I.emplaceBack(Q+1,Q,Q+J),I.emplaceBack(Q+J,Q+J+1,Q+1)):(a.emplaceBack(Q+1,Q,Q+J),a.emplaceBack(Q+J,Q+J+1,Q+1))}}const z=lr.simpleSegment(0,M,r.length,a.length-M);for(let O=0;O<I.uint16.length;O+=3)a.emplaceBack(I.uint16[O],I.uint16[O+1],I.uint16[O+2]);const R=lr.simpleSegment(0,M,r.length,a.length-M);u.push({withoutSkirts:z,withSkirts:R})}return{vertices:r,indices:a,segments:u}}_createGrid(n){const e=this._fillGridMeshWithLods(Nl,o0);this._gridSegments=e.segments,this._gridBuffer=n.createVertexBuffer(e.vertices,i0.members),this._gridIndexBuffer=n.createIndexBuffer(e.indices,!0)}_createPoles(n){const e=new Lt;for(let u=0;u<=Nl;u++)e.emplaceBack(0,u+1,u+2);this._poleIndexBuffer=n.createIndexBuffer(e,!0);const r=new En,a=new En;this._poleSegments=[];for(let u=0,d=0;u<Pd;u++){const m=360/(1<<u);r.emplaceBack(0,-hs,0,.5,0),a.emplaceBack(0,-hs,0,.5,1);for(let y=0;y<=Nl;y++){const w=y/Nl,b=un(0,m,w),[M,A,I]=q1(fv,mv,b,hs);r.emplaceBack(M,A,I,w,0),a.emplaceBack(M,A,I,w,1)}this._poleSegments.push(lr.simpleSegment(d,0,66,64)),d+=66}this._poleNorthVertexBuffer=n.createVertexBuffer(r,D7,!1),this._poleSouthVertexBuffer=n.createVertexBuffer(a,D7,!1)}getGridBuffers(n,e){return[this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[n].withSkirts:this._gridSegments[n].withoutSkirts]}getPoleBuffers(n){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[n]]}getWirefameBuffers(n,e){if(!this._wireframeSegments){const r=new Mr,a=Nl,u=a+1+2,d=1;this._wireframeSegments=[];for(let m=0,y=0;m<o0.length;m++){const w=o0[m];for(let M=d;M<w+d;M++)for(let A=d;A<a+d;A++){const I=M*u+A;r.emplaceBack(I,I+1),r.emplaceBack(I,I+u),r.emplaceBack(I,I+u+1)}const b=w*a*3;this._wireframeSegments.push(lr.simpleSegment(0,y,(w+1)*u,b)),y+=b}this._wireframeIndexBuffer=n.createIndexBuffer(r)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},s.GlyphManager=oc,s.ImagePosition=t4,s.KDBush=y4,s.LivePerformanceUtils=Dn,s.LngLat=Mn,s.LngLatBounds=Ca,s.LocalGlyphMode=i4,s.MAX_MERCATOR_LATITUDE=Vr,s.MercatorCoordinate=K1,s.ONE_EM=Lr,s.OverscaledTileID=si,s.PerformanceMarkers=Hn,s.Point=ze,s.Properties=re,s.RGBAImage=Li,s.Ray=Sd,s.RequestManager=class{constructor(n,e,r){this._transformRequestFn=n,this._customAccessToken=e,this._silenceAuthErrors=!!r,this._createSkuToken()}_createSkuToken(){const n=function(){let e="";for(let r=0;r<10;r++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ee,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=n.token,this._skuTokenExpiresAt=n.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(n,e){return this._transformRequestFn&&this._transformRequestFn(n,e)||{url:n}}normalizeStyleURL(n,e){if(!ve(n))return n;const r=pt(n);return r.path=`/styles/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeGlyphsURL(n,e){if(!ve(n))return n;const r=pt(n);return r.path=`/fonts/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeSourceURL(n,e,r,a){if(!ve(n))return n;const u=pt(n);return u.path=`/v4/${u.authority}.json`,u.params.push("secure"),r&&u.params.push(`language=${r}`),a&&u.params.push(`worldview=${a}`),this._makeAPIURL(u,this._customAccessToken||e)}normalizeSpriteURL(n,e,r,a){const u=pt(n);return ve(n)?(u.path=`/styles/v1${u.path}/sprite${e}${r}`,this._makeAPIURL(u,this._customAccessToken||a)):(u.path+=`${e}${r}`,K(u))}normalizeTileURL(n,e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),n&&!ve(n))return n;const a=pt(n);a.path=a.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||r&&a.authority!=="raster"&&r===512?"@2x":""}${G.supported?".webp":"$1"}`),a.authority==="raster"?a.path=`/${U.RASTER_URL_PREFIX}${a.path}`:(a.path=a.path.replace(/^.+\/v4\//,"/"),a.path=`/${U.TILE_URL_VERSION}${a.path}`);const u=this._customAccessToken||function(d){for(const m of d){const y=m.match(/^access_token=(.*)$/);if(y)return y[1]}return null}(a.params)||U.ACCESS_TOKEN;return U.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&a.params.push(`sku=${this._skuToken}`),this._makeAPIURL(a,u)}canonicalizeTileURL(n,e){const r=pt(n);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return n;let a="mapbox://";r.path.match(/^\/raster\/v1\//)?a+=`raster/${r.path.replace(`/${U.RASTER_URL_PREFIX}/`,"")}`:a+=`tiles/${r.path.replace(`/${U.TILE_URL_VERSION}/`,"")}`;let u=r.params;return e&&(u=u.filter(d=>!d.match(/^access_token=/))),u.length&&(a+=`?${u.join("&")}`),a}canonicalizeTileset(n,e){const r=!!e&&ve(e),a=[];for(const u of n.tiles||[])Pe(u)?a.push(this.canonicalizeTileURL(u,r)):a.push(u);return a}_makeAPIURL(n,e){const r="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",a=pt(U.API_URL);if(n.protocol=a.protocol,n.authority=a.authority,n.protocol==="http"){const u=n.params.indexOf("secure");u>=0&&n.params.splice(u,1)}if(a.path!=="/"&&(n.path=`${a.path}${n.path}`),!U.REQUIRE_ACCESS_TOKEN)return K(n);if(e=e||U.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${r}`);if(e[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${r}`)}return n.params=n.params.filter(u=>u.indexOf("access_token")===-1),n.params.push(`access_token=${e||""}`),K(n)}},s.ResourceType=Or,s.SegmentVector=lr,s.SourceCache=Wl,s.StencilMode=f4,s.StructArrayLayout1ui2=Ii,s.StructArrayLayout2f1f2i16=Ot,s.StructArrayLayout2i4=ot,s.StructArrayLayout2ui4=Mr,s.StructArrayLayout3f12=en,s.StructArrayLayout3ui6=Lt,s.StructArrayLayout4i8=qe,s.StructArrayLayout5f20=En,s.Texture=M0,s.Tile=d4,s.Transitionable=F,s.Uniform1f=Sh,s.Uniform1i=class extends Ns{constructor(n){super(n),this.current=0}set(n,e,r){this.fetchUniformLocation(n,e)&&this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},s.Uniform2f=class extends Ns{constructor(n){super(n),this.current=[0,0]}set(n,e,r){this.fetchUniformLocation(n,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1])))}},s.Uniform3f=class extends Ns{constructor(n){super(n),this.current=[0,0,0]}set(n,e,r){this.fetchUniformLocation(n,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2])))}},s.Uniform4f=g7,s.UniformColor=y7,s.UniformMatrix2f=class extends Ns{constructor(n){super(n),this.current=Jy}set(n,e,r){if(this.fetchUniformLocation(n,e)){for(let a=0;a<4;a++)if(r[a]!==this.current[a]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}}},s.UniformMatrix3f=class extends Ns{constructor(n){super(n),this.current=Yy}set(n,e,r){if(this.fetchUniformLocation(n,e)){for(let a=0;a<9;a++)if(r[a]!==this.current[a]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}}},s.UniformMatrix4f=class extends Ns{constructor(n){super(n),this.current=Ky}set(n,e,r){if(this.fetchUniformLocation(n,e)){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let a=1;a<16;a++)if(r[a]!==this.current[a]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}}},s.UnwrappedTileID=Sf,s.ValidationError=Et,s.VectorTileFeature=Nh,s.VectorTileWorkerSource=class extends Rn{constructor(n,e,r,a,u){super(),this.actor=n,this.layerIndex=e,this.availableImages=r,this.loadVectorData=u||R8,this.loading={},this.loaded={},this.deduped=new D8(n.scheduler),this.isSpriteLoaded=a,this.scheduler=n.scheduler}loadTile(n,e){const r=n.uid,a=n&&n.request,u=a&&a.collectResourceTiming,d=this.loading[r]=new ww(n);d.abort=this.loadVectorData(n,(m,y)=>{const w=!this.loading[r];if(delete this.loading[r],w||m||!y)return d.status="done",w||(this.loaded[r]=d),e(m);const b=y.rawData,M={};y.expires&&(M.expires=y.expires),y.cacheControl&&(M.cacheControl=y.cacheControl),d.vectorTile=y.vectorTile||new Kd(new Wh(b));const A=()=>{d.parse(d.vectorTile,this.layerIndex,this.availableImages,this.actor,(I,z)=>{if(I||!z)return e(I);const R={};if(u){const O=po(a);O.length>0&&(R.resourceTiming=JSON.parse(JSON.stringify(O)))}e(null,Zt({rawTileData:b.slice(0)},z,M,R))})};this.isSpriteLoaded?A():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(A,{type:"parseTile",isSymbolTile:n.isSymbolTile,zoom:n.tileZoom}):A()}),this.loaded=this.loaded||{},this.loaded[r]=d})}reloadTile(n,e){const r=this.loaded,a=n.uid,u=this;if(r&&r[a]){const d=r[a];d.showCollisionBoxes=n.showCollisionBoxes,d.enableTerrain=!!n.enableTerrain,d.projection=n.projection,d.tileTransform=Zl(n.tileID.canonical,n.projection);const m=(y,w)=>{const b=d.reloadCallback;b&&(delete d.reloadCallback,d.parse(d.vectorTile,u.layerIndex,this.availableImages,u.actor,b)),e(y,w)};d.status==="parsing"?d.reloadCallback=m:d.status==="done"&&(d.vectorTile?d.parse(d.vectorTile,this.layerIndex,this.availableImages,this.actor,m):m())}}abortTile(n,e){const r=n.uid,a=this.loading[r];a&&(a.abort&&a.abort(),delete this.loading[r]),e()}removeTile(n,e){const r=this.loaded,a=n.uid;r&&r[a]&&delete r[a],e()}},s.WritingMode=Yi,s.ZoomDependentExpression=Cl,s.add=Vs,s.addDynamicAttributes=n3,s.adjoint=function(n,e){var r=e[0],a=e[1],u=e[2],d=e[3],m=e[4],y=e[5],w=e[6],b=e[7],M=e[8];return n[0]=m*M-y*b,n[1]=u*b-a*M,n[2]=a*y-u*m,n[3]=y*w-d*M,n[4]=r*M-u*w,n[5]=u*d-r*y,n[6]=d*b-m*w,n[7]=a*w-r*b,n[8]=r*m-a*d,n},s.asyncAll=kt,s.bezier=Je,s.bindAll=Io,s.boundsAttributes=g8,s.bufferConvexPolygon=function(n,e){const r=[];for(let a=0;a<n.length;a++){const u=yt(a-1,-1,n.length-1),d=yt(a+1,-1,n.length-1),m=n[a],y=n[d],w=n[u].sub(m).unit(),b=y.sub(m).unit(),M=b.angleWithSep(w.x,w.y),A=w.add(b).unit().mult(-1*e/Math.sin(M/2));r.push(m.add(A))}return r},s.cacheEntryPossiblyAdded=function(n){Ps++,Ps>Cs&&(n.getActor().send("enforceCacheSizeLimit",lo),Ps=0)},s.calculateGlobeLabelMatrix=function(n,e){const{x:r,y:a}=n.point,u=j7(r,a,n.worldSize/n._pixelsPerMercatorPixel,0,0);return Bl(u,u,kd(ds(e)))},s.calculateGlobeMatrix=function(n){const{x:e,y:r}=n.point,{lng:a,lat:u}=n._center;return j7(e,r,n.worldSize,a,u)},s.calculateGlobeMercatorMatrix=function(n){const e=n.pixelsPerMeter,r=e/Go(1,n.center.lat),a=jo(new Float64Array(16));return Ju(a,a,[n.point.x,n.point.y,0]),Ol(a,a,[r,r,e]),Float32Array.from(a)},s.circumferenceAtLatitude=zd,s.clamp=Ee,s.clearTileCache=function(n){if(!Zr())return;const e=C.caches.delete(Qr);n&&e.catch(n).then(()=>n())},s.clipLine=Qf,s.clone=function(n){var e=new ki(16);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},s.clone$1=yr,s.collisionCircleLayout=vx,s.config=U,s.conjugate=function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],n},s.create=function(){var n=new ki(16);return ki!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},s.create$1=w7,s.createExpression=xa,s.createLayout=be,s.createStyleLayer=function(n){return n.type==="custom"?new uw(n):new dw[n.type](n)},s.cross=Ed,s.degToRad=St,s.distance=function(n,e){return Math.hypot(e[0]-n[0],e[1]-n[1],e[2]-n[2])},s.div=function(n,e,r){return n[0]=e[0]/r[0],n[1]=e[1]/r[1],n[2]=e[2]/r[2],n},s.dot=yo,s.earthRadius=l0,s.ease=it,s.easeCubicInOut=Ve,s.ecefToLatLng=function([n,e,r]){const a=Math.hypot(n,e,r),u=Math.atan2(n,r),d=.5*Math.PI-Math.acos(-e/a);return new Mn($t(u),$t(d))},s.emitValidationErrors=vh,s.endsWith=rs,s.enforceCacheSizeLimit=function(n){co(),Br&&Br.then(e=>{e.keys().then(r=>{for(let a=0;a<r.length-n;a++)e.delete(r[a])})})},s.evaluateSizeForFeature=$h,s.evaluateSizeForZoom=tc,s.evaluateVariableOffset=i8,s.evented=g,s.exactEquals=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]},s.exactEquals$1=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]},s.exported=qr,s.exported$1=G,s.extend=Zt,s.extend$1=Hr,s.fillExtrusionHeightLift=bf,s.filterObject=tr,s.fromMat4=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],n},s.fromQuat=function(n,e){var r=e[0],a=e[1],u=e[2],d=e[3],m=r+r,y=a+a,w=u+u,b=r*m,M=a*m,A=a*y,I=u*m,z=u*y,R=u*w,O=d*m,Z=d*y,J=d*w;return n[0]=1-A-R,n[1]=M+J,n[2]=I-Z,n[3]=0,n[4]=M-J,n[5]=1-b-R,n[6]=z+O,n[7]=0,n[8]=I+Z,n[9]=z-O,n[10]=1-b-A,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},s.fromRotation=function(n,e){var r=Math.sin(e),a=Math.cos(e);return n[0]=a,n[1]=r,n[2]=0,n[3]=-r,n[4]=a,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},s.fromScaling=T7,s.furthestTileCorner=function(n){const e=Math.round((n+45+360)%360/90)%4;return He[e]},s.getAABBPointSquareDist=function(n,e,r){let a=0;for(let u=0;u<2;++u){const d=r?r[u]:0;n[u]>d&&(a+=(n[u]-d)*(n[u]-d)),e[u]<d&&(a+=(d-e[u])*(d-e[u]))}return a},s.getAnchorAlignment=r4,s.getAnchorJustification=s4,s.getBounds=function(n){let e=1/0,r=1/0,a=-1/0,u=-1/0;for(const d of n)e=Math.min(e,d.x),r=Math.min(r,d.y),a=Math.max(a,d.x),u=Math.max(u,d.y);return{min:new ze(e,r),max:new ze(a,u)}},s.getColumn=ao,s.getDefaultExportFromCjs=oe,s.getGridMatrix=function(n,e,r,a){const u=e.getNorth(),d=e.getSouth(),m=e.getWest(),y=e.getEast(),w=1<<n.z,b=y-m,M=u-d,A=b/Nl,I=-M/o0[r],z=[0,A,0,I,0,0,u,m,0];if(n.z>0){const R=180/a;b7(z,z,[R/b+1,0,0,0,R/M+1,0,-.5*R/A,.5*R/I,1])}return z[2]=w,z[5]=n.x,z[8]=n.y,z},s.getImage=ie,s.getJSON=function(n,e){return ho(Zt(n,{type:"json"}),e)},s.getLatitudinalLod=function(n){const e=Vr-5;n=Ee(n,-e,e)/e*90;const r=Math.pow(Math.abs(Math.sin(St(n))),3);return Math.round(r*(o0.length-1))},s.getMapSessionAPI=Vt,s.getPerformanceMeasurement=po,s.getProjection=d8,s.getRTLTextPluginStatus=v,s.getReferrer=uo,s.getTilePoint=function(n,{x:e,y:r},a=0){return new ze(((e-a)*n.scale-n.x)*Bt,(r*n.scale-n.y)*Bt)},s.getTileVec3=function(n,e,r=0){return W1(((e.x-r)*n.scale-n.x)*Bt,(e.y*n.scale-n.y)*Bt,Z7(e.z,e.y))},s.getVideo=function(n,e){const r=C.document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(let a=0;a<n.length;a++){const u=C.document.createElement("source");As(n[a])||(r.crossOrigin="Anonymous"),u.src=n[a],r.appendChild(u)}return{cancel:()=>{}}},s.globeCenterToScreenPoint=function(n){const e=[0,0,0],r=jo(new Float64Array(16));return Bl(r,n.pixelMatrix,n.globeMatrix),rr(e,e,r),new ze(e[0],e[1])},s.globeDenormalizeECEF=kd,s.globeECEFOrigin=function(n,e){const r=[0,0,0];return rr(r,r,a0(ds(e.canonical))),rr(r,r,n),r},s.globeMetersToEcef=Ph,s.globeNormalizeECEF=a0,s.globePixelsToTileUnits=function(n,e){return Bt/(512*Math.pow(2,n))*Ih(ds(e))},s.globePoleMatrixForTile=function(n,e,r){const a=jo(new Float64Array(16)),u=(e/(1<<n)-.5)*Math.PI*2;return Ch(a,r.globeMatrix,u),Float32Array.from(a)},s.globeTileBounds=ds,s.globeTiltAtLngLat=V7,s.globeToMercatorTransition=X1,s.globeUseCustomAntiAliasing=function(n,e,r){const a=X1(r.zoom),u=n.style.map._antialias,d=!!e.extStandardDerivatives,m=e.extStandardDerivativesForceOff||n.terrain&&n.terrain.exaggeration()>0;return a===0&&!u&&!m&&d},s.identity=jo,s.identity$1=k7,s.invert=xd,s.isFullscreen=function(){return!!C.document.fullscreenElement||!!C.document.webkitFullscreenElement},s.isLngLatBehindGlobe=Ld,s.isMapAuthenticated=function(n){return Wt.has(n)},s.isMapboxURL=ve,s.isSafariWithAntialiasingBug=function(n){const e=n.navigator?n.navigator.userAgent:null;return!!os(n)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=jr,s.latLngToECEF=H1,s.len=av,s.length=Qu,s.length$1=function(n){return Math.hypot(n[0],n[1],n[2],n[3])},s.lngFromMercatorX=Ki,s.loadVectorTile=R8,s.makeRequest=ho,s.mapValue=function(n,e,r,a,u){return Ee((n-e)/(r-e)*(u-a)+a,a,u)},s.mercatorScale=W7,s.mercatorXfromLng=ps,s.mercatorYfromLat=fs,s.mercatorZfromAltitude=Go,s.mul=ov,s.mul$1=sv,s.multiply=Bl,s.multiply$1=b7,s.multiply$2=M7,s.nextPowerOfTwo=On,s.normalize=ii,s.normalize$1=lv,s.normalize$2=A7,s.number=un,s.ortho=function(n,e,r,a,u,d,m){var y=1/(e-r),w=1/(a-u),b=1/(d-m);return n[0]=-2*y,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*w,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*b,n[11]=0,n[12]=(e+r)*y,n[13]=(u+a)*w,n[14]=(m+d)*b,n[15]=1,n},s.pbf=Lf,s.perspective=function(n,e,r,a,u){var d,m=1/Math.tan(e/2);return n[0]=m/r,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=m,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,u!=null&&u!==1/0?(n[10]=(u+a)*(d=1/(a-u)),n[14]=2*u*a*d):(n[10]=-1,n[14]=-2*a),n},s.pick=function(n,e){const r={};for(let a=0;a<e.length;a++){const u=e[a];u in n&&(r[u]=n[u])}return r},s.plugin=S,s.pointGeometry=we,s.polesInViewport=function(n){const e=jo(new Float64Array(16));Bl(e,n.pixelMatrix,n.globeMatrix);const r=[0,vo,0],a=[0,xo,0];return rr(r,r,e),rr(a,a,e),[r[0]>0&&r[0]<=n.width&&r[1]>0&&r[1]<=n.height&&!Ld(n,new Mn(n.center.lat,90)),a[0]>0&&a[0]<=n.width&&a[1]>0&&a[1]<=n.height&&!Ld(n,new Mn(n.center.lat,-90))]},s.polygonContainsPoint=Gl,s.polygonIntersectsBox=Q7,s.polygonIntersectsPolygon=X7,s.polygonizeBounds=function(n,e,r=0,a=!0){const u=new ze(r,r),d=n.sub(u),m=e.add(u),y=[d,new ze(m.x,d.y),m,new ze(d.x,m.y)];return a&&y.push(d.clone()),y},s.posAttributes=i0,s.postMapLoadEvent=Tt,s.postPerformanceEvent=wt,s.postTurnstileEvent=ft,s.potpack=e4,s.prevPowerOfTwo=function(n){return n<=1?1:Math.pow(2,Math.floor(Math.log(n)/Math.LN2))},s.radToDeg=$t,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(n){return n({pluginStatus:h,pluginURL:i}),g.on("pluginStateChange",n),n},s.removeAuthState=function(n){Wt.delete(n)},s.renderColorRamp=jd,s.resample=q7,s.rotateX=wd,s.rotateX$1=L7,s.rotateY=Ch,s.rotateY$1=z7,s.rotateZ=function(n,e,r){var a=Math.sin(r),u=Math.cos(r),d=e[0],m=e[1],y=e[2],w=e[3],b=e[4],M=e[5],A=e[6],I=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=d*u+b*a,n[1]=m*u+M*a,n[2]=y*u+A*a,n[3]=w*u+I*a,n[4]=b*u-d*a,n[5]=M*u-m*a,n[6]=A*u-y*a,n[7]=I*u-w*a,n},s.rotateZ$1=function(n,e,r){r*=.5;var a=e[0],u=e[1],d=e[2],m=e[3],y=Math.sin(r),w=Math.cos(r);return n[0]=a*w+u*y,n[1]=u*w-a*y,n[2]=d*w+m*y,n[3]=m*w-d*y,n},s.scale=Ol,s.scale$1=P7,s.scale$2=Xi,s.scaleAndAdd=n0,s.set=function(n,e,r,a){return n[0]=e,n[1]=r,n[2]=a,n},s.setCacheLimits=function(n,e){lo=n,Cs=e},s.setColumn=function(n,e,r){n[4*e+0]=r[0],n[4*e+1]=r[1],n[4*e+2]=r[2],n[4*e+3]=r[3]},s.setRTLTextPlugin=function(n,e,r=!1){if(h===qu||h===Hu||h===Xu)throw new Error("setRTLTextPlugin cannot be called multiple times.");i=qr.resolveURL(n),h=qu,Ea=e,f(),r||T()},s.smoothstep=ct,s.spec=je,s.squaredLength=function(n){var e=n[0],r=n[1],a=n[2];return e*e+r*r+a*a},s.storeAuthState=function(n,e){e?Wt.add(n):Wt.delete(n)},s.sub=Vo,s.subtract=Td,s.symbolSize=xx,s.tileAABB=function(n,e,r,a,u,d,m,y,w){if(w.name==="globe")return pv(n,e,new Vh(r,a,u));const b=Zl({z:r,x:a,y:u},w);return new oi([(d+b.x/b.scale)*e,e*(b.y/b.scale),m],[(d+b.x2/b.scale)*e,e*(b.y2/b.scale),y])},s.tileCornersToBounds=Ah,s.tileTransform=Zl,s.transformMat3=function(n,e,r){var a=e[0],u=e[1],d=e[2];return n[0]=a*r[0]+u*r[3]+d*r[6],n[1]=a*r[1]+u*r[4]+d*r[7],n[2]=a*r[2]+u*r[5]+d*r[8],n},s.transformMat4=rr,s.transformMat4$1=Ul,s.transformQuat=C7,s.transitionTileAABBinECEF=O7,s.translate=Ju,s.transpose=function(n,e){if(n===e){var r=e[1],a=e[2],u=e[5];n[1]=e[3],n[2]=e[6],n[3]=r,n[5]=e[7],n[6]=a,n[7]=u}else n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8];return n},s.triggerPluginCompletionEvent=l,s.uniqueId=Zn,s.updateGlobeVertexNormal=function(n,e,r,a,u){const d=5*e+2;n.float32[d+0]=r,n.float32[d+1]=a,n.float32[d+2]=u},s.validateCustomStyleLayer=function(n){const e=[],r=n.id;return r===void 0&&e.push({message:`layers.${r}: missing required property "id"`}),n.render===void 0&&e.push({message:`layers.${r}: missing required method "render"`}),n.renderingMode&&n.renderingMode!=="2d"&&n.renderingMode!=="3d"&&e.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),e},s.validateFilter=n=>Ai(Ll(n)),s.validateFog=n=>Ai(_h(n)),s.validateLayer=n=>Ai(dh(n)),s.validateLight=n=>Ai(mh(n)),s.validateSource=n=>Ai(fh(n)),s.validateStyle=yh,s.validateTerrain=n=>Ai(Vu(n)),s.values=Nt,s.vectorTile=Uh,s.version=D,s.warnOnce=Un,s.window=C,s.wrap=yt}),x(["./shared"],function(s){function C(se){if(typeof se=="number"||typeof se=="boolean"||typeof se=="string"||se==null)return JSON.stringify(se);if(Array.isArray(se)){let V="[";for(const ie of se)V+=`${C(ie)},`;return`${V}]`}let j="{";for(const V of Object.keys(se).sort())j+=`${V}:${C(se[V])},`;return`${j}}`}function D(se){let j="";for(const V of s.refProperties)j+=`/${C(se[V])}`;return j}class N{constructor(j){this.keyCache={},j&&this.replace(j)}replace(j){this._layerConfigs={},this._layers={},this.update(j,[])}update(j,V){for(const de of j)this._layerConfigs[de.id]=de,(this._layers[de.id]=s.createStyleLayer(de)).compileFilter(),this.keyCache[de.id]&&delete this.keyCache[de.id];for(const de of V)delete this.keyCache[de],delete this._layerConfigs[de],delete this._layers[de];this.familiesBySource={};const ie=function(de,ve){const Pe={};for(let ye=0;ye<de.length;ye++){const Re=ve&&ve[de[ye].id]||D(de[ye]);ve&&(ve[de[ye].id]=Re);let ht=Pe[Re];ht||(ht=Pe[Re]=[]),ht.push(de[ye])}const Ce=[];for(const ye in Pe)Ce.push(Pe[ye]);return Ce}(s.values(this._layerConfigs),this.keyCache);for(const de of ie){const ve=de.map(pt=>this._layers[pt.id]),Pe=ve[0];if(Pe.visibility==="none")continue;const Ce=Pe.source||"";let ye=this.familiesBySource[Ce];ye||(ye=this.familiesBySource[Ce]={});const Re=Pe.sourceLayer||"_geojsonTileLayer";let ht=ye[Re];ht||(ht=ye[Re]=[]),ht.push(ve)}}}class U{loadTile(j,V){const{uid:ie,encoding:de,rawImageData:ve,padding:Pe,buildQuadTree:Ce}=j,ye=s.window.ImageBitmap&&ve instanceof s.window.ImageBitmap?this.getImageData(ve,Pe):ve;V(null,new s.DEMData(ie,ye,de,Pe<1,Ce))}getImageData(j,V){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(j.width,j.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=j.width,this.offscreenCanvas.height=j.height,this.offscreenCanvasContext.drawImage(j,0,0,j.width,j.height);const ie=this.offscreenCanvasContext.getImageData(-V,-V,j.width+2*V,j.height+2*V);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ie}}function G(se,j){if(se.length!==0){ce(se[0],j);for(var V=1;V<se.length;V++)ce(se[V],!j)}}function ce(se,j){for(var V=0,ie=0,de=0,ve=se.length,Pe=ve-1;de<ve;Pe=de++){var Ce=(se[de][0]-se[Pe][0])*(se[Pe][1]+se[de][1]),ye=V+Ce;ie+=Math.abs(V)>=Math.abs(Ce)?V-ye+Ce:Ce-ye+V,V=ye}V+ie>=0!=!!j&&se.reverse()}var ge=s.getDefaultExportFromCjs(function se(j,V){var ie,de=j&&j.type;if(de==="FeatureCollection")for(ie=0;ie<j.features.length;ie++)se(j.features[ie],V);else if(de==="GeometryCollection")for(ie=0;ie<j.geometries.length;ie++)se(j.geometries[ie],V);else if(de==="Feature")se(j.geometry,V);else if(de==="Polygon")G(j.coordinates,V);else if(de==="MultiPolygon")for(ie=0;ie<j.coordinates.length;ie++)G(j.coordinates[ie],V);return j});const xe=s.VectorTileFeature.prototype.toGeoJSON;var $e={exports:{}},ne=s.pointGeometry,ee=s.vectorTile.VectorTileFeature,oe=Te;function Te(se,j){this.options=j||{},this.features=se,this.length=se.length}function Oe(se,j){this.id=typeof se.id=="number"?se.id:void 0,this.type=se.type,this.rawGeometry=se.type===1?[se.geometry]:se.geometry,this.properties=se.tags,this.extent=j||4096}Te.prototype.feature=function(se){return new Oe(this.features[se],this.options.extent)},Oe.prototype.loadGeometry=function(){var se=this.rawGeometry;this.geometry=[];for(var j=0;j<se.length;j++){for(var V=se[j],ie=[],de=0;de<V.length;de++)ie.push(new ne(V[de][0],V[de][1]));this.geometry.push(ie)}return this.geometry},Oe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var se=this.geometry,j=1/0,V=-1/0,ie=1/0,de=-1/0,ve=0;ve<se.length;ve++)for(var Pe=se[ve],Ce=0;Ce<Pe.length;Ce++){var ye=Pe[Ce];j=Math.min(j,ye.x),V=Math.max(V,ye.x),ie=Math.min(ie,ye.y),de=Math.max(de,ye.y)}return[j,ie,V,de]},Oe.prototype.toGeoJSON=ee.prototype.toGeoJSON;var rt=s.pbf,we=oe;function Ye(se){var j=new rt;return function(V,ie){for(var de in V.layers)ie.writeMessage(3,ze,V.layers[de])}(se,j),j.finish()}function ze(se,j){var V;j.writeVarintField(15,se.version||1),j.writeStringField(1,se.name||""),j.writeVarintField(5,se.extent||4096);var ie={keys:[],values:[],keycache:{},valuecache:{}};for(V=0;V<se.length;V++)ie.feature=se.feature(V),j.writeMessage(2,gt,ie);var de=ie.keys;for(V=0;V<de.length;V++)j.writeStringField(3,de[V]);var ve=ie.values;for(V=0;V<ve.length;V++)j.writeMessage(4,Ve,ve[V])}function gt(se,j){var V=se.feature;V.id!==void 0&&j.writeVarintField(1,V.id),j.writeMessage(2,Qt,se),j.writeVarintField(3,V.type),j.writeMessage(4,He,V)}function Qt(se,j){var V=se.feature,ie=se.keys,de=se.values,ve=se.keycache,Pe=se.valuecache;for(var Ce in V.properties){var ye=V.properties[Ce],Re=ve[Ce];if(ye!==null){Re===void 0&&(ie.push(Ce),ve[Ce]=Re=ie.length-1),j.writeVarint(Re);var ht=typeof ye;ht!=="string"&&ht!=="boolean"&&ht!=="number"&&(ye=JSON.stringify(ye));var pt=ht+":"+ye,K=Pe[pt];K===void 0&&(de.push(ye),Pe[pt]=K=de.length-1),j.writeVarint(K)}}}function St(se,j){return(j<<3)+(7&se)}function $t(se){return se<<1^se>>31}function He(se,j){for(var V=se.loadGeometry(),ie=se.type,de=0,ve=0,Pe=V.length,Ce=0;Ce<Pe;Ce++){var ye=V[Ce],Re=1;ie===1&&(Re=ye.length),j.writeVarint(St(1,Re));for(var ht=ie===3?ye.length-1:ye.length,pt=0;pt<ht;pt++){pt===1&&ie!==1&&j.writeVarint(St(2,ht-1));var K=ye[pt].x-de,_e=ye[pt].y-ve;j.writeVarint($t(K)),j.writeVarint($t(_e)),de+=K,ve+=_e}ie===3&&j.writeVarint(St(7,1))}}function Ve(se,j){var V=typeof se;V==="string"?j.writeStringField(1,se):V==="boolean"?j.writeBooleanField(7,se):V==="number"&&(se%1!=0?j.writeDoubleField(3,se):se<0?j.writeSVarintField(6,se):j.writeVarintField(5,se))}$e.exports=Ye,$e.exports.fromVectorTileJs=Ye,$e.exports.fromGeojsonVt=function(se,j){j=j||{};var V={};for(var ie in se)V[ie]=new we(se[ie].features,j),V[ie].name=ie,V[ie].version=j.version,V[ie].extent=j.extent;return Ye({layers:V})},$e.exports.GeoJSONWrapper=we;var Je=s.getDefaultExportFromCjs($e.exports);const it={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:se=>se},Ee=Math.fround||(ct=new Float32Array(1),se=>(ct[0]=+se,ct[0]));var ct;const yt=3,kt=5,Nt=6;class Zt{constructor(j){this.options=Object.assign(Object.create(it),j),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(j){const{log:V,minZoom:ie,maxZoom:de}=this.options;V&&console.time("total time");const ve=`prepare ${j.length} points`;V&&console.time(ve),this.points=j;const Pe=[];for(let ye=0;ye<j.length;ye++){const Re=j[ye];if(!Re.geometry)continue;const[ht,pt]=Re.geometry.coordinates,K=Ee(Bn(ht)),_e=Ee(On(pt));Pe.push(K,_e,1/0,ye,-1,1),this.options.reduce&&Pe.push(0)}let Ce=this.trees[de+1]=this._createTree(Pe);V&&console.timeEnd(ve);for(let ye=de;ye>=ie;ye--){const Re=+Date.now();Ce=this.trees[ye]=this._createTree(this._cluster(Ce,ye)),V&&console.log("z%d: %d clusters in %dms",ye,Ce.numItems,+Date.now()-Re)}return V&&console.timeEnd("total time"),this}getClusters(j,V){let ie=((j[0]+180)%360+360)%360-180;const de=Math.max(-90,Math.min(90,j[1]));let ve=j[2]===180?180:((j[2]+180)%360+360)%360-180;const Pe=Math.max(-90,Math.min(90,j[3]));if(j[2]-j[0]>=360)ie=-180,ve=180;else if(ie>ve){const pt=this.getClusters([ie,de,180,Pe],V),K=this.getClusters([-180,de,ve,Pe],V);return pt.concat(K)}const Ce=this.trees[this._limitZoom(V)],ye=Ce.range(Bn(ie),On(Pe),Bn(ve),On(de)),Re=Ce.data,ht=[];for(const pt of ye){const K=this.stride*pt;ht.push(Re[K+kt]>1?cn(Re,K,this.clusterProps):this.points[Re[K+yt]])}return ht}getChildren(j){const V=this._getOriginId(j),ie=this._getOriginZoom(j),de="No cluster with the specified id.",ve=this.trees[ie];if(!ve)throw new Error(de);const Pe=ve.data;if(V*this.stride>=Pe.length)throw new Error(de);const Ce=this.options.radius/(this.options.extent*Math.pow(2,ie-1)),ye=ve.within(Pe[V*this.stride],Pe[V*this.stride+1],Ce),Re=[];for(const ht of ye){const pt=ht*this.stride;Pe[pt+4]===j&&Re.push(Pe[pt+kt]>1?cn(Pe,pt,this.clusterProps):this.points[Pe[pt+yt]])}if(Re.length===0)throw new Error(de);return Re}getLeaves(j,V,ie){const de=[];return this._appendLeaves(de,j,V=V||10,ie=ie||0,0),de}getTile(j,V,ie){const de=this.trees[this._limitZoom(j)],ve=Math.pow(2,j),{extent:Pe,radius:Ce}=this.options,ye=Ce/Pe,Re=(ie-ye)/ve,ht=(ie+1+ye)/ve,pt={features:[]};return this._addTileFeatures(de.range((V-ye)/ve,Re,(V+1+ye)/ve,ht),de.data,V,ie,ve,pt),V===0&&this._addTileFeatures(de.range(1-ye/ve,Re,1,ht),de.data,ve,ie,ve,pt),V===ve-1&&this._addTileFeatures(de.range(0,Re,ye/ve,ht),de.data,-1,ie,ve,pt),pt.features.length?pt:null}getClusterExpansionZoom(j){let V=this._getOriginZoom(j)-1;for(;V<=this.options.maxZoom;){const ie=this.getChildren(j);if(V++,ie.length!==1)break;j=ie[0].properties.cluster_id}return V}_appendLeaves(j,V,ie,de,ve){const Pe=this.getChildren(V);for(const Ce of Pe){const ye=Ce.properties;if(ye&&ye.cluster?ve+ye.point_count<=de?ve+=ye.point_count:ve=this._appendLeaves(j,ye.cluster_id,ie,de,ve):ve<de?ve++:j.push(Ce),j.length===ie)break}return ve}_createTree(j){const V=new s.KDBush(j.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ie=0;ie<j.length;ie+=this.stride)V.add(j[ie],j[ie+1]);return V.finish(),V.data=j,V}_addTileFeatures(j,V,ie,de,ve,Pe){for(const Ce of j){const ye=Ce*this.stride,Re=V[ye+kt]>1;let ht,pt,K;if(Re)ht=Zn(V,ye,this.clusterProps),pt=V[ye],K=V[ye+1];else{const Ue=this.points[V[ye+yt]];ht=Ue.properties;const[tt,ft]=Ue.geometry.coordinates;pt=Bn(tt),K=On(ft)}const _e={type:1,geometry:[[Math.round(this.options.extent*(pt*ve-ie)),Math.round(this.options.extent*(K*ve-de))]],tags:ht};let Me;Me=Re||this.options.generateId?V[ye+yt]:this.points[V[ye+yt]].id,Me!==void 0&&(_e.id=Me),Pe.features.push(_e)}}_limitZoom(j){return Math.max(this.options.minZoom,Math.min(Math.floor(+j),this.options.maxZoom+1))}_cluster(j,V){const{radius:ie,extent:de,reduce:ve,minPoints:Pe}=this.options,Ce=ie/(de*Math.pow(2,V)),ye=j.data,Re=[],ht=this.stride;for(let pt=0;pt<ye.length;pt+=ht){if(ye[pt+2]<=V)continue;ye[pt+2]=V;const K=ye[pt],_e=ye[pt+1],Me=j.within(ye[pt],ye[pt+1],Ce),Ue=ye[pt+kt];let tt=Ue;for(const ft of Me){const It=ft*ht;ye[It+2]>V&&(tt+=ye[It+kt])}if(tt>Ue&&tt>=Pe){let ft,It=K*Ue,Tt=_e*Ue,Mt=-1;const wt=((pt/ht|0)<<5)+(V+1)+this.points.length;for(const zt of Me){const Vt=zt*ht;if(ye[Vt+2]<=V)continue;ye[Vt+2]=V;const Wt=ye[Vt+kt];It+=ye[Vt]*Wt,Tt+=ye[Vt+1]*Wt,ye[Vt+4]=wt,ve&&(ft||(ft=this._map(ye,pt,!0),Mt=this.clusterProps.length,this.clusterProps.push(ft)),ve(ft,this._map(ye,Vt)))}ye[pt+4]=wt,Re.push(It/tt,Tt/tt,1/0,wt,-1,tt),ve&&Re.push(Mt)}else{for(let ft=0;ft<ht;ft++)Re.push(ye[pt+ft]);if(tt>1)for(const ft of Me){const It=ft*ht;if(!(ye[It+2]<=V)){ye[It+2]=V;for(let Tt=0;Tt<ht;Tt++)Re.push(ye[It+Tt])}}}}return Re}_getOriginId(j){return j-this.points.length>>5}_getOriginZoom(j){return(j-this.points.length)%32}_map(j,V,ie){if(j[V+kt]>1){const Pe=this.clusterProps[j[V+Nt]];return ie?Object.assign({},Pe):Pe}const de=this.points[j[V+yt]].properties,ve=this.options.map(de);return ie&&ve===de?Object.assign({},ve):ve}}function cn(se,j,V){return{type:"Feature",id:se[j+yt],properties:Zn(se,j,V),geometry:{type:"Point",coordinates:[(ie=se[j],360*(ie-.5)),Ti(se[j+1])]}};var ie}function Zn(se,j,V){const ie=se[j+kt],de=ie>=1e4?`${Math.round(ie/1e3)}k`:ie>=1e3?Math.round(ie/100)/10+"k":ie,ve=se[j+Nt],Pe=ve===-1?{}:Object.assign({},V[ve]);return Object.assign(Pe,{cluster:!0,cluster_id:se[j+yt],point_count:ie,point_count_abbreviated:de})}function Bn(se){return se/360+.5}function On(se){const j=Math.sin(se*Math.PI/180),V=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return V<0?0:V>1?1:V}function Ti(se){const j=(180-360*se)*Math.PI/180;return 360*Math.atan(Math.exp(j))/Math.PI-90}function Io(se,j,V,ie){for(var de,ve=ie,Pe=V-j>>1,Ce=V-j,ye=se[j],Re=se[j+1],ht=se[V],pt=se[V+1],K=j+3;K<V;K+=3){var _e=rs(se[K],se[K+1],ye,Re,ht,pt);if(_e>ve)de=K,ve=_e;else if(_e===ve){var Me=Math.abs(K-Pe);Me<Ce&&(de=K,Ce=Me)}}ve>ie&&(de-j>3&&Io(se,j,de,ie),se[de+2]=ve,V-de>3&&Io(se,de,V,ie))}function rs(se,j,V,ie,de,ve){var Pe=de-V,Ce=ve-ie;if(Pe!==0||Ce!==0){var ye=((se-V)*Pe+(j-ie)*Ce)/(Pe*Pe+Ce*Ce);ye>1?(V=de,ie=ve):ye>0&&(V+=Pe*ye,ie+=Ce*ye)}return(Pe=se-V)*Pe+(Ce=j-ie)*Ce}function on(se,j,V,ie){var de={id:se===void 0?null:se,type:j,geometry:V,tags:ie,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ve){var Pe=ve.geometry,Ce=ve.type;if(Ce==="Point"||Ce==="MultiPoint"||Ce==="LineString")tr(ve,Pe);else if(Ce==="Polygon"||Ce==="MultiLineString")for(var ye=0;ye<Pe.length;ye++)tr(ve,Pe[ye]);else if(Ce==="MultiPolygon")for(ye=0;ye<Pe.length;ye++)for(var Re=0;Re<Pe[ye].length;Re++)tr(ve,Pe[ye][Re])}(de),de}function tr(se,j){for(var V=0;V<j.length;V+=3)se.minX=Math.min(se.minX,j[V]),se.minY=Math.min(se.minY,j[V+1]),se.maxX=Math.max(se.maxX,j[V]),se.maxY=Math.max(se.maxY,j[V+1])}function yr(se,j,V,ie){if(j.geometry){var de=j.geometry.coordinates,ve=j.geometry.type,Pe=Math.pow(V.tolerance/((1<<V.maxZoom)*V.extent),2),Ce=[],ye=j.id;if(V.promoteId?ye=j.properties[V.promoteId]:V.generateId&&(ye=ie||0),ve==="Point")is(de,Ce);else if(ve==="MultiPoint")for(var Re=0;Re<de.length;Re++)is(de[Re],Ce);else if(ve==="LineString")Un(de,Ce,Pe,!1);else if(ve==="MultiLineString"){if(V.lineMetrics){for(Re=0;Re<de.length;Re++)Un(de[Re],Ce=[],Pe,!1),se.push(on(ye,"LineString",Ce,j.properties));return}vr(de,Ce,Pe,!1)}else if(ve==="Polygon")vr(de,Ce,Pe,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(Re=0;Re<j.geometry.geometries.length;Re++)yr(se,{id:ye,geometry:j.geometry.geometries[Re],properties:j.properties},V,ie);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Re=0;Re<de.length;Re++){var ht=[];vr(de[Re],ht,Pe,!0),Ce.push(ht)}}se.push(on(ye,ve,Ce,j.properties))}}function is(se,j){j.push(sa(se[0])),j.push(ji(se[1])),j.push(0)}function Un(se,j,V,ie){for(var de,ve,Pe=0,Ce=0;Ce<se.length;Ce++){var ye=sa(se[Ce][0]),Re=ji(se[Ce][1]);j.push(ye),j.push(Re),j.push(0),Ce>0&&(Pe+=ie?(de*Re-ye*ve)/2:Math.sqrt(Math.pow(ye-de,2)+Math.pow(Re-ve,2))),de=ye,ve=Re}var ht=j.length-3;j[2]=1,Io(j,0,ht,V),j[ht+2]=1,j.size=Math.abs(Pe),j.start=0,j.end=j.size}function vr(se,j,V,ie){for(var de=0;de<se.length;de++){var ve=[];Un(se[de],ve,V,ie),j.push(ve)}}function sa(se){return se/360+.5}function ji(se){var j=Math.sin(se*Math.PI/180),V=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return V<0?0:V>1?1:V}function Fr(se,j,V,ie,de,ve,Pe,Ce){if(ie/=j,ve>=(V/=j)&&Pe<ie)return se;if(Pe<V||ve>=ie)return null;for(var ye=[],Re=0;Re<se.length;Re++){var ht=se[Re],pt=ht.geometry,K=ht.type,_e=de===0?ht.minX:ht.minY,Me=de===0?ht.maxX:ht.maxY;if(_e>=V&&Me<ie)ye.push(ht);else if(!(Me<V||_e>=ie)){var Ue=[];if(K==="Point"||K==="MultiPoint")Ss(pt,Ue,V,ie,de);else if(K==="LineString")os(pt,Ue,V,ie,de,!1,Ce.lineMetrics);else if(K==="MultiLineString")ao(pt,Ue,V,ie,de,!1);else if(K==="Polygon")ao(pt,Ue,V,ie,de,!0);else if(K==="MultiPolygon")for(var tt=0;tt<pt.length;tt++){var ft=[];ao(pt[tt],ft,V,ie,de,!0),ft.length&&Ue.push(ft)}if(Ue.length){if(Ce.lineMetrics&&K==="LineString"){for(tt=0;tt<Ue.length;tt++)ye.push(on(ht.id,K,Ue[tt],ht.tags));continue}K!=="LineString"&&K!=="MultiLineString"||(Ue.length===1?(K="LineString",Ue=Ue[0]):K="MultiLineString"),K!=="Point"&&K!=="MultiPoint"||(K=Ue.length===3?"Point":"MultiPoint"),ye.push(on(ht.id,K,Ue,ht.tags))}}}return ye.length?ye:null}function Ss(se,j,V,ie,de){for(var ve=0;ve<se.length;ve+=3){var Pe=se[ve+de];Pe>=V&&Pe<=ie&&(j.push(se[ve]),j.push(se[ve+1]),j.push(se[ve+2]))}}function os(se,j,V,ie,de,ve,Pe){for(var Ce,ye,Re=Ms(se),ht=de===0?lo:Cs,pt=se.start,K=0;K<se.length-3;K+=3){var _e=se[K],Me=se[K+1],Ue=se[K+2],tt=se[K+3],ft=se[K+4],It=de===0?_e:Me,Tt=de===0?tt:ft,Mt=!1;Pe&&(Ce=Math.sqrt(Math.pow(_e-tt,2)+Math.pow(Me-ft,2))),It<V?Tt>V&&(ye=ht(Re,_e,Me,tt,ft,V),Pe&&(Re.start=pt+Ce*ye)):It>ie?Tt<ie&&(ye=ht(Re,_e,Me,tt,ft,ie),Pe&&(Re.start=pt+Ce*ye)):Qr(Re,_e,Me,Ue),Tt<V&&It>=V&&(ye=ht(Re,_e,Me,tt,ft,V),Mt=!0),Tt>ie&&It<=ie&&(ye=ht(Re,_e,Me,tt,ft,ie),Mt=!0),!ve&&Mt&&(Pe&&(Re.end=pt+Ce*ye),j.push(Re),Re=Ms(se)),Pe&&(pt+=Ce)}var wt=se.length-3;_e=se[wt],Me=se[wt+1],Ue=se[wt+2],(It=de===0?_e:Me)>=V&&It<=ie&&Qr(Re,_e,Me,Ue),wt=Re.length-3,ve&&wt>=3&&(Re[wt]!==Re[0]||Re[wt+1]!==Re[1])&&Qr(Re,Re[0],Re[1],Re[2]),Re.length&&j.push(Re)}function Ms(se){var j=[];return j.size=se.size,j.start=se.start,j.end=se.end,j}function ao(se,j,V,ie,de,ve){for(var Pe=0;Pe<se.length;Pe++)os(se[Pe],j,V,ie,de,ve,!1)}function Qr(se,j,V,ie){se.push(j),se.push(V),se.push(ie)}function lo(se,j,V,ie,de,ve){var Pe=(ve-j)/(ie-j);return se.push(ve),se.push(V+(de-V)*Pe),se.push(1),Pe}function Cs(se,j,V,ie,de,ve){var Pe=(ve-V)/(de-V);return se.push(j+(ie-j)*Pe),se.push(ve),se.push(1),Pe}function Br(se,j){for(var V=[],ie=0;ie<se.length;ie++){var de,ve=se[ie],Pe=ve.type;if(Pe==="Point"||Pe==="MultiPoint"||Pe==="LineString")de=Ir(ve.geometry,j);else if(Pe==="MultiLineString"||Pe==="Polygon"){de=[];for(var Ce=0;Ce<ve.geometry.length;Ce++)de.push(Ir(ve.geometry[Ce],j))}else if(Pe==="MultiPolygon")for(de=[],Ce=0;Ce<ve.geometry.length;Ce++){for(var ye=[],Re=0;Re<ve.geometry[Ce].length;Re++)ye.push(Ir(ve.geometry[Ce][Re],j));de.push(ye)}V.push(on(ve.id,Pe,de,ve.tags))}return V}function Ir(se,j){var V=[];V.size=se.size,se.start!==void 0&&(V.start=se.start,V.end=se.end);for(var ie=0;ie<se.length;ie+=3)V.push(se[ie]+j,se[ie+1],se[ie+2]);return V}function Zr(se,j){if(se.transformed)return se;var V,ie,de,ve=1<<se.z,Pe=se.x,Ce=se.y;for(V=0;V<se.features.length;V++){var ye=se.features[V],Re=ye.geometry,ht=ye.type;if(ye.geometry=[],ht===1)for(ie=0;ie<Re.length;ie+=2)ye.geometry.push(co(Re[ie],Re[ie+1],j,ve,Pe,Ce));else for(ie=0;ie<Re.length;ie++){var pt=[];for(de=0;de<Re[ie].length;de+=2)pt.push(co(Re[ie][de],Re[ie][de+1],j,ve,Pe,Ce));ye.geometry.push(pt)}}return se.transformed=!0,se}function co(se,j,V,ie,de,ve){return[Math.round(V*(se*ie-de)),Math.round(V*(j*ie-ve))]}function Vi(se,j,V,ie,de){for(var ve=j===de.maxZoom?0:de.tolerance/((1<<j)*de.extent),Pe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:V,y:ie,z:j,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ce=0;Ce<se.length;Ce++){Pe.numFeatures++,Ps(Pe,se[Ce],ve,de);var ye=se[Ce].minX,Re=se[Ce].minY,ht=se[Ce].maxX,pt=se[Ce].maxY;ye<Pe.minX&&(Pe.minX=ye),Re<Pe.minY&&(Pe.minY=Re),ht>Pe.maxX&&(Pe.maxX=ht),pt>Pe.maxY&&(Pe.maxY=pt)}return Pe}function Ps(se,j,V,ie){var de=j.geometry,ve=j.type,Pe=[];if(ve==="Point"||ve==="MultiPoint")for(var Ce=0;Ce<de.length;Ce+=3)Pe.push(de[Ce]),Pe.push(de[Ce+1]),se.numPoints++,se.numSimplified++;else if(ve==="LineString")Or(Pe,de,se,V,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(Ce=0;Ce<de.length;Ce++)Or(Pe,de[Ce],se,V,ve==="Polygon",Ce===0);else if(ve==="MultiPolygon")for(var ye=0;ye<de.length;ye++){var Re=de[ye];for(Ce=0;Ce<Re.length;Ce++)Or(Pe,Re[Ce],se,V,!0,Ce===0)}if(Pe.length){var ht=j.tags||null;if(ve==="LineString"&&ie.lineMetrics){for(var pt in ht={},j.tags)ht[pt]=j.tags[pt];ht.mapbox_clip_start=de.start/de.size,ht.mapbox_clip_end=de.end/de.size}var K={geometry:Pe,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:ht};j.id!==null&&(K.id=j.id),se.features.push(K)}}function Or(se,j,V,ie,de,ve){var Pe=ie*ie;if(ie>0&&j.size<(de?Pe:ie))V.numPoints+=j.length/3;else{for(var Ce=[],ye=0;ye<j.length;ye+=3)(ie===0||j[ye+2]>Pe)&&(V.numSimplified++,Ce.push(j[ye]),Ce.push(j[ye+1])),V.numPoints++;de&&function(Re,ht){for(var pt=0,K=0,_e=Re.length,Me=_e-2;K<_e;Me=K,K+=2)pt+=(Re[K]-Re[Me])*(Re[K+1]+Re[Me+1]);if(pt>0===ht)for(K=0,_e=Re.length;K<_e/2;K+=2){var Ue=Re[K],tt=Re[K+1];Re[K]=Re[_e-2-K],Re[K+1]=Re[_e-1-K],Re[_e-2-K]=Ue,Re[_e-1-K]=tt}}(Ce,ve),se.push(Ce)}}function Gi(se,j){var V=(j=this.options=function(de,ve){for(var Pe in ve)de[Pe]=ve[Pe];return de}(Object.create(this.options),j)).debug;if(V&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");var ie=function(de,ve){var Pe=[];if(de.type==="FeatureCollection")for(var Ce=0;Ce<de.features.length;Ce++)yr(Pe,de.features[Ce],ve,Ce);else yr(Pe,de.type==="Feature"?de:{geometry:de},ve);return Pe}(se,j);this.tiles={},this.tileCoords=[],V&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ie=function(de,ve){var Pe=ve.buffer/ve.extent,Ce=de,ye=Fr(de,1,-1-Pe,Pe,0,-1,2,ve),Re=Fr(de,1,1-Pe,2+Pe,0,-1,2,ve);return(ye||Re)&&(Ce=Fr(de,1,-Pe,1+Pe,0,-1,2,ve)||[],ye&&(Ce=Br(ye,1).concat(Ce)),Re&&(Ce=Ce.concat(Br(Re,-1)))),Ce}(ie,j),ie.length&&this.splitTile(ie,0,0,0),V&&(ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function uo(se,j,V){return 32*((1<<se)*V+j)+se}function ho(se,j){const V=se.tileID.canonical;if(!this._geoJSONIndex)return j(null,null);const ie=this._geoJSONIndex.getTile(V.z,V.x,V.y);if(!ie)return j(null,null);const de=new class{constructor(Pe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=Pe.length,this._features=Pe}feature(Pe){return new class{constructor(Ce){this._feature=Ce,this.extent=s.EXTENT,this.type=Ce.type,this.properties=Ce.tags,"id"in Ce&&!isNaN(Ce.id)&&(this.id=parseInt(Ce.id,10))}loadGeometry(){if(this._feature.type===1){const Ce=[];for(const ye of this._feature.geometry)Ce.push([new s.Point(ye[0],ye[1])]);return Ce}{const Ce=[];for(const ye of this._feature.geometry){const Re=[];for(const ht of ye)Re.push(new s.Point(ht[0],ht[1]));Ce.push(Re)}return Ce}}toGeoJSON(Ce,ye,Re){return xe.call(this,Ce,ye,Re)}}(this._features[Pe])}}(ie.features);let ve=Je(de);ve.byteOffset===0&&ve.byteLength===ve.buffer.byteLength||(ve=new Uint8Array(ve)),j(null,{vectorTile:de,rawData:ve.buffer})}Gi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Gi.prototype.splitTile=function(se,j,V,ie,de,ve,Pe){for(var Ce=[se,j,V,ie],ye=this.options,Re=ye.debug;Ce.length;){ie=Ce.pop(),V=Ce.pop(),j=Ce.pop(),se=Ce.pop();var ht=1<<j,pt=uo(j,V,ie),K=this.tiles[pt];if(!K&&(Re>1&&console.time("creation"),K=this.tiles[pt]=Vi(se,j,V,ie,ye),this.tileCoords.push({z:j,x:V,y:ie}),Re)){Re>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,V,ie,K.numFeatures,K.numPoints,K.numSimplified),console.timeEnd("creation"));var _e="z"+j;this.stats[_e]=(this.stats[_e]||0)+1,this.total++}if(K.source=se,de){if(j===ye.maxZoom||j===de)continue;var Me=1<<de-j;if(V!==Math.floor(ve/Me)||ie!==Math.floor(Pe/Me))continue}else if(j===ye.indexMaxZoom||K.numPoints<=ye.indexMaxPoints)continue;if(K.source=null,se.length!==0){Re>1&&console.time("clipping");var Ue,tt,ft,It,Tt,Mt,wt=.5*ye.buffer/ye.extent,zt=.5-wt,Vt=.5+wt,Wt=1+wt;Ue=tt=ft=It=null,Tt=Fr(se,ht,V-wt,V+Vt,0,K.minX,K.maxX,ye),Mt=Fr(se,ht,V+zt,V+Wt,0,K.minX,K.maxX,ye),se=null,Tt&&(Ue=Fr(Tt,ht,ie-wt,ie+Vt,1,K.minY,K.maxY,ye),tt=Fr(Tt,ht,ie+zt,ie+Wt,1,K.minY,K.maxY,ye),Tt=null),Mt&&(ft=Fr(Mt,ht,ie-wt,ie+Vt,1,K.minY,K.maxY,ye),It=Fr(Mt,ht,ie+zt,ie+Wt,1,K.minY,K.maxY,ye),Mt=null),Re>1&&console.timeEnd("clipping"),Ce.push(Ue||[],j+1,2*V,2*ie),Ce.push(tt||[],j+1,2*V,2*ie+1),Ce.push(ft||[],j+1,2*V+1,2*ie),Ce.push(It||[],j+1,2*V+1,2*ie+1)}}},Gi.prototype.getTile=function(se,j,V){var ie=this.options,de=ie.extent,ve=ie.debug;if(se<0||se>24)return null;var Pe=1<<se,Ce=uo(se,j=(j%Pe+Pe)%Pe,V);if(this.tiles[Ce])return Zr(this.tiles[Ce],de);ve>1&&console.log("drilling down to z%d-%d-%d",se,j,V);for(var ye,Re=se,ht=j,pt=V;!ye&&Re>0;)Re--,ht=Math.floor(ht/2),pt=Math.floor(pt/2),ye=this.tiles[uo(Re,ht,pt)];return ye&&ye.source?(ve>1&&console.log("found parent tile z%d-%d-%d",Re,ht,pt),ve>1&&console.time("drilling down"),this.splitTile(ye.source,Re,ht,pt,se,j,V),ve>1&&console.timeEnd("drilling down"),this.tiles[Ce]?Zr(this.tiles[Ce],de):null):null};class ss extends s.VectorTileWorkerSource{constructor(j,V,ie,de,ve){super(j,V,ie,de,ho),ve&&(this.loadGeoJSON=ve)}loadData(j,V){const ie=j&&j.request,de=ie&&ie.collectResourceTiming;this.loadGeoJSON(j,(ve,Pe)=>{if(ve||!Pe)return V(ve);if(typeof Pe!="object")return V(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`));{ge(Pe,!0);try{if(j.filter){const ye=s.createExpression(j.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ye.result==="error")throw new Error(ye.value.map(ht=>`${ht.key}: ${ht.message}`).join(", "));Pe={type:"FeatureCollection",features:Pe.features.filter(ht=>ye.value.evaluate({zoom:0},ht))}}this._geoJSONIndex=j.cluster?new Zt(function({superclusterOptions:ye,clusterProperties:Re}){if(!Re||!ye)return ye;const ht={},pt={},K={accumulated:null,zoom:0},_e={properties:null},Me=Object.keys(Re);for(const Ue of Me){const[tt,ft]=Re[Ue],It=s.createExpression(ft),Tt=s.createExpression(typeof tt=="string"?[tt,["accumulated"],["get",Ue]]:tt);ht[Ue]=It.value,pt[Ue]=Tt.value}return ye.map=Ue=>{_e.properties=Ue;const tt={};for(const ft of Me)tt[ft]=ht[ft].evaluate(K,_e);return tt},ye.reduce=(Ue,tt)=>{_e.properties=tt;for(const ft of Me)K.accumulated=Ue[ft],Ue[ft]=pt[ft].evaluate(K,_e)},ye}(j)).load(Pe.features):function(ye,Re){return new Gi(ye,Re)}(Pe,j.geojsonVtOptions)}catch(ye){return V(ye)}this.loaded={};const Ce={};if(de){const ye=s.getPerformanceMeasurement(ie);ye&&(Ce.resourceTiming={},Ce.resourceTiming[j.source]=JSON.parse(JSON.stringify(ye)))}V(null,Ce)}})}reloadTile(j,V){const ie=this.loaded;return ie&&ie[j.uid]?super.reloadTile(j,V):this.loadTile(j,V)}loadGeoJSON(j,V){if(j.request)s.getJSON(j.request,V);else{if(typeof j.data!="string")return V(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`));try{return V(null,JSON.parse(j.data))}catch{return V(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(j,V){try{V(null,this._geoJSONIndex.getClusterExpansionZoom(j.clusterId))}catch(ie){V(ie)}}getClusterChildren(j,V){try{V(null,this._geoJSONIndex.getChildren(j.clusterId))}catch(ie){V(ie)}}getClusterLeaves(j,V){try{V(null,this._geoJSONIndex.getLeaves(j.clusterId,j.limit,j.offset))}catch(ie){V(ie)}}}class As{constructor(j){this.self=j,this.actor=new s.Actor(j,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:ss},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(V,ie)=>{if(this.workerSourceTypes[V])throw new Error(`Worker source with name "${V}" already registered.`);this.workerSourceTypes[V]=ie},this.self.registerRTLTextPlugin=V=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=V.applyArabicShaping,s.plugin.processBidirectionalText=V.processBidirectionalText,s.plugin.processStyledBidirectionalText=V.processStyledBidirectionalText}}clearCaches(j,V,ie){delete this.layerIndexes[j],delete this.availableImages[j],delete this.workerSources[j],delete this.demWorkerSources[j],ie()}checkIfReady(j,V,ie){ie()}setReferrer(j,V){this.referrer=V}spriteLoaded(j,V){this.isSpriteLoaded[j]=V;for(const ie in this.workerSources[j]){const de=this.workerSources[j][ie];for(const ve in de)de[ve]instanceof s.VectorTileWorkerSource&&(de[ve].isSpriteLoaded=V,de[ve].fire(new s.Event("isSpriteLoaded")))}}setImages(j,V,ie){this.availableImages[j]=V;for(const de in this.workerSources[j]){const ve=this.workerSources[j][de];for(const Pe in ve)ve[Pe].availableImages=V}ie()}enableTerrain(j,V,ie){this.terrain=V,ie()}setProjection(j,V){this.projections[j]=s.getProjection(V)}setLayers(j,V,ie){this.getLayerIndex(j).replace(V),ie()}updateLayers(j,V,ie){this.getLayerIndex(j).update(V.layers,V.removedIds),ie()}loadTile(j,V,ie){const de=this.enableTerrain?s.extend({enableTerrain:this.terrain},V):V;de.projection=this.projections[j]||this.defaultProjection,this.getWorkerSource(j,V.type,V.source).loadTile(de,ie)}loadDEMTile(j,V,ie){const de=this.enableTerrain?s.extend({buildQuadTree:this.terrain},V):V;this.getDEMWorkerSource(j,V.source).loadTile(de,ie)}reloadTile(j,V,ie){const de=this.enableTerrain?s.extend({enableTerrain:this.terrain},V):V;de.projection=this.projections[j]||this.defaultProjection,this.getWorkerSource(j,V.type,V.source).reloadTile(de,ie)}abortTile(j,V,ie){this.getWorkerSource(j,V.type,V.source).abortTile(V,ie)}removeTile(j,V,ie){this.getWorkerSource(j,V.type,V.source).removeTile(V,ie)}removeSource(j,V,ie){if(!this.workerSources[j]||!this.workerSources[j][V.type]||!this.workerSources[j][V.type][V.source])return;const de=this.workerSources[j][V.type][V.source];delete this.workerSources[j][V.type][V.source],de.removeSource!==void 0?de.removeSource(V,ie):ie()}loadWorkerSource(j,V,ie){try{this.self.importScripts(V.url),ie()}catch(de){ie(de.toString())}}syncRTLPluginState(j,V,ie){try{s.plugin.setState(V);const de=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&de!=null){this.self.importScripts(de);const ve=s.plugin.isParsed();ie(ve?void 0:new Error(`RTL Text Plugin failed to import scripts from ${de}`),ve)}}catch(de){ie(de.toString())}}getAvailableImages(j){let V=this.availableImages[j];return V||(V=[]),V}getLayerIndex(j){let V=this.layerIndexes[j];return V||(V=this.layerIndexes[j]=new N),V}getWorkerSource(j,V,ie){if(this.workerSources[j]||(this.workerSources[j]={}),this.workerSources[j][V]||(this.workerSources[j][V]={}),!this.workerSources[j][V][ie]){const de={send:(ve,Pe,Ce,ye,Re,ht)=>{this.actor.send(ve,Pe,Ce,j,Re,ht)},scheduler:this.actor.scheduler};this.workerSources[j][V][ie]=new this.workerSourceTypes[V](de,this.getLayerIndex(j),this.getAvailableImages(j),this.isSpriteLoaded[j])}return this.workerSources[j][V][ie]}getDEMWorkerSource(j,V){return this.demWorkerSources[j]||(this.demWorkerSources[j]={}),this.demWorkerSources[j][V]||(this.demWorkerSources[j][V]=new U),this.demWorkerSources[j][V]}enforceCacheSizeLimit(j,V){s.enforceCacheSizeLimit(V)}getWorkerPerformanceMetrics(j,V,ie){ie(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new As(self)),As}),x(["./shared"],function(s){function C(h,i){if(Array.isArray(h)){if(!Array.isArray(i)||h.length!==i.length)return!1;for(let l=0;l<h.length;l++)if(!C(h[l],i[l]))return!1;return!0}if(typeof h=="object"&&h!==null&&i!==null){if(typeof i!="object"||Object.keys(h).length!==Object.keys(i).length)return!1;for(const l in h)if(!C(h[l],i[l]))return!1;return!0}return h===i}var D=N;function N(h){return!function(i){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var f,g,v=new Blob([""],{type:"text/javascript"}),T=URL.createObjectURL(v);try{g=new Worker(T),f=!0}catch{f=!1}return g&&g.terminate(),URL.revokeObjectURL(T),f}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var f=document.createElement("canvas");f.width=f.height=1;var g=f.getContext("2d");if(!g)return!1;var v=g.getImageData(0,0,1,1);return v&&v.width===f.width}()?(U[l=i&&i.failIfMajorPerformanceCaveat]===void 0&&(U[l]=function(f){var g,v=function(T){var S=document.createElement("canvas"),P=Object.create(N.webGLContextAttributes);return P.failIfMajorPerformanceCaveat=T,S.getContext("webgl",P)||S.getContext("experimental-webgl",P)}(f);if(!v)return!1;try{g=v.createShader(v.VERTEX_SHADER)}catch{return!1}return!(!g||v.isContextLost())&&(v.shaderSource(g,"void main() {}"),v.compileShader(g),v.getShaderParameter(g,v.COMPILE_STATUS)===!0)}(l)),U[l]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var l}(h)}var U={};function G(h,i,l){const f=s.window.document.createElement(h);return i!==void 0&&(f.className=i),l&&l.appendChild(f),f}function ce(h,i,l){const f=s.window.document.createElementNS("http://www.w3.org/2000/svg",h);for(const g of Object.keys(i))f.setAttributeNS(null,g,i[g]);return l&&l.appendChild(f),f}N.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const ge=s.window.document&&s.window.document.documentElement.style,xe=ge&&ge.userSelect!==void 0?"userSelect":"WebkitUserSelect";let $e;function ne(){ge&&xe&&($e=ge[xe],ge[xe]="none")}function ee(){ge&&xe&&(ge[xe]=$e)}function oe(h){h.preventDefault(),h.stopPropagation(),s.window.removeEventListener("click",oe,!0)}function Te(){s.window.addEventListener("click",oe,!0),s.window.setTimeout(()=>{s.window.removeEventListener("click",oe,!0)},0)}function Oe(h,i){const l=h.getBoundingClientRect();return Ye(h,l,i)}function rt(h,i){const l=h.getBoundingClientRect(),f=[];for(let g=0;g<i.length;g++)f.push(Ye(h,l,i[g]));return f}function we(h){return s.window.InstallTrigger!==void 0&&h.button===2&&h.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:h.button}function Ye(h,i,l){const f=h.offsetWidth===i.width?1:h.offsetWidth/i.width;return new s.Point((l.clientX-i.left)*f,(l.clientY-i.top)*f)}function ze(h,i){var l=i[0],f=i[1],g=i[2],v=i[3],T=l*v-g*f;return T?(h[0]=v*(T=1/T),h[1]=-f*T,h[2]=-g*T,h[3]=l*T,h):null}function gt(h){const{userImage:i}=h;return!!(i&&i.render&&i.render())&&(h.data.replace(new Uint8Array(i.data.buffer)),!0)}class Qt extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:l,callback:f}of this.requestors)this._notify(l,f);this.requestors=[]}}hasImage(i){return!!this.getImage(i)}getImage(i){return this.images[i]}addImage(i,l){this._validate(i,l)&&(this.images[i]=l)}_validate(i,l){let f=!0;return this._validateStretch(l.stretchX,l.data&&l.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(l.stretchY,l.data&&l.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(l.content,l)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,l){if(!i)return!0;let f=0;for(const g of i){if(g[0]<f||g[1]<g[0]||l<g[1])return!1;f=g[1]}return!0}_validateContent(i,l){return!(i&&(i.length!==4||i[0]<0||l.data.width<i[0]||i[1]<0||l.data.height<i[1]||i[2]<0||l.data.width<i[2]||i[3]<0||l.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,l){l.version=this.images[i].version+1,this.images[i]=l,this.updatedImages[i]=!0}removeImage(i){const l=this.images[i];delete this.images[i],delete this.patterns[i],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,l){let f=!0;if(!this.isLoaded())for(const g of i)this.images[g]||(f=!1);this.isLoaded()||f?this._notify(i,l):this.requestors.push({ids:i,callback:l})}_notify(i,l){const f={};for(const g of i){this.images[g]||this.fire(new s.Event("styleimagemissing",{id:g}));const v=this.images[g];v?f[g]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:s.warnOnce(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}l(null,f)}getPixelSize(){const{width:i,height:l}=this.atlasImage;return{width:i,height:l}}getPattern(i){const l=this.patterns[i],f=this.getImage(i);if(!f)return null;if(l&&l.position.version===f.version)return l.position;if(l)l.position.version=f.version;else{const g={w:f.data.width+2,h:f.data.height+2,x:0,y:0},v=new s.ImagePosition(g,f);this.patterns[i]={bin:g,position:v}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const l=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(i,this.atlasImage,l.RGBA),this.atlasTexture&&this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const v in this.patterns)i.push(this.patterns[v].bin);const{w:l,h:f}=s.potpack(i),g=this.atlasImage;g.resize({width:l||1,height:f||1});for(const v in this.patterns){const{bin:T}=this.patterns[v],S=T.x+1,P=T.y+1,L=this.images[v].data,k=L.width,F=L.height;s.RGBAImage.copy(L,g,{x:0,y:0},{x:S,y:P},{width:k,height:F}),s.RGBAImage.copy(L,g,{x:0,y:F-1},{x:S,y:P-1},{width:k,height:1}),s.RGBAImage.copy(L,g,{x:0,y:0},{x:S,y:P+F},{width:k,height:1}),s.RGBAImage.copy(L,g,{x:k-1,y:0},{x:S-1,y:P},{width:1,height:F}),s.RGBAImage.copy(L,g,{x:0,y:0},{x:S+k,y:P},{width:1,height:F})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const l of i){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const f=this.images[l];gt(f)&&this.updateImage(l,f)}}}const St=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(h,i){return function([l,f,g]){const v=s.degToRad(f+90),T=s.degToRad(g);return{x:l*Math.cos(v)*Math.sin(T),y:l*Math.sin(v)*Math.sin(T),z:l*Math.cos(T),azimuthal:f,polar:g}}(h.expression.evaluate(i))}interpolate(h,i,l){return{x:s.number(h.x,i.x,l),y:s.number(h.y,i.y,l),z:s.number(h.z,i.z,l),azimuthal:s.number(h.azimuthal,i.azimuthal,l),polar:s.number(h.polar,i.polar,l)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)});class $t extends s.Evented{constructor(i){super(),this._transitionable=new s.Transitionable(St),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,l={}){if(!this._validate(s.validateLight,i,l))for(const f in i){const g=i[f];s.endsWith(f,"-transition")?this._transitionable.setTransition(f.slice(0,-11),g):this._transitionable.setValue(f,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,l,f){return(!f||f.validate!==!1)&&s.emitValidationErrors(this,i.call(s.validateStyle,s.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const He=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)});let Ve=class extends s.Evented{constructor(h,i){super(),this._transitionable=new s.Transitionable(He),this.set(h),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=i}get(){return this._transitionable.serialize()}set(h){for(const i in h){const l=h[i];s.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-11),l):this._transitionable.setValue(i,l)}}updateTransitions(h){this._transitioning=this._transitionable.transitioned(h,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(h){this.properties=this._transitioning.possiblyEvaluate(h)}};function Je(h,i,l,f){const g=s.smoothstep(45,65,l),[v,T]=it(h,f),S=s.length(i);let P=1-Math.min(1,Math.exp((S-v)/(T-v)*-6));return P*=P*P,P=Math.min(1,1.00747*P),P*g*h.alpha}function it(h,i){const l=.5/Math.tan(.5*i);return[h.range[0]+l,h.range[1]+l]}const Ee=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"high-color":new s.DataConstantProperty(s.spec.fog["high-color"]),"space-color":new s.DataConstantProperty(s.spec.fog["space-color"]),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"]),"star-intensity":new s.DataConstantProperty(s.spec.fog["star-intensity"])});class ct extends s.Evented{constructor(i,l){super(),this._transitionable=new s.Transitionable(Ee),this.set(i),this._transitioning=this._transitionable.untransitioned(),this._transform=l}get state(){const i=this._transform,l=i.projection.name==="globe",f=s.globeToMercatorTransition(i.zoom),g=this.properties.get("range"),v=[.5,3];return{range:l?[s.number(v[0],g[0],f),s.number(v[1],g[1],f)]:g,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(i,l={}){if(!this._validate(s.validateFog,i,l)){for(const f of Object.keys(s.spec.fog))i&&i[f]===void 0&&(i[f]=s.spec.fog[f].default);for(const f in i){const g=i[f];s.endsWith(f,"-transition")?this._transitionable.setTransition(f.slice(0,-11),g):this._transitionable.setValue(f,g)}}}getOpacity(i){if(!this._transform.projection.supportsFog)return 0;const l=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.smoothstep(45,65,i))*l.a}getOpacityAtLatLng(i,l){return this._transform.projection.supportsFog?function(f,g,v){const T=s.MercatorCoordinate.fromLngLat(g),S=v.elevation?v.elevation.getAtPointOrZero(T):0,P=[T.x,T.y,S];return s.transformMat4(P,P,v.mercatorFogMatrix),Je(f,P,v.pitch,v._fov)}(this.state,i,l):0}getFovAdjustedRange(i){return this._transform.projection.supportsFog?it(this.state,i):[0,1]}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,l,f){return(!f||f.validate!==!1)&&s.emitValidationErrors(this,i.call(s.validateStyle,s.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class yt{constructor(i,l){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const f=this.workerPool.acquire(this.id);for(let g=0;g<f.length;g++){const v=new yt.Actor(f[g],l,this.id);v.name=`Worker ${g}`,this.actors.push(v)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(i,l,f){s.asyncAll(this.actors,(g,v)=>{g.send(i,l,v)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function kt(h,i,l){return i*(s.EXTENT/(h.tileSize*Math.pow(2,l-h.tileID.overscaledZ)))}yt.Actor=s.Actor;class Nt{constructor(i,l,f,g){this.screenBounds=i,this.cameraPoint=l,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=f,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,g)}static createFromScreenPoints(i,l){let f,g;if(i instanceof s.Point||typeof i[0]=="number"){const v=s.Point.convert(i);f=[v],g=l.isPointAboveHorizon(v)}else{const v=s.Point.convert(i[0]),T=s.Point.convert(i[1]);f=[v,T],g=s.polygonizeBounds(v,T).every(S=>l.isPointAboveHorizon(S))}return new Nt(f,l.getCameraPoint(),g,l)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(i){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],i)}bufferedCameraGeometry(i){const l=this.screenBounds[0],f=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],g=s.polygonizeBounds(l,f,0,!1);return this.cameraPoint.y>f.y&&(this.cameraPoint.x>l.x&&this.cameraPoint.x<f.x?g.splice(3,0,this.cameraPoint):this.cameraPoint.x>=f.x?g[2]=this.cameraPoint:this.cameraPoint.x<=l.x&&(g[3]=this.cameraPoint)),s.bufferConvexPolygon(g,i)}bufferedCameraGeometryGlobe(i){const l=this.screenBounds[0],f=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],g=s.polygonizeBounds(l,f,i),v=this.cameraPoint.clone();switch(3*((v.y>l.y)+(v.y>f.y))+((v.x>l.x)+(v.x>f.x))){case 0:g[0]=v,g[4]=v.clone();break;case 1:g.splice(1,0,v);break;case 2:g[1]=v;break;case 3:g.splice(4,0,v);break;case 5:g.splice(2,0,v);break;case 6:g[3]=v;break;case 7:g.splice(3,0,v);break;case 8:g[2]=v}return g}containsTile(i,l,f,g=0){const v=i.queryPadding/l._pixelsPerMercatorPixel+1,T=f?this._bufferedCameraMercator(v,l):this._bufferedScreenMercator(v,l);let S=i.tileID.wrap+(T.unwrapped?g:0);const P=T.polygon.map(Y=>s.getTilePoint(i.tileTransform,Y,S));if(!s.polygonIntersectsBox(P,0,0,s.EXTENT,s.EXTENT))return;S=i.tileID.wrap+(this.screenGeometryMercator.unwrapped?g:0);const L=this.screenGeometryMercator.polygon.map(Y=>s.getTileVec3(i.tileTransform,Y,S)),k=L.map(Y=>new s.Point(Y[0],Y[1])),F=l.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),$=s.getTileVec3(i.tileTransform,F,S),q=L.map(Y=>{const B=s.sub(Y,Y,$);return s.normalize(B,B),new s.Ray($,B)}),X=kt(i,1,l.zoom)*l._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:k,tilespaceRays:q,bufferedTilespaceGeometry:P,bufferedTilespaceBounds:(H=s.getBounds(P),H.min.x=s.clamp(H.min.x,0,s.EXTENT),H.min.y=s.clamp(H.min.y,0,s.EXTENT),H.max.x=s.clamp(H.max.x,0,s.EXTENT),H.max.y=s.clamp(H.max.y,0,s.EXTENT),H),tile:i,tileID:i.tileID,pixelToTileUnitsFactor:X};var H}_bufferedScreenMercator(i,l){const f=Zn(i);if(this._screenRaycastCache[f])return this._screenRaycastCache[f];{let g;return g=l.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(i),l):{polygon:this.bufferedScreenGeometry(i).map(v=>l.pointCoordinate3D(v)),unwrapped:!0},this._screenRaycastCache[f]=g,g}}_bufferedCameraMercator(i,l){const f=Zn(i);if(this._cameraRaycastCache[f])return this._cameraRaycastCache[f];{let g;return g=l.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(i),l):{polygon:this.bufferedCameraGeometry(i).map(v=>l.pointCoordinate3D(v)),unwrapped:!0},this._cameraRaycastCache[f]=g,g}}_projectAndResample(i,l){const f=function(v,T){const S=s.multiply([],T.pixelMatrix,T.globeMatrix),P=[0,-s.GLOBE_RADIUS,0,1],L=[0,s.GLOBE_RADIUS,0,1],k=[0,0,0,1];s.transformMat4$1(P,P,S),s.transformMat4$1(L,L,S),s.transformMat4$1(k,k,S);const F=new s.Point(P[0]/P[3],P[1]/P[3]),$=new s.Point(L[0]/L[3],L[1]/L[3]),q=s.polygonContainsPoint(v,F)&&P[3]<k[3],X=s.polygonContainsPoint(v,$)&&L[3]<k[3];if(!q&&!X)return null;const H=function(fe,Se,be){for(let Le=1;Le<fe.length;Le++){const ot=cn(Se.pointCoordinate3D(fe[Le-1]).x),Ae=cn(Se.pointCoordinate3D(fe[Le]).x);if(be<0){if(ot<Ae)return{idx:Le,t:-ot/(Ae-1-ot)}}else if(Ae<ot)return{idx:Le,t:(1-ot)/(Ae+1-ot)}}return null}(v,T,q?-1:1);if(!H)return null;const{idx:Y,t:B}=H;let W=Y>1?Zt(v.slice(0,Y),T):[],te=Y<v.length?Zt(v.slice(Y),T):[];W=W.map(fe=>new s.Point(cn(fe.x),fe.y)),te=te.map(fe=>new s.Point(cn(fe.x),fe.y));const re=[...W];re.length===0&&re.push(te[te.length-1]);const pe=s.number(re[re.length-1].y,(te.length===0?W[0]:te[0]).y,B);let me;return me=q?[new s.Point(0,pe),new s.Point(0,0),new s.Point(1,0),new s.Point(1,pe)]:[new s.Point(1,pe),new s.Point(1,1),new s.Point(0,1),new s.Point(0,pe)],re.push(...me),te.length===0?re.push(W[0]):re.push(...te),{polygon:re.map(fe=>new s.MercatorCoordinate(fe.x,fe.y)),unwrapped:!1}}(i,l);if(f)return f;const g=function(v,T){let S=!1,P=-1/0,L=0;for(let F=0;F<v.length-1;F++)v[F].x>P&&(P=v[F].x,L=F);for(let F=0;F<v.length-1;F++){const $=(L+F)%(v.length-1),q=v[$],X=v[$+1];Math.abs(q.x-X.x)>.5&&(q.x<X.x?(q.x+=1,$===0&&(v[v.length-1].x+=1)):(X.x+=1,$+1===v.length-1&&(v[0].x+=1)),S=!0)}const k=s.mercatorXfromLng(T.center.lng);return S&&k<Math.abs(k-1)&&v.forEach(F=>{F.x-=1}),{polygon:v,unwrapped:S}}(Zt(i,l).map(v=>new s.Point(cn(v.x),v.y)),l);return{polygon:g.polygon.map(v=>new s.MercatorCoordinate(v.x,v.y)),unwrapped:g.unwrapped}}}function Zt(h,i){return s.resample(h,l=>{const f=i.pointCoordinate3D(l);l.x=f.x,l.y=f.y},1/256)}function cn(h){return h<0?1+h%1:h%1}function Zn(h){return 100*h|0}function Bn(h,i,l,f,g){const v=function(T,S){if(T)return g(T);if(S){h.url&&S.tiles&&h.tiles&&delete h.tiles;const P=s.pick(s.extend(S,h),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);S.vector_layers&&(P.vectorLayers=S.vector_layers,P.vectorLayerIds=P.vectorLayers.map(L=>L.id)),P.tiles=i.canonicalizeTileset(P,h.url),g(null,P)}};return h.url?s.getJSON(i.transformRequest(i.normalizeSourceURL(h.url,null,l,f),s.ResourceType.Source),v):s.exported.frame(()=>v(null,h))}class On{constructor(i,l,f){this.bounds=s.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=l||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const l=Math.pow(2,i.z),f=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*l),g=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*l),v=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*l),T=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*l);return i.x>=f&&i.x<v&&i.y>=g&&i.y<T}}class Ti{constructor(i,l,f){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||l.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const l=this.context.gl;this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Io={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class rs{constructor(i,l,f,g){this.length=l.length,this.attributes=f,this.itemSize=l.bytesPerElement,this.dynamicDraw=g,this.context=i;const v=i.gl;this.buffer=v.createBuffer(),i.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||l.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,l){for(let f=0;f<this.attributes.length;f++){const g=l.attributes[this.attributes[f].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,l,f){for(let g=0;g<this.attributes.length;g++){const v=this.attributes[g],T=l.attributes[v.name];T!==void 0&&i.vertexAttribPointer(T,v.components,i[Io[v.type]],!1,this.itemSize,v.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class on{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class tr extends on{getDefault(){return s.Color.transparent}set(i){const l=this.current;(i.r!==l.r||i.g!==l.g||i.b!==l.b||i.a!==l.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class yr extends on{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class is extends on{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Un extends on{getDefault(){return[!0,!0,!0,!0]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||i[3]!==l[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class vr extends on{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class sa extends on{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class ji extends on{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const l=this.current;(i.func!==l.func||i.ref!==l.ref||i.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Fr extends on{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Ss extends on{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=i,this.dirty=!1}}class os extends on{getDefault(){return[0,1]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Ms extends on{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=i,this.dirty=!1}}class ao extends on{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Qr extends on{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.BLEND):l.disable(l.BLEND),this.current=i,this.dirty=!1}}class lo extends on{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Cs extends on{getDefault(){return s.Color.transparent}set(i){const l=this.current;(i.r!==l.r||i.g!==l.g||i.b!==l.b||i.a!==l.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Br extends on{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Ir extends on{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=i,this.dirty=!1}}class Zr extends on{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class co extends on{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}let Vi,Ps=class extends on{getDefault(){return null}set(h){(h!==this.current||this.dirty)&&(this.gl.useProgram(h),this.current=h,this.dirty=!1)}};class Or extends on{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Gi extends on{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||i[3]!==l[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class uo extends on{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class ho extends on{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ss extends on{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class As extends on{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class se extends on{getDefault(){return null}set(i){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class j extends on{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class V extends on{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class ie extends on{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class de extends on{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class ve extends on{constructor(i,l){super(i),this.context=i,this.parent=l}getDefault(){return null}}class Pe extends ve{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Ce extends ve{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,this.attachment(),l.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ye extends Ce{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Re{constructor(i,l,f,g){this.context=i,this.width=l,this.height=f;const v=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new Pe(i,v),g&&(this.depthAttachment=new Ce(i,v))}destroy(){const i=this.context.gl,l=this.colorAttachment.get();if(l&&i.deleteTexture(l),this.depthAttachment){const f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class ht{constructor(i,l=!1){if(this.gl=i,this.isWebGL2=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),l){const f=i;this.extVertexArrayObject={createVertexArrayOES:f.createVertexArray.bind(i),deleteVertexArrayOES:f.deleteVertexArray.bind(i),bindVertexArrayOES:f.bindVertexArray.bind(i)}}this.clearColor=new tr(this),this.clearDepth=new yr(this),this.clearStencil=new is(this),this.colorMask=new Un(this),this.depthMask=new vr(this),this.stencilMask=new sa(this),this.stencilFunc=new ji(this),this.stencilOp=new Fr(this),this.stencilTest=new Ss(this),this.depthRange=new os(this),this.depthTest=new Ms(this),this.depthFunc=new ao(this),this.blend=new Qr(this),this.blendFunc=new lo(this),this.blendColor=new Cs(this),this.blendEquation=new Br(this),this.cullFace=new Ir(this),this.cullFaceSide=new Zr(this),this.frontFace=new co(this),this.program=new Ps(this),this.activeTexture=new Or(this),this.viewport=new Gi(this),this.bindFramebuffer=new uo(this),this.bindRenderbuffer=new ho(this),this.bindTexture=new ss(this),this.bindVertexBuffer=new As(this),this.bindElementBuffer=new se(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new j(this),this.pixelStoreUnpack=new V(this),this.pixelStoreUnpackPremultiplyAlpha=new ie(this),this.pixelStoreUnpackFlipY=new de(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=i.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=i.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=i.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),l||(this.extTextureHalfFloat=i.getExtension("OES_texture_half_float")),(l||this.extTextureHalfFloat&&i.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=l||i.getExtension("OES_standard_derivatives"),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,l){return new Ti(this,i,l)}createVertexBuffer(i,l,f){return new rs(this,i,l,f)}createRenderbuffer(i,l,f){const g=this.gl,v=g.createRenderbuffer();return this.bindRenderbuffer.set(v),g.renderbufferStorage(g.RENDERBUFFER,i,l,f),this.bindRenderbuffer.set(null),v}createFramebuffer(i,l,f){return new Re(this,i,l,f)}clear({color:i,depth:l,stencil:f}){const g=this.gl;let v=0;i&&(v|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(v|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),f!==void 0&&(v|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),g.clear(v)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){C(i.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class pt extends s.Evented{constructor(i,l,f,g){if(super(),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(l,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(i){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"}));const l=Array.isArray(this.map._language)?this.map._language.join():this.map._language,f=this.map._worldview;this._tileJSONRequest=Bn(this._options,this.map._requestManager,l,f,(g,v)=>{this._tileJSONRequest=null,this._loaded=!0,g?(l&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${l}`),f&&f.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${f}`),this.fire(new s.ErrorEvent(g))):v&&(s.extend(this,v),v.bounds&&(this.tileBounds=new On(v.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(v.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),i&&i(g)})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(i){return this._options.tiles=i,this.reload(),this}setUrl(i){return this.url=i,this._options.url=i,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}loadTile(i,l){const f=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme)),g={request:this.map._requestManager.transformRequest(f,s.ResourceType.Tile),data:void 0,uid:i.uid,tileID:i.tileID,tileZoom:i.tileZoom,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:i.isSymbolTile};if(g.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired")i.state==="loading"?i.reloadCallback=l:i.request=i.actor.send("reloadTile",g,v.bind(this));else if(i.actor=this._tileWorkers[f]=this._tileWorkers[f]||this.dispatcher.getActor(),this.dispatcher.ready)i.request=i.actor.send("loadTile",g,v.bind(this),void 0,!0);else{const T=s.loadVectorTile.call({deduped:this._deduped},g,(S,P)=>{S||!P?v.call(this,S):(g.data={cacheControl:P.cacheControl,expires:P.expires,rawData:P.rawData.slice(0)},i.actor&&i.actor.send("loadTile",g,v.bind(this),void 0,!0))},!0);i.request={cancel:T}}function v(T,S){return delete i.request,i.aborted?l(null):T&&T.status!==404?l(T):(S&&S.resourceTiming&&(i.resourceTiming=S.resourceTiming),this.map._refreshExpiredTiles&&S&&i.setExpiryData(S),i.loadVectorData(S,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),l(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id})}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class K extends s.Evented{constructor(i,l,f,g){super(),this.id=i,this.dispatcher=f,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},l),s.extend(this,s.pick(l,["url","scheme","tileSize"]))}load(i){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Bn(this._options,this.map._requestManager,null,null,(l,f)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new s.ErrorEvent(l)):f&&(s.extend(this,f),f.bounds&&(this.tileBounds=new On(f.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(f.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),i&&i(l)})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(i){return this._options.tiles=i,this.reload(),this}setUrl(i){return this.url=i,this._options.url=i,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,l){const f=s.exported.devicePixelRatio>=2,g=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),f,this.tileSize);i.request=s.getImage(this.map._requestManager.transformRequest(g,s.ResourceType.Tile),(v,T,S,P)=>(delete i.request,i.aborted?(i.state="unloaded",l(null)):v?(i.state="errored",l(v)):T?(this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:S,expires:P}),i.setTexture(T,this.map.painter),i.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void l(null)):l(null)))}static loadTileData(i,l,f){i.setTexture(l,f)}static unloadTileData(i,l){i.texture&&l.saveTileTexture(i.texture)}abortTile(i,l){i.request&&(i.request.cancel(),delete i.request),l()}unloadTile(i,l){i.texture&&this.map.painter.saveTileTexture(i.texture),l()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function _e(h,i,l,f,g,v,T,S){const P=[h,l,g,i,f,v,1,1,1],L=[T,S,1],k=s.adjoint([],P),[F,$,q]=s.transformMat3(L,L,s.transpose(k,k));return s.multiply$1(P,[F,0,0,0,$,0,0,0,q],P)}class Me extends s.Evented{constructor(i,l,f,g){super(),this.id=i,this.dispatcher=f,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=l,this._dirty=!1}load(i,l){this._loaded=l||!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(f,g)=>{if(this._imageRequest=null,this._loaded=!0,f)this.fire(new s.ErrorEvent(f));else if(g){const{HTMLImageElement:v}=s.window;this.image=g instanceof v?s.exported.getImageData(g):g,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,i&&(this.coordinates=i),this._finishLoading()}})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this._imageRequest&&i.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=i.url,this.load(i.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(i){this.coordinates=i,this._boundsArray=void 0;const l=i.map(s.MercatorCoordinate.fromLngLat);return this.tileID=function(f){let g=1/0,v=1/0,T=-1/0,S=-1/0;for(const F of f)g=Math.min(g,F.x),v=Math.min(v,F.y),T=Math.max(T,F.x),S=Math.max(S,F.y);const P=Math.max(T-g,S-v),L=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),k=Math.pow(2,L);return new s.CanonicalTileID(L,Math.floor((g+T)/2*k),Math.floor((v+S)/2*k))}(l),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(i){for(const P in this.tiles){const L=this.tiles[P];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture)}if(this._boundsArray)return;const l=s.tileTransform(this.tileID,this.map.transform.projection),[f,g,v,T]=this.coordinates.map(P=>{const L=l.projection.project(P[0],P[1]);return s.getTilePoint(l,L)._round()});this.perspectiveTransform=function(P,L,k,F,$,q,X,H,Y,B){const W=_e(0,0,P,0,0,L,P,L),te=_e(k,F,$,q,X,H,Y,B);return s.multiply$1(te,s.adjoint(W,W),te),[te[6]/te[8]*P/s.EXTENT,te[7]/te[8]*L/s.EXTENT]}(this.width,this.height,f.x,f.y,g.x,g.y,T.x,T.y,v.x,v.y);const S=this._boundsArray=new s.StructArrayLayout4i8;S.emplaceBack(f.x,f.y,0,0),S.emplaceBack(g.x,g.y,s.EXTENT,0),S.emplaceBack(T.x,T.y,0,s.EXTENT),S.emplaceBack(v.x,v.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=i.createVertexBuffer(S,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,l=i.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new s.Texture(i,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(i)}loadTile(i,l){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},l(null)):(i.state="errored",l(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ue={vector:pt,raster:K,"raster-dem":class extends K{constructor(h,i,l,f){super(h,i,l,f),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(h,i){const l=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function f(g,v){g&&(h.state="errored",i(g)),v&&(h.dem=v,h.dem.onDeserialize(),h.needsHillshadePrepare=!0,h.needsDEMTextureUpload=!0,h.state="loaded",i(null))}h.request=s.getImage(this.map._requestManager.transformRequest(l,s.ResourceType.Tile),(function(g,v,T,S){if(delete h.request,h.aborted)h.state="unloaded",i(null);else if(g)h.state="errored",i(g);else if(v){this.map._refreshExpiredTiles&&h.setExpiryData({cacheControl:T,expires:S});const P=s.window.ImageBitmap&&v instanceof s.window.ImageBitmap&&(Vi==null&&(Vi=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),Vi),L=1-(v.width-s.prevPowerOfTwo(v.width))/2;L<1||h.neighboringTiles||(h.neighboringTiles=this._getNeighboringTiles(h.tileID));const k=P?v:s.exported.getImageData(v,L),F={uid:h.uid,coord:h.tileID,source:this.id,rawImageData:k,encoding:this.encoding,padding:L};h.actor&&h.state!=="expired"||(h.actor=this.dispatcher.getActor(),h.actor.send("loadDEMTile",F,f.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(h){const i=h.canonical,l=Math.pow(2,i.z),f=(i.x-1+l)%l,g=i.x===0?h.wrap-1:h.wrap,v=(i.x+1+l)%l,T=i.x+1===l?h.wrap+1:h.wrap,S={};return S[new s.OverscaledTileID(h.overscaledZ,g,i.z,f,i.y).key]={backfilled:!1},S[new s.OverscaledTileID(h.overscaledZ,T,i.z,v,i.y).key]={backfilled:!1},i.y>0&&(S[new s.OverscaledTileID(h.overscaledZ,g,i.z,f,i.y-1).key]={backfilled:!1},S[new s.OverscaledTileID(h.overscaledZ,h.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},S[new s.OverscaledTileID(h.overscaledZ,T,i.z,v,i.y-1).key]={backfilled:!1}),i.y+1<l&&(S[new s.OverscaledTileID(h.overscaledZ,g,i.z,f,i.y+1).key]={backfilled:!1},S[new s.OverscaledTileID(h.overscaledZ,h.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},S[new s.OverscaledTileID(h.overscaledZ,T,i.z,v,i.y+1).key]={backfilled:!1}),S}unloadTile(h){h.demTexture&&this.map.painter.saveTileTexture(h.demTexture),h.fbo&&(h.fbo.destroy(),delete h.fbo),h.dem&&delete h.dem,delete h.neighboringTiles,h.state="unloaded"}},geojson:class extends s.Evented{constructor(h,i,l,f){super(),this.id=h,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=l.getActor(),this.setEventedParent(f),this._data=i.data,this._options=s.extend({},i),this._collectResourceTiming=i.collectResourceTiming,i.maxzoom!==void 0&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const g=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(i.buffer!==void 0?i.buffer:128)*g,tolerance:(i.tolerance!==void 0?i.tolerance:.375)*g,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:i.clusterMaxZoom!==void 0?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:s.EXTENT,radius:(i.clusterRadius!==void 0?i.clusterRadius:50)*g,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}onAdd(h){this.map=h,this.setData(this._data)}setData(h){return this._data=h,this._updateWorkerData(),this}getClusterExpansionZoom(h,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:h,source:this.id},i),this}getClusterChildren(h,i){return this.actor.send("geojson.getClusterChildren",{clusterId:h,source:this.id},i),this}getClusterLeaves(h,i,l,f){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:h,limit:i,offset:l},f),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const h=s.extend({},this.workerOptions),i=this._data;typeof i=="string"?(h.request=this.map._requestManager.transformRequest(s.exported.resolveURL(i),s.ResourceType.Source),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(i),this._pendingLoad=this.actor.send(`${this.type}.loadData`,h,(l,f)=>{if(this._loaded=!0,this._pendingLoad=null,l)this.fire(new s.ErrorEvent(l));else{const g={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&f&&f.resourceTiming&&f.resourceTiming[this.id]&&(g.resourceTiming=f.resourceTiming[this.id]),this.fire(new s.Event("data",g)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(h,i){const l=h.actor?"reloadTile":"loadTile";h.actor=this.actor,h.request=this.actor.send(l,{type:this.type,uid:h.uid,tileID:h.tileID,tileZoom:h.tileZoom,zoom:h.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(f,g)=>(delete h.request,h.unloadVectorData(),h.aborted?i(null):f?i(f):(h.loadVectorData(g,this.map.painter,l==="reloadTile"),i(null))),void 0,l==="loadTile")}abortTile(h){h.request&&(h.request.cancel(),delete h.request),h.aborted=!0}unloadTile(h){h.unloadVectorData(),this.actor.send("removeTile",{uid:h.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Me{constructor(h,i,l,f){super(h,i,l,f),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;const h=this.options;this.urls=[];for(const i of h.urls)this.urls.push(this.map._requestManager.transformRequest(i,s.ResourceType.Source).url);s.getVideo(this.urls,(i,l)=>{this._loaded=!0,i?this.fire(new s.ErrorEvent(i)):l&&(this.video=l,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(h){if(this.video){const i=this.video.seekable;h<i.start(0)||h>i.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=h}}getVideo(){return this.video}onAdd(h){this.map||(this.map=h,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const h=this.map.painter.context,i=h.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(h,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(h)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Me,canvas:class extends Me{constructor(h,i,l,f){super(h,i,l,f),i.coordinates?Array.isArray(i.coordinates)&&i.coordinates.length===4&&!i.coordinates.some(g=>!Array.isArray(g)||g.length!==2||g.some(v=>typeof v!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${h}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${h}`,null,'missing required property "coordinates"'))),i.animate&&typeof i.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${h}`,null,'optional "animate" property must be a boolean value'))),i.canvas?typeof i.canvas=="string"||i.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${h}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${h}`,null,'missing required property "canvas"'))),this.options=i,this.animate=i.animate===void 0||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(h){this.map=h,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let h=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,h=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,h=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const i=this.map.painter.context;this.texture?(h||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(i,this.canvas,i.gl.RGBA,{premultiply:!0}),this._prepareData(i)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const h of[this.canvas.width,this.canvas.height])if(isNaN(h)||h<=0)return!0;return!1}},custom:class extends s.Evented{constructor(h,i,l,f){super(),this.id=h,this.type="custom",this._dataType="raster",this._dispatcher=l,this._implementation=i,this.setEventedParent(f),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new On(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.clearTiles=this._clearTiles.bind(this),i.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(i,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(h){this._map=h,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(h),this.load()}onRemove(h){this._implementation.onRemove&&this._implementation.onRemove(h)}hasTile(h){if(this._implementation.hasTile){const{x:i,y:l,z:f}=h.canonical;return this._implementation.hasTile({x:i,y:l,z:f})}return!this.tileBounds||this.tileBounds.contains(h.canonical)}loadTile(h,i){const{x:l,y:f,z:g}=h.tileID.canonical,v=new s.window.AbortController;h.request=Promise.resolve(this._implementation.loadTile({x:l,y:f,z:g},{signal:v.signal})).then((function(T){return delete h.request,h.aborted?(h.state="unloaded",i(null)):T===void 0?(h.state="errored",i(null)):T===null?(this.loadTileData(h,{width:this.tileSize,height:this.tileSize,data:null}),h.state="loaded",i(null)):function(S){return S instanceof s.window.ImageData||S instanceof s.window.HTMLCanvasElement||S instanceof s.window.ImageBitmap||S instanceof s.window.HTMLImageElement}(T)?(this.loadTileData(h,T),h.state="loaded",void i(null)):(h.state="errored",i(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(T=>{T.code!==20&&(h.state="errored",i(T))}),h.request.cancel=()=>v.abort()}loadTileData(h,i){K.loadTileData(h,i,this._map.painter)}unloadTileData(h){K.unloadTileData(h,this._map.painter)}unloadTile(h,i){if(this.unloadTileData(h),this._implementation.unloadTile){const{x:l,y:f,z:g}=h.tileID.canonical;this._implementation.unloadTile({x:l,y:f,z:g})}i()}abortTile(h,i){h.request&&h.request.cancel&&(h.request.cancel(),delete h.request),i()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(h=>({x:h.canonical.x,y:h.canonical.y,z:h.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},tt=function(h,i,l,f){const g=new Ue[i.type](h,i,l,f);if(g.id!==h)throw new Error(`Expected Source id to be ${h} instead of ${g.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],g),g};function ft(h,i){const l=s.identity([]);return s.scale(l,l,[.5*h.width,.5*-h.height,1]),s.translate(l,l,[1,-1,0]),s.multiply(l,l,h.calculateProjMatrix(i.toUnwrapped())),Float32Array.from(l)}function It(h,i,l,f,g,v,T,S=!1){const P=h.tilesIn(f,T,S);P.sort(Mt);const L=[];for(const F of P)L.push({wrappedTileID:F.tile.tileID.wrapped().key,queryResults:F.tile.queryRenderedFeatures(i,l,h._state,F,g,v,ft(h.transform,F.tile.tileID),S)});const k=function(F){const $={},q={};for(const X of F){const H=X.queryResults,Y=X.wrappedTileID,B=q[Y]=q[Y]||{};for(const W in H){const te=H[W],re=B[W]=B[W]||{},pe=$[W]=$[W]||[];for(const me of te)re[me.featureIndex]||(re[me.featureIndex]=!0,pe.push(me))}}return $}(L);for(const F in k)k[F].forEach($=>{const q=$.feature,X=q.layer;X&&X.type!=="background"&&X.type!=="sky"&&(q.source=X.source,X["source-layer"]&&(q.sourceLayer=X["source-layer"]),q.state=q.id!==void 0?h.getFeatureState(X["source-layer"],q.id):{})});return k}function Tt(h,i){const l=h.getRenderableIds().map(v=>h.getTileByID(v)),f=[],g={};for(let v=0;v<l.length;v++){const T=l[v],S=T.tileID.canonical.key;g[S]||(g[S]=!0,T.querySourceFeatures(f,i))}return f}function Mt(h,i){const l=h.tileID,f=i.tileID;return l.overscaledZ-f.overscaledZ||l.canonical.y-f.canonical.y||l.wrap-f.wrap||l.canonical.x-f.canonical.x}function wt(){return Ea.workerClass!=null?new Ea.workerClass:new s.window.Worker(Ea.workerUrl)}const zt="mapboxgl_preloaded_worker_pool";class Vt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Vt.workerCount;)this.workers.push(new wt);return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[zt]}numActive(){return Object.keys(this.active).length}}let Wt;function Hn(){return Wt||(Wt=new Vt),Wt}function Dn(h,i){const l={};for(const f in h)f!=="ref"&&(l[f]=h[f]);return s.refProperties.forEach(f=>{f in i&&(l[f]=i[f])}),l}function gn(h){h=h.slice();const i=Object.create(null);for(let l=0;l<h.length;l++)i[h[l].id]=h[l];for(let l=0;l<h.length;l++)"ref"in h[l]&&(h[l]=Dn(h[l],i[h[l].ref]));return h}Vt.workerCount=2;const jt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function po(h,i,l){l.push({command:jt.addSource,args:[h,i[h]]})}function $i(h,i,l){i.push({command:jt.removeSource,args:[h]}),l[h]=!0}function fi(h,i,l,f){$i(h,l,f),po(h,i,l)}function Wr(h,i,l){let f;for(f in h[l])if(h[l].hasOwnProperty(f)&&f!=="data"&&!C(h[l][f],i[l][f]))return!1;for(f in i[l])if(i[l].hasOwnProperty(f)&&f!=="data"&&!C(h[l][f],i[l][f]))return!1;return!0}function ei(h,i,l,f,g,v){let T;for(T in i=i||{},h=h||{})h.hasOwnProperty(T)&&(C(h[T],i[T])||l.push({command:v,args:[f,T,i[T],g]}));for(T in i)i.hasOwnProperty(T)&&!h.hasOwnProperty(T)&&(C(h[T],i[T])||l.push({command:v,args:[f,T,i[T],g]}))}function qr(h){return h.id}function Zi(h,i){return h[i.id]=i,h}class as{constructor(i,l){this.reset(i,l)}reset(i,l){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=s.clamp(i,0,1);let l=1,f=this._distances[l];const g=i*this.paddedLength+this.padding;for(;f<g&&l<this._distances.length;)f=this._distances[++l];const v=l-1,T=this._distances[v],S=f-T,P=S>0?(g-T)/S:0;return this.points[v].mult(1-P).add(this.points[l].mult(P))}}class Ei{constructor(i,l,f){const g=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(l/f);for(let T=0;T<this.xCellCount*this.yCellCount;T++)g.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=l,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,l,f,g,v){this._forEachCell(l,f,g,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(v)}insertCircle(i,l,f,g){this._forEachCell(l-g,f-g,l+g,f+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(l),this.circles.push(f),this.circles.push(g)}_insertBoxCell(i,l,f,g,v,T){this.boxCells[v].push(T)}_insertCircleCell(i,l,f,g,v,T){this.circleCells[v].push(T)}_query(i,l,f,g,v,T){if(f<0||i>this.width||g<0||l>this.height)return!v&&[];const S=[];if(i<=0&&l<=0&&this.width<=f&&this.height<=g){if(v)return!0;for(let P=0;P<this.boxKeys.length;P++)S.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){const L=this.circles[3*P],k=this.circles[3*P+1],F=this.circles[3*P+2];S.push({key:this.circleKeys[P],x1:L-F,y1:k-F,x2:L+F,y2:k+F})}return T?S.filter(T):S}return this._forEachCell(i,l,f,g,this._queryCell,S,{hitTest:v,seenUids:{box:{},circle:{}}},T),v?S.length>0:S}_queryCircle(i,l,f,g,v){const T=i-f,S=i+f,P=l-f,L=l+f;if(S<0||T>this.width||L<0||P>this.height)return!g&&[];const k=[];return this._forEachCell(T,P,S,L,this._queryCellCircle,k,{hitTest:g,circle:{x:i,y:l,radius:f},seenUids:{box:{},circle:{}}},v),g?k.length>0:k}query(i,l,f,g,v){return this._query(i,l,f,g,!1,v)}hitTest(i,l,f,g,v){return this._query(i,l,f,g,!0,v)}hitTestCircle(i,l,f,g){return this._queryCircle(i,l,f,!0,g)}_queryCell(i,l,f,g,v,T,S,P){const L=S.seenUids,k=this.boxCells[v];if(k!==null){const $=this.bboxes;for(const q of k)if(!L.box[q]){L.box[q]=!0;const X=4*q;if(i<=$[X+2]&&l<=$[X+3]&&f>=$[X+0]&&g>=$[X+1]&&(!P||P(this.boxKeys[q]))){if(S.hitTest)return T.push(!0),!0;T.push({key:this.boxKeys[q],x1:$[X],y1:$[X+1],x2:$[X+2],y2:$[X+3]})}}}const F=this.circleCells[v];if(F!==null){const $=this.circles;for(const q of F)if(!L.circle[q]){L.circle[q]=!0;const X=3*q;if(this._circleAndRectCollide($[X],$[X+1],$[X+2],i,l,f,g)&&(!P||P(this.circleKeys[q]))){if(S.hitTest)return T.push(!0),!0;{const H=$[X],Y=$[X+1],B=$[X+2];T.push({key:this.circleKeys[q],x1:H-B,y1:Y-B,x2:H+B,y2:Y+B})}}}}}_queryCellCircle(i,l,f,g,v,T,S,P){const L=S.circle,k=S.seenUids,F=this.boxCells[v];if(F!==null){const q=this.bboxes;for(const X of F)if(!k.box[X]){k.box[X]=!0;const H=4*X;if(this._circleAndRectCollide(L.x,L.y,L.radius,q[H+0],q[H+1],q[H+2],q[H+3])&&(!P||P(this.boxKeys[X])))return T.push(!0),!0}}const $=this.circleCells[v];if($!==null){const q=this.circles;for(const X of $)if(!k.circle[X]){k.circle[X]=!0;const H=3*X;if(this._circlesCollide(q[H],q[H+1],q[H+2],L.x,L.y,L.radius)&&(!P||P(this.circleKeys[X])))return T.push(!0),!0}}}_forEachCell(i,l,f,g,v,T,S,P){const L=this._convertToXCellCoord(i),k=this._convertToYCellCoord(l),F=this._convertToXCellCoord(f),$=this._convertToYCellCoord(g);for(let q=L;q<=F;q++)for(let X=k;X<=$;X++)if(v.call(this,i,l,f,g,this.xCellCount*X+q,T,S,P))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,l,f,g,v,T){const S=g-i,P=v-l,L=f+T;return L*L>S*S+P*P}_circleAndRectCollide(i,l,f,g,v,T,S){const P=(T-g)/2,L=Math.abs(i-(g+P));if(L>P+f)return!1;const k=(S-v)/2,F=Math.abs(l-(v+k));if(F>k+f)return!1;if(L<=P||F<=k)return!0;const $=L-P,q=F-k;return $*$+q*q<=f*f}}const sn={unknown:0,flipRequired:1,flipNotRequired:2},Rn=Math.tan(85*Math.PI/180);function je(h,i,l,f,g,v,T){const S=s.create();if(l)if(v.name==="globe"){const P=s.calculateGlobeLabelMatrix(g,i);s.multiply(S,S,P)}else{const P=ze([],T);S[0]=P[0],S[1]=P[1],S[4]=P[2],S[5]=P[3],f||s.rotateZ(S,S,g.angle)}else s.multiply(S,g.labelPlaneMatrix,h);return S}function Hr(h,i,l,f,g,v,T){const S=je(h,i,l,f,g,v,T);return v.name==="globe"&&l||(S[2]=S[6]=S[10]=S[14]=0),S}function an(h,i,l,f,g,v,T){if(l){if(v.name==="globe"){const S=je(h,i,l,f,g,v,T);return s.invert(S,S),s.multiply(S,h,S),S}{const S=s.clone(h),P=s.identity([]);return P[0]=T[0],P[1]=T[1],P[4]=T[2],P[5]=T[3],s.multiply(S,S,P),f||s.rotateZ(S,S,-g.angle),S}}return g.glCoordMatrix}function Wn(h,i,l,f){const g=[h,i,l,1];l?s.transformMat4$1(g,g,f):nn(g,g,f);const v=g[3];return g[0]/=v,g[1]/=v,g[2]/=v,g}function cl(h,i){return Math.min(.5+h/i*.5,1.5)}function Si(h,i){const l=h[0]/h[3],f=h[1]/h[3];return l>=-i[0]&&l<=i[0]&&f>=-i[1]&&f<=i[1]}function ou(h,i,l,f,g,v,T,S,P,L){const k=l.transform,F=f?h.textSizeData:h.iconSizeData,$=s.evaluateSizeForZoom(F,l.transform.zoom),q=k.projection.name==="globe",X=[256/l.width*2+1,256/l.height*2+1],H=f?h.text.dynamicLayoutVertexArray:h.icon.dynamicLayoutVertexArray;H.clear();let Y=null;q&&(Y=f?h.text.globeExtVertexArray:h.icon.globeExtVertexArray);const B=h.lineVertexArray,W=f?h.text.placedSymbolArray:h.icon.placedSymbolArray,te=l.transform.width/l.transform.height;let re,pe=!1;for(let me=0;me<W.length;me++){const fe=W.get(me),{numGlyphs:Se,writingMode:be}=fe;if(be!==s.WritingMode.vertical||pe||re===s.WritingMode.horizontal||(pe=!0),re=be,(fe.hidden||be===s.WritingMode.vertical)&&!pe){Wi(Se,H);continue}pe=!1;const Le=new s.Point(fe.tileAnchorX,fe.tileAnchorY);let{x:ot,y:Ae,z:qe}=k.projection.projectTilePoint(Le.x,Le.y,L.canonical);if(P){const[Gt,Pt,Ot]=P(Le);ot+=Gt,Ae+=Pt,qe+=Ot}const Fe=[ot,Ae,qe,1];if(s.transformMat4$1(Fe,Fe,i),!Si(Fe,X)){Wi(Se,H);continue}const nt=cl(l.transform.cameraToCenterDistance,Fe[3]),ke=s.evaluateSizeForFeature(F,$,fe),We=T?ke/nt:ke*nt,at=Wn(ot,Ae,qe,g);if(at[3]<=0){Wi(Se,H);continue}let Qe={};const lt=T?null:P,Dt=bt(fe,We,!1,S,i,g,v,h.glyphOffsetArray,B,H,Y,at,Le,Qe,te,lt,k.projection,L,T);pe=Dt.useVertical,lt&&Dt.needsFlipping&&(Qe={}),(Dt.notEnoughRoom||pe||Dt.needsFlipping&&bt(fe,We,!0,S,i,g,v,h.glyphOffsetArray,B,H,Y,at,Le,Qe,te,lt,k.projection,L,T).notEnoughRoom)&&Wi(Se,H)}f?(h.text.dynamicLayoutVertexBuffer.updateData(H),Y&&h.text.globeExtVertexBuffer.updateData(Y)):(h.icon.dynamicLayoutVertexBuffer.updateData(H),Y&&h.icon.globeExtVertexBuffer.updateData(Y))}function O2(h,i,l,f,g,v,T,S,P,L,k,F,$,q,X,H){const{lineStartIndex:Y,glyphStartIndex:B,segment:W}=S,te=B+S.numGlyphs,re=Y+S.lineLength,pe=i.getoffsetX(B),me=i.getoffsetX(te-1),fe=mi(h*pe,l,f,g,v,T,W,Y,re,P,L,k,F,$,!0,q,X,H);if(!fe)return null;const Se=mi(h*me,l,f,g,v,T,W,Y,re,P,L,k,F,$,!0,q,X,H);return Se?{first:fe,last:Se}:null}function aa(h,i,l,f){return h===s.WritingMode.horizontal&&Math.abs(f)>Math.abs(l)?{useVertical:!0}:h===s.WritingMode.vertical?f>0?{needsFlipping:!0}:null:i!==sn.unknown&&function(g,v){return g===0||Math.abs(v/g)>Rn}(l,f)?i===sn.flipRequired?{needsFlipping:!0}:null:l<0?{needsFlipping:!0}:null}function bt(h,i,l,f,g,v,T,S,P,L,k,F,$,q,X,H,Y,B,W){const te=i/24,re=h.lineOffsetX*te,pe=h.lineOffsetY*te,{lineStartIndex:me,glyphStartIndex:fe,numGlyphs:Se,segment:be,writingMode:Le,flipState:ot}=h,Ae=me+h.lineLength,qe=Fe=>{if(k){const[at,Qe,lt]=Fe.up,Dt=L.length;s.updateGlobeVertexNormal(k,Dt+0,at,Qe,lt),s.updateGlobeVertexNormal(k,Dt+1,at,Qe,lt),s.updateGlobeVertexNormal(k,Dt+2,at,Qe,lt),s.updateGlobeVertexNormal(k,Dt+3,at,Qe,lt)}const[nt,ke,We]=Fe.point;s.addDynamicAttributes(L,nt,ke,We,Fe.angle)};if(Se>1){const Fe=O2(te,S,re,pe,l,F,$,h,P,v,q,H,!1,Y,B,W);if(!Fe)return{notEnoughRoom:!0};if(f&&!l){let[nt,ke,We]=Fe.first.point,[at,Qe,lt]=Fe.last.point;[nt,ke]=Wn(nt,ke,We,T),[at,Qe]=Wn(at,Qe,lt,T);const Dt=aa(Le,ot,(at-nt)*X,Qe-ke);if(h.flipState=Dt&&Dt.needsFlipping?sn.flipRequired:sn.flipNotRequired,Dt)return Dt}qe(Fe.first);for(let nt=fe+1;nt<fe+Se-1;nt++){const ke=mi(te*S.getoffsetX(nt),re,pe,l,F,$,be,me,Ae,P,v,q,H,!1,!1,Y,B,W);if(!ke)return L.length-=4*(nt-fe),{notEnoughRoom:!0};qe(ke)}qe(Fe.last)}else{if(f&&!l){const nt=Wn($.x,$.y,0,g),ke=me+be+1,We=new s.Point(P.getx(ke),P.gety(ke)),at=Wn(We.x,We.y,0,g),Qe=at[3]>0?at:tn($,We,nt,1,g,void 0,Y,B.canonical),lt=aa(Le,ot,(Qe[0]-nt[0])*X,Qe[1]-nt[1]);if(h.flipState=lt&&lt.needsFlipping?sn.flipRequired:sn.flipNotRequired,lt)return lt}const Fe=mi(te*S.getoffsetX(fe),re,pe,l,F,$,be,me,Ae,P,v,q,H,!1,!1,Y,B,W);if(!Fe)return{notEnoughRoom:!0};qe(Fe)}return{}}function ln(h,i,l,f,g){const{x:v,y:T,z:S}=f.projectTilePoint(h.x,h.y,i);if(!g)return Wn(v,T,S,l);const[P,L,k]=g(h);return Wn(v+P,T+L,S+k,l)}function tn(h,i,l,f,g,v,T,S){const P=ln(h.sub(i)._unit()._add(h),S,g,T,v);return s.sub(P,l,P),s.normalize(P,P),s.scaleAndAdd(P,l,P,f)}function mi(h,i,l,f,g,v,T,S,P,L,k,F,$,q,X,H,Y,B){const W=f?h-i:h+i;let te=W>0?1:-1,re=0;f&&(te*=-1,re=Math.PI),te<0&&(re+=Math.PI);let pe=S+T+(te>0?0:1)|0,me=g,fe=g,Se=0,be=0;const Le=Math.abs(W),ot=[],Ae=[];let qe=v,Fe=qe;const nt=()=>tn(Fe,qe,fe,Le-Se+1,k,$,H,Y.canonical);for(;Se+be<=Le;){if(pe+=te,pe<S||pe>=P)return null;if(fe=me,Fe=qe,ot.push(fe),q&&Ae.push(Fe),qe=new s.Point(L.getx(pe),L.gety(pe)),me=F[pe],!me){const Ot=ln(qe,Y.canonical,k,H,$);me=Ot[3]>0?F[pe]=Ot:nt()}Se+=be,be=s.distance(fe,me)}X&&$&&(F[pe]&&(me=nt(),be=s.distance(fe,me)),F[pe]=me);const ke=(Le-Se)/be,We=qe.sub(Fe)._mult(ke)._add(Fe),at=s.sub([],me,fe),Qe=s.scaleAndAdd([],fe,at,ke);let lt=[0,0,1],Dt=at[0],Gt=at[1];if(B&&(lt=H.upVector(Y.canonical,We.x,We.y),lt[0]!==0||lt[1]!==0||lt[2]!==1)){const Ot=[lt[2],0,-lt[0]],rn=s.cross([],lt,Ot);s.normalize(Ot,Ot),s.normalize(rn,rn),Dt=s.dot(at,Ot),Gt=s.dot(at,rn)}if(l){const Ot=s.cross([],lt,at);s.normalize(Ot,Ot),s.scaleAndAdd(Qe,Qe,Ot,l*te)}const Pt=re+Math.atan2(Gt,Dt);return ot.push(Qe),q&&Ae.push(We),{point:Qe,angle:Pt,path:ot,tilePath:Ae,up:lt}}function Wi(h,i){const l=i.length,f=l+4*h;i.resize(f),i.float32.fill(-1/0,4*l,4*f)}function nn(h,i,l){const f=i[0],g=i[1];return h[0]=l[0]*f+l[4]*g+l[12],h[1]=l[1]*f+l[5]*g+l[13],h[3]=l[3]*f+l[7]*g+l[15],h}const _i=100;class ul{constructor(i,l,f=new Ei(i.width+200,i.height+200,25),g=new Ei(i.width+200,i.height+200,25)){this.transform=i,this.grid=f,this.ignoredGrid=g,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+_i,this.screenBottomBoundary=i.height+_i,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.fogState=l}placeCollisionBox(i,l,f,g,v,T,S,P){let L=f.projectedAnchorX,k=f.projectedAnchorY,F=f.projectedAnchorZ;const $=f.elevation,q=f.tileID,X=i.getProjection();if($&&q){const[me,fe,Se]=X.upVector(q.canonical,f.tileAnchorX,f.tileAnchorY),be=X.upVectorScale(q.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;L+=me*$*be,k+=fe*$*be,F+=Se*$*be}const H=this.projectAndGetPerspectiveRatio(S,L,k,F,f.tileID,X.name==="globe"||!!$||this.transform.pitch>0,X),Y=T*H.perspectiveRatio,B=(f.x1*l+g.x-f.padding)*Y+H.point.x,W=(f.y1*l+g.y-f.padding)*Y+H.point.y,te=(f.x2*l+g.x+f.padding)*Y+H.point.x,re=(f.y2*l+g.y+f.padding)*Y+H.point.y,pe=H.perspectiveRatio<=.55||H.occluded;return!this.isInsideGrid(B,W,te,re)||!v&&this.grid.hitTest(B,W,te,re,P)||pe?{box:[],offscreen:!1,occluded:H.occluded}:{box:[B,W,te,re],offscreen:this.isOffscreen(B,W,te,re),occluded:!1}}placeCollisionCircles(i,l,f,g,v,T,S,P,L,k,F,$,q,X,H){const Y=[],B=this.transform.elevation,W=i.getProjection(),te=B?B.getAtTileOffsetFunc(H,this.transform.center.lat,this.transform.worldSize,W):null,re=new s.Point(f.tileAnchorX,f.tileAnchorY);let{x:pe,y:me,z:fe}=W.projectTilePoint(re.x,re.y,H.canonical);if(te){const[We,at,Qe]=te(re);pe+=We,me+=at,fe+=Qe}const Se=W.name==="globe",be=this.projectAndGetPerspectiveRatio(S,pe,me,fe,H,Se||!!B||this.transform.pitch>0,W),{perspectiveRatio:Le}=be,ot=(F?T/Le:T*Le)/s.ONE_EM,Ae=Wn(pe,me,fe,P),qe=be.signedDistanceFromCamera>0?O2(ot,v,f.lineOffsetX*ot,f.lineOffsetY*ot,!1,Ae,re,f,g,P,{},B&&!F?te:null,F&&!!B,W,H,F):null;let Fe=!1,nt=!1,ke=!0;if(qe&&!be.occluded){const We=.5*q*Le+X,at=new s.Point(-100,-100),Qe=new s.Point(this.screenRightBoundary,this.screenBottomBoundary),lt=new as,{first:Dt,last:Gt}=qe,Pt=Dt.path.length;let Ot=[];for(let Lt=Pt-1;Lt>=1;Lt--)Ot.push(Dt.path[Lt]);for(let Lt=1;Lt<Gt.path.length;Lt++)Ot.push(Gt.path[Lt]);const rn=2.5*We;L&&(Ot=Ot.map(([Lt,vn,bn],Tn)=>(te&&!Se&&(bn=te(Tn<Pt-1?Dt.tilePath[Pt-1-Tn]:Gt.tilePath[Tn-Pt+2])[2]),Wn(Lt,vn,bn,L))),Ot.some(Lt=>Lt[3]<=0)&&(Ot=[]));let en=[];if(Ot.length>0){let Lt=1/0,vn=-1/0,bn=1/0,Tn=-1/0;for(const En of Ot)Lt=Math.min(Lt,En[0]),bn=Math.min(bn,En[1]),vn=Math.max(vn,En[0]),Tn=Math.max(Tn,En[1]);vn>=at.x&&Lt<=Qe.x&&Tn>=at.y&&bn<=Qe.y&&(en=[Ot.map(En=>new s.Point(En[0],En[1]))],(Lt<at.x||vn>Qe.x||bn<at.y||Tn>Qe.y)&&(en=s.clipLine(en,at.x,at.y,Qe.x,Qe.y)))}for(const Lt of en){lt.reset(Lt,.25*We);let vn=0;vn=lt.length<=.5*We?1:Math.ceil(lt.paddedLength/rn)+1;for(let bn=0;bn<vn;bn++){const Tn=bn/Math.max(vn-1,1),En=lt.lerp(Tn),Nr=En.x+_i,Mr=En.y+_i;Y.push(Nr,Mr,We,0);const Ii=Nr-We,go=Mr-We,$n=Nr+We,Sn=Mr+We;if(ke=ke&&this.isOffscreen(Ii,go,$n,Sn),nt=nt||this.isInsideGrid(Ii,go,$n,Sn),!l&&this.grid.hitTestCircle(Nr,Mr,We,$)&&(Fe=!0,!k))return{circles:[],offscreen:!1,collisionDetected:Fe,occluded:!1}}}}return{circles:!k&&Fe||!nt?[]:Y,offscreen:ke,collisionDetected:Fe,occluded:be.occluded}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let f=1/0,g=1/0,v=-1/0,T=-1/0;for(const k of i){const F=new s.Point(k.x+_i,k.y+_i);f=Math.min(f,F.x),g=Math.min(g,F.y),v=Math.max(v,F.x),T=Math.max(T,F.y),l.push(F)}const S=this.grid.query(f,g,v,T).concat(this.ignoredGrid.query(f,g,v,T)),P={},L={};for(const k of S){const F=k.key;if(P[F.bucketInstanceId]===void 0&&(P[F.bucketInstanceId]={}),P[F.bucketInstanceId][F.featureIndex])continue;const $=[new s.Point(k.x1,k.y1),new s.Point(k.x2,k.y1),new s.Point(k.x2,k.y2),new s.Point(k.x1,k.y2)];s.polygonIntersectsPolygon(l,$)&&(P[F.bucketInstanceId][F.featureIndex]=!0,L[F.bucketInstanceId]===void 0&&(L[F.bucketInstanceId]=[]),L[F.bucketInstanceId].push(F.featureIndex))}return L}insertCollisionBox(i,l,f,g,v){(l?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:g,collisionGroupID:v},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,l,f,g,v){const T=l?this.ignoredGrid:this.grid,S={bucketInstanceId:f,featureIndex:g,collisionGroupID:v};for(let P=0;P<i.length;P+=4)T.insertCircle(S,i[P],i[P+1],i[P+2])}projectAndGetPerspectiveRatio(i,l,f,g,v,T,S){const P=[l,f,g,1];let L=!1;g||this.transform.pitch>0?(s.transformMat4$1(P,P,i),this.fogState&&v&&S.name!=="globe"&&(L=function($,q,X,H,Y,B){const W=B.calculateFogTileMatrix(Y),te=[q,X,H];return s.transformMat4(te,te,W),Je($,te,B.pitch,B._fov)}(this.fogState,l,f,g,v.toUnwrapped(),this.transform)>.9)):nn(P,P,i);const k=P[3];return{point:new s.Point((P[0]/k+1)/2*this.transform.width+_i,(-P[1]/k+1)/2*this.transform.height+_i),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(S)/k*.5,1.5),signedDistanceFromCamera:k,occluded:T&&P[2]>k||L}}isOffscreen(i,l,f,g){return f<_i||i>=this.screenRightBoundary||g<_i||l>this.screenBottomBoundary}isInsideGrid(i,l,f,g){return f>=0&&i<this.gridRightBoundary&&g>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const i=s.identity([]);return s.translate(i,i,[-100,-100,0]),i}}function Is(h,i,l){const f=i.createTileMatrix(h,h.worldSize,l.toUnwrapped());return s.multiply(new Float32Array(16),h.projMatrix,f)}function Mi(h,i,l){if(i.projection.name===l.projection.name)return h.projMatrix;const f=l.clone();return f.setProjection(i.projection),Is(f,i.getProjection(),h)}function Gn(h,i,l){return i.name===l.projection.name?h.projMatrix:Is(l,i,h)}class U2{constructor(i,l,f,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?l:-l))):g&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class ko{constructor(i,l,f,g,v,T=!1){this.text=new U2(i?i.text:null,l,f,v),this.icon=new U2(i?i.icon:null,l,g,v),this.clipped=T}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class hl{constructor(i,l,f,g=!1){this.text=i,this.icon=l,this.skipFade=f,this.clipped=g}}class dl{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class su{constructor(i,l,f,g,v){this.bucketInstanceId=i,this.featureIndex=l,this.sourceLayerIndex=f,this.bucketIndex=g,this.tileID=v}}class N2{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const l=++this.maxGroupID;this.collisionGroups[i]={ID:l,predicate:f=>f.collisionGroupID===l}}return this.collisionGroups[i]}}function pl(h,i,l,f,g){const{horizontalAlign:v,verticalAlign:T}=s.getAnchorAlignment(h),S=-(v-.5)*i,P=-(T-.5)*l,L=s.evaluateVariableOffset(h,f);return new s.Point(S+L[0]*g,P+L[1]*g)}function fl(h,i,l,f,g){const v=new s.Point(h,i);return l&&v._rotate(f?g:-g),v}class _1{constructor(i,l,f,g,v){this.transform=i.clone(),this.projection=i.projection.name,this.collisionIndex=new ul(this.transform,v),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=l,this.retainedQueryData={},this.collisionGroups=new N2(f),this.collisionCircleArrays={},this.prevPlacement=g,g&&(g.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,l,f,g){const v=f.getBucket(l),T=f.latestFeatureIndex;if(!v||!T||l.id!==v.layerIds[0])return;const S=v.layers[0].layout,P=f.collisionBoxArray,L=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),k=f.tileSize/s.EXTENT,F=f.tileID.toUnwrapped();this.transform.setProjection(v.projection);const $=(q=f.tileID,X=v.getProjection(),H=this.transform,X.name===this.projection?H.calculateProjMatrix(q.toUnwrapped()):Is(H,X,q));var q,X,H;const Y=S.get("text-pitch-alignment")==="map",B=S.get("text-rotation-alignment")==="map";l.compileFilter();const W=l.dynamicFilter(),te=l.dynamicFilterNeedsFeature(),re=this.transform.calculatePixelsToTileUnitsMatrix(f),pe=Hr($,f.tileID.canonical,Y,B,this.transform,v.getProjection(),re);let me=null;if(Y){const be=an($,f.tileID.canonical,Y,B,this.transform,v.getProjection(),re);me=s.multiply([],this.transform.labelPlaneMatrix,be)}let fe=null;W&&f.latestFeatureIndex&&(fe={unwrappedTileID:F,dynamicFilter:W,dynamicFilterNeedsFeature:te,featureIndex:f.latestFeatureIndex}),this.retainedQueryData[v.bucketInstanceId]=new su(v.bucketInstanceId,T,v.sourceLayerIndex,v.index,f.tileID);const Se={bucket:v,layout:S,posMatrix:$,textLabelPlaneMatrix:pe,labelToScreenMatrix:me,clippingData:fe,scale:L,textPixelRatio:k,holdingForFade:f.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(v.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(v.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(g)for(const be of v.sortKeyRanges){const{sortKey:Le,symbolInstanceStart:ot,symbolInstanceEnd:Ae}=be;i.push({sortKey:Le,symbolInstanceStart:ot,symbolInstanceEnd:Ae,parameters:Se})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:Se})}attemptAnchorPlacement(i,l,f,g,v,T,S,P,L,k,F,$,q,X,H,Y,B,W){const{textOffset0:te,textOffset1:re,crossTileID:pe}=$,me=[te,re],fe=pl(i,f,g,me,v),Se=this.collisionIndex.placeCollisionBox(X,v,l,fl(fe.x,fe.y,T,S,this.transform.angle),F,P,L,k.predicate);if(Y){const be=X.getSymbolInstanceIconSize(W,this.transform.zoom,$.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(X,be,Y,fl(fe.x,fe.y,T,S,this.transform.angle),F,P,L,k.predicate).box.length===0)return}if(Se.box.length>0){let be;return this.prevPlacement&&this.prevPlacement.variableOffsets[pe]&&this.prevPlacement.placements[pe]&&this.prevPlacement.placements[pe].text&&(be=this.prevPlacement.variableOffsets[pe].anchor),this.variableOffsets[pe]={textOffset:me,width:f,height:g,anchor:i,textScale:v,prevAnchor:be},this.markUsedJustification(X,i,$,H),X.allowVerticalPlacement&&(this.markUsedOrientation(X,H,$),this.placedOrientations[pe]=H),{shift:fe,placedGlyphBoxes:Se}}}placeLayerBucketPart(i,l,f,g){const{bucket:v,layout:T,posMatrix:S,textLabelPlaneMatrix:P,labelToScreenMatrix:L,clippingData:k,textPixelRatio:F,holdingForFade:$,collisionBoxArray:q,partiallyEvaluatedTextSize:X,partiallyEvaluatedIconSize:H,collisionGroup:Y}=i.parameters,B=T.get("text-optional"),W=T.get("icon-optional"),te=T.get("text-allow-overlap"),re=T.get("icon-allow-overlap"),pe=T.get("text-rotation-alignment")==="map",me=T.get("text-pitch-alignment")==="map",fe=T.get("icon-text-fit")!=="none",Se=T.get("symbol-z-order")==="viewport-y";this.transform.setProjection(v.projection);let be=te&&(re||!v.hasIconData()||W),Le=re&&(te||!v.hasTextData()||B);!v.collisionArrays&&q&&v.deserializeCollisionBoxes(q),f&&g&&v.updateCollisionDebugBuffers(this.transform.zoom,q);const ot=(Ae,qe,Fe)=>{const{crossTileID:nt,numVerticalGlyphVertices:ke}=Ae;if(k){const $n={zoom:this.transform.zoom,pitch:this.transform.pitch};let Sn=null;if(k.dynamicFilterNeedsFeature){const pn=this.retainedQueryData[v.bucketInstanceId];Sn=k.featureIndex.loadFeature({featureIndex:Ae.featureIndex,bucketIndex:pn.bucketIndex,sourceLayerIndex:pn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,k.dynamicFilter)($n,Sn,this.retainedQueryData[v.bucketInstanceId].tileID.canonical,new s.Point(Ae.tileAnchorX,Ae.tileAnchorY),this.transform.calculateDistanceTileData(k.unwrappedTileID)))return this.placements[nt]=new hl(!1,!1,!1,!0),void l.add(nt)}if(l.has(nt))return;if($)return void(this.placements[nt]=new hl(!1,!1,!1));let We=!1,at=!1,Qe=!0,lt=!1,Dt=!1,Gt=null,Pt={box:null,offscreen:null,occluded:null},Ot={box:null,offscreen:null,occluded:null},rn=null,en=null,Lt=null,vn=0,bn=0,Tn=0;Fe.textFeatureIndex?vn=Fe.textFeatureIndex:Ae.useRuntimeCollisionCircles&&(vn=Ae.featureIndex),Fe.verticalTextFeatureIndex&&(bn=Fe.verticalTextFeatureIndex);const En=$n=>{$n.tileID=this.retainedQueryData[v.bucketInstanceId].tileID;const Sn=this.transform.elevation;(Sn||$n.elevation)&&($n.elevation=Sn?Sn.getAtTileOffset($n.tileID,$n.tileAnchorX,$n.tileAnchorY):0)},Nr=Fe.textBox;if(Nr){En(Nr);const $n=pn=>{let ar=s.WritingMode.horizontal;if(v.allowVerticalPlacement&&!pn&&this.prevPlacement){const Xr=this.prevPlacement.placedOrientations[nt];Xr&&(this.placedOrientations[nt]=Xr,ar=Xr,this.markUsedOrientation(v,ar,Ae))}return ar},Sn=(pn,ar)=>{if(v.allowVerticalPlacement&&ke>0&&Fe.verticalTextBox){for(const Xr of v.writingModes)if(Xr===s.WritingMode.vertical?(Pt=ar(),Ot=Pt):Pt=pn(),Pt&&Pt.box&&Pt.box.length)break}else Pt=pn()};if(T.get("text-variable-anchor")){let pn=T.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[nt]){const Nn=this.prevPlacement.variableOffsets[nt];pn.indexOf(Nn.anchor)>0&&(pn=pn.filter(ri=>ri!==Nn.anchor),pn.unshift(Nn.anchor))}const ar=(Nn,ri,G1)=>{const Os=v.getSymbolInstanceTextSize(X,Ae,this.transform.zoom,qe),Dl=(Nn.x2-Nn.x1)*Os+2*Nn.padding,Oo=(Nn.y2-Nn.y1)*Os+2*Nn.padding,us=fe&&!re?ri:null;us&&En(us);let Us={box:[],offscreen:!1,occluded:!1};const $1=te?2*pn.length:pn.length;for(let Rl=0;Rl<$1;++Rl){const Ku=this.attemptAnchorPlacement(pn[Rl%pn.length],Nn,Dl,Oo,Os,pe,me,F,S,Y,Rl>=pn.length,Ae,qe,v,G1,us,X,H);if(Ku&&(Us=Ku.placedGlyphBoxes,Us&&Us.box&&Us.box.length)){We=!0,Gt=Ku.shift;break}}return Us};Sn(()=>ar(Nr,Fe.iconBox,s.WritingMode.horizontal),()=>{const Nn=Fe.verticalTextBox;return Nn&&En(Nn),v.allowVerticalPlacement&&!(Pt&&Pt.box&&Pt.box.length)&&ke>0&&Nn?ar(Nn,Fe.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Pt&&(We=Pt.box,Qe=Pt.offscreen,lt=Pt.occluded);const Xr=$n(!(!Pt||!Pt.box));if(!We&&this.prevPlacement){const Nn=this.prevPlacement.variableOffsets[nt];Nn&&(this.variableOffsets[nt]=Nn,this.markUsedJustification(v,Nn.anchor,Ae,Xr))}}else{const pn=(ar,Xr)=>{const Nn=v.getSymbolInstanceTextSize(X,Ae,this.transform.zoom,qe),ri=this.collisionIndex.placeCollisionBox(v,Nn,ar,new s.Point(0,0),te,F,S,Y.predicate);return ri&&ri.box&&ri.box.length&&(this.markUsedOrientation(v,Xr,Ae),this.placedOrientations[nt]=Xr),ri};Sn(()=>pn(Nr,s.WritingMode.horizontal),()=>{const ar=Fe.verticalTextBox;return v.allowVerticalPlacement&&ke>0&&ar?(En(ar),pn(ar,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),$n(!!(Pt&&Pt.box&&Pt.box.length))}}if(rn=Pt,We=rn&&rn.box&&rn.box.length>0,Qe=rn&&rn.offscreen,lt=rn&&rn.occluded,Ae.useRuntimeCollisionCircles){const $n=v.text.placedSymbolArray.get(Ae.centerJustifiedTextSymbolIndex>=0?Ae.centerJustifiedTextSymbolIndex:Ae.verticalPlacedTextSymbolIndex),Sn=s.evaluateSizeForFeature(v.textSizeData,X,$n),pn=T.get("text-padding");en=this.collisionIndex.placeCollisionCircles(v,te,$n,v.lineVertexArray,v.glyphOffsetArray,Sn,S,P,L,f,me,Y.predicate,Ae.collisionCircleDiameter*Sn/s.ONE_EM,pn,this.retainedQueryData[v.bucketInstanceId].tileID),We=te||en.circles.length>0&&!en.collisionDetected,Qe=Qe&&en.offscreen,lt=en.occluded}if(Fe.iconFeatureIndex&&(Tn=Fe.iconFeatureIndex),Fe.iconBox){const $n=Sn=>{En(Sn);const pn=fe&&Gt?fl(Gt.x,Gt.y,pe,me,this.transform.angle):new s.Point(0,0),ar=v.getSymbolInstanceIconSize(H,this.transform.zoom,Ae.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(v,ar,Sn,pn,re,F,S,Y.predicate)};Ot&&Ot.box&&Ot.box.length&&Fe.verticalIconBox?(Lt=$n(Fe.verticalIconBox),at=Lt.box.length>0):(Lt=$n(Fe.iconBox),at=Lt.box.length>0),Qe=Qe&&Lt.offscreen,Dt=Lt.occluded}const Mr=B||Ae.numHorizontalGlyphVertices===0&&ke===0,Ii=W||Ae.numIconVertices===0;if(Mr||Ii?Ii?Mr||(at=at&&We):We=at&&We:at=We=at&&We,We&&rn&&rn.box&&this.collisionIndex.insertCollisionBox(rn.box,T.get("text-ignore-placement"),v.bucketInstanceId,Ot&&Ot.box&&bn?bn:vn,Y.ID),at&&Lt&&this.collisionIndex.insertCollisionBox(Lt.box,T.get("icon-ignore-placement"),v.bucketInstanceId,Tn,Y.ID),en&&(We&&this.collisionIndex.insertCollisionCircles(en.circles,T.get("text-ignore-placement"),v.bucketInstanceId,vn,Y.ID),f)){const $n=v.bucketInstanceId;let Sn=this.collisionCircleArrays[$n];Sn===void 0&&(Sn=this.collisionCircleArrays[$n]=new dl);for(let pn=0;pn<en.circles.length;pn+=4)Sn.circles.push(en.circles[pn+0]),Sn.circles.push(en.circles[pn+1]),Sn.circles.push(en.circles[pn+2]),Sn.circles.push(en.collisionDetected?1:0)}const go=v.projection.name!=="globe";be=be&&(go||!lt),Le=Le&&(go||!Dt),this.placements[nt]=new hl(We||be,at||Le,Qe||v.justReloaded),l.add(nt)};if(Se){const Ae=v.getSortedSymbolIndexes(this.transform.angle);for(let qe=Ae.length-1;qe>=0;--qe){const Fe=Ae[qe];ot(v.symbolInstances.get(Fe),Fe,v.collisionArrays[Fe])}}else for(let Ae=i.symbolInstanceStart;Ae<i.symbolInstanceEnd;Ae++)ot(v.symbolInstances.get(Ae),Ae,v.collisionArrays[Ae]);if(f&&v.bucketInstanceId in this.collisionCircleArrays){const Ae=this.collisionCircleArrays[v.bucketInstanceId];s.invert(Ae.invProjMatrix,S),Ae.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}markUsedJustification(i,l,f,g){const{leftJustifiedTextSymbolIndex:v,centerJustifiedTextSymbolIndex:T,rightJustifiedTextSymbolIndex:S,verticalPlacedTextSymbolIndex:P,crossTileID:L}=f,k=s.getAnchorJustification(l),F=g===s.WritingMode.vertical?P:k==="left"?v:k==="center"?T:k==="right"?S:-1;v>=0&&(i.text.placedSymbolArray.get(v).crossTileID=F>=0&&v!==F?0:L),T>=0&&(i.text.placedSymbolArray.get(T).crossTileID=F>=0&&T!==F?0:L),S>=0&&(i.text.placedSymbolArray.get(S).crossTileID=F>=0&&S!==F?0:L),P>=0&&(i.text.placedSymbolArray.get(P).crossTileID=F>=0&&P!==F?0:L)}markUsedOrientation(i,l,f){const g=l===s.WritingMode.horizontal||l===s.WritingMode.horizontalOnly?l:0,v=l===s.WritingMode.vertical?l:0,{leftJustifiedTextSymbolIndex:T,centerJustifiedTextSymbolIndex:S,rightJustifiedTextSymbolIndex:P,verticalPlacedTextSymbolIndex:L}=f,k=i.text.placedSymbolArray;T>=0&&(k.get(T).placedOrientation=g),S>=0&&(k.get(S).placedOrientation=g),P>=0&&(k.get(P).placedOrientation=g),L>=0&&(k.get(L).placedOrientation=v)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let f=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const g=l?l.symbolFadeChange(i):1,v=l?l.opacities:{},T=l?l.variableOffsets:{},S=l?l.placedOrientations:{};for(const P in this.placements){const L=this.placements[P],k=v[P];k?(this.opacities[P]=new ko(k,g,L.text,L.icon,null,L.clipped),f=f||L.text!==k.text.placed||L.icon!==k.icon.placed):(this.opacities[P]=new ko(null,g,L.text,L.icon,L.skipFade,L.clipped),f=f||L.text||L.icon)}for(const P in v){const L=v[P];if(!this.opacities[P]){const k=new ko(L,g,!1,!1);k.isHidden()||(this.opacities[P]=k,f=f||L.text.placed||L.icon.placed)}}for(const P in T)this.variableOffsets[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.variableOffsets[P]=T[P]);for(const P in S)this.placedOrientations[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.placedOrientations[P]=S[P]);f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:i)}updateLayerOpacities(i,l){const f=new Set;for(const g of l){const v=g.getBucket(i);v&&g.latestFeatureIndex&&i.id===v.layerIds[0]&&this.updateBucketOpacities(v,f,g.collisionBoxArray)}}updateBucketOpacities(i,l,f){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0].layout,v=!!i.layers[0].dynamicFilter(),T=new ko(null,0,!1,!1,!0),S=g.get("text-allow-overlap"),P=g.get("icon-allow-overlap"),L=g.get("text-variable-anchor"),k=g.get("text-rotation-alignment")==="map",F=g.get("text-pitch-alignment")==="map",$=g.get("icon-text-fit")!=="none",q=new ko(null,0,S&&(P||!i.hasIconData()||g.get("icon-optional")),P&&(S||!i.hasTextData()||g.get("text-optional")),!0);!i.collisionArrays&&f&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(f);const X=(Y,B,W)=>{for(let te=0;te<B/4;te++)Y.opacityVertexArray.emplaceBack(W)};let H=0;for(let Y=0;Y<i.symbolInstances.length;Y++){const B=i.symbolInstances.get(Y),{numHorizontalGlyphVertices:W,numVerticalGlyphVertices:te,crossTileID:re,numIconVertices:pe}=B,me=l.has(re);let fe=this.opacities[re];me?fe=T:fe||(fe=q,this.opacities[re]=fe),l.add(re);const Se=W>0||te>0,be=pe>0,Le=this.placedOrientations[re],ot=Le===s.WritingMode.vertical,Ae=Le===s.WritingMode.horizontal||Le===s.WritingMode.horizontalOnly;if(!Se&&!be||fe.isHidden()||H++,Se){const qe=ml(fe.text);X(i.text,W,ot?Yn:qe),X(i.text,te,Ae?Yn:qe);const Fe=fe.text.isHidden(),{leftJustifiedTextSymbolIndex:nt,centerJustifiedTextSymbolIndex:ke,rightJustifiedTextSymbolIndex:We,verticalPlacedTextSymbolIndex:at}=B,Qe=i.text.placedSymbolArray,lt=Fe||ot?1:0;nt>=0&&(Qe.get(nt).hidden=lt),ke>=0&&(Qe.get(ke).hidden=lt),We>=0&&(Qe.get(We).hidden=lt),at>=0&&(Qe.get(at).hidden=Fe||Ae?1:0);const Dt=this.variableOffsets[re];Dt&&this.markUsedJustification(i,Dt.anchor,B,Le);const Gt=this.placedOrientations[re];Gt&&(this.markUsedJustification(i,"left",B,Gt),this.markUsedOrientation(i,Gt,B))}if(be){const qe=ml(fe.icon),{placedIconSymbolIndex:Fe,verticalPlacedIconSymbolIndex:nt}=B,ke=i.icon.placedSymbolArray,We=fe.icon.isHidden()?1:0;Fe>=0&&(X(i.icon,pe,ot?Yn:qe),ke.get(Fe).hidden=We),nt>=0&&(X(i.icon,B.numVerticalIconVertices,Ae?Yn:qe),ke.get(nt).hidden=We)}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const qe=i.collisionArrays[Y];if(qe){let Fe=new s.Point(0,0),nt=!0;if(qe.textBox||qe.verticalTextBox){if(L){const We=this.variableOffsets[re];We?(Fe=pl(We.anchor,We.width,We.height,We.textOffset,We.textScale),k&&Fe._rotate(F?this.transform.angle:-this.transform.angle)):nt=!1}v&&(nt=!fe.clipped),qe.textBox&&la(i.textCollisionBox.collisionVertexArray,fe.text.placed,!nt||ot,Fe.x,Fe.y),qe.verticalTextBox&&la(i.textCollisionBox.collisionVertexArray,fe.text.placed,!nt||Ae,Fe.x,Fe.y)}const ke=nt&&!!(!Ae&&qe.verticalIconBox);qe.iconBox&&la(i.iconCollisionBox.collisionVertexArray,fe.icon.placed,ke,$?Fe.x:0,$?Fe.y:0),qe.verticalIconBox&&la(i.iconCollisionBox.collisionVertexArray,fe.icon.placed,!ke,$?Fe.x:0,$?Fe.y:0)}}}if(i.fullyClipped=H===0,i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const Y=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Y.invProjMatrix,i.placementViewportMatrix=Y.viewportMatrix,i.collisionCircleArray=Y.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,l){const f=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function la(h,i,l,f,g){h.emplaceBack(i?1:0,l?1:0,f||0,g||0),h.emplaceBack(i?1:0,l?1:0,f||0,g||0),h.emplaceBack(i?1:0,l?1:0,f||0,g||0),h.emplaceBack(i?1:0,l?1:0,f||0,g||0)}const ti=Math.pow(2,25),nr=Math.pow(2,24),au=Math.pow(2,17),lu=Math.pow(2,16),ni=Math.pow(2,9),Ci=Math.pow(2,8),j2=Math.pow(2,1);function ml(h){if(h.opacity===0&&!h.placed)return 0;if(h.opacity===1&&h.placed)return 4294967295;const i=h.placed?1:0,l=Math.floor(127*h.opacity);return l*ti+i*nr+l*au+i*lu+l*ni+i*Ci+l*j2+i}const Yn=0;class _l{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&i.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(i,l,f,g,v){const T=this._bucketParts;for(;this._currentTileIndex<i.length;)if(l.getBucketParts(T,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((S,P)=>S.sortKey-P.sortKey));this._currentPartIndex<T.length;){const S=T[this._currentPartIndex];if(l.placeLayerBucketPart(S,this._seenCrossTileIDs,f,S.symbolInstanceStart===0),this._currentPartIndex++,v())return!0}return!1}}class cu{constructor(i,l,f,g,v,T,S,P){this.placement=new _1(i,v,T,S,P),this._currentPlacementIndex=l.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=g,this._done=!1}isDone(){return this._done}continuePlacement(i,l,f){const g=s.exported.now(),v=()=>{const T=s.exported.now()-g;return!this._forceFullPlacement&&T>2};for(;this._currentPlacementIndex>=0;){const T=l[i[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=S)&&(!T.maxzoom||T.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new _l(T)),this._inProgressLayer.continuePlacement(f[T.source],this.placement,this._showCollisionBoxes,T,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const ks=512/s.EXTENT/2;class kr{constructor(i,l,f){this.tileID=i,this.bucketInstanceId=f,this.index=new s.KDBush(l.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const g=i.canonical.x*s.EXTENT,v=i.canonical.y*s.EXTENT;for(let T=0;T<l.length;T++){const{key:S,crossTileID:P,tileAnchorX:L,tileAnchorY:k}=l.get(T),F=Math.floor((g+L)*ks),$=Math.floor((v+k)*ks);this.index.add(F,$),this.keys.push(S),this.crossTileIDs.push(P)}this.index.finish()}findMatches(i,l,f){const g=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z),v=ks/Math.pow(2,l.canonical.z-this.tileID.canonical.z),T=l.canonical.x*s.EXTENT,S=l.canonical.y*s.EXTENT;for(let P=0;P<i.length;P++){const L=i.get(P);if(L.crossTileID)continue;const{key:k,tileAnchorX:F,tileAnchorY:$}=L,q=Math.floor((T+F)*v),X=Math.floor((S+$)*v),H=this.index.range(q-g,X-g,q+g,X+g);for(const Y of H){const B=this.crossTileIDs[Y];if(this.keys[Y]===k&&!f.has(B)){f.add(B),L.crossTileID=B;break}}}}}class uu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class hu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const l=Math.round((i-this.lng)/360);if(l!==0)for(const f in this.indexes){const g=this.indexes[f],v={};for(const T in g){const S=g[T];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+l),v[S.tileID.key]=S}this.indexes[f]=v}this.lng=i}addBucket(i,l,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let v=0;v<l.symbolInstances.length;v++)l.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]=new Set);const g=this.usedCrossTileIDs[i.overscaledZ];for(const v in this.indexes){const T=this.indexes[v];if(Number(v)>i.overscaledZ)for(const S in T){const P=T[S];P.tileID.isChildOf(i)&&P.findMatches(l.symbolInstances,i,g)}else{const S=T[i.scaledTo(Number(v)).key];S&&S.findMatches(l.symbolInstances,i,g)}}for(let v=0;v<l.symbolInstances.length;v++){const T=l.symbolInstances.get(v);T.crossTileID||(T.crossTileID=f.generate(),g.add(T.crossTileID))}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new kr(i,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(i,l){for(const f of l.crossTileIDs)this.usedCrossTileIDs[i].delete(f)}removeStaleBuckets(i){let l=!1;for(const f in this.indexes){const g=this.indexes[f];for(const v in g)i[g[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,g[v]),delete g[v],l=!0)}return l}}class Lo{constructor(){this.layerIndexes={},this.crossTileIDs=new uu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,l,f,g){let v=this.layerIndexes[i.id];v===void 0&&(v=this.layerIndexes[i.id]=new hu);let T=!1;const S={};g.name!=="globe"&&v.handleWrapJump(f);for(const P of l){const L=P.getBucket(i);L&&i.id===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(P.tileID,L,this.crossTileIDs)&&(T=!0),S[L.bucketInstanceId]=!0)}return v.removeStaleBuckets(S)&&(T=!0),T}pruneUnusedLayers(i){const l={};i.forEach(f=>{l[f]=!0});for(const f in this.layerIndexes)l[f]||delete this.layerIndexes[f]}}const ls=(h,i)=>s.emitValidationErrors(h,i&&i.filter(l=>l.identifier!=="source.canvas")),g1=s.pick(jt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),X5=s.pick(jt,["setCenter","setZoom","setBearing","setPitch"]),du={version:8,layers:[],sources:{}},ca={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class fo extends s.Evented{constructor(i,l={}){super(),this.map=i,this.dispatcher=new yt(Hn(),this),this.imageManager=new Qt,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(i._requestManager,l.localFontFamily?s.LocalGlyphMode.all:l.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,l.localFontFamily||l.localIdeographFontFamily),this.crossTileSymbolIndex=new Lo,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const f=this;this._rtlTextPluginCallback=fo.registerForPluginStateChange(g=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(v,T)=>{if(s.triggerPluginCompletionEvent(v),T&&T.every(S=>S))for(const S in f._sourceCaches){const P=f._sourceCaches[S],L=P.getSource().type;L!=="vector"&&L!=="geojson"||P.reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const v=this.getSource(g.sourceId);if(v&&v.vectorLayerIds)for(const T in this._layers){const S=this._layers[T];S.source===v.id&&this._validateLayer(S)}})}loadURL(i,l={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const f=typeof l.validate=="boolean"?l.validate:!s.isMapboxURL(i);i=this.map._requestManager.normalizeStyleURL(i,l.accessToken);const g=this.map._requestManager.transformRequest(i,s.ResourceType.Style);this._request=s.getJSON(g,(v,T)=>{this._request=null,v?this.fire(new s.ErrorEvent(v)):T&&this._load(T,f)})}loadJSON(i,l={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(i,l.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(du,!1)}_updateLayerCount(i,l){const f=l?1:-1;i.is3D()&&(this._num3DLayers+=f),i.type==="circle"&&(this._numCircleLayers+=f),i.type==="symbol"&&(this._numSymbolLayers+=f)}_load(i,l){if(l&&ls(this,s.validateStyle(i)))return;this._loaded=!0,this.stylesheet=s.clone$1(i),this._updateMapProjection();for(const g in i.sources)this.addSource(g,i.sources[g],{validate:!1});this._changed=!1,i.sprite?this._loadSprite(i.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(i.glyphs);const f=gn(this.stylesheet.layers);this._order=f.map(g=>g.id),this._layers={},this._serializedLayers={};for(const g of f){const v=s.createStyleLayer(g);v.setEventedParent(this,{layer:{id:v.id}}),this._layers[v.id]=v,this._serializedLayers[v.id]=v.serialize(),this._updateLayerCount(v,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new $t(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(i){i?this.stylesheet.projection=i:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(i){this._spriteRequest=function(l,f,g){let v,T,S;const P=s.exported.devicePixelRatio>1?"@2x":"";let L=s.getJSON(f.transformRequest(f.normalizeSpriteURL(l,P,".json"),s.ResourceType.SpriteJSON),($,q)=>{L=null,S||(S=$,v=q,F())}),k=s.getImage(f.transformRequest(f.normalizeSpriteURL(l,P,".png"),s.ResourceType.SpriteImage),($,q)=>{k=null,S||(S=$,T=q,F())});function F(){if(S)g(S);else if(v&&T){const $=s.exported.getImageData(T),q={};for(const X in v){const{width:H,height:Y,x:B,y:W,sdf:te,pixelRatio:re,stretchX:pe,stretchY:me,content:fe}=v[X],Se=new s.RGBAImage({width:H,height:Y});s.RGBAImage.copy($,Se,{x:B,y:W},{x:0,y:0},{width:H,height:Y}),q[X]={data:Se,pixelRatio:re,sdf:te,stretchX:pe,stretchY:me,content:fe}}g(null,q)}}return{cancel(){L&&(L.cancel(),L=null),k&&(k.cancel(),k=null)}}}(i,this.map._requestManager,(l,f)=>{if(this._spriteRequest=null,l)this.fire(new s.ErrorEvent(l));else if(f)for(const g in f)this.imageManager.addImage(g,f[g]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(i){const l=this.getSource(i.source);if(!l)return;const f=i.sourceLayer;f&&(l.type==="geojson"||l.vectorLayerIds&&l.vectorLayerIds.indexOf(f)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${f}" does not exist on source "${l.id}" as specified by style layer "${i.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this._sourceCaches)if(!this._sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const l=[];for(const f of i){const g=this._layers[f];g.type!=="custom"&&l.push(g.serialize())}return l}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const i in this._sourceCaches)if(this._sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(i){return!!this.terrain&&(typeof i.isLayerDraped=="function"?i.isLayerDraped():ca[i.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(i){if(!this._loaded)return;const l=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(g.length||v.length)&&this._updateWorkerLayers(g,v);for(const T in this._updatedSources){const S=this._updatedSources[T];S==="reload"?this._reloadSource(T):S==="clear"&&this._clearSource(T)}this._updateTilesForChangedImages();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(i);this.light.updateTransitions(i),this.fog&&this.fog.updateTransitions(i),this._resetUpdates()}const f={};for(const g in this._sourceCaches){const v=this._sourceCaches[g];f[g]=v.used,v.used=!1}for(const g of this._order){const v=this._layers[g];if(v.recalculate(i,this._availableImages),!v.isHidden(i.zoom)){const S=this._getLayerSourceCache(v);S&&(S.used=!0)}const T=this.map.painter;if(T){const S=v.getProgramIds();if(!S)continue;const P=v.getProgramConfiguration(i.zoom);for(const L of S)T.useProgram(L,P)}}for(const g in f){const v=this._sourceCaches[g];f[g]!==v.used&&v.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:v.getSource().id}))}this.light.recalculate(i),this.terrain&&this.terrain.recalculate(i),this.fog&&this.fog.recalculate(i),this.z=i.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),l&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const l in this._sourceCaches)this._sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,l){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),ls(this,s.validateStyle(i)))return!1;(i=s.clone$1(i)).layers=gn(i.layers);const l=function(g,v){if(!g)return[{command:jt.setStyle,args:[v]}];let T=[];try{if(!C(g.version,v.version))return[{command:jt.setStyle,args:[v]}];C(g.center,v.center)||T.push({command:jt.setCenter,args:[v.center]}),C(g.zoom,v.zoom)||T.push({command:jt.setZoom,args:[v.zoom]}),C(g.bearing,v.bearing)||T.push({command:jt.setBearing,args:[v.bearing]}),C(g.pitch,v.pitch)||T.push({command:jt.setPitch,args:[v.pitch]}),C(g.sprite,v.sprite)||T.push({command:jt.setSprite,args:[v.sprite]}),C(g.glyphs,v.glyphs)||T.push({command:jt.setGlyphs,args:[v.glyphs]}),C(g.transition,v.transition)||T.push({command:jt.setTransition,args:[v.transition]}),C(g.light,v.light)||T.push({command:jt.setLight,args:[v.light]}),C(g.fog,v.fog)||T.push({command:jt.setFog,args:[v.fog]}),C(g.projection,v.projection)||T.push({command:jt.setProjection,args:[v.projection]});const S={},P=[];(function(F,$,q,X){let H;for(H in $=$||{},F=F||{})F.hasOwnProperty(H)&&($.hasOwnProperty(H)||$i(H,q,X));for(H in $){if(!$.hasOwnProperty(H))continue;const Y=$[H];F.hasOwnProperty(H)?C(F[H],Y)||(F[H].type==="geojson"&&Y.type==="geojson"&&Wr(F,$,H)?q.push({command:jt.setGeoJSONSourceData,args:[H,Y.data]}):fi(H,$,q,X)):po(H,$,q)}})(g.sources,v.sources,P,S);const L=[];g.layers&&g.layers.forEach(F=>{F.source&&S[F.source]?T.push({command:jt.removeLayer,args:[F.id]}):L.push(F)});let k=g.terrain;k&&S[k.source]&&(T.push({command:jt.setTerrain,args:[void 0]}),k=void 0),T=T.concat(P),C(k,v.terrain)||T.push({command:jt.setTerrain,args:[v.terrain]}),function(F,$,q){$=$||[];const X=(F=F||[]).map(qr),H=$.map(qr),Y=F.reduce(Zi,{}),B=$.reduce(Zi,{}),W=X.slice(),te=Object.create(null);let re,pe,me,fe,Se,be,Le;for(re=0,pe=0;re<X.length;re++)me=X[re],B.hasOwnProperty(me)?pe++:(q.push({command:jt.removeLayer,args:[me]}),W.splice(W.indexOf(me,pe),1));for(re=0,pe=0;re<H.length;re++)me=H[H.length-1-re],W[W.length-1-re]!==me&&(Y.hasOwnProperty(me)?(q.push({command:jt.removeLayer,args:[me]}),W.splice(W.lastIndexOf(me,W.length-pe),1)):pe++,be=W[W.length-re],q.push({command:jt.addLayer,args:[B[me],be]}),W.splice(W.length-re,0,me),te[me]=!0);for(re=0;re<H.length;re++)if(me=H[re],fe=Y[me],Se=B[me],!te[me]&&!C(fe,Se))if(C(fe.source,Se.source)&&C(fe["source-layer"],Se["source-layer"])&&C(fe.type,Se.type)){for(Le in ei(fe.layout,Se.layout,q,me,null,jt.setLayoutProperty),ei(fe.paint,Se.paint,q,me,null,jt.setPaintProperty),C(fe.filter,Se.filter)||q.push({command:jt.setFilter,args:[me,Se.filter]}),C(fe.minzoom,Se.minzoom)&&C(fe.maxzoom,Se.maxzoom)||q.push({command:jt.setLayerZoomRange,args:[me,Se.minzoom,Se.maxzoom]}),fe)fe.hasOwnProperty(Le)&&Le!=="layout"&&Le!=="paint"&&Le!=="filter"&&Le!=="metadata"&&Le!=="minzoom"&&Le!=="maxzoom"&&(Le.indexOf("paint.")===0?ei(fe[Le],Se[Le],q,me,Le.slice(6),jt.setPaintProperty):C(fe[Le],Se[Le])||q.push({command:jt.setLayerProperty,args:[me,Le,Se[Le]]}));for(Le in Se)Se.hasOwnProperty(Le)&&!fe.hasOwnProperty(Le)&&Le!=="layout"&&Le!=="paint"&&Le!=="filter"&&Le!=="metadata"&&Le!=="minzoom"&&Le!=="maxzoom"&&(Le.indexOf("paint.")===0?ei(fe[Le],Se[Le],q,me,Le.slice(6),jt.setPaintProperty):C(fe[Le],Se[Le])||q.push({command:jt.setLayerProperty,args:[me,Le,Se[Le]]}))}else q.push({command:jt.removeLayer,args:[me]}),be=W[W.lastIndexOf(me)+1],q.push({command:jt.addLayer,args:[Se,be]})}(L,v.layers,T)}catch(S){console.warn("Unable to compute style diff:",S),T=[{command:jt.setStyle,args:[v]}]}return T}(this.serialize(),i).filter(g=>!(g.command in X5));if(l.length===0)return!1;const f=l.filter(g=>!(g.command in g1));if(f.length>0)throw new Error(`Unimplemented: ${f.map(g=>g.command).join(", ")}.`);return l.forEach(g=>{g.command!=="setTransition"&&g.command!=="setProjection"&&this[g.command].apply(this,g.args)}),this.stylesheet=i,this._updateMapProjection(),!0}addImage(i,l){return this.getImage(i)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(i,l),this._afterImageUpdated(i),this)}updateImage(i,l){this.imageManager.updateImage(i,l)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){return this.getImage(i)?(this.imageManager.removeImage(i),this._afterImageUpdated(i),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(i,l,f={}){if(this._checkLoaded(),this.getSource(i)!==void 0)throw new Error("There is already a source with this ID");if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(s.validateSource,`sources.${i}`,l,null,f))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const g=tt(i,l,this.dispatcher,this);g.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(i),source:g.serialize(),sourceId:i}));const v=T=>{const S=(T?"symbol:":"other:")+i,P=this._sourceCaches[S]=new s.SourceCache(S,g,T);(T?this._symbolSourceCaches:this._otherSourceCaches)[i]=P,P.style=this,P.onAdd(this.map)};v(!1),l.type!=="vector"&&l.type!=="geojson"||v(!0),g.onAdd&&g.onAdd(this.map),this._changed=!0}removeSource(i){this._checkLoaded();const l=this.getSource(i);if(!l)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===i)return this.fire(new s.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${g}" is using it.`)));if(this.terrain&&this.terrain.get().source===i)return this.fire(new s.ErrorEvent(new Error(`Source "${i}" cannot be removed while terrain is using it.`)));const f=this._getSourceCaches(i);for(const g of f)delete this._sourceCaches[g.id],delete this._updatedSources[g.id],g.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:g.getSource().id})),g.setEventedParent(null),g.clearTiles();return delete this._otherSourceCaches[i],delete this._symbolSourceCaches[i],l.setEventedParent(null),l.onRemove&&l.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(i,l){this._checkLoaded(),this.getSource(i).setData(l),this._changed=!0}getSource(i){const l=this._getSourceCache(i);return l&&l.getSource()}_getSources(){const i=[];for(const l in this._otherSourceCaches){const f=this._getSourceCache(l);f&&i.push(f.getSource())}return i}addLayer(i,l,f={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${g}" already exists on this map`)));let v;if(i.type==="custom"){if(ls(this,s.validateCustomStyleLayer(i)))return;v=s.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(g,i.source),i=s.clone$1(i),i=s.extend(i,{source:g})),this._validate(s.validateLayer,`layers.${g}`,i,{arrayIndex:-1},f))return;v=s.createStyleLayer(i),this._validateLayer(v),v.setEventedParent(this,{layer:{id:g}}),this._serializedLayers[v.id]=v.serialize(),this._updateLayerCount(v,!0)}const T=l?this._order.indexOf(l):this._order.length;if(l&&T===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${l}" does not exist on this map.`)));this._order.splice(T,0,g),this._layerOrderChanged=!0,this._layers[g]=v;const S=this._getLayerSourceCache(v);if(this._removedLayers[g]&&v.source&&S&&v.type!=="custom"){const P=this._removedLayers[g];delete this._removedLayers[g],P.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",S.pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(i,l){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===l)return;const f=this._order.indexOf(i);this._order.splice(f,1);const g=l?this._order.indexOf(l):this._order.length;l&&g===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${l}" does not exist on this map.`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(i){this._checkLoaded();const l=this._layers[i];if(!l)return void this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be removed.`)));l.setEventedParent(null),this._updateLayerCount(l,!1);const f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=l,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],l.onRemove&&l.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}hasLayerType(i){for(const l in this._layers)if(this._layers[l].type===i)return!0;return!1}setLayerZoomRange(i,l,f){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===l&&g.maxzoom===f||(l!=null&&(g.minzoom=l),f!=null&&(g.maxzoom=f),this._updateLayer(g)):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(i,l,f={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!C(g.filter,l))return l==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(s.validateFilter,`layers.${g.id}.filter`,l,{layerType:g.type},f)||(g.filter=s.clone$1(l),this._updateLayer(g)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be filtered.`)))}getFilter(i){const l=this.getLayer(i);return l&&s.clone$1(l.filter)}setLayoutProperty(i,l,f,g={}){this._checkLoaded();const v=this.getLayer(i);v?C(v.getLayoutProperty(l),f)||(v.setLayoutProperty(l,f,g),this._updateLayer(v)):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(i,l){const f=this.getLayer(i);if(f)return f.getLayoutProperty(l);this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style.`)))}setPaintProperty(i,l,f,g={}){this._checkLoaded();const v=this.getLayer(i);v?C(v.getPaintProperty(l),f)||(v.setPaintProperty(l,f,g)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(i,l){const f=this.getLayer(i);return f&&f.getPaintProperty(l)}setFeatureState(i,l){this._checkLoaded();const f=i.source,g=i.sourceLayer,v=this.getSource(f);if(!v)return void this.fire(new s.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const T=v.type;if(T==="geojson"&&g)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(T==="vector"&&!g)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));i.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const S=this._getSourceCaches(f);for(const P of S)P.setFeatureState(g,i.id,l)}removeFeatureState(i,l){this._checkLoaded();const f=i.source,g=this.getSource(f);if(!g)return void this.fire(new s.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const v=g.type,T=v==="vector"?i.sourceLayer:void 0;if(v==="vector"&&!T)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(l&&typeof i.id!="string"&&typeof i.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const S=this._getSourceCaches(f);for(const P of S)P.removeFeatureState(T,i.id,l)}getFeatureState(i){this._checkLoaded();const l=i.source,f=i.sourceLayer,g=this.getSource(l);if(g){if(g.type!=="vector"||f)return i.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(l)[0].getFeatureState(f,i.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const i={};for(const l in this._sourceCaches){const f=this._sourceCaches[l].getSource();i[f.id]||(i[f.id]=f.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:i,layers:this._serializeLayers(this._order)},l=>l!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0;const l=this._getLayerSourceCache(i);i.source&&!this._updatedSources[i.source]&&l&&l.getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",l.pause()),this._changed=!0,i.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(i){const l=T=>this._layers[T].type==="fill-extrusion",f={},g=[];for(let T=this._order.length-1;T>=0;T--){const S=this._order[T];if(l(S)){f[S]=T;for(const P of i){const L=P[S];if(L)for(const k of L)g.push(k)}}}g.sort((T,S)=>S.intersectionZ-T.intersectionZ);const v=[];for(let T=this._order.length-1;T>=0;T--){const S=this._order[T];if(l(S))for(let P=g.length-1;P>=0;P--){const L=g[P].feature;if(f[L.layer.id]<T)break;v.push(L),g.pop()}else for(const P of i){const L=P[S];if(L)for(const k of L)v.push(k.feature)}}return v}queryRenderedFeatures(i,l,f){l&&l.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",l.filter,null,l);const g={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const P of l.layers){const L=this._layers[P];if(!L)return this.fire(new s.ErrorEvent(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];g[L.source]=!0}}const v=[];l.availableImages=this._availableImages;const T=l&&l.layers?l.layers.some(P=>{const L=this.getLayer(P);return L&&L.is3D()}):this.has3DLayers(),S=Nt.createFromScreenPoints(i,f);for(const P in this._sourceCaches){const L=this._sourceCaches[P].getSource().id;l.layers&&!g[L]||v.push(It(this._sourceCaches[P],this._layers,this._serializedLayers,S,l,f,T,!!this.map._showQueryGeometry))}return this.placement&&v.push(function(P,L,k,F,$,q,X){const H={},Y=q.queryRenderedSymbols(F),B=[];for(const W of Object.keys(Y).map(Number))B.push(X[W]);B.sort(Mt);for(const W of B){const te=W.featureIndex.lookupSymbolFeatures(Y[W.bucketInstanceId],L,W.bucketIndex,W.sourceLayerIndex,$.filter,$.layers,$.availableImages,P);for(const re in te){const pe=H[re]=H[re]||[],me=te[re];me.sort((fe,Se)=>{const be=W.featureSortOrder;if(be){const Le=be.indexOf(fe.featureIndex);return be.indexOf(Se.featureIndex)-Le}return Se.featureIndex-fe.featureIndex});for(const fe of me)pe.push(fe)}}for(const W in H)H[W].forEach(te=>{const re=te.feature,pe=k(P[W]);if(!pe)return;const me=pe.getFeatureState(re.layer["source-layer"],re.id);re.source=re.layer.source,re.layer["source-layer"]&&(re.sourceLayer=re.layer["source-layer"]),re.state=me});return H}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),S.screenGeometry,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(i,l){l&&l.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",l.filter,null,l);const f=this._getSourceCaches(i);let g=[];for(const v of f)g=g.concat(Tt(v,l));return g}addSourceType(i,l,f){return fo.getSourceType(i)?f(new Error(`A source type called "${i}" already exists.`)):(fo.setSourceType(i,l),l.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:l.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(i,l={}){this._checkLoaded();const f=this.light.getLight();let g=!1;for(const T in i)if(!C(i[T],f[T])){g=!0;break}if(!g)return;const v=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(i,l),this.light.updateTransitions(v)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(i,l=1){if(this._checkLoaded(),!i)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let f=i;if(l===1){if(typeof f.source=="object"){const g="terrain-dem-src";this.addSource(g,f.source),f=s.clone$1(f),f=s.extend(f,{source:g})}if(this._validate(s.validateTerrain,"terrain",f))return}if(!this.terrain||this.terrain&&l!==this.terrain.drapeRenderMode){if(!f)return;this._createTerrain(f,l)}else{const g=this.terrain,v=g.get();for(const T of Object.keys(s.spec.terrain))!f.hasOwnProperty(T)&&s.spec.terrain[T].default&&(f[T]=s.spec.terrain[T].default);for(const T in f)if(!C(f[T],v[T])){g.set(f),this.stylesheet.terrain=f;const S=this._setTransitionParameters({duration:0});g.updateTransitions(S);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(i){const l=this.fog=new ct(i,this.map.transform);this.stylesheet.fog=i;const f=this._setTransitionParameters({duration:0});l.updateTransitions(f)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const i of this.map._markers)i._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(i){if(this._checkLoaded(),!i)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const l=this.fog,f=l.get();Object.keys(i).length===0&&l.set(i);for(const g in i)if(!C(i[g],f[g])){l.set(i),this.stylesheet.fog=i;const v=this._setTransitionParameters({duration:0});l.updateTransitions(v);break}}else this._createFog(i);this._markersNeedUpdate=!0}_setTransitionParameters(i){return{now:s.exported.now(),transition:s.extend(i,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const i=this._order.filter(f=>this.isLayerDraped(this._layers[f])),l=this._order.filter(f=>!this.isLayerDraped(this._layers[f]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...i),this._drapedFirstOrder.push(...l)}_createTerrain(i,l){const f=this.terrain=new Ve(i,l);this.stylesheet.terrain=i,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const g=this._setTransitionParameters({duration:0});f.updateTransitions(g)}_force3DLayerUpdate(){for(const i in this._layers){const l=this._layers[i];l.type==="fill-extrusion"&&this._updateLayer(l)}}_forceSymbolLayerUpdate(){for(const i in this._layers){const l=this._layers[i];l.type==="symbol"&&this._updateLayer(l)}}_validate(i,l,f,g,v={}){return(!v||v.validate!==!1)&&ls(this,i.call(s.validateStyle,s.extend({key:l,style:this.serialize(),value:f,styleSpec:s.spec},g)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this._sourceCaches)this._sourceCaches[i].clearTiles(),this._sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){const l=this._getSourceCaches(i);for(const f of l)f.clearTiles()}_reloadSource(i){const l=this._getSourceCaches(i);for(const f of l)f.resume(),f.reload()}_reloadSources(){for(const i of this._getSources())i.reload&&i.reload()}_updateSources(i){for(const l in this._sourceCaches)this._sourceCaches[l].update(i)}_generateCollisionBoxes(){for(const i in this._sourceCaches){const l=this._sourceCaches[i];l.resume(),l.reload()}}_updatePlacement(i,l,f,g,v=!1){let T=!1,S=!1;const P={};for(const L of this._order){const k=this._layers[L];if(k.type!=="symbol")continue;if(!P[k.source]){const $=this._getLayerSourceCache(k);if(!$)continue;P[k.source]=$.getRenderableIds(!0).map(q=>$.getTileByID(q)).sort((q,X)=>X.tileID.overscaledZ-q.tileID.overscaledZ||(q.tileID.isLessThan(X.tileID)?-1:1))}const F=this.crossTileSymbolIndex.addLayer(k,P[k.source],i.center.lng,i.projection);T=T||F}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),v=v||this._layerOrderChanged||f===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(v||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),i.zoom))&&(this.pauseablePlacement=new cu(i,this._order,v,l,f,g,this.placement,this.fog&&i.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,P),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),S=!0),T&&this.pauseablePlacement.placement.setStale()),S||T)for(const L of this._order){const k=this._layers[L];k.type==="symbol"&&this.placement.updateLayerOpacities(k,P[k.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const i in this._sourceCaches)this._sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,l,f){this.imageManager.getImages(l.icons,f),this._updateTilesForChangedImages();const g=v=>{v&&v.setDependencies(l.tileID.key,l.type,l.icons)};g(this._otherSourceCaches[l.source]),g(this._symbolSourceCaches[l.source])}getGlyphs(i,l,f){this.glyphManager.getGlyphs(l.stacks,f)}getResource(i,l,f){return s.makeRequest(l,f)}_getSourceCache(i){return this._otherSourceCaches[i]}_getLayerSourceCache(i){return i.type==="symbol"?this._symbolSourceCaches[i.source]:this._otherSourceCaches[i.source]}_getSourceCaches(i){const l=[];return this._otherSourceCaches[i]&&l.push(this._otherSourceCaches[i]),this._symbolSourceCaches[i]&&l.push(this._symbolSourceCaches[i]),l}_isSourceCacheLoaded(i){const l=this._getSourceCaches(i);return l.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${i}'`))),!1):l.every(f=>f.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}fo.getSourceType=function(h){return Ue[h]},fo.setSourceType=function(h,i){Ue[h]=i},fo.registerForPluginStateChange=s.registerForPluginStateChange;var pu=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Ls="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",zo=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,gl=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Do=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let y1={},ua={};const yl=[];ha(pu,yl),ha(zo,yl),ha(gl,yl),ha(Do,yl),y1=yn("",zo),ua=yn(Do,gl);const V2=yn(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),v1=pu,fu=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var mu={background:yn(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:yn(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:yn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:yn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:yn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:yn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:yn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:yn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:yn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:yn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:yn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:yn(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:yn(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:yn(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:yn(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:yn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:yn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:yn(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:yn(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:yn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:yn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:yn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:yn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:yn(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:yn(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:yn(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ls),skyboxGradient:yn(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ls),skyboxCapture:yn(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:yn(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:yn(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function ha(h,i){const l=h.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let f of l)if(f=f.trim(),f[0]==="#"&&f.includes("if")&&!f.includes("endif")){f=f.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const g=f.split(" ");for(const v of g)i.includes(v)||i.push(v)}}function yn(h,i){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),g={},v=[...yl];return ha(h,v),ha(i,v),{fragmentSource:h=h.replace(l,(T,S,P,L,k)=>(g[k]=!0,S==="define"?`
#ifndef HAS_UNIFORM_u_${k}
varying ${P} ${L} ${k};
#else
uniform ${P} ${L} u_${k};
#endif
`:`
#ifdef HAS_UNIFORM_u_${k}
    ${P} ${L} ${k} = u_${k};
#endif
`)),vertexSource:i=i.replace(l,(T,S,P,L,k)=>{const F=L==="float"?"vec2":"vec4",$=k.match(/color/)?"color":F;return g[k]?S==="define"?`
#ifndef HAS_UNIFORM_u_${k}
uniform lowp float u_${k}_t;
attribute ${P} ${F} a_${k};
varying ${P} ${L} ${k};
#else
uniform ${P} ${L} u_${k};
#endif
`:$==="vec4"?`
#ifndef HAS_UNIFORM_u_${k}
    ${k} = a_${k};
#else
    ${P} ${L} ${k} = u_${k};
#endif
`:`
#ifndef HAS_UNIFORM_u_${k}
    ${k} = unpack_mix_${$}(a_${k}, u_${k}_t);
#else
    ${P} ${L} ${k} = u_${k};
#endif
`:S==="define"?`
#ifndef HAS_UNIFORM_u_${k}
uniform lowp float u_${k}_t;
attribute ${P} ${F} a_${k};
#else
uniform ${P} ${L} u_${k};
#endif
`:$==="vec4"?`
#ifndef HAS_UNIFORM_u_${k}
    ${P} ${L} ${k} = a_${k};
#else
    ${P} ${L} ${k} = u_${k};
#endif
`:`
#ifndef HAS_UNIFORM_u_${k}
    ${P} ${L} ${k} = unpack_mix_${$}(a_${k}, u_${k}_t);
#else
    ${P} ${L} ${k} = u_${k};
#endif
`}),staticAttributes:f,usedDefines:v}}class K5{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(i,l,f,g,v,T,S){this.context=i;let P=this.boundPaintVertexBuffers.length!==g.length;for(let k=0;!P&&k<g.length;k++)this.boundPaintVertexBuffers[k]!==g[k]&&(P=!0);let L=this.boundDynamicVertexBuffers.length!==S.length;for(let k=0;!L&&k<S.length;k++)this.boundDynamicVertexBuffers[k]!==S[k]&&(L=!0);if(!i.extVertexArrayObject||!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==f||P||L||this.boundIndexBuffer!==v||this.boundVertexOffset!==T)this.freshBind(l,f,g,v,T,S);else{i.bindVertexArrayOES.set(this.vao);for(const k of S)k&&k.bind();v&&v.dynamicDraw&&v.bind()}}freshBind(i,l,f,g,v,T){let S;const P=i.numAttributes,L=this.context,k=L.gl;if(L.extVertexArrayObject)this.vao&&this.destroy(),this.vao=L.extVertexArrayObject.createVertexArrayOES(),L.bindVertexArrayOES.set(this.vao),S=0,this.boundProgram=i,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=g,this.boundVertexOffset=v,this.boundDynamicVertexBuffers=T;else{S=L.currentNumAttributes||0;for(let F=P;F<S;F++)k.disableVertexAttribArray(F)}l.enableAttributes(k,i),l.bind(),l.setVertexAttribPointers(k,i,v);for(const F of f)F.enableAttributes(k,i),F.bind(),F.setVertexAttribPointers(k,i,v);for(const F of T)F&&(F.enableAttributes(k,i),F.bind(),F.setVertexAttribPointers(k,i,v));g&&g.bind(),L.currentNumAttributes=P}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function _u(h,i){const l=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new s.MercatorCoordinate(0,f/l).toLngLat().lat,new s.MercatorCoordinate(0,(f+1)/l).toLngLat().lat]}function G2(h,i,l,f,g,v,T){const S=h.context,P=S.gl,L=l.fbo;if(!L)return;h.prepareDrawTile();const k=h.useProgram("hillshade");S.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,L.colorAttachment.get());const F=((H,Y,B,W)=>{const te=B.paint.get("hillshade-shadow-color"),re=B.paint.get("hillshade-highlight-color"),pe=B.paint.get("hillshade-accent-color");let me=B.paint.get("hillshade-illumination-direction")*(Math.PI/180);B.paint.get("hillshade-illumination-anchor")==="viewport"&&(me-=H.transform.angle);const fe=!H.options.moving;return{u_matrix:W||H.transform.calculateProjMatrix(Y.tileID.toUnwrapped(),fe),u_image:0,u_latrange:_u(0,Y.tileID),u_light:[B.paint.get("hillshade-exaggeration"),me],u_shadow:te,u_highlight:re,u_accent:pe}})(h,l,f,h.terrain?i.projMatrix:null);h.prepareDrawProgram(S,k,i.toUnwrapped());const{tileBoundsBuffer:$,tileBoundsIndexBuffer:q,tileBoundsSegments:X}=h.getTileBoundsBuffers(l);k.draw(S,P.TRIANGLES,g,v,T,s.CullFaceMode.disabled,F,f.id,$,q,X)}function gu(h,i,l){if(!i.needsDEMTextureUpload)return;const f=h.context,g=f.gl;f.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||h.getTileTexture(l.stride);const v=l.getPixels();i.demTexture?i.demTexture.update(v,{premultiply:!1}):i.demTexture=new s.Texture(f,v,g.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}function $2(h,i,l,f,g,v){const T=h.context,S=T.gl;if(!i.dem)return;const P=i.dem;if(T.activeTexture.set(S.TEXTURE1),gu(h,i,P),!i.demTexture)return;i.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);const L=P.dim;T.activeTexture.set(S.TEXTURE0);let k=i.fbo;if(!k){const X=new s.Texture(T,{width:L,height:L,data:null},S.RGBA);X.bind(S.LINEAR,S.CLAMP_TO_EDGE),k=i.fbo=T.createFramebuffer(L,L,!0),k.colorAttachment.set(X.texture)}T.bindFramebuffer.set(k.framebuffer),T.viewport.set([0,0,L,L]);const{tileBoundsBuffer:F,tileBoundsIndexBuffer:$,tileBoundsSegments:q}=h.getMercatorTileBoundsBuffers();h.useProgram("hillshadePrepare").draw(T,S.TRIANGLES,f,g,v,s.CullFaceMode.disabled,((X,H)=>{const Y=H.stride,B=s.create();return s.ortho(B,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(B,B,[0,-s.EXTENT,0]),{u_matrix:B,u_image:1,u_dimension:[Y,Y],u_zoom:X.overscaledZ,u_unpack:H.unpackVector}})(i.tileID,P),l.id,F,$,q),i.needsHillshadePrepare=!1}const yu=h=>({u_matrix:new s.UniformMatrix4f(h),u_image0:new s.Uniform1i(h),u_skirt_height:new s.Uniform1f(h)}),da=(h,i)=>({u_matrix:h,u_image0:0,u_skirt_height:i}),x1=(h,i,l,f,g,v,T,S,P,L,k,F,$,q,X)=>({u_proj_matrix:Float32Array.from(h),u_globe_matrix:i,u_normalize_matrix:Float32Array.from(f),u_merc_matrix:l,u_zoom_transition:g,u_merc_center:v,u_image0:0,u_frustum_tl:T,u_frustum_tr:S,u_frustum_br:P,u_frustum_bl:L,u_globe_pos:k,u_globe_radius:F,u_viewport:$,u_grid_matrix:X?Float32Array.from(X):new Float32Array(9),u_skirt_height:q});function pa(h,i){return h!=null&&i!=null&&!(!h.hasData()||!i.hasData())&&h.demTexture!=null&&i.demTexture!=null&&h.tileID.key!==i.tileID.key}const Ro=new class{constructor(){this.operations={}}newMorphing(h,i,l,f,g){if(h in this.operations){const v=this.operations[h];v.to.tileID.key!==l.tileID.key&&(v.queued=l)}else this.operations[h]={startTime:f,phase:0,duration:g,from:i,to:l,queued:null}}getMorphValuesForProxy(h){if(!(h in this.operations))return null;const i=this.operations[h];return{from:i.from,to:i.to,phase:i.phase}}update(h){for(const i in this.operations){const l=this.operations[i];for(l.phase=(h-l.startTime)/l.duration;l.phase>=1||!this._validOp(l);)if(!this._nextOp(l,h)){delete this.operations[i];break}}}_nextOp(h,i){return!!h.queued&&(h.from=h.to,h.to=h.queued,h.queued=null,h.phase=0,h.startTime=i,!0)}_validOp(h){return h.from.hasData()&&h.to.hasData()}},zs={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function w1(h){return 6*Math.pow(1.5,22-h)}function Z2(h,i){const l=1<<h.z;return!i&&(h.x===0||h.x===l-1)||h.y===0||h.y===l-1}const vl=h=>({u_matrix:h});function vu(h,i,l,f,g){if(g>0){const v=s.exported.now(),T=(v-h.timeAdded)/g,S=i?(v-i.timeAdded)/g:-1,P=l.getSource(),L=f.coveringZoomLevel({tileSize:P.tileSize,roundZoom:P.roundZoom}),k=!i||Math.abs(i.tileID.overscaledZ-L)>Math.abs(h.tileID.overscaledZ-L),F=k&&h.refreshedUponExpiration?1:s.clamp(k?T:1-S,0,1);return h.refreshedUponExpiration&&T>=1&&(h.refreshedUponExpiration=!1),i?{opacity:1,mix:1-F}:{opacity:F,mix:0}}return{opacity:1,mix:0}}class xu extends s.SourceCache{constructor(i){const l={type:"raster-dem",maxzoom:i.transform.maxZoom},f=new yt(Hn(),null),g=tt("mock-dem",l,f,i.style);super("mock-dem",g,!1),g.setEventedParent(this),this._sourceLoaded=!0}_loadTile(i,l){i.state="loaded",l(null)}}class b1 extends s.SourceCache{constructor(i){const l=tt("proxy",{type:"geojson",maxzoom:i.transform.maxZoom},new yt(Hn(),null),i.style);super("proxy",l,!1),l.setEventedParent(this),this.map=this.getSource().map=i,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(i,l,f){if(i.freezeTileCoverage)return;this.transform=i;const g=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((v,T)=>{if(v[T.key]="",!this._tiles[T.key]){const S=new s.Tile(T,this._source.tileSize*T.overscaleFactor(),i.tileZoom);S.state="loaded",this._tiles[T.key]=S}return v},{});for(const v in this._tiles)v in g||(this.freeFBO(v),this._tiles[v].unloadVectorData(),delete this._tiles[v])}freeFBO(i){const l=this.proxyCachedFBO[i];if(l!==void 0){const f=Object.values(l);this.renderCachePool.push(...f),delete this.proxyCachedFBO[i]}}deallocRenderCache(){this.renderCache.forEach(i=>i.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class T1 extends s.OverscaledTileID{constructor(i,l,f){super(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y),this.proxyTileKey=l,this.projMatrix=f}}class wu extends s.Elevation{constructor(i,l){super(),this.painter=i,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[f,g,v]=function(P){const L=new s.StructArrayLayout2i4,k=new s.StructArrayLayout3ui6,F=131;L.reserve(17161),k.reserve(33800);const $=s.EXTENT/128,q=s.EXTENT+$/2,X=q+$;for(let Y=-$;Y<X;Y+=$)for(let B=-$;B<X;B+=$){const W=B<0||B>q||Y<0||Y>q?24575:0,te=s.clamp(Math.round(B),0,s.EXTENT),re=s.clamp(Math.round(Y),0,s.EXTENT);L.emplaceBack(te+W,re)}const H=(Y,B)=>{const W=B*F+Y;k.emplaceBack(W+1,W,W+F),k.emplaceBack(W+F,W+F+1,W+1)};for(let Y=1;Y<129;Y++)for(let B=1;B<129;B++)H(B,Y);return[0,129].forEach(Y=>{for(let B=0;B<130;B++)H(B,Y),H(Y,B)}),[L,k,32768]}(),T=i.context;this.gridBuffer=T.createVertexBuffer(f,s.posAttributes.members),this.gridIndexBuffer=T.createIndexBuffer(g),this.gridSegments=s.SegmentVector.simpleSegment(0,0,f.length,g.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,f.length,v),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new b1(l.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.EXTENT,0,s.EXTENT,0,1);const S=T.gl;this._overlapStencilMode=new s.StencilMode({func:S.GEQUAL,mask:255},0,255,S.KEEP,S.KEEP,S.REPLACE),this._previousZoom=i.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=l,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new xu(l.map)}set style(i){i.on("data",this._onStyleDataEvent.bind(this)),i.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=i,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(i,l,f){if(i&&i.terrain){this._style!==i&&(this.style=i),this.enabled=!0;const g=i.terrain.properties;this.sourceCache=i.terrain.drapeRenderMode===0?this._mockSourceCache:i._getSourceCache(g.get("source")),this._exaggeration=g.get("exaggeration");const v=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const T=this.getScaledDemTileSize();this.sourceCache.update(l,T,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,v(),this._initializing=!0),v(),l.updateElevation(!0,f),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(l),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(i){this._findCoveringTileCache[i]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const i=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||i.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${i.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${i.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(i){i.coord&&i.dataType==="source"?this._clearRenderCacheForTile(i.sourceCacheId,i.coord):i.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const i in this._style._sourceCaches)this._style._sourceCaches[i].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(i=>i.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const i=2*this.proxySourceCache.getSource().tileSize;return[i,i]}set useVertexMorphing(i){this._useVertexMorphing=i}updateTileBinding(i){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const l=this.proxySourceCache,f=this.painter.transform;this._initializing&&(this._initializing=f._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(f.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const g=this.proxyCoords=l.getIds().map(P=>{const L=l.getTileByID(P).tileID;return L.projMatrix=f.calculateProjMatrix(L.toUnwrapped()),L});(function(P,L){const k=L.transform.pointCoordinate(L.transform.getCameraPoint()),F=new s.Point(k.x,k.y);P.sort(($,q)=>{if(q.overscaledZ-$.overscaledZ)return q.overscaledZ-$.overscaledZ;const X=new s.Point($.canonical.x+(1<<$.canonical.z)*$.wrap,$.canonical.y),H=new s.Point(q.canonical.x+(1<<q.canonical.z)*q.wrap,q.canonical.y),Y=F.mult(1<<$.canonical.z);return Y.x-=.5,Y.y-=.5,Y.distSqr(X)-Y.distSqr(H)})})(g,this.painter),this._previousZoom=f.zoom;const v=this.proxyToSource||{};this.proxyToSource={},g.forEach(P=>{this.proxyToSource[P.key]={}}),this.terrainTileForTile={};const T=this._style._sourceCaches;for(const P in T){const L=T[P];if(!L.used||(L!==this.sourceCache&&this.resetTileLookupCache(L.id),this._setupProxiedCoordsForOrtho(L,i[P],v),L.usedForTerrain))continue;const k=i[P];L.getSource().reparseOverscaled&&this._assignTerrainTiles(k)}this.proxiedCoords[l.id]=g.map(P=>new T1(P,P.key,this.orthoMatrix)),this._assignTerrainTiles(g),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(v),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const S={};this._visibleDemTiles=[];for(const P of this.proxyCoords){const L=this.terrainTileForTile[P.key];if(!L)continue;const k=L.tileID.key;k in S||(this._visibleDemTiles.push(L),S[k]=k)}}_assignTerrainTiles(i){this._initializing||i.forEach(l=>{if(this.terrainTileForTile[l.key])return;const f=this._findTileCoveringTileID(l,this.sourceCache);f&&(this.terrainTileForTile[l.key]=f)})}_prepareDEMTextures(){const i=this.painter.context,l=i.gl;for(const f in this.terrainTileForTile){const g=this.terrainTileForTile[f],v=g.dem;!v||g.demTexture&&!g.needsDEMTextureUpload||(i.activeTexture.set(l.TEXTURE1),gu(this.painter,g,v))}}_prepareDemTileUniforms(i,l,f,g){if(!l||l.demTexture==null)return!1;const v=i.tileID.canonical,T=Math.pow(2,l.tileID.canonical.z-v.z),S=g||"";return f[`u_dem_tl${S}`]=[v.x*T%1,v.y*T%1],f[`u_dem_scale${S}`]=T,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const i=this.painter.context,l=i.gl;if(!this._emptyDepthBufferTexture){const f=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(i,f,l.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let i=0;const l=this._visibleDemTiles.reduce((f,g)=>{if(!g.dem)return f;const v=g.dem.tree.minimums[0];return v>0&&i++,f+v},0);return i?l/i:0}_updateEmptyDEMTexture(){const i=this.painter.context,l=i.gl;i.activeTexture.set(l.TEXTURE2);const f=this._getLoadedAreaMinimum(),g=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(f,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let v=this._emptyDEMTexture;return v?v.update(g,{premultiply:!1}):v=this._emptyDEMTexture=new s.Texture(i,g,l.RGBA,{premultiply:!1}),v}setupElevationDraw(i,l,f){const g=this.painter.context,v=g.gl,T=(S=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(S),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var S;T.u_dem_size=this.sourceCache.getSource().tileSize,T.u_exaggeration=this.exaggeration();let P=null,L=null,k=1;if(f&&f.morphing&&this._useVertexMorphing){const F=f.morphing.srcDemTile,$=f.morphing.dstDemTile;k=f.morphing.phase,F&&$&&(this._prepareDemTileUniforms(i,F,T,"_prev")&&(L=F),this._prepareDemTileUniforms(i,$,T)&&(P=$))}if(L&&P?(g.activeTexture.set(v.TEXTURE2),P.demTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE,v.NEAREST),g.activeTexture.set(v.TEXTURE4),L.demTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE,v.NEAREST),T.u_dem_lerp=k):(P=this.terrainTileForTile[i.tileID.key],g.activeTexture.set(v.TEXTURE2),(this._prepareDemTileUniforms(i,P,T)?P.demTexture:this.emptyDEMTexture).bind(v.NEAREST,v.CLAMP_TO_EDGE)),g.activeTexture.set(v.TEXTURE3),f&&f.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE),this._depthFBO&&(T.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE),T.u_depth_size_inv=[1,1]),f&&f.useMeterToDem&&P){const F=(1<<P.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;T.u_meter_to_dem=F}if(f&&f.labelPlaneMatrixInv&&(T.u_label_plane_matrix_inv=f.labelPlaneMatrixInv),l.setTerrainUniformValues(g,T),this.painter.transform.projection.name==="globe"){const F=this.globeUniformValues(this.painter.transform,i.tileID.canonical,f&&f.useDenormalizedUpVectorScale);l.setGlobeUniformValues(g,F)}}globeUniformValues(i,l,f){const g=i.projection;return{u_tile_tl_up:g.upVector(l,0,0),u_tile_tr_up:g.upVector(l,s.EXTENT,0),u_tile_br_up:g.upVector(l,s.EXTENT,s.EXTENT),u_tile_bl_up:g.upVector(l,0,s.EXTENT),u_tile_up_scale:f?s.globeMetersToEcef(1):g.upVectorScale(l,i.center.lat,i.worldSize).metersToTile}}renderToBackBuffer(i){const l=this.painter,f=this.painter.context;i.length!==0&&(f.bindFramebuffer.set(null),f.viewport.set([0,0,l.width,l.height]),l.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(g,v,T,S,P){if(g.transform.projection.name==="globe")(function(L,k,F,$,q){const X=L.context,H=X.gl;let Y,B;const W=L.options.showTerrainWireframe?2:0,te=L.transform,re=s.globeUseCustomAntiAliasing(L,X,te),pe=(nt,ke)=>{if(B===nt)return;const We=[zs[nt],"PROJECTION_GLOBE_VIEW"];re&&We.push("CUSTOM_ANTIALIASING"),ke&&We.push(zs[W]),Y=L.useProgram("globeRaster",null,We),B=nt},me=L.colorModeForRenderPass(),fe=new s.DepthMode(H.LEQUAL,s.DepthMode.ReadWrite,L.depthRangeFor3D);Ro.update(q);const Se=s.calculateGlobeMercatorMatrix(te),be=[s.mercatorXfromLng(te.center.lng),s.mercatorYfromLat(te.center.lat)],Le=W?[!1,!0]:[!1],ot=L.globeSharedBuffers,Ae=[te.width*s.exported.devicePixelRatio,te.height*s.exported.devicePixelRatio],qe=Float32Array.from(te.globeMatrix),Fe={useDenormalizedUpVectorScale:!0};if(Le.forEach(nt=>{const ke=L.transform,We=w1(ke.zoom)*k.exaggeration();B=-1;const at=nt?H.LINES:H.TRIANGLES;for(const Qe of $){const lt=F.getTile(Qe),Dt=s.StencilMode.disabled,Gt=k.prevTerrainTileForTile[Qe.key],Pt=k.terrainTileForTile[Qe.key];pa(Gt,Pt)&&Ro.newMorphing(Qe.key,Gt,Pt,q,250),X.activeTexture.set(H.TEXTURE0),lt.texture.bind(H.LINEAR,H.CLAMP_TO_EDGE);const Ot=Ro.getMorphValuesForProxy(Qe.key),rn=Ot?1:0;Ot&&s.extend$1(Fe,{morphing:{srcDemTile:Ot.from,dstDemTile:Ot.to,phase:s.easeCubicInOut(Ot.phase)}});const en=s.tileCornersToBounds(Qe.canonical),Lt=s.getLatitudinalLod(en.getCenter().lat),vn=s.getGridMatrix(Qe.canonical,en,Lt,ke.worldSize/ke._pixelsPerMercatorPixel),bn=s.globeNormalizeECEF(s.globeTileBounds(Qe.canonical)),Tn=x1(ke.projMatrix,qe,Se,bn,s.globeToMercatorTransition(ke.zoom),be,ke.frustumCorners.TL,ke.frustumCorners.TR,ke.frustumCorners.BR,ke.frustumCorners.BL,ke.globeCenterInViewSpace,ke.globeRadius,Ae,We,vn);if(pe(rn,nt),k.setupElevationDraw(lt,Y,Fe),L.prepareDrawProgram(X,Y,Qe.toUnwrapped()),ot){const[En,Nr,Mr]=nt?ot.getWirefameBuffers(L.context,Lt):ot.getGridBuffers(Lt,We!==0);Y.draw(X,at,fe,Dt,me,s.CullFaceMode.backCCW,Tn,"globe_raster",En,Nr,Mr)}}}),ot){const nt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];re&&nt.push("CUSTOM_ANTIALIASING"),Y=L.useProgram("globeRaster",null,nt);for(const ke of $){const{x:We,y:at,z:Qe}=ke.canonical,lt=at===0,Dt=at===(1<<Qe)-1,[Gt,Pt,Ot,rn]=ot.getPoleBuffers(Qe);if(rn&&(lt||Dt)){const en=F.getTile(ke);X.activeTexture.set(H.TEXTURE0),en.texture.bind(H.LINEAR,H.CLAMP_TO_EDGE);let Lt=s.globePoleMatrixForTile(Qe,We,te);const vn=s.globeNormalizeECEF(s.globeTileBounds(ke.canonical)),bn=(Tn,En)=>Tn.draw(X,H.TRIANGLES,fe,s.StencilMode.disabled,me,s.CullFaceMode.disabled,x1(te.projMatrix,Lt,Lt,vn,0,be,te.frustumCorners.TL,te.frustumCorners.TR,te.frustumCorners.BR,te.frustumCorners.BL,te.globeCenterInViewSpace,te.globeRadius,Ae,0),"globe_pole_raster",En,Ot,rn);k.setupElevationDraw(en,Y,Fe),L.prepareDrawProgram(X,Y,ke.toUnwrapped()),lt&&bn(Y,Gt),Dt&&(Lt=s.scale(s.create(),Lt,[1,-1,1]),bn(Y,Pt))}}}})(g,v,T,S,P);else{const L=g.context,k=L.gl;let F,$;const q=g.options.showTerrainWireframe?2:0,X=(te,re)=>{if($===te)return;const pe=[zs[te]];re&&pe.push(zs[q]),F=g.useProgram("terrainRaster",null,pe),$=te},H=g.colorModeForRenderPass(),Y=new s.DepthMode(k.LEQUAL,s.DepthMode.ReadWrite,g.depthRangeFor3D);Ro.update(P);const B=g.transform,W=w1(B.zoom)*v.exaggeration();(q?[!1,!0]:[!1]).forEach(te=>{$=-1;const re=te?k.LINES:k.TRIANGLES,[pe,me]=te?v.getWirefameBuffer():[v.gridIndexBuffer,v.gridSegments];for(const fe of S){const Se=T.getTile(fe),be=s.StencilMode.disabled,Le=v.prevTerrainTileForTile[fe.key],ot=v.terrainTileForTile[fe.key];pa(Le,ot)&&Ro.newMorphing(fe.key,Le,ot,P,250),L.activeTexture.set(k.TEXTURE0),Se.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST);const Ae=Ro.getMorphValuesForProxy(fe.key),qe=Ae?1:0;let Fe;Ae&&(Fe={morphing:{srcDemTile:Ae.from,dstDemTile:Ae.to,phase:s.easeCubicInOut(Ae.phase)}});const nt=da(fe.projMatrix,Z2(fe.canonical,B.renderWorldCopies)?W/10:W);X(qe,te),v.setupElevationDraw(Se,F,Fe),g.prepareDrawProgram(L,F,fe.toUnwrapped()),F.draw(L,re,Y,be,H,s.CullFaceMode.backCCW,nt,"terrain_raster",v.gridBuffer,pe,me)}})}}(l,this,this.proxySourceCache,i,this._updateTimestamp),this.renderingToTexture=!0,l.gpuTimingDeferredRenderEnd(),i.splice(0,i.length))}renderBatch(i){if(this._drapedRenderBatches.length===0)return i+1;this.renderingToTexture=!0;const l=this.painter,f=this.painter.context,g=this.proxySourceCache,v=this.proxiedCoords[g.id],T=this._drapedRenderBatches.shift(),S=[],P=l.style.order;let L=0;for(const k of v){const F=g.getTileByID(k.proxyTileKey),$=g.proxyCachedFBO[k.key]?g.proxyCachedFBO[k.key][i]:void 0,q=$!==void 0?g.renderCache[$]:this.pool[L++],X=$!==void 0;if(F.texture=q.tex,X&&!q.dirty){S.push(F.tileID);continue}let H;f.bindFramebuffer.set(q.fb.framebuffer),this.renderedToTile=!1,q.dirty&&(f.clear({color:s.Color.transparent,stencil:0}),q.dirty=!1);for(let Y=T.start;Y<=T.end;++Y){const B=l.style._layers[P[Y]];if(B.isHidden(l.transform.zoom))continue;const W=l.style._getLayerSourceCache(B),te=W?this.proxyToSource[k.key][W.id]:[k];if(!te)continue;const re=te;f.viewport.set([0,0,q.fb.width,q.fb.height]),H!==(W?W.id:null)&&(this._setupStencil(q,te,B,W),H=W?W.id:null),l.renderLayer(l,W,B,re)}this.renderedToTile?(q.dirty=!0,S.push(F.tileID)):X||--L,L===5&&(L=0,this.renderToBackBuffer(S))}return this.renderToBackBuffer(S),this.renderingToTexture=!1,f.bindFramebuffer.set(null),f.viewport.set([0,0,l.width,l.height]),T.end+1}postRender(){}renderCacheEfficiency(i){const l=i.order.length;if(l===0)return{efficiency:100};let f,g=0,v=0,T=!1;for(let S=0;S<l;++S){const P=i._layers[i.order[S]];this._style.isLayerDraped(P)?(T&&++g,++v):T||(T=!0,f=P.id)}return v===0?{efficiency:100}:{efficiency:100*(1-g/v),firstUndrapedLayer:f}}getMinElevationBelowMSL(){let i=0;return this._visibleDemTiles.filter(l=>l.dem).forEach(l=>{i=Math.min(i,l.dem.tree.minimums[0])}),i===0?i:(i-30)*this._exaggeration}raycast(i,l,f){if(!this._visibleDemTiles)return null;const g=this._visibleDemTiles.filter(v=>v.dem).map(v=>{const T=v.tileID,S=1<<T.overscaledZ,{x:P,y:L}=T.canonical,k=P/S,F=(P+1)/S,$=L/S,q=(L+1)/S;return{minx:k,miny:$,maxx:F,maxy:q,t:v.dem.tree.raycastRoot(k,$,F,q,i,l,f),tile:v}});g.sort((v,T)=>(v.t!==null?v.t:Number.MAX_VALUE)-(T.t!==null?T.t:Number.MAX_VALUE));for(const v of g){if(v.t==null)return null;const T=v.tile.dem.tree.raycast(v.minx,v.miny,v.maxx,v.maxy,i,l,f);if(T!=null)return T}return null}_createFBO(){const i=this.painter.context,l=i.gl,f=this.drapeBufferSize;i.activeTexture.set(l.TEXTURE0);const g=new s.Texture(i,{width:f[0],height:f[1],data:null},l.RGBA);g.bind(l.LINEAR,l.CLAMP_TO_EDGE);const v=i.createFramebuffer(f[0],f[1],!1);return v.colorAttachment.set(g.texture),v.depthAttachment=new ye(i,v.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=i.createRenderbuffer(i.gl.DEPTH_STENCIL,f[0],f[1]),this._stencilRef=0,v.depthAttachment.set(this._sharedDepthStencil),i.clear({stencil:0})):v.depthAttachment.set(this._sharedDepthStencil),i.extTextureFilterAnisotropic&&!i.extTextureFilterAnisotropicForceOff&&l.texParameterf(l.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax),{fb:v,tex:g,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const i in this._style._sourceCaches)if(this._style._sourceCaches[i].hasTransition())return!0;return this._style.order.some(i=>{const l=this._style._layers[i],f=l.isHidden(this.painter.transform.zoom);return l.type==="custom"?!f&&l.shouldRedrape():!f&&l.hasTransition()})}_clearLineLayersFromRenderCache(){let i=!1;for(const f of this._style._getSources())if(f instanceof pt){i=!0;break}if(!i)return;const l={};for(let f=0;f<this._style.order.length;++f){const g=this._style._layers[this._style.order[f]],v=this._style._getLayerSourceCache(g);if(v&&!l[v.id]&&!g.isHidden(this.painter.transform.zoom)&&g.type==="line"&&g.widthExpression()instanceof s.ZoomDependentExpression){l[v.id]=!0;for(const T of this.proxyCoords){const S=this.proxyToSource[T.key][v.id];if(S)for(const P of S)this._clearRenderCacheForTile(v.id,P)}}}}_clearRasterLayersFromRenderCache(){let i=!1;for(const f in this._style._sourceCaches)if(this._style._sourceCaches[f]._source instanceof K){i=!0;break}if(!i)return;const l={};for(let f=0;f<this._style.order.length;++f){const g=this._style._layers[this._style.order[f]],v=this._style._getLayerSourceCache(g);if(!v||l[v.id]||g.isHidden(this.painter.transform.zoom)||g.type!=="raster")continue;const T=g.paint.get("raster-fade-duration");for(const S of this.proxyCoords){const P=this.proxyToSource[S.key][v.id];if(P)for(const L of P){const k=vu(v.getTile(L),v.findLoadedParent(L,0),v,this.painter.transform,T);(k.opacity!==1||k.mix!==0)&&this._clearRenderCacheForTile(v.id,L)}}}}_setupDrapedRenderBatches(){const i=this._style.order,l=i.length;if(l===0)return;const f=[];let g,v=0,T=this._style._layers[i[v]];for(;!this._style.isLayerDraped(T)&&T.isHidden(this.painter.transform.zoom)&&++v<l;)T=this._style._layers[i[v]];for(;v<l;++v){const S=this._style._layers[i[v]];S.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(S)?g===void 0&&(g=v):g!==void 0&&(f.push({start:g,end:v-1}),g=void 0))}g!==void 0&&f.push({start:g,end:v-1}),this._drapedRenderBatches=f}_setupRenderCache(i){const l=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,l.renderCache.length>l.renderCachePool.length){const T=Object.values(l.proxyCachedFBO);l.proxyCachedFBO={};for(let S=0;S<T.length;++S){const P=Object.values(T[S]);l.renderCachePool.push(...P)}}return}this._clearRasterLayersFromRenderCache();const f=this.proxyCoords,g=this._tilesDirty;for(let T=f.length-1;T>=0;T--){const S=f[T];if(l.getTileByID(S.key),l.proxyCachedFBO[S.key]!==void 0){const P=i[S.key],L=this.proxyToSource[S.key];let k=0;for(const F in L){const $=L[F],q=P[F];if(!q||q.length!==$.length||$.some((X,H)=>X!==q[H]||g[F]&&g[F].hasOwnProperty(X.key))){k=-1;break}++k}for(const F in l.proxyCachedFBO[S.key])l.renderCache[l.proxyCachedFBO[S.key][F]].dirty=k<0||k!==Object.values(P).length}}const v=[...this._drapedRenderBatches];v.sort((T,S)=>S.end-S.start-(T.end-T.start));for(const T of v)for(const S of f){if(l.proxyCachedFBO[S.key])continue;let P=l.renderCachePool.pop();P===void 0&&l.renderCache.length<50&&(P=l.renderCache.length,l.renderCache.push(this._createFBO())),P!==void 0&&(l.proxyCachedFBO[S.key]={},l.proxyCachedFBO[S.key][T.start]=P,l.renderCache[P].dirty=!0)}this._tilesDirty={}}_setupStencil(i,l,f,g){if(!g||!this._sourceTilesOverlap[g.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const v=this.painter.context,T=v.gl;if(l.length<=1)return void(this._overlapStencilType=!1);let S;if(f.isTileClipped())S=l.length,this._overlapStencilMode.test={func:T.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(l[0].overscaledZ>l[l.length-1].overscaledZ))return void(this._overlapStencilType=!1);S=1,this._overlapStencilMode.test={func:T.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+S>255&&(v.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=S,this._overlapStencilMode.ref=this._stencilRef,f.isTileClipped()&&this._renderTileClippingMasks(l,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(i){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[i.key]),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(i,l){const f=this.painter,g=this.painter.context,v=g.gl;f._tileClippingMaskIDs={},g.setColorMode(s.ColorMode.disabled),g.setDepthMode(s.DepthMode.disabled);const T=f.useProgram("clippingMask");for(const S of i){const P=f._tileClippingMaskIDs[S.key]=--l;T.draw(g,v.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:v.ALWAYS,mask:0},P,255,v.KEEP,v.KEEP,v.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,vl(S.projMatrix),"$clipping",f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}}pointCoordinate(i){const l=this.painter.transform;if(i.x<0||i.x>l.width||i.y<0||i.y>l.height)return null;const f=[i.x,i.y,1,1];s.transformMat4$1(f,f,l.pixelMatrixInverse),s.scale$1(f,f,1/f[3]),f[0]/=l.worldSize,f[1]/=l.worldSize;const g=l._camera.position,v=s.mercatorZfromAltitude(1,l.center.lat),T=[g[0],g[1],g[2]/v,0],S=s.subtract([],f.slice(0,3),T);s.normalize(S,S);const P=this.raycast(T,S,this._exaggeration);return P!==null&&P?(s.scaleAndAdd(T,T,S,P),T[3]=T[2],T[2]*=v,T):null}drawDepth(){const i=this.painter,l=i.context,f=this.proxySourceCache,g=Math.ceil(i.width),v=Math.ceil(i.height);if(!this._depthFBO||this._depthFBO.width===g&&this._depthFBO.height===v||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const T=l.gl,S=l.createFramebuffer(g,v,!0);l.activeTexture.set(T.TEXTURE0);const P=new s.Texture(l,{width:g,height:v,data:null},T.RGBA);P.bind(T.NEAREST,T.CLAMP_TO_EDGE),S.colorAttachment.set(P.texture);const L=l.createRenderbuffer(l.gl.DEPTH_COMPONENT16,g,v);S.depthAttachment.set(L),this._depthFBO=S,this._depthTexture=P}l.bindFramebuffer.set(this._depthFBO.framebuffer),l.viewport.set([0,0,g,v]),function(T,S,P,L){if(T.transform.projection.name==="globe")return;const k=T.context,F=k.gl;k.clear({depth:1});const $=T.useProgram("terrainDepth"),q=new s.DepthMode(F.LESS,s.DepthMode.ReadWrite,T.depthRangeFor3D);for(const X of L){const H=P.getTile(X),Y=da(X.projMatrix,0);S.setupElevationDraw(H,$),$.draw(k,F.TRIANGLES,q,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,Y,"terrain_depth",S.gridBuffer,S.gridIndexBuffer,S.gridNoSkirtSegments)}}(i,this,f,this.proxyCoords)}_setupProxiedCoordsForOrtho(i,l,f){if(i.getSource()instanceof Me)return this._setupProxiedCoordsForImageSource(i,l,f);this._findCoveringTileCache[i.id]=this._findCoveringTileCache[i.id]||{};const g=this.proxiedCoords[i.id]=[],v=this.proxyCoords;for(let S=0;S<v.length;S++){const P=v[S],L=this._findTileCoveringTileID(P,i);if(L){const k=this._createProxiedId(P,L,f[P.key]&&f[P.key][i.id]);g.push(k),this.proxyToSource[P.key][i.id]=[k]}}let T=!1;for(let S=0;S<l.length;S++){const P=i.getTile(l[S]);if(!P||!P.hasData())continue;const L=this._findTileCoveringTileID(P.tileID,this.proxySourceCache);if(L&&L.tileID.canonical.z!==P.tileID.canonical.z){const k=this.proxyToSource[L.tileID.key][i.id],F=this._createProxiedId(L.tileID,P,f[L.tileID.key]&&f[L.tileID.key][i.id]);k?k.splice(k.length-1,0,F):this.proxyToSource[L.tileID.key][i.id]=[F],g.push(F),T=!0}}this._sourceTilesOverlap[i.id]=T}_setupProxiedCoordsForImageSource(i,l,f){if(!i.getSource().loaded())return;const g=this.proxiedCoords[i.id]=[],v=this.proxyCoords,T=i.getSource(),S=new s.Point(T.tileID.x,T.tileID.y)._div(1<<T.tileID.z),P=T.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce((k,F)=>(k.min.x=Math.min(k.min.x,F.x-S.x),k.min.y=Math.min(k.min.y,F.y-S.y),k.max.x=Math.max(k.max.x,F.x-S.x),k.max.y=Math.max(k.max.y,F.y-S.y),k),{min:new s.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),L=(k,F)=>{const $=k.wrap+k.canonical.x/(1<<k.canonical.z),q=k.canonical.y/(1<<k.canonical.z),X=s.EXTENT/(1<<k.canonical.z),H=F.wrap+F.canonical.x/(1<<F.canonical.z),Y=F.canonical.y/(1<<F.canonical.z);return $+X<H+P.min.x||$>H+P.max.x||q+X<Y+P.min.y||q>Y+P.max.y};for(let k=0;k<v.length;k++){const F=v[k];for(let $=0;$<l.length;$++){const q=i.getTile(l[$]);if(!q||!q.hasData()||L(F,q.tileID))continue;const X=this._createProxiedId(F,q,f[F.key]&&f[F.key][i.id]),H=this.proxyToSource[F.key][i.id];H?H.push(X):this.proxyToSource[F.key][i.id]=[X],g.push(X)}}}_createProxiedId(i,l,f){let g=this.orthoMatrix;if(f){const v=f.find(T=>T.key===l.tileID.key);if(v)return v}if(l.tileID.key!==i.key){const v=i.canonical.z-l.tileID.canonical.z;let T,S,P;g=s.create();const L=l.tileID.wrap-i.wrap<<i.overscaledZ;v>0?(T=s.EXTENT>>v,S=T*((l.tileID.canonical.x<<v)-i.canonical.x+L),P=T*((l.tileID.canonical.y<<v)-i.canonical.y)):(T=s.EXTENT<<-v,S=s.EXTENT*(l.tileID.canonical.x-(i.canonical.x+L<<-v)),P=s.EXTENT*(l.tileID.canonical.y-(i.canonical.y<<-v))),s.ortho(g,0,T,0,T,0,1),s.translate(g,g,[S,P,0])}return new T1(l.tileID,i.key,g)}_findTileCoveringTileID(i,l){let f=l.getTile(i);if(f&&f.hasData())return f;const g=this._findCoveringTileCache[l.id],v=g[i.key];if(f=v?l.getTileByID(v):null,f&&f.hasData()||v===null)return f;let T=f?f.tileID:i,S=T.overscaledZ;const P=l.getSource().minzoom,L=[];if(!v){const F=l.getSource().maxzoom;if(i.canonical.z>=F){const $=i.canonical.z-F;l.getSource().reparseOverscaled?(S=Math.max(i.canonical.z+2,l.transform.tileZoom),T=new s.OverscaledTileID(S,i.wrap,F,i.canonical.x>>$,i.canonical.y>>$)):$!==0&&(S=F,T=new s.OverscaledTileID(S,i.wrap,F,i.canonical.x>>$,i.canonical.y>>$))}T.key!==i.key&&(L.push(T.key),f=l.getTile(T))}const k=F=>{L.forEach($=>{g[$]=F}),L.length=0};for(S-=1;S>=P&&(!f||!f.hasData());S--){f&&k(f.tileID.key);const F=T.calculateScaledKey(S);if(f=l.getTileByID(F),f&&f.hasData())break;const $=g[F];if($===null)break;$===void 0?L.push(F):f=l.getTileByID($)}return k(f?f.tileID.key:null),f&&f.hasData()?f:null}findDEMTileFor(i){return this.enabled?this._findTileCoveringTileID(i,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(i,l){let f=this._tilesDirty[i];f||(f=this._tilesDirty[i]={}),f[l.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const i=function(l){let f=0;const g=new s.StructArrayLayout2ui4,v=131;for(let T=1;T<129;T++){for(let S=1;S<129;S++)f=T*v+S,g.emplaceBack(f,f+1),g.emplaceBack(f,f+v),g.emplaceBack(f+1,f+v),T===128&&g.emplaceBack(f+v,f+v+1);g.emplaceBack(f+1,f+1+v)}return g}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(i),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,i.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class un{static cacheKey(i,l,f,g){let v=`${l}${g?g.cacheKey:""}`;for(const T of f)i.usedDefines.includes(T)&&(v+=`/${T}`);return v}constructor(i,l,f,g,v,T){const S=i.gl;this.program=S.createProgram();const P=function(B){const W=[];for(let te=0;te<B.length;te++){if(B[te]===null)continue;const re=B[te].split(" ");W.push(re.pop())}return W}(f.staticAttributes),L=g?g.getBinderAttributes():[],k=P.concat(L);let F=g?g.defines():[];F=F.concat(T.map(B=>`#define ${B}`));const $=i.isWebGL2?`#version 300 es
`:"",q=$+F.concat(i.extStandardDerivatives&&$.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(fu):fu,fu,v1,V2.fragmentSource,ua.fragmentSource,f.fragmentSource).join(`
`),X=$+F.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,v1,V2.vertexSource,ua.vertexSource,y1.vertexSource,f.vertexSource).join(`
`),H=S.createShader(S.FRAGMENT_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);S.shaderSource(H,q),S.compileShader(H),S.attachShader(this.program,H);const Y=S.createShader(S.VERTEX_SHADER);if(S.isContextLost())this.failedToCreate=!0;else{S.shaderSource(Y,X),S.compileShader(Y),S.attachShader(this.program,Y),this.attributes={},this.numAttributes=k.length;for(let B=0;B<this.numAttributes;B++)k[B]&&(S.bindAttribLocation(this.program,B,k[B]),this.attributes[k[B]]=B);S.linkProgram(this.program),S.deleteShader(Y),S.deleteShader(H),this.fixedUniforms=v(i),this.binderUniforms=g?g.getUniforms(i):[],T.includes("TERRAIN")&&(this.terrainUniforms=(B=>({u_dem:new s.Uniform1i(B),u_dem_prev:new s.Uniform1i(B),u_dem_unpack:new s.Uniform4f(B),u_dem_tl:new s.Uniform2f(B),u_dem_scale:new s.Uniform1f(B),u_dem_tl_prev:new s.Uniform2f(B),u_dem_scale_prev:new s.Uniform1f(B),u_dem_size:new s.Uniform1f(B),u_dem_lerp:new s.Uniform1f(B),u_exaggeration:new s.Uniform1f(B),u_depth:new s.Uniform1i(B),u_depth_size_inv:new s.Uniform2f(B),u_meter_to_dem:new s.Uniform1f(B),u_label_plane_matrix_inv:new s.UniformMatrix4f(B)}))(i)),T.includes("GLOBE")&&(this.globeUniforms=(B=>({u_tile_tl_up:new s.Uniform3f(B),u_tile_tr_up:new s.Uniform3f(B),u_tile_br_up:new s.Uniform3f(B),u_tile_bl_up:new s.Uniform3f(B),u_tile_up_scale:new s.Uniform1f(B)}))(i)),T.includes("FOG")&&(this.fogUniforms=(B=>({u_fog_matrix:new s.UniformMatrix4f(B),u_fog_range:new s.Uniform2f(B),u_fog_color:new s.Uniform4f(B),u_fog_horizon_blend:new s.Uniform1f(B),u_fog_temporal_offset:new s.Uniform1f(B),u_frustum_tl:new s.Uniform3f(B),u_frustum_tr:new s.Uniform3f(B),u_frustum_br:new s.Uniform3f(B),u_frustum_bl:new s.Uniform3f(B),u_globe_pos:new s.Uniform3f(B),u_globe_radius:new s.Uniform1f(B),u_globe_transition:new s.Uniform1f(B),u_is_globe:new s.Uniform1i(B),u_viewport:new s.Uniform2f(B)}))(i))}}setTerrainUniformValues(i,l){if(!this.terrainUniforms)return;const f=this.terrainUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const g in l)f[g]&&f[g].set(this.program,g,l[g])}}setGlobeUniformValues(i,l){if(!this.globeUniforms)return;const f=this.globeUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const g in l)f[g]&&f[g].set(this.program,g,l[g])}}setFogUniformValues(i,l){if(!this.fogUniforms)return;const f=this.fogUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const g in l)f[g].set(this.program,g,l[g])}}draw(i,l,f,g,v,T,S,P,L,k,F,$,q,X,H){const Y=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(g),i.setColorMode(v),i.setCullFace(T);for(const W of Object.keys(this.fixedUniforms))this.fixedUniforms[W].set(this.program,W,S[W]);X&&X.setUniforms(this.program,i,this.binderUniforms,$,{zoom:q});const B={[Y.LINES]:2,[Y.TRIANGLES]:3,[Y.LINE_STRIP]:1}[l];for(const W of F.get()){const te=W.vaos||(W.vaos={});(te[P]||(te[P]=new K5)).bind(i,this,L,X?X.getPaintVertexBuffers():[],k,W.vertexOffset,H||[]),Y.drawElements(l,W.primitiveLength*B,Y.UNSIGNED_SHORT,W.primitiveOffset*B*2)}}}function xl(h,i){const l=Math.pow(2,i.tileID.overscaledZ),f=i.tileSize*Math.pow(2,h.transform.tileZoom)/l,g=f*(i.tileID.canonical.x+i.tileID.wrap*l),v=f*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_tile_units_to_pixels:1/kt(i,1,h.transform.tileZoom),u_pixel_coord_upper:[g>>16,v>>16],u_pixel_coord_lower:[65535&g,65535&v]}}const W2=s.create(),bu=(h,i,l,f,g,v,T,S,P,L,k)=>{const F=i.style.light,$=F.properties.get("position"),q=[$.x,$.y,$.z],X=s.create$1();F.properties.get("anchor")==="viewport"&&(s.fromRotation(X,-i.transform.angle),s.transformMat3(q,q,X));const H=F.properties.get("color"),Y=i.transform,B={u_matrix:h,u_lightpos:q,u_lightintensity:F.properties.get("intensity"),u_lightcolor:[H.r,H.g,H.b],u_vertical_gradient:+l,u_opacity:f,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:W2,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:g,u_edge_radius:v};return Y.projection.name==="globe"&&(B.u_tile_id=[T.canonical.x,T.canonical.y,1<<T.canonical.z],B.u_zoom_transition=P,B.u_inv_rot_matrix=k,B.u_merc_center=L,B.u_up_dir=Y.projection.upVector(new s.CanonicalTileID(0,0,0),L[0]*s.EXTENT,L[1]*s.EXTENT),B.u_height_lift=S),B},q2=(h,i,l,f,g,v,T,S,P,L,k,F)=>{const $=bu(h,i,l,f,g,v,T,P,L,k,F),q={u_height_factor:-Math.pow(2,T.overscaledZ)/S.tileSize/8};return s.extend($,xl(i,S),q)},Ds=h=>({u_matrix:h}),Tu=(h,i,l)=>s.extend(Ds(h),xl(i,l)),Y5=(h,i)=>({u_matrix:h,u_world:i}),J5=(h,i,l,f)=>s.extend(Tu(h,i,l),{u_world:f}),Q5=s.create(),Eu=(h,i,l,f,g,v)=>{const T=h.transform,S=T.projection.name==="globe";let P;if(v.paint.get("circle-pitch-alignment")==="map")if(S){const k=s.globePixelsToTileUnits(T.zoom,i.canonical)*T._pixelsPerMercatorPixel;P=Float32Array.from([k,0,0,k])}else P=T.calculatePixelsToTileUnitsMatrix(l);else P=new Float32Array([T.pixelsToGLUnits[0],0,0,T.pixelsToGLUnits[1]]);const L={u_camera_to_center_distance:T.cameraToCenterDistance,u_matrix:h.translatePosMatrix(i.projMatrix,l,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:P,u_inv_rot_matrix:Q5,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(S){L.u_inv_rot_matrix=f,L.u_merc_center=g,L.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],L.u_zoom_transition=s.globeToMercatorTransition(T.zoom);const k=g[0]*s.EXTENT,F=g[1]*s.EXTENT;L.u_up_dir=T.projection.upVector(new s.CanonicalTileID(0,0,0),k,F)}return L},Su=h=>{const i=[];return h.paint.get("circle-pitch-alignment")==="map"&&i.push("PITCH_WITH_MAP"),h.paint.get("circle-pitch-scale")==="map"&&i.push("SCALE_WITH_MAP"),i},Mu=(h,i,l,f)=>{const g=s.EXTENT/l.tileSize;return{u_matrix:h,u_camera_to_center_distance:i.getCameraToCenterDistance(f),u_extrude_scale:[i.pixelsToGLUnits[0]/g,i.pixelsToGLUnits[1]/g]}},E1=(h,i,l=1)=>({u_matrix:h,u_color:i,u_overlay:0,u_overlay_scale:l}),H2=s.create(),X2=(h,i,l,f,g,v,T)=>{const S=h.transform,P=S.projection.name==="globe",L=P?s.globePixelsToTileUnits(S.zoom,i.canonical)*S._pixelsPerMercatorPixel:kt(l,1,v),k={u_matrix:i.projMatrix,u_extrude_scale:L,u_intensity:T,u_inv_rot_matrix:H2,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(P){k.u_inv_rot_matrix=f,k.u_merc_center=g,k.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],k.u_zoom_transition=s.globeToMercatorTransition(S.zoom);const F=g[0]*s.EXTENT,$=g[1]*s.EXTENT;k.u_up_dir=S.projection.upVector(new s.CanonicalTileID(0,0,0),F,$)}return k},ed=(h,i,l,f,g,v,T)=>{const S=h.transform,P=S.calculatePixelsToTileUnitsMatrix(i);return{u_matrix:Cu(h,i,l,f),u_pixels_to_tile_units:P,u_device_pixel_ratio:v,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:g,u_texsize:bl(l)?i.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:fa(i,h.transform),u_alpha_discard_threshold:0,u_trim_offset:T}},wl=(h,i,l,f,g)=>{const v=h.transform;return{u_matrix:Cu(h,i,l,f),u_texsize:i.imageAtlasTexture.size,u_pixels_to_tile_units:v.calculatePixelsToTileUnitsMatrix(i),u_device_pixel_ratio:g,u_image:0,u_tile_units_to_pixels:fa(i,v),u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function fa(h,i){return 1/kt(h,1,i.tileZoom)}function Cu(h,i,l,f){return h.translatePosMatrix(f||i.tileID.projMatrix,i,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}function bl(h){const i=h.paint.get("line-dasharray").value;return i.value||i.kind!=="constant"}const Pu=(h,i,l,f,g,v)=>{return{u_matrix:h,u_tl_parent:i,u_scale_parent:l,u_fade_t:f.mix,u_opacity:f.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(S=g.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(T=g.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:mo(g.paint.get("raster-hue-rotate")),u_perspective_transform:v};var T,S};function mo(h){h*=Math.PI/180;const i=Math.sin(h),l=Math.cos(h);return[(2*l+1)/3,(-Math.sqrt(3)*i-l+1)/3,(Math.sqrt(3)*i-l+1)/3]}const S1=s.create(),Au=(h,i,l,f,g,v,T,S,P,L,k,F,$,q,X,H)=>{const Y=g.transform,B={u_is_size_zoom_constant:+(h==="constant"||h==="source"),u_is_size_feature_constant:+(h==="constant"||h==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:Y.cameraToCenterDistance,u_rotate_symbol:+l,u_aspect_ratio:Y.width/Y.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:v,u_label_plane_matrix:T,u_coord_matrix:S,u_is_text:+P,u_pitch_with_map:+f,u_texsize:L,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:S1,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:S1,u_up_vector:[0,-1,0]};return H.name==="globe"&&(B.u_tile_id=[k.canonical.x,k.canonical.y,1<<k.canonical.z],B.u_zoom_transition=F,B.u_inv_rot_matrix=q,B.u_merc_center=$,B.u_camera_forward=Y._camera.forward(),B.u_ecef_origin=s.globeECEFOrigin(Y.globeMatrix,k.toUnwrapped()),B.u_tile_matrix=Float32Array.from(Y.globeMatrix),B.u_up_vector=X),B},M1=(h,i,l,f,g,v,T,S,P,L,k,F,$,q,X,H,Y)=>s.extend(Au(h,i,l,f,g,v,T,S,P,L,F,$,q,X,H,Y),{u_gamma_scale:f?g.transform.cameraToCenterDistance*Math.cos(g.terrain?0:g.transform._pitch):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:+k}),K2=(h,i,l,f,g,v,T,S,P,L,k,F,$,q,X,H)=>s.extend(M1(h,i,l,f,g,v,T,S,!0,P,!0,k,F,$,q,X,H),{u_texsize_icon:L,u_texture_icon:1}),Iu=(h,i,l)=>({u_matrix:h,u_opacity:i,u_color:l}),td=(h,i,l,f,g)=>s.extend(function(v,T,S){const P=T.imageManager.getPattern(v.toString()),{width:L,height:k}=T.imageManager.getPixelSize(),F=Math.pow(2,S.tileID.overscaledZ),$=S.tileSize*Math.pow(2,T.transform.tileZoom)/F,q=$*(S.tileID.canonical.x+S.tileID.wrap*F),X=$*S.tileID.canonical.y;return{u_image:0,u_pattern_tl:P.tl,u_pattern_br:P.br,u_texsize:[L,k],u_pattern_size:P.displaySize,u_tile_units_to_pixels:1/kt(S,1,T.transform.tileZoom),u_pixel_coord_upper:[q>>16,X>>16],u_pixel_coord_lower:[65535&q,65535&X]}}(f,l,g),{u_matrix:h,u_opacity:i}),ku={fillExtrusion:h=>({u_matrix:new s.UniformMatrix4f(h),u_lightpos:new s.Uniform3f(h),u_lightintensity:new s.Uniform1f(h),u_lightcolor:new s.Uniform3f(h),u_vertical_gradient:new s.Uniform1f(h),u_opacity:new s.Uniform1f(h),u_edge_radius:new s.Uniform1f(h),u_ao:new s.Uniform2f(h),u_tile_id:new s.Uniform3f(h),u_zoom_transition:new s.Uniform1f(h),u_inv_rot_matrix:new s.UniformMatrix4f(h),u_merc_center:new s.Uniform2f(h),u_up_dir:new s.Uniform3f(h),u_height_lift:new s.Uniform1f(h)}),fillExtrusionPattern:h=>({u_matrix:new s.UniformMatrix4f(h),u_lightpos:new s.Uniform3f(h),u_lightintensity:new s.Uniform1f(h),u_lightcolor:new s.Uniform3f(h),u_vertical_gradient:new s.Uniform1f(h),u_height_factor:new s.Uniform1f(h),u_edge_radius:new s.Uniform1f(h),u_ao:new s.Uniform2f(h),u_tile_id:new s.Uniform3f(h),u_zoom_transition:new s.Uniform1f(h),u_inv_rot_matrix:new s.UniformMatrix4f(h),u_merc_center:new s.Uniform2f(h),u_up_dir:new s.Uniform3f(h),u_height_lift:new s.Uniform1f(h),u_image:new s.Uniform1i(h),u_texsize:new s.Uniform2f(h),u_pixel_coord_upper:new s.Uniform2f(h),u_pixel_coord_lower:new s.Uniform2f(h),u_tile_units_to_pixels:new s.Uniform1f(h),u_opacity:new s.Uniform1f(h)}),fill:h=>({u_matrix:new s.UniformMatrix4f(h)}),fillPattern:h=>({u_matrix:new s.UniformMatrix4f(h),u_image:new s.Uniform1i(h),u_texsize:new s.Uniform2f(h),u_pixel_coord_upper:new s.Uniform2f(h),u_pixel_coord_lower:new s.Uniform2f(h),u_tile_units_to_pixels:new s.Uniform1f(h)}),fillOutline:h=>({u_matrix:new s.UniformMatrix4f(h),u_world:new s.Uniform2f(h)}),fillOutlinePattern:h=>({u_matrix:new s.UniformMatrix4f(h),u_world:new s.Uniform2f(h),u_image:new s.Uniform1i(h),u_texsize:new s.Uniform2f(h),u_pixel_coord_upper:new s.Uniform2f(h),u_pixel_coord_lower:new s.Uniform2f(h),u_tile_units_to_pixels:new s.Uniform1f(h)}),circle:h=>({u_camera_to_center_distance:new s.Uniform1f(h),u_extrude_scale:new s.UniformMatrix2f(h),u_device_pixel_ratio:new s.Uniform1f(h),u_matrix:new s.UniformMatrix4f(h),u_inv_rot_matrix:new s.UniformMatrix4f(h),u_merc_center:new s.Uniform2f(h),u_tile_id:new s.Uniform3f(h),u_zoom_transition:new s.Uniform1f(h),u_up_dir:new s.Uniform3f(h)}),collisionBox:h=>({u_matrix:new s.UniformMatrix4f(h),u_camera_to_center_distance:new s.Uniform1f(h),u_extrude_scale:new s.Uniform2f(h)}),collisionCircle:h=>({u_matrix:new s.UniformMatrix4f(h),u_inv_matrix:new s.UniformMatrix4f(h),u_camera_to_center_distance:new s.Uniform1f(h),u_viewport_size:new s.Uniform2f(h)}),debug:h=>({u_color:new s.UniformColor(h),u_matrix:new s.UniformMatrix4f(h),u_overlay:new s.Uniform1i(h),u_overlay_scale:new s.Uniform1f(h)}),clippingMask:h=>({u_matrix:new s.UniformMatrix4f(h)}),heatmap:h=>({u_extrude_scale:new s.Uniform1f(h),u_intensity:new s.Uniform1f(h),u_matrix:new s.UniformMatrix4f(h),u_inv_rot_matrix:new s.UniformMatrix4f(h),u_merc_center:new s.Uniform2f(h),u_tile_id:new s.Uniform3f(h),u_zoom_transition:new s.Uniform1f(h),u_up_dir:new s.Uniform3f(h)}),heatmapTexture:h=>({u_image:new s.Uniform1i(h),u_color_ramp:new s.Uniform1i(h),u_opacity:new s.Uniform1f(h)}),hillshade:h=>({u_matrix:new s.UniformMatrix4f(h),u_image:new s.Uniform1i(h),u_latrange:new s.Uniform2f(h),u_light:new s.Uniform2f(h),u_shadow:new s.UniformColor(h),u_highlight:new s.UniformColor(h),u_accent:new s.UniformColor(h)}),hillshadePrepare:h=>({u_matrix:new s.UniformMatrix4f(h),u_image:new s.Uniform1i(h),u_dimension:new s.Uniform2f(h),u_zoom:new s.Uniform1f(h),u_unpack:new s.Uniform4f(h)}),line:h=>({u_matrix:new s.UniformMatrix4f(h),u_pixels_to_tile_units:new s.UniformMatrix2f(h),u_device_pixel_ratio:new s.Uniform1f(h),u_units_to_pixels:new s.Uniform2f(h),u_dash_image:new s.Uniform1i(h),u_gradient_image:new s.Uniform1i(h),u_image_height:new s.Uniform1f(h),u_texsize:new s.Uniform2f(h),u_tile_units_to_pixels:new s.Uniform1f(h),u_alpha_discard_threshold:new s.Uniform1f(h),u_trim_offset:new s.Uniform2f(h)}),linePattern:h=>({u_matrix:new s.UniformMatrix4f(h),u_texsize:new s.Uniform2f(h),u_pixels_to_tile_units:new s.UniformMatrix2f(h),u_device_pixel_ratio:new s.Uniform1f(h),u_image:new s.Uniform1i(h),u_units_to_pixels:new s.Uniform2f(h),u_tile_units_to_pixels:new s.Uniform1f(h),u_alpha_discard_threshold:new s.Uniform1f(h)}),raster:h=>({u_matrix:new s.UniformMatrix4f(h),u_tl_parent:new s.Uniform2f(h),u_scale_parent:new s.Uniform1f(h),u_fade_t:new s.Uniform1f(h),u_opacity:new s.Uniform1f(h),u_image0:new s.Uniform1i(h),u_image1:new s.Uniform1i(h),u_brightness_low:new s.Uniform1f(h),u_brightness_high:new s.Uniform1f(h),u_saturation_factor:new s.Uniform1f(h),u_contrast_factor:new s.Uniform1f(h),u_spin_weights:new s.Uniform3f(h),u_perspective_transform:new s.Uniform2f(h)}),symbolIcon:h=>({u_is_size_zoom_constant:new s.Uniform1i(h),u_is_size_feature_constant:new s.Uniform1i(h),u_size_t:new s.Uniform1f(h),u_size:new s.Uniform1f(h),u_camera_to_center_distance:new s.Uniform1f(h),u_rotate_symbol:new s.Uniform1i(h),u_aspect_ratio:new s.Uniform1f(h),u_fade_change:new s.Uniform1f(h),u_matrix:new s.UniformMatrix4f(h),u_label_plane_matrix:new s.UniformMatrix4f(h),u_coord_matrix:new s.UniformMatrix4f(h),u_is_text:new s.Uniform1i(h),u_pitch_with_map:new s.Uniform1i(h),u_texsize:new s.Uniform2f(h),u_tile_id:new s.Uniform3f(h),u_zoom_transition:new s.Uniform1f(h),u_inv_rot_matrix:new s.UniformMatrix4f(h),u_merc_center:new s.Uniform2f(h),u_camera_forward:new s.Uniform3f(h),u_tile_matrix:new s.UniformMatrix4f(h),u_up_vector:new s.Uniform3f(h),u_ecef_origin:new s.Uniform3f(h),u_texture:new s.Uniform1i(h)}),symbolSDF:h=>({u_is_size_zoom_constant:new s.Uniform1i(h),u_is_size_feature_constant:new s.Uniform1i(h),u_size_t:new s.Uniform1f(h),u_size:new s.Uniform1f(h),u_camera_to_center_distance:new s.Uniform1f(h),u_rotate_symbol:new s.Uniform1i(h),u_aspect_ratio:new s.Uniform1f(h),u_fade_change:new s.Uniform1f(h),u_matrix:new s.UniformMatrix4f(h),u_label_plane_matrix:new s.UniformMatrix4f(h),u_coord_matrix:new s.UniformMatrix4f(h),u_is_text:new s.Uniform1i(h),u_pitch_with_map:new s.Uniform1i(h),u_texsize:new s.Uniform2f(h),u_texture:new s.Uniform1i(h),u_gamma_scale:new s.Uniform1f(h),u_device_pixel_ratio:new s.Uniform1f(h),u_tile_id:new s.Uniform3f(h),u_zoom_transition:new s.Uniform1f(h),u_inv_rot_matrix:new s.UniformMatrix4f(h),u_merc_center:new s.Uniform2f(h),u_camera_forward:new s.Uniform3f(h),u_tile_matrix:new s.UniformMatrix4f(h),u_up_vector:new s.Uniform3f(h),u_ecef_origin:new s.Uniform3f(h),u_is_halo:new s.Uniform1i(h)}),symbolTextAndIcon:h=>({u_is_size_zoom_constant:new s.Uniform1i(h),u_is_size_feature_constant:new s.Uniform1i(h),u_size_t:new s.Uniform1f(h),u_size:new s.Uniform1f(h),u_camera_to_center_distance:new s.Uniform1f(h),u_rotate_symbol:new s.Uniform1i(h),u_aspect_ratio:new s.Uniform1f(h),u_fade_change:new s.Uniform1f(h),u_matrix:new s.UniformMatrix4f(h),u_label_plane_matrix:new s.UniformMatrix4f(h),u_coord_matrix:new s.UniformMatrix4f(h),u_is_text:new s.Uniform1i(h),u_pitch_with_map:new s.Uniform1i(h),u_texsize:new s.Uniform2f(h),u_texsize_icon:new s.Uniform2f(h),u_texture:new s.Uniform1i(h),u_texture_icon:new s.Uniform1i(h),u_gamma_scale:new s.Uniform1f(h),u_device_pixel_ratio:new s.Uniform1f(h),u_is_halo:new s.Uniform1i(h)}),background:h=>({u_matrix:new s.UniformMatrix4f(h),u_opacity:new s.Uniform1f(h),u_color:new s.UniformColor(h)}),backgroundPattern:h=>({u_matrix:new s.UniformMatrix4f(h),u_opacity:new s.Uniform1f(h),u_image:new s.Uniform1i(h),u_pattern_tl:new s.Uniform2f(h),u_pattern_br:new s.Uniform2f(h),u_texsize:new s.Uniform2f(h),u_pattern_size:new s.Uniform2f(h),u_pixel_coord_upper:new s.Uniform2f(h),u_pixel_coord_lower:new s.Uniform2f(h),u_tile_units_to_pixels:new s.Uniform1f(h)}),terrainRaster:yu,terrainDepth:yu,skybox:h=>({u_matrix:new s.UniformMatrix4f(h),u_sun_direction:new s.Uniform3f(h),u_cubemap:new s.Uniform1i(h),u_opacity:new s.Uniform1f(h),u_temporal_offset:new s.Uniform1f(h)}),skyboxGradient:h=>({u_matrix:new s.UniformMatrix4f(h),u_color_ramp:new s.Uniform1i(h),u_center_direction:new s.Uniform3f(h),u_radius:new s.Uniform1f(h),u_opacity:new s.Uniform1f(h),u_temporal_offset:new s.Uniform1f(h)}),skyboxCapture:h=>({u_matrix_3f:new s.UniformMatrix3f(h),u_sun_direction:new s.Uniform3f(h),u_sun_intensity:new s.Uniform1f(h),u_color_tint_r:new s.Uniform4f(h),u_color_tint_m:new s.Uniform4f(h),u_luminance:new s.Uniform1f(h)}),globeRaster:h=>({u_proj_matrix:new s.UniformMatrix4f(h),u_globe_matrix:new s.UniformMatrix4f(h),u_normalize_matrix:new s.UniformMatrix4f(h),u_merc_matrix:new s.UniformMatrix4f(h),u_zoom_transition:new s.Uniform1f(h),u_merc_center:new s.Uniform2f(h),u_image0:new s.Uniform1i(h),u_grid_matrix:new s.UniformMatrix3f(h),u_skirt_height:new s.Uniform1f(h),u_frustum_tl:new s.Uniform3f(h),u_frustum_tr:new s.Uniform3f(h),u_frustum_br:new s.Uniform3f(h),u_frustum_bl:new s.Uniform3f(h),u_globe_pos:new s.Uniform3f(h),u_globe_radius:new s.Uniform1f(h),u_viewport:new s.Uniform2f(h)}),globeAtmosphere:h=>({u_frustum_tl:new s.Uniform3f(h),u_frustum_tr:new s.Uniform3f(h),u_frustum_br:new s.Uniform3f(h),u_frustum_bl:new s.Uniform3f(h),u_horizon:new s.Uniform1f(h),u_transition:new s.Uniform1f(h),u_fadeout_range:new s.Uniform1f(h),u_color:new s.Uniform4f(h),u_high_color:new s.Uniform4f(h),u_space_color:new s.Uniform4f(h),u_star_intensity:new s.Uniform1f(h),u_star_density:new s.Uniform1f(h),u_star_size:new s.Uniform1f(h),u_temporal_offset:new s.Uniform1f(h),u_horizon_angle:new s.Uniform1f(h),u_rotation_matrix:new s.UniformMatrix4f(h)})};let C1;function Tl(h,i,l,f,g,v,T){const S=h.context,P=S.gl,L=h.transform,k=h.useProgram("collisionBox"),F=[];let $=0,q=0;for(let re=0;re<f.length;re++){const pe=f[re],me=i.getTile(pe),fe=me.getBucket(l);if(!fe)continue;const Se=Mi(pe,fe,L);let be=Se;g[0]===0&&g[1]===0||(be=h.translatePosMatrix(Se,me,g,v));const Le=T?fe.textCollisionBox:fe.iconCollisionBox,ot=fe.collisionCircleArray;if(ot.length>0){const Ae=s.create(),qe=be;s.mul(Ae,fe.placementInvProjMatrix,L.glCoordMatrix),s.mul(Ae,Ae,fe.placementViewportMatrix),F.push({circleArray:ot,circleOffset:q,transform:qe,invTransform:Ae,projection:fe.getProjection()}),$+=ot.length/4,q=$}Le&&(h.terrain&&h.terrain.setupElevationDraw(me,k),k.draw(S,P.LINES,s.DepthMode.disabled,s.StencilMode.disabled,h.colorModeForRenderPass(),s.CullFaceMode.disabled,Mu(be,L,me,fe.getProjection()),l.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,null,L.zoom,null,[Le.collisionVertexBuffer,Le.collisionVertexBufferExt]))}if(!T||!F.length)return;const X=h.useProgram("collisionCircle"),H=new s.StructArrayLayout2f1f2i16;H.resize(4*$),H._trim();let Y=0;for(const re of F)for(let pe=0;pe<re.circleArray.length/4;pe++){const me=4*pe,fe=re.circleArray[me+0],Se=re.circleArray[me+1],be=re.circleArray[me+2],Le=re.circleArray[me+3];H.emplace(Y++,fe,Se,be,Le,0),H.emplace(Y++,fe,Se,be,Le,1),H.emplace(Y++,fe,Se,be,Le,2),H.emplace(Y++,fe,Se,be,Le,3)}(!C1||C1.length<2*$)&&(C1=function(re){const pe=2*re,me=new s.StructArrayLayout3ui6;me.resize(pe),me._trim();for(let fe=0;fe<pe;fe++){const Se=6*fe;me.uint16[Se+0]=4*fe+0,me.uint16[Se+1]=4*fe+1,me.uint16[Se+2]=4*fe+2,me.uint16[Se+3]=4*fe+2,me.uint16[Se+4]=4*fe+3,me.uint16[Se+5]=4*fe+0}return me}($));const B=S.createIndexBuffer(C1,!0),W=S.createVertexBuffer(H,s.collisionCircleLayout.members,!0);for(const re of F){const pe={u_matrix:re.transform,u_inv_matrix:re.invTransform,u_camera_to_center_distance:(te=L).getCameraToCenterDistance(re.projection),u_viewport_size:[te.width,te.height]};X.draw(S,P.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,h.colorModeForRenderPass(),s.CullFaceMode.disabled,pe,l.id,W,B,s.SegmentVector.simpleSegment(0,2*re.circleOffset,re.circleArray.length,re.circleArray.length/2),null,L.zoom)}var te;W.destroy(),B.destroy()}const Y2=s.create();function Lu({width:h,height:i,anchor:l,textOffset:f,textScale:g},v){const{horizontalAlign:T,verticalAlign:S}=s.getAnchorAlignment(l),P=-(T-.5)*h,L=-(S-.5)*i,k=s.evaluateVariableOffset(l,f);return new s.Point((P/g+k[0])*v,(L/g+k[1])*v)}function nd(h,i,l,f,g,v,T,S,P,L,k){const F=h.text.placedSymbolArray,$=h.text.dynamicLayoutVertexArray,q=h.icon.dynamicLayoutVertexArray,X={},H=h.getProjection(),Y=Gn(S,H,v),B=v.elevation,W=H.upVectorScale(S.canonical,v.center.lat,v.worldSize).metersToTile;$.clear();for(let te=0;te<F.length;te++){const re=F.get(te),{tileAnchorX:pe,tileAnchorY:me,numGlyphs:fe}=re,Se=re.hidden||!re.crossTileID||h.allowVerticalPlacement&&!re.placedOrientation?null:f[re.crossTileID];if(Se){let be=0,Le=0,ot=0;if(B){const lt=B?B.getAtTileOffset(S,pe,me):0,[Dt,Gt,Pt]=H.upVector(S.canonical,pe,me);be=lt*Dt*W,Le=lt*Gt*W,ot=lt*Pt*W}let[Ae,qe,Fe,nt]=Wn(re.projectedAnchorX+be,re.projectedAnchorY+Le,re.projectedAnchorZ+ot,l?Y:T);const ke=cl(v.getCameraToCenterDistance(H),nt);let We=g.evaluateSizeForFeature(h.textSizeData,L,re)*ke/s.ONE_EM;l&&(We*=h.tilePixelRatio/P);const at=Lu(Se,We);l?({x:Ae,y:qe,z:Fe}=H.projectTilePoint(pe+at.x,me+at.y,S.canonical),[Ae,qe,Fe]=Wn(Ae+be,qe+Le,Fe+ot,T)):(i&&at._rotate(-v.angle),Ae+=at.x,qe+=at.y,Fe=0);const Qe=h.allowVerticalPlacement&&re.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let lt=0;lt<fe;lt++)s.addDynamicAttributes($,Ae,qe,Fe,Qe);k&&re.associatedIconIndex>=0&&(X[re.associatedIconIndex]={x:Ae,y:qe,z:Fe,angle:Qe})}else Wi(fe,$)}if(k){q.clear();const te=h.icon.placedSymbolArray;for(let re=0;re<te.length;re++){const pe=te.get(re),{numGlyphs:me}=pe,fe=X[re];if(pe.hidden||!fe)Wi(me,q);else{const{x:Se,y:be,z:Le,angle:ot}=fe;for(let Ae=0;Ae<me;Ae++)s.addDynamicAttributes(q,Se,be,Le,ot)}}h.icon.dynamicLayoutVertexBuffer.updateData(q)}h.text.dynamicLayoutVertexBuffer.updateData($)}function zu(h,i,l){return l.iconsInText&&i?"symbolTextAndIcon":h?"symbolSDF":"symbolIcon"}function J2(h,i,l,f,g,v,T,S,P,L,k,F){const $=h.context,q=$.gl,X=h.transform,H=S==="map",Y=P==="map",B=H&&l.layout.get("symbol-placement")!=="point",W=H&&!Y&&!B,te=l.layout.get("symbol-sort-key").constantOr(1)!==void 0;let re=!1;const pe=h.depthModeForSublayer(0,s.DepthMode.ReadOnly),me=[s.mercatorXfromLng(X.center.lng),s.mercatorYfromLat(X.center.lat)],fe=l.layout.get("text-variable-anchor"),Se=X.projection.name==="globe",be=[],Le=[0,-1,0];let ot=Le;!Se&&!X.mercatorFromTransition||H||(ot=function(Ae){const qe=Ae._camera.getWorldToCamera(Ae.worldSize,1),Fe=s.multiply([],qe,Ae.globeMatrix);s.invert(Fe,Fe);const nt=[0,0,0],ke=[0,1,0,0];return s.transformMat4$1(ke,ke,Fe),nt[0]=ke[0],nt[1]=ke[1],nt[2]=ke[2],s.normalize(nt,nt),nt}(X));for(const Ae of f){const qe=i.getTile(Ae),Fe=qe.getBucket(l);if(!Fe||Fe.projection.name==="mercator"&&Se)continue;const nt=g?Fe.text:Fe.icon;if(!nt||Fe.fullyClipped||!nt.segments.get().length)continue;const ke=nt.programConfigurations.get(l.id),We=g||Fe.sdfIcons,at=g?Fe.textSizeData:Fe.iconSizeData,Qe=Y||X.pitch!==0,lt=s.evaluateSizeForZoom(at,X.zoom);let Dt,Gt,Pt,Ot,rn=[0,0],en=null;if(g)Gt=qe.glyphAtlasTexture,Pt=q.LINEAR,Dt=qe.glyphAtlasTexture.size,Fe.iconsInText&&(rn=qe.imageAtlasTexture.size,en=qe.imageAtlasTexture,Ot=Qe||h.options.rotating||h.options.zooming||at.kind==="composite"||at.kind==="camera"?q.LINEAR:q.NEAREST);else{const Oo=l.layout.get("icon-size").constantOr(0)!==1||Fe.iconsNeedLinear;Gt=qe.imageAtlasTexture,Pt=We||h.options.rotating||h.options.zooming||Oo||Qe?q.LINEAR:q.NEAREST,Dt=qe.imageAtlasTexture.size}const Lt=Fe.projection.name==="globe",vn=Lt?ot:Le,bn=Lt?s.globeToMercatorTransition(X.zoom):0,Tn=Gn(Ae,Fe.getProjection(),X),En=X.calculatePixelsToTileUnitsMatrix(qe),Nr=je(Tn,qe.tileID.canonical,Y,H,X,Fe.getProjection(),En),Mr=h.terrain&&Y&&B?s.invert(s.create(),Nr):Y2,Ii=an(Tn,qe.tileID.canonical,Y,H,X,Fe.getProjection(),En),go=fe&&Fe.hasTextData(),$n=l.layout.get("icon-text-fit")!=="none"&&go&&Fe.hasIconData();if(B){const Oo=X.elevation,us=Oo?Oo.getAtTileOffsetFunc(Ae,X.center.lat,X.worldSize,Fe.getProjection()):null,Us=Hr(Tn,qe.tileID.canonical,Y,H,X,Fe.getProjection(),En);ou(Fe,Tn,h,g,Us,Ii,Y,L,us,Ae)}const Sn=B||g&&fe||$n,pn=h.translatePosMatrix(Tn,qe,v,T),ar=Sn?Y2:Nr,Xr=h.translatePosMatrix(Ii,qe,v,T,!0),Nn=Fe.getProjection().createInversionMatrix(X,Ae.canonical),ri=[];h.terrainRenderModeElevated()&&Y&&ri.push("PITCH_WITH_MAP_TERRAIN"),Lt&&ri.push("PROJECTION_GLOBE_VIEW"),Sn&&ri.push("PROJECTED_POS_ON_VIEWPORT");const G1=We&&l.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Os;Os=We?Fe.iconsInText?K2(at.kind,lt,W,Y,h,pn,ar,Xr,Dt,rn,Ae,bn,me,Nn,vn,Fe.getProjection()):M1(at.kind,lt,W,Y,h,pn,ar,Xr,g,Dt,!0,Ae,bn,me,Nn,vn,Fe.getProjection()):Au(at.kind,lt,W,Y,h,pn,ar,Xr,g,Dt,Ae,bn,me,Nn,vn,Fe.getProjection());const Dl={program:h.useProgram(zu(We,g,Fe),ke,ri),buffers:nt,uniformValues:Os,atlasTexture:Gt,atlasTextureIcon:en,atlasInterpolation:Pt,atlasInterpolationIcon:Ot,isSDF:We,hasHalo:G1,tile:qe,labelPlaneMatrixInv:Mr};if(te&&Fe.canOverlap){re=!0;const Oo=nt.segments.get();for(const us of Oo)be.push({segments:new s.SegmentVector([us]),sortKey:us.sortKey,state:Dl})}else be.push({segments:nt.segments,sortKey:0,state:Dl})}re&&be.sort((Ae,qe)=>Ae.sortKey-qe.sortKey);for(const Ae of be){const qe=Ae.state;if(h.terrain&&h.terrain.setupElevationDraw(qe.tile,qe.program,{useDepthForOcclusion:!Se,labelPlaneMatrixInv:qe.labelPlaneMatrixInv}),$.activeTexture.set(q.TEXTURE0),qe.atlasTexture.bind(qe.atlasInterpolation,q.CLAMP_TO_EDGE),qe.atlasTextureIcon&&($.activeTexture.set(q.TEXTURE1),qe.atlasTextureIcon&&qe.atlasTextureIcon.bind(qe.atlasInterpolationIcon,q.CLAMP_TO_EDGE)),qe.isSDF){const Fe=qe.uniformValues;qe.hasHalo&&(Fe.u_is_halo=1,El(qe.buffers,Ae.segments,l,h,qe.program,pe,k,F,Fe)),Fe.u_is_halo=0}El(qe.buffers,Ae.segments,l,h,qe.program,pe,k,F,qe.uniformValues)}}function El(h,i,l,f,g,v,T,S,P){const L=f.context,k=[h.dynamicLayoutVertexBuffer,h.opacityVertexBuffer,h.globeExtVertexBuffer];g.draw(L,L.gl.TRIANGLES,v,T,S,s.CullFaceMode.disabled,P,l.id,h.layoutVertexBuffer,h.indexBuffer,i,l.paint,f.transform.zoom,h.programConfigurations.get(l.id),k)}function Q2(h,i,l,f,g,v,T){const S=h.context.gl,P=l.paint.get("fill-pattern"),L=P&&P.constantOr(1);let k,F,$,q,X;T?(F=L&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",k=S.LINES):(F=L?"fillPattern":"fill",k=S.TRIANGLES);for(const H of f){const Y=i.getTile(H);if(L&&!Y.patternsLoaded())continue;const B=Y.getBucket(l);if(!B)continue;h.prepareDrawTile();const W=B.programConfigurations.get(l.id),te=h.useProgram(F,W);L&&(h.context.activeTexture.set(S.TEXTURE0),Y.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),W.updatePaintBuffers());const re=P.constantOr(null);if(re&&Y.imageAtlas){const me=Y.imageAtlas.patternPositions[re.toString()];me&&W.setConstantPatternPositions(me)}const pe=h.translatePosMatrix(H.projMatrix,Y,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(T){q=B.indexBuffer2,X=B.segments2;const me=h.terrain&&h.terrain.renderingToTexture?h.terrain.drapeBufferSize:[S.drawingBufferWidth,S.drawingBufferHeight];$=F==="fillOutlinePattern"&&L?J5(pe,h,Y,me):Y5(pe,me)}else q=B.indexBuffer,X=B.segments,$=L?Tu(pe,h,Y):Ds(pe);h.prepareDrawProgram(h.context,te,H.toUnwrapped()),te.draw(h.context,k,g,h.stencilModeForClipping(H),v,s.CullFaceMode.disabled,$,l.id,B.layoutVertexBuffer,q,X,l.paint,h.transform.zoom,W)}}function P1(h,i,l,f,g,v,T){const S=h.context,P=S.gl,L=h.transform,k=l.paint.get("fill-extrusion-pattern"),F=k.constantOr(1),$=l.paint.get("fill-extrusion-opacity"),q=[l.paint.get("fill-extrusion-ambient-occlusion-intensity"),l.paint.get("fill-extrusion-ambient-occlusion-radius")],X=l.layout.get("fill-extrusion-edge-radius"),H=X>0&&!l.paint.get("fill-extrusion-rounded-roof"),Y=H?0:X,B=L.projection.name==="globe"?s.fillExtrusionHeightLift():0,W=L.projection.name==="globe",te=W?s.globeToMercatorTransition(L.zoom):0,re=[s.mercatorXfromLng(L.center.lng),s.mercatorYfromLat(L.center.lat)],pe=[];W&&pe.push("PROJECTION_GLOBE_VIEW"),q[0]>0&&pe.push("FAUX_AO"),H&&pe.push("ZERO_ROOF_RADIUS");for(const me of f){const fe=i.getTile(me),Se=fe.getBucket(l);if(!Se||Se.projection.name!==L.projection.name)continue;const be=Se.programConfigurations.get(l.id),Le=h.useProgram(F?"fillExtrusionPattern":"fillExtrusion",be,pe);if(h.terrain){const We=h.terrain;if(h.style.terrainSetForDrapingOnly())We.setupElevationDraw(fe,Le,{useMeterToDem:!0});else{if(!Se.enableTerrain)continue;if(We.setupElevationDraw(fe,Le,{useMeterToDem:!0}),eh(S,i,me,Se,l,We),!Se.centroidVertexBuffer){const at=Le.attributes.a_centroid_pos;at!==void 0&&P.vertexAttrib2f(at,0,0)}}}F&&(h.context.activeTexture.set(P.TEXTURE0),fe.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),be.updatePaintBuffers());const ot=k.constantOr(null);if(ot&&fe.imageAtlas){const We=fe.imageAtlas.patternPositions[ot.toString()];We&&be.setConstantPatternPositions(We)}const Ae=h.translatePosMatrix(me.projMatrix,fe,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),qe=L.projection.createInversionMatrix(L,me.canonical),Fe=l.paint.get("fill-extrusion-vertical-gradient"),nt=F?q2(Ae,h,Fe,$,q,Y,me,fe,B,te,re,qe):bu(Ae,h,Fe,$,q,Y,me,B,te,re,qe);h.prepareDrawProgram(S,Le,me.toUnwrapped());const ke=[];h.terrain&&ke.push(Se.centroidVertexBuffer),W&&ke.push(Se.layoutVertexExtBuffer),Le.draw(S,S.gl.TRIANGLES,g,v,T,s.CullFaceMode.backCCW,nt,l.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,l.paint,h.transform.zoom,be,ke)}}function eh(h,i,l,f,g,v){const T=[B=>{let W=B.canonical.x-1,te=B.wrap;return W<0&&(W=(1<<B.canonical.z)-1,te--),new s.OverscaledTileID(B.overscaledZ,te,B.canonical.z,W,B.canonical.y)},B=>{let W=B.canonical.x+1,te=B.wrap;return W===1<<B.canonical.z&&(W=0,te++),new s.OverscaledTileID(B.overscaledZ,te,B.canonical.z,W,B.canonical.y)},B=>new s.OverscaledTileID(B.overscaledZ,B.wrap,B.canonical.z,B.canonical.x,(B.canonical.y===0?1<<B.canonical.z:B.canonical.y)-1),B=>new s.OverscaledTileID(B.overscaledZ,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y===(1<<B.canonical.z)-1?0:B.canonical.y+1)],S=B=>{const W=i.getSource().minzoom,te=pe=>{const me=i.getTileByID(pe);if(me&&me.hasData())return me.getBucket(g)},re=[0,-1,1];for(const pe of re){if(B.overscaledZ+pe<W)continue;const me=te(B.calculateScaledKey(B.overscaledZ+pe));if(me)return me}},P=[0,0,0],L=(B,W)=>(P[0]=Math.min(B.min.y,W.min.y),P[1]=Math.max(B.max.y,W.max.y),P[2]=s.EXTENT-W.min.x>B.max.x?W.min.x-s.EXTENT:B.max.x,P),k=(B,W)=>(P[0]=Math.min(B.min.x,W.min.x),P[1]=Math.max(B.max.x,W.max.x),P[2]=s.EXTENT-W.min.y>B.max.y?W.min.y-s.EXTENT:B.max.y,P),F=[(B,W)=>L(B,W),(B,W)=>L(W,B),(B,W)=>k(B,W),(B,W)=>k(W,B)],$=new s.Point(0,0);let q,X,H;const Y=(B,W,te,re,pe)=>{const me=[[re?te:B,re?B:te,0],[re?te:W,re?W:te,0]],fe=pe<0?s.EXTENT+pe:pe,Se=[re?fe:(B+W)/2,re?(B+W)/2:fe,0];return te===0&&pe<0||te!==0&&pe>0?v.getForTilePoints(H,[Se],!0,X):me.push(Se),v.getForTilePoints(l,me,!0,q),Math.max(me[0][2],me[1][2],Se[2])/v.exaggeration()};for(let B=0;B<4;B++){const W=(B<2?1:5)-B,te=f.borders[B];if(te.length===0)continue;const re=H=T[B](l),pe=S(re);if(!(pe&&pe instanceof s.FillExtrusionBucket&&pe.enableTerrain)||f.borderDoneWithNeighborZ[B]===pe.canonical.z&&pe.borderDoneWithNeighborZ[W]===f.canonical.z||(X=v.findDEMTileFor(re),!X||!X.dem))continue;if(!q){const be=v.findDEMTileFor(l);if(!be||!be.dem)return;q=be}const me=pe.borders[W];let fe=0;const Se=pe.borderDoneWithNeighborZ[W]!==f.canonical.z;if(f.canonical.z===pe.canonical.z){for(let be=0;be<te.length;be++){const Le=f.featuresOnBorder[te[be]],ot=Le.borders[B];let Ae;for(;fe<me.length&&(Ae=pe.featuresOnBorder[me[fe]],!(Ae.borders[W][1]>ot[0]+3));)Se&&pe.encodeCentroid(void 0,Ae,!1),fe++;if(Ae&&fe<me.length){const qe=fe;let Fe=0;for(;!(Ae.borders[W][0]>ot[1]-3)&&(Fe++,++fe!==me.length);)Ae=pe.featuresOnBorder[me[fe]];if(Ae=pe.featuresOnBorder[me[qe]],Le.intersectsCount()>1||Ae.intersectsCount()>1||Fe!==1){Fe!==1&&(fe=qe),f.encodeCentroid(void 0,Le,!1),Se&&pe.encodeCentroid(void 0,Ae,!1);continue}const nt=F[B](Le,Ae),ke=B%2?s.EXTENT-1:0;$.x=Y(nt[0],Math.min(s.EXTENT-1,nt[1]),ke,B<2,nt[2]),$.y=0,f.encodeCentroid($,Le,!1),Se&&pe.encodeCentroid($,Ae,!1)}else f.encodeCentroid(void 0,Le,!1)}f.borderDoneWithNeighborZ[B]=pe.canonical.z,f.needsCentroidUpdate=!0,Se&&(pe.borderDoneWithNeighborZ[W]=f.canonical.z,pe.needsCentroidUpdate=!0)}else{for(const be of te)f.encodeCentroid(void 0,f.featuresOnBorder[be],!1);if(Se){for(const be of me)pe.encodeCentroid(void 0,pe.featuresOnBorder[be],!1);pe.borderDoneWithNeighborZ[W]=f.canonical.z,pe.needsCentroidUpdate=!0}f.borderDoneWithNeighborZ[B]=pe.canonical.z,f.needsCentroidUpdate=!0}}(f.needsCentroidUpdate||!f.centroidVertexBuffer&&f.centroidVertexArray.length!==0)&&f.uploadCentroid(h)}const ma=new s.Color(1,0,0,1),rd=new s.Color(0,1,0,1),id=new s.Color(0,0,1,1),od=new s.Color(1,0,1,1),sd=new s.Color(0,1,1,1);function ad(h,i,l){const f=h.context,g=h.transform,v=f.gl,T=g.projection.name==="globe",S=T?["PROJECTION_GLOBE_VIEW"]:null;let P=l.projMatrix;if(T&&s.globeToMercatorTransition(g.zoom)>0){const Le=s.transitionTileAABBinECEF(l.canonical,g),ot=s.globeDenormalizeECEF(Le);P=s.multiply(new Float32Array(16),g.globeMatrix,ot),s.multiply(P,g.projMatrix,P)}const L=h.useProgram("debug",null,S),k=i.getTileByID(l.key);h.terrain&&h.terrain.setupElevationDraw(k,L);const F=s.DepthMode.disabled,$=s.StencilMode.disabled,q=h.colorModeForRenderPass(),X="$debug";f.activeTexture.set(v.TEXTURE0),h.emptyTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),T?k._makeGlobeTileDebugBuffers(h.context,g):k._makeDebugTileBoundsBuffers(h.context,g.projection);const H=k._tileDebugBuffer||h.debugBuffer,Y=k._tileDebugIndexBuffer||h.debugIndexBuffer,B=k._tileDebugSegments||h.debugSegments;L.draw(f,v.LINE_STRIP,F,$,q,s.CullFaceMode.disabled,E1(P,s.Color.red),X,H,Y,B,null,null,null,[k._globeTileDebugBorderBuffer]);const W=k.latestRawTileData,te=Math.floor((W&&W.byteLength||0)/1024),re=i.getTile(l).tileSize,pe=512/Math.min(re,512)*(l.overscaledZ/g.zoom)*.5;let me=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(me+=` => ${l.overscaledZ}`),me+=` ${te}kb`,function(Le,ot){Le.initDebugOverlayCanvas();const Ae=Le.debugOverlayCanvas,qe=Le.context.gl,Fe=Le.debugOverlayCanvas.getContext("2d");Fe.clearRect(0,0,Ae.width,Ae.height),Fe.shadowColor="white",Fe.shadowBlur=2,Fe.lineWidth=1.5,Fe.strokeStyle="white",Fe.textBaseline="top",Fe.font="bold 36px Open Sans, sans-serif",Fe.fillText(ot,5,5),Fe.strokeText(ot,5,5),Le.debugOverlayTexture.update(Ae),Le.debugOverlayTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE)}(h,me);const fe=k._tileDebugTextBuffer||h.debugBuffer,Se=k._tileDebugTextIndexBuffer||h.quadTriangleIndexBuffer,be=k._tileDebugTextSegments||h.debugSegments;L.draw(f,v.TRIANGLES,F,$,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,E1(P,s.Color.transparent,pe),X,fe,Se,be,null,null,null,[k._globeTileDebugTextBuffer])}function th(h,i,l,f){_a(h,0,i+l/2,h.transform.width,l,f)}function A1(h,i,l,f){_a(h,i-l/2,0,l,h.transform.height,f)}function _a(h,i,l,f,g,v){const T=h.context,S=T.gl;S.enable(S.SCISSOR_TEST),S.scissor(i*s.exported.devicePixelRatio,l*s.exported.devicePixelRatio,f*s.exported.devicePixelRatio,g*s.exported.devicePixelRatio),T.clear({color:v}),S.disable(S.SCISSOR_TEST)}const nh=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:rh}=nh;function Fo(h,i,l,f){h.emplaceBack(i,l,f)}class I1{constructor(i){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,Fo(this.vertexArray,-1,-1,1),Fo(this.vertexArray,1,-1,1),Fo(this.vertexArray,-1,1,1),Fo(this.vertexArray,1,1,1),Fo(this.vertexArray,-1,-1,-1),Fo(this.vertexArray,1,-1,-1),Fo(this.vertexArray,-1,1,-1),Fo(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,rh),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function Pi(h,i,l,f,g,v){const T=h.gl,S=i.paint.get("sky-atmosphere-color"),P=i.paint.get("sky-atmosphere-halo-color"),L=i.paint.get("sky-atmosphere-sun-intensity"),k=((F,$,q,X,H)=>({u_matrix_3f:F,u_sun_direction:$,u_sun_intensity:q,u_color_tint_r:[X.r,X.g,X.b,X.a],u_color_tint_m:[H.r,H.g,H.b,H.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),f),g,L,S,P);T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_CUBE_MAP_POSITIVE_X+v,i.skyboxTexture,0),l.draw(h,T.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,k,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const Sl=s.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class ih{constructor(i){const l=new s.StructArrayLayout5f20;l.emplaceBack(-1,1,1,0,0),l.emplaceBack(1,1,1,1,0),l.emplaceBack(1,-1,1,1,1),l.emplaceBack(-1,-1,1,0,1);const f=new s.StructArrayLayout3ui6;f.emplaceBack(0,1,2),f.emplaceBack(2,3,0),this.vertexBuffer=i.createVertexBuffer(l,Sl.members),this.indexBuffer=i.createIndexBuffer(f),this.segments=s.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Rs={symbol:function(h,i,l,f,g){if(h.renderPass!=="translucent")return;const v=s.StencilMode.disabled,T=h.colorModeForRenderPass();l.layout.get("text-variable-anchor")&&function(S,P,L,k,F,$,q){const X=P.transform,H=F==="map",Y=$==="map";for(const B of S){const W=k.getTile(B),te=W.getBucket(L);if(!te||!te.text||!te.text.segments.get().length)continue;const re=s.evaluateSizeForZoom(te.textSizeData,X.zoom),pe=Gn(B,te.getProjection(),X),me=X.calculatePixelsToTileUnitsMatrix(W),fe=je(pe,W.tileID.canonical,Y,H,X,te.getProjection(),me),Se=L.layout.get("icon-text-fit")!=="none"&&te.hasIconData();if(re){const be=Math.pow(2,X.zoom-W.tileID.overscaledZ);nd(te,H,Y,q,s.symbolSize,X,fe,B,be,re,Se)}}}(f,h,l,i,l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),g),l.paint.get("icon-opacity").constantOr(1)!==0&&J2(h,i,l,f,!1,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),l.layout.get("icon-rotation-alignment"),l.layout.get("icon-pitch-alignment"),l.layout.get("icon-keep-upright"),v,T),l.paint.get("text-opacity").constantOr(1)!==0&&J2(h,i,l,f,!0,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),l.layout.get("text-keep-upright"),v,T),i.map.showCollisionBoxes&&(Tl(h,i,l,f,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),!0),Tl(h,i,l,f,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),!1))},circle:function(h,i,l,f){if(h.renderPass!=="translucent")return;const g=l.paint.get("circle-opacity"),v=l.paint.get("circle-stroke-width"),T=l.paint.get("circle-stroke-opacity"),S=l.layout.get("circle-sort-key").constantOr(1)!==void 0;if(g.constantOr(1)===0&&(v.constantOr(1)===0||T.constantOr(1)===0))return;const P=h.context,L=P.gl,k=h.transform,F=h.depthModeForSublayer(0,s.DepthMode.ReadOnly),$=s.StencilMode.disabled,q=h.colorModeForRenderPass(),X=k.projection.name==="globe",H=[s.mercatorXfromLng(k.center.lng),s.mercatorYfromLat(k.center.lat)],Y=[];for(let W=0;W<f.length;W++){const te=f[W],re=i.getTile(te),pe=re.getBucket(l);if(!pe||pe.projection.name!==k.projection.name)continue;const me=pe.programConfigurations.get(l.id),fe=Su(l);X&&fe.push("PROJECTION_GLOBE_VIEW");const Se=h.useProgram("circle",me,fe),be=pe.layoutVertexBuffer,Le=pe.globeExtVertexBuffer,ot=pe.indexBuffer,Ae=k.projection.createInversionMatrix(k,te.canonical),qe={programConfiguration:me,program:Se,layoutVertexBuffer:be,globeExtVertexBuffer:Le,indexBuffer:ot,uniformValues:Eu(h,te,re,Ae,H,l),tile:re};if(S){const Fe=pe.segments.get();for(const nt of Fe)Y.push({segments:new s.SegmentVector([nt]),sortKey:nt.sortKey,state:qe})}else Y.push({segments:pe.segments,sortKey:0,state:qe})}S&&Y.sort((W,te)=>W.sortKey-te.sortKey);const B={useDepthForOcclusion:!X};for(const W of Y){const{programConfiguration:te,program:re,layoutVertexBuffer:pe,globeExtVertexBuffer:me,indexBuffer:fe,uniformValues:Se,tile:be}=W.state,Le=W.segments;h.terrain&&h.terrain.setupElevationDraw(be,re,B),h.prepareDrawProgram(P,re,be.tileID.toUnwrapped()),re.draw(P,L.TRIANGLES,F,$,q,s.CullFaceMode.disabled,Se,l.id,pe,fe,Le,l.paint,k.zoom,te,[me])}},heatmap:function(h,i,l,f){if(l.paint.get("heatmap-opacity")!==0)if(h.renderPass==="offscreen"){const g=h.context,v=g.gl,T=s.StencilMode.disabled,S=new s.ColorMode([v.ONE,v.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(q,X,H,Y){const B=q.gl,W=X.width*Y,te=X.height*Y;q.activeTexture.set(B.TEXTURE1),q.viewport.set([0,0,W,te]);let re=H.heatmapFbo;if(!re||re&&(re.width!==W||re.height!==te)){re&&re.destroy();const pe=B.createTexture();B.bindTexture(B.TEXTURE_2D,pe),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,B.LINEAR),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,B.LINEAR),re=H.heatmapFbo=q.createFramebuffer(W,te,!1),function(me,fe,Se,be,Le,ot){const Ae=me.gl;Ae.texImage2D(Ae.TEXTURE_2D,0,me.isWebGL2&&me.extRenderToTextureHalfFloat?Ae.RGBA16F:Ae.RGBA,Le,ot,0,Ae.RGBA,me.extRenderToTextureHalfFloat?me.isWebGL2?Ae.HALF_FLOAT:me.extTextureHalfFloat.HALF_FLOAT_OES:Ae.UNSIGNED_BYTE,null),be.colorAttachment.set(Se)}(q,0,pe,re,W,te)}else B.bindTexture(B.TEXTURE_2D,re.colorAttachment.get()),q.bindFramebuffer.set(re.framebuffer)})(g,h,l,h.transform.projection.name==="globe"?.5:.25),g.clear({color:s.Color.transparent});const P=h.transform,L=P.projection.name==="globe",k=L?["PROJECTION_GLOBE_VIEW"]:null,F=L?s.CullFaceMode.frontCCW:s.CullFaceMode.disabled,$=[s.mercatorXfromLng(P.center.lng),s.mercatorYfromLat(P.center.lat)];for(let q=0;q<f.length;q++){const X=f[q];if(i.hasRenderableParent(X))continue;const H=i.getTile(X),Y=H.getBucket(l);if(!Y||Y.projection.name!==P.projection.name)continue;const B=Y.programConfigurations.get(l.id),W=h.useProgram("heatmap",B,k),{zoom:te}=h.transform;h.terrain&&h.terrain.setupElevationDraw(H,W),h.prepareDrawProgram(g,W,X.toUnwrapped());const re=P.projection.createInversionMatrix(P,X.canonical);W.draw(g,v.TRIANGLES,s.DepthMode.disabled,T,S,F,X2(h,X,H,re,$,te,l.paint.get("heatmap-intensity")),l.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,l.paint,h.transform.zoom,B,L?[Y.globeExtVertexBuffer]:null)}g.viewport.set([0,0,h.width,h.height])}else h.renderPass==="translucent"&&(h.context.setColorMode(h.colorModeForRenderPass()),function(g,v){const T=g.context,S=T.gl,P=v.heatmapFbo;if(!P)return;T.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,P.colorAttachment.get()),T.activeTexture.set(S.TEXTURE1);let L=v.colorRampTexture;L||(L=v.colorRampTexture=new s.Texture(T,v.colorRamp,S.RGBA)),L.bind(S.LINEAR,S.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(T,S.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,g.colorModeForRenderPass(),s.CullFaceMode.disabled,((k,F,$,q)=>({u_image:0,u_color_ramp:1,u_opacity:F.paint.get("heatmap-opacity")}))(0,v),v.id,g.viewportBuffer,g.quadTriangleIndexBuffer,g.viewportSegments,v.paint,g.transform.zoom)}(h,l))},line:function(h,i,l,f){if(h.renderPass!=="translucent")return;const g=l.paint.get("line-opacity"),v=l.paint.get("line-width");if(g.constantOr(1)===0||v.constantOr(1)===0)return;const T=h.depthModeForSublayer(0,s.DepthMode.ReadOnly),S=h.colorModeForRenderPass(),P=h.terrain&&h.terrain.renderingToTexture?1:s.exported.devicePixelRatio,L=l.paint.get("line-dasharray"),k=L.constantOr(1),F=l.layout.get("line-cap"),$=l.paint.get("line-pattern"),q=$.constantOr(1),X=l.paint.get("line-gradient"),H=q?"linePattern":"line",Y=h.context,B=Y.gl,W=(re=>{const pe=[];bl(re)&&pe.push("RENDER_LINE_DASH"),re.paint.get("line-gradient")&&pe.push("RENDER_LINE_GRADIENT");const me=re.paint.get("line-trim-offset");me[0]===0&&me[1]===0||pe.push("RENDER_LINE_TRIM_OFFSET");const fe=re.paint.get("line-pattern").constantOr(1),Se=re.paint.get("line-opacity").constantOr(1)!==1;return!fe&&Se&&pe.push("RENDER_LINE_ALPHA_DISCARD"),pe})(l);let te=W.includes("RENDER_LINE_ALPHA_DISCARD");h.terrain&&h.terrain.clipOrMaskOverlapStencilType()&&(te=!1);for(const re of f){const pe=i.getTile(re);if(q&&!pe.patternsLoaded())continue;const me=pe.getBucket(l);if(!me)continue;h.prepareDrawTile();const fe=me.programConfigurations.get(l.id),Se=h.useProgram(H,fe,W),be=$.constantOr(null);if(be&&pe.imageAtlas){const We=pe.imageAtlas.patternPositions[be.toString()];We&&fe.setConstantPatternPositions(We)}const Le=L.constantOr(null),ot=F.constantOr(null);if(!q&&Le&&ot&&pe.lineAtlas){const We=pe.lineAtlas.getDash(Le,ot);We&&fe.setConstantPatternPositions(We)}let[Ae,qe]=l.paint.get("line-trim-offset");(ot==="round"||ot==="square")&&Ae!==qe&&(Ae===0&&(Ae-=1),qe===1&&(qe+=1));const Fe=h.terrain?re.projMatrix:null,nt=q?wl(h,pe,l,Fe,P):ed(h,pe,l,Fe,me.lineClipsArray.length,P,[Ae,qe]);if(X){const We=me.gradients[l.id];let at=We.texture;if(l.gradientVersion!==We.version){let Qe=256;if(l.stepInterpolant){const lt=i.getSource().maxzoom,Dt=re.canonical.z===lt?Math.ceil(1<<h.transform.maxZoom-re.canonical.z):1;Qe=s.clamp(s.nextPowerOfTwo(me.maxLineLength/s.EXTENT*1024*Dt),256,Y.maxTextureSize)}We.gradient=s.renderColorRamp({expression:l.gradientExpression(),evaluationKey:"lineProgress",resolution:Qe,image:We.gradient||void 0,clips:me.lineClipsArray}),We.texture?We.texture.update(We.gradient):We.texture=new s.Texture(Y,We.gradient,B.RGBA),We.version=l.gradientVersion,at=We.texture}Y.activeTexture.set(B.TEXTURE1),at.bind(l.stepInterpolant?B.NEAREST:B.LINEAR,B.CLAMP_TO_EDGE)}k&&(Y.activeTexture.set(B.TEXTURE0),pe.lineAtlasTexture.bind(B.LINEAR,B.REPEAT),fe.updatePaintBuffers()),q&&(Y.activeTexture.set(B.TEXTURE0),pe.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),fe.updatePaintBuffers()),h.prepareDrawProgram(Y,Se,re.toUnwrapped());const ke=We=>{Se.draw(Y,B.TRIANGLES,T,We,S,s.CullFaceMode.disabled,nt,l.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,l.paint,h.transform.zoom,fe,[me.layoutVertexBuffer2])};if(te){const We=h.stencilModeForClipping(re).ref;We===0&&h.terrain&&Y.clear({stencil:0});const at={func:B.EQUAL,mask:255};nt.u_alpha_discard_threshold=.8,ke(new s.StencilMode(at,We,255,B.KEEP,B.KEEP,B.INVERT)),nt.u_alpha_discard_threshold=0,ke(new s.StencilMode(at,We,255,B.KEEP,B.KEEP,B.KEEP))}else ke(h.stencilModeForClipping(re))}te&&(h.resetStencilClippingMasks(),h.terrain&&Y.clear({stencil:0}))},fill:function(h,i,l,f){const g=l.paint.get("fill-color"),v=l.paint.get("fill-opacity");if(v.constantOr(1)===0)return;const T=h.colorModeForRenderPass(),S=l.paint.get("fill-pattern"),P=h.opaquePassEnabledForLayer()&&!S.constantOr(1)&&g.constantOr(s.Color.transparent).a===1&&v.constantOr(0)===1?"opaque":"translucent";if(h.renderPass===P){const L=h.depthModeForSublayer(1,h.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);Q2(h,i,l,f,L,T,!1)}if(h.renderPass==="translucent"&&l.paint.get("fill-antialias")){const L=h.depthModeForSublayer(l.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);Q2(h,i,l,f,L,T,!0)}},"fill-extrusion":function(h,i,l,f){const g=l.paint.get("fill-extrusion-opacity");if(g!==0&&h.renderPass==="translucent"){const v=new s.DepthMode(h.context.gl.LEQUAL,s.DepthMode.ReadWrite,h.depthRangeFor3D);if(g!==1||l.paint.get("fill-extrusion-pattern").constantOr(1))P1(h,i,l,f,v,s.StencilMode.disabled,s.ColorMode.disabled),P1(h,i,l,f,v,h.stencilModeFor3D(),h.colorModeForRenderPass()),h.resetStencilClippingMasks();else{const T=h.colorModeForRenderPass();P1(h,i,l,f,v,s.StencilMode.disabled,T)}}},hillshade:function(h,i,l,f){if(h.renderPass!=="offscreen"&&h.renderPass!=="translucent")return;const g=h.context,v=h.depthModeForSublayer(0,s.DepthMode.ReadOnly),T=h.colorModeForRenderPass(),S=h.terrain&&h.terrain.renderingToTexture,[P,L]=h.renderPass!=="translucent"||S?[{},f]:h.stencilConfigForOverlap(f);for(const k of L){const F=i.getTile(k);if(F.needsHillshadePrepare&&h.renderPass==="offscreen")$2(h,F,l,v,s.StencilMode.disabled,T);else if(h.renderPass==="translucent"){const $=S&&h.terrain?h.terrain.stencilModeForRTTOverlap(k):P[k.overscaledZ];G2(h,k,F,l,v,$,T)}}g.viewport.set([0,0,h.width,h.height]),h.resetStencilClippingMasks()},raster:function(h,i,l,f,g,v){if(h.renderPass!=="translucent"||l.paint.get("raster-opacity")===0||!f.length)return;const T=h.context,S=T.gl,P=i.getSource(),L=h.useProgram("raster"),k=h.colorModeForRenderPass(),F=h.terrain&&h.terrain.renderingToTexture,[$,q]=P instanceof Me||F?[{},f]:h.stencilConfigForOverlap(f),X=q[q.length-1].overscaledZ,H=!h.options.moving;for(const Y of q){const B=F?s.DepthMode.disabled:h.depthModeForSublayer(Y.overscaledZ-X,l.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,S.LESS),W=Y.toUnwrapped(),te=i.getTile(Y);if(F&&(!te||!te.hasData()))continue;const re=F?Y.projMatrix:h.transform.calculateProjMatrix(W,H),pe=h.terrain&&F?h.terrain.stencilModeForRTTOverlap(Y):$[Y.overscaledZ],me=v?0:l.paint.get("raster-fade-duration");te.registerFadeDuration(me);const fe=i.findLoadedParent(Y,0),Se=vu(te,fe,i,h.transform,me);let be,Le;h.terrain&&h.terrain.prepareDrawTile();const ot=l.paint.get("raster-resampling")==="nearest"?S.NEAREST:S.LINEAR;T.activeTexture.set(S.TEXTURE0),te.texture.bind(ot,S.CLAMP_TO_EDGE),T.activeTexture.set(S.TEXTURE1),fe?(fe.texture.bind(ot,S.CLAMP_TO_EDGE),be=Math.pow(2,fe.tileID.overscaledZ-te.tileID.overscaledZ),Le=[te.tileID.canonical.x*be%1,te.tileID.canonical.y*be%1]):te.texture.bind(ot,S.CLAMP_TO_EDGE),te.texture.useMipmap&&T.extTextureFilterAnisotropic&&h.transform.pitch>20&&S.texParameterf(S.TEXTURE_2D,T.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,T.extTextureFilterAnisotropicMax);const Ae=Pu(re,Le||[0,0],be||1,Se,l,P instanceof Me?P.perspectiveTransform:[0,0]);if(h.prepareDrawProgram(T,L,W),P instanceof Me)P.boundsBuffer&&P.boundsSegments&&L.draw(T,S.TRIANGLES,B,s.StencilMode.disabled,k,s.CullFaceMode.disabled,Ae,l.id,P.boundsBuffer,h.quadTriangleIndexBuffer,P.boundsSegments);else{const{tileBoundsBuffer:qe,tileBoundsIndexBuffer:Fe,tileBoundsSegments:nt}=h.getTileBoundsBuffers(te);L.draw(T,S.TRIANGLES,B,pe,k,s.CullFaceMode.disabled,Ae,l.id,qe,Fe,nt)}}h.resetStencilClippingMasks()},background:function(h,i,l,f){const g=l.paint.get("background-color"),v=l.paint.get("background-opacity");if(v===0)return;const T=h.context,S=T.gl,P=h.transform,L=P.tileSize,k=l.paint.get("background-pattern");if(h.isPatternMissing(k))return;const F=!k&&g.a===1&&v===1&&h.opaquePassEnabledForLayer()?"opaque":"translucent";if(h.renderPass!==F)return;const $=s.StencilMode.disabled,q=h.depthModeForSublayer(0,F==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),X=h.colorModeForRenderPass(),H=h.useProgram(k?"backgroundPattern":"background");let Y,B=f;B||(Y=h.getBackgroundTiles(),B=Object.values(Y).map(W=>W.tileID)),k&&(T.activeTexture.set(S.TEXTURE0),h.imageManager.bind(h.context));for(const W of B){const te=W.toUnwrapped(),re=f?W.projMatrix:h.transform.calculateProjMatrix(te);h.prepareDrawTile();const pe=i?i.getTile(W):Y?Y[W.key]:new s.Tile(W,L,P.zoom,h),me=k?td(re,v,h,k,{tileID:W,tileSize:L}):Iu(re,v,g);h.prepareDrawProgram(T,H,te);const{tileBoundsBuffer:fe,tileBoundsIndexBuffer:Se,tileBoundsSegments:be}=h.getTileBoundsBuffers(pe);H.draw(T,S.TRIANGLES,q,$,X,s.CullFaceMode.disabled,me,l.id,fe,Se,be)}},sky:function(h,i,l){const f=h.transform,g=f.projection.name==="mercator"||f.projection.name==="globe"?1:s.smoothstep(7,8,f.zoom),v=l.paint.get("sky-opacity")*g;if(v===0)return;const T=h.context,S=l.paint.get("sky-type"),P=new s.DepthMode(T.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),L=h.frameCounter/1e3%1;S==="atmosphere"?h.renderPass==="offscreen"?l.needsSkyboxCapture(h)&&(function(k,F,$,q){const X=k.context,H=X.gl;let Y=F.skyboxFbo;if(!Y){Y=F.skyboxFbo=X.createFramebuffer(32,32,!1),F.skyboxGeometry=new I1(X),F.skyboxTexture=X.gl.createTexture(),H.bindTexture(H.TEXTURE_CUBE_MAP,F.skyboxTexture),H.texParameteri(H.TEXTURE_CUBE_MAP,H.TEXTURE_WRAP_S,H.CLAMP_TO_EDGE),H.texParameteri(H.TEXTURE_CUBE_MAP,H.TEXTURE_WRAP_T,H.CLAMP_TO_EDGE),H.texParameteri(H.TEXTURE_CUBE_MAP,H.TEXTURE_MIN_FILTER,H.LINEAR),H.texParameteri(H.TEXTURE_CUBE_MAP,H.TEXTURE_MAG_FILTER,H.LINEAR);for(let re=0;re<6;++re)H.texImage2D(H.TEXTURE_CUBE_MAP_POSITIVE_X+re,0,H.RGBA,32,32,0,H.RGBA,H.UNSIGNED_BYTE,null)}X.bindFramebuffer.set(Y.framebuffer),X.viewport.set([0,0,32,32]);const B=F.getCenter(k,!0),W=k.useProgram("skyboxCapture"),te=new Float64Array(16);s.identity(te),s.rotateY(te,te,.5*-Math.PI),Pi(X,F,W,te,B,0),s.identity(te),s.rotateY(te,te,.5*Math.PI),Pi(X,F,W,te,B,1),s.identity(te),s.rotateX(te,te,.5*-Math.PI),Pi(X,F,W,te,B,2),s.identity(te),s.rotateX(te,te,.5*Math.PI),Pi(X,F,W,te,B,3),s.identity(te),Pi(X,F,W,te,B,4),s.identity(te),s.rotateY(te,te,Math.PI),Pi(X,F,W,te,B,5),X.viewport.set([0,0,k.width,k.height])}(h,l),l.markSkyboxValid(h)):h.renderPass==="sky"&&function(k,F,$,q,X){const H=k.context,Y=H.gl,B=k.transform,W=k.useProgram("skybox");H.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_CUBE_MAP,F.skyboxTexture);const te=((re,pe,me,fe,Se)=>({u_matrix:re,u_sun_direction:pe,u_cubemap:0,u_opacity:fe,u_temporal_offset:Se}))(B.skyboxMatrix,F.getCenter(k,!1),0,q,X);k.prepareDrawProgram(H,W),W.draw(H,Y.TRIANGLES,$,s.StencilMode.disabled,k.colorModeForRenderPass(),s.CullFaceMode.backCW,te,"skybox",F.skyboxGeometry.vertexBuffer,F.skyboxGeometry.indexBuffer,F.skyboxGeometry.segment)}(h,l,P,v,L):S==="gradient"&&h.renderPass==="sky"&&function(k,F,$,q,X){const H=k.context,Y=H.gl,B=k.transform,W=k.useProgram("skyboxGradient");F.skyboxGeometry||(F.skyboxGeometry=new I1(H)),H.activeTexture.set(Y.TEXTURE0);let te=F.colorRampTexture;te||(te=F.colorRampTexture=new s.Texture(H,F.colorRamp,Y.RGBA)),te.bind(Y.LINEAR,Y.CLAMP_TO_EDGE);const re=((pe,me,fe,Se,be)=>({u_matrix:pe,u_color_ramp:0,u_center_direction:me,u_radius:s.degToRad(fe),u_opacity:Se,u_temporal_offset:be}))(B.skyboxMatrix,F.getCenter(k,!1),F.paint.get("sky-gradient-radius"),q,X);k.prepareDrawProgram(H,W),W.draw(H,Y.TRIANGLES,$,s.StencilMode.disabled,k.colorModeForRenderPass(),s.CullFaceMode.backCW,re,"skyboxGradient",F.skyboxGeometry.vertexBuffer,F.skyboxGeometry.indexBuffer,F.skyboxGeometry.segment)}(h,l,P,v,L)},debug:function(h,i,l){for(let f=0;f<l.length;f++)ad(h,i,l[f])},custom:function(h,i,l,f){const g=h.context,v=l.implementation;if(!h.transform.projection.unsupportedLayers||!h.transform.projection.unsupportedLayers.includes("custom")||h.terrain&&(h.terrain.renderingToTexture||h.renderPass==="offscreen")&&l.isLayerDraped()){if(h.renderPass==="offscreen"){const T=v.prerender;if(T){if(h.setCustomLayerDefaults(),g.setColorMode(h.colorModeForRenderPass()),h.transform.projection.name==="globe"){const S=h.transform.pointMerc;T.call(v,g.gl,h.transform.customLayerMatrix(),h.transform.getProjection(),h.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(h.transform.zoom),[S.x,S.y],h.transform.pixelsPerMeterRatio)}else T.call(v,g.gl,h.transform.customLayerMatrix());g.setDirty(),h.setBaseState()}}else if(h.renderPass==="translucent"){if(h.terrain&&h.terrain.renderingToTexture){const S=v.renderToTile;if(S){const P=f[0].canonical,L=new s.MercatorCoordinate(P.x+f[0].wrap*(1<<P.z),P.y,P.z);g.setDepthMode(s.DepthMode.disabled),g.setStencilMode(s.StencilMode.disabled),g.setColorMode(h.colorModeForRenderPass()),h.setCustomLayerDefaults(),S.call(v,g.gl,L),g.setDirty(),h.setBaseState()}return}h.setCustomLayerDefaults(),g.setColorMode(h.colorModeForRenderPass()),g.setStencilMode(s.StencilMode.disabled);const T=v.renderingMode==="3d"?new s.DepthMode(h.context.gl.LEQUAL,s.DepthMode.ReadWrite,h.depthRangeFor3D):h.depthModeForSublayer(0,s.DepthMode.ReadOnly);if(g.setDepthMode(T),h.transform.projection.name==="globe"){const S=h.transform.pointMerc;v.render(g.gl,h.transform.customLayerMatrix(),h.transform.getProjection(),h.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(h.transform.zoom),[S.x,S.y],h.transform.pixelsPerMeterRatio)}else v.render(g.gl,h.transform.customLayerMatrix());g.setDirty(),h.setBaseState(),g.bindFramebuffer.set(null)}}else s.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class ga{constructor(i,l,f=!1){this.context=new ht(i,f),this.transform=l,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(i,l){const f=!!i&&!!i.terrain&&this.transform.projection.supportsTerrain;if(!(f||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new wu(this,i));const g=this._terrain;this.transform.elevation=f?g:null,g.update(i,this.transform,l)}_updateFog(i){const l=i.fog;if(!l||this.transform.projection.name==="globe"||l.getOpacity(this.transform.pitch)<1||l.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[f,g]=l.getFovAdjustedRange(this.transform._fov);if(f>g)return void(this.transform.fogCullDistSq=null);const v=f+.78*(g-f);this.transform.fogCullDistSq=v*v}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(i,l){if(this.width=i*s.exported.devicePixelRatio,this.height=l*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const f of this.style.order)this.style._layers[f].resize()}setup(){const i=this.context,l=new s.StructArrayLayout2i4;l.emplaceBack(0,0),l.emplaceBack(s.EXTENT,0),l.emplaceBack(0,s.EXTENT),l.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(l,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const f=new s.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(s.EXTENT,0),f.emplaceBack(0,s.EXTENT),f.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=i.createVertexBuffer(f,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const g=new s.StructArrayLayout2i4;g.emplaceBack(-1,-1),g.emplaceBack(1,-1),g.emplaceBack(-1,1),g.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(g,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const v=new s.StructArrayLayout4i8;v.emplaceBack(0,0,0,0),v.emplaceBack(s.EXTENT,0,s.EXTENT,0),v.emplaceBack(0,s.EXTENT,0,s.EXTENT),v.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=i.createVertexBuffer(v,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const T=new s.StructArrayLayout3ui6;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(T);const S=new s.StructArrayLayout1ui2;for(const L of[0,1,3,2,0])S.emplaceBack(L);this.debugIndexBuffer=i.createIndexBuffer(S),this.emptyTexture=new s.Texture(i,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),i.gl.RGBA),this.identityMat=s.create();const P=this.context.gl;this.stencilClearMode=new s.StencilMode({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO),this.loadTimeStamps.push(s.window.performance.now()),this.atmosphereBuffer=new ih(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(i){return i._makeTileBoundsBuffers(this.context,this.transform.projection),i._tileBoundsBuffer?{tileBoundsBuffer:i._tileBoundsBuffer,tileBoundsIndexBuffer:i._tileBoundsIndexBuffer,tileBoundsSegments:i._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const i=this.context,l=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(i,l.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,vl(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(i,l,f){if(!l||this.currentStencilSource===l.id||!i.isTileClipped()||!f||f.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let S=!1;for(const P of f)if(this._tileClippingMaskIDs[P.key]===void 0){S=!0;break}if(!S)return}this.currentStencilSource=l.id;const g=this.context,v=g.gl;this.nextStencilID+f.length>256&&this.clearStencil(),g.setColorMode(s.ColorMode.disabled),g.setDepthMode(s.DepthMode.disabled);const T=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const S of f){const P=l.getTile(S),L=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,{tileBoundsBuffer:k,tileBoundsIndexBuffer:F,tileBoundsSegments:$}=this.getTileBoundsBuffers(P);T.draw(g,v.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:v.ALWAYS,mask:0},L,255,v.KEEP,v.KEEP,v.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,vl(S.projMatrix),"$clipping",k,F,$)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,l=this.context.gl;return new s.StencilMode({func:l.NOTEQUAL,mask:255},i,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(i){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(i);const l=this.context.gl;return new s.StencilMode({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(i){const l=this.context.gl,f=i.sort((T,S)=>S.overscaledZ-T.overscaledZ),g=f[f.length-1].overscaledZ,v=f[0].overscaledZ-g+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const T={};for(let S=0;S<v;S++)T[S+g]=new s.StencilMode({func:l.GEQUAL,mask:255},S+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=v,[T,f]}return[{[g]:s.StencilMode.disabled},f]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new s.ColorMode([i.CONSTANT_COLOR,i.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(i,l,f){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new s.DepthMode(f||this.context.gl.LEQUAL,l,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,l){this.style=i,this.options=l,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const f=this.style.order,g=this.style._sourceCaches;for(const L in g){const k=g[L];k.used&&k.prepare(this.context)}const v={},T={},S={};for(const L in g){const k=g[L];v[L]=k.getVisibleCoordinates(),T[L]=v[L].slice().reverse(),S[L]=k.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let L=0;L<f.length;L++)if(this.style._layers[f[L]].is3D()){this.opaquePassCutoff=L;break}if(this.terrain&&(this.terrain.updateTileBinding(S),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const L of f){const k=this.style._layers[L],F=i._getLayerSourceCache(k);if(!k.hasOffscreenPass()||k.isHidden(this.transform.zoom))continue;const $=F?T[F.id]:void 0;(k.type==="custom"||k.isSky()||$&&$.length)&&this.renderLayer(this,F,k,$)}this.depthRangeFor3D=[0,1-(i.order.length+2)*this.numSublayers*this.depthEpsilon];const P=this.terrain;if(P&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&P.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:l.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const L=this.style._layers[f[this.currentLayer]],k=i._getLayerSourceCache(L);if(L.isSky())continue;const F=k?T[k.id]:void 0;this._renderTileClippingMasks(L,k,F),this.renderLayer(this,k,L,F)}if(this.style.fog&&this.transform.projection.supportsFog&&function(L,k){const F=L.context,$=F.gl,q=L.transform,X=new s.DepthMode($.LEQUAL,s.DepthMode.ReadOnly,[0,1]),H=L.useProgram("globeAtmosphere",null,q.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Y=s.globeToMercatorTransition(q.zoom),B=k.properties.get("color").toArray01(),W=k.properties.get("high-color").toArray01(),te=k.properties.get("space-color").toArray01PremultipliedAlpha(),re=s.identity$1([]);s.rotateY$1(re,re,-s.degToRad(q._center.lng)),s.rotateX$1(re,re,s.degToRad(q._center.lat)),s.rotateZ$1(re,re,q.angle),s.rotateX$1(re,re,-q._pitch);const pe=s.fromQuat(new Float32Array(16),re),me=s.mapValue(k.properties.get("star-intensity"),0,1,0,.25),fe=5e-4,Se=s.mapValue(k.properties.get("horizon-blend"),0,1,fe,.25),be=s.globeUseCustomAntiAliasing(L,F,q)&&Se===fe?q.worldSize/(2*Math.PI*1.025)-1:q.globeRadius,Le=L.frameCounter/1e3%1,ot=s.length(q.globeCenterInViewSpace),Ae=Math.sqrt(Math.pow(ot,2)-Math.pow(be,2)),qe=Math.acos(Ae/ot),Fe=((ke,We,at,Qe,lt,Dt,Gt,Pt,Ot,rn,en,Lt,vn,bn)=>({u_frustum_tl:ke,u_frustum_tr:We,u_frustum_br:at,u_frustum_bl:Qe,u_horizon:lt,u_transition:Dt,u_fadeout_range:Gt,u_color:Pt,u_high_color:Ot,u_space_color:rn,u_star_intensity:en,u_star_size:5*s.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Lt,u_horizon_angle:vn,u_rotation_matrix:bn}))(q.frustumCorners.TL,q.frustumCorners.TR,q.frustumCorners.BR,q.frustumCorners.BL,q.frustumCorners.horizon,Y,Se,B,W,te,me,Le,qe,pe);L.prepareDrawProgram(F,H);const nt=L.atmosphereBuffer;nt&&H.draw(F,$.TRIANGLES,X,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,Fe,"skybox",nt.vertexBuffer,nt.indexBuffer,nt.segments)}(this,this.style.fog),this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const L=this.style._layers[f[this.currentLayer]],k=i._getLayerSourceCache(L);L.isSky()&&this.renderLayer(this,k,L,k?T[k.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;){const L=this.style._layers[f[this.currentLayer]],k=i._getLayerSourceCache(L);if(L.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(L)){if(L.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const F=k?(L.type==="symbol"?S:T)[k.id]:void 0;this._renderTileClippingMasks(L,k,k?v[k.id]:void 0),this.renderLayer(this,k,L,F),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let L=null;s.values(this.style._layers).forEach(k=>{const F=i._getLayerSourceCache(k);F&&!k.isHidden(this.transform.zoom)&&(!L||L.getSource().maxzoom<F.getSource().maxzoom)&&(L=F)}),L&&this.options.showTileBoundaries&&Rs.debug(this,L,L.getVisibleCoordinates())}this.options.showPadding&&function(L){const k=L.transform.padding;th(L,L.transform.height-(k.top||0),3,ma),th(L,k.bottom||0,3,rd),A1(L,k.left||0,3,id),A1(L,L.transform.width-(k.right||0),3,od);const F=L.transform.centerPoint;(function($,q,X,H){_a($,q-1,X-10,2,20,H),_a($,q-10,X-1,20,2,H)})(L,F.x,L.transform.height-F.y,sd)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(i,l,f,g){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="sky"||f.type==="custom"||g&&g.length)&&(this.id=f.id,this.gpuTimingStart(f),(!i.transform.projection.unsupportedLayers||!i.transform.projection.unsupportedLayers.includes(f.type)||i.terrain&&f.type==="custom")&&Rs[f.type](i,l,f,g,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;let f=this.gpuTimers[i.id];f||(f=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:l.createQueryEXT()}),f.calls++,l.beginQueryEXT(l.TIME_ELAPSED_EXT,f.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const i=this.context.extTimerQuery,l=i.createQueryEXT();this.deferredRenderGpuTimeQueries.push(l),i.beginQueryEXT(i.TIME_ELAPSED_EXT,l)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}collectDeferredRenderGpuQueries(){const i=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],i}queryGpuTimers(i){const l={};for(const f in i){const g=i[f],v=this.context.extTimerQuery,T=v.getQueryObjectEXT(g.query,v.QUERY_RESULT_EXT)/1e6;v.deleteQueryEXT(g.query),l[f]=T}return l}queryGpuTimeDeferredRender(i){if(!this.options.gpuTimingDeferredRender)return 0;const l=this.context.extTimerQuery;let f=0;for(const g of i)f+=l.getQueryObjectEXT(g,l.QUERY_RESULT_EXT)/1e6,l.deleteQueryEXT(g);return f}translatePosMatrix(i,l,f,g,v){if(!f[0]&&!f[1])return i;const T=v?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(T){const L=Math.sin(T),k=Math.cos(T);f=[f[0]*k-f[1]*L,f[0]*L+f[1]*k]}const S=[v?f[0]:kt(l,f[0],this.transform.zoom),v?f[1]:kt(l,f[1],this.transform.zoom),0],P=new Float32Array(16);return s.translate(P,i,S),P}saveTileTexture(i){const l=this._tileTextures[i.size[0]];l?l.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const l=this._tileTextures[i];return l&&l.length>0?l.pop():null}isPatternMissing(i){return i===null||i!==void 0&&!this.imageManager.getPattern(i.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const i=this.terrain&&this.terrain.renderingToTexture,l=this.terrain&&this.terrain.exaggeration()===0,f=this.style&&this.style.fog,g=[];return this.terrainRenderModeElevated()&&g.push("TERRAIN"),this.transform.projection.name==="globe"&&g.push("GLOBE"),l&&g.push("ZERO_EXAGGERATION"),f&&!i&&f.getOpacity(this.transform.pitch)!==0&&g.push("FOG"),i&&g.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&g.push("OVERDRAW_INSPECTOR"),g}useProgram(i,l,f){this.cache=this.cache||{};const g=f||[],v=this.currentGlobalDefines().concat(g),T=un.cacheKey(mu[i],i,v,l);return this.cache[T]||(this.cache[T]=new un(this.context,i,mu[i],l,ku[i],v)),this.cache[T]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(i,l,f){if(this.terrain&&this.terrain.renderingToTexture)return;const g=this.style.fog;if(g){const v=g.getOpacity(this.transform.pitch),T=((S,P,L,k,F,$,q,X,H,Y,B)=>{const W=S.transform,te=P.properties.get("color").toArray01();te[3]=k;const re=S.frameCounter/1e3%1;return{u_fog_matrix:L?W.calculateFogTileMatrix(L):S.identityMat,u_fog_range:P.getFovAdjustedRange(W._fov),u_fog_color:te,u_fog_horizon_blend:P.properties.get("horizon-blend"),u_fog_temporal_offset:re,u_frustum_tl:F,u_frustum_tr:$,u_frustum_br:q,u_frustum_bl:X,u_globe_pos:H,u_globe_radius:Y,u_viewport:B,u_globe_transition:s.globeToMercatorTransition(W.zoom),u_is_globe:+(W.projection.name==="globe")}})(this,g,f,v,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.exported.devicePixelRatio,this.transform.height*s.exported.devicePixelRatio]);l.setFogUniformValues(i,T)}}setTileLoadedFlag(i){this.tileLoaded=i}saveCanvasCopy(){const i=this.canvasCopy();i&&(this.frameCopies.push(i),this.tileLoaded=!1)}canvasCopy(){const i=this.context.gl,l=i.createTexture();return i.bindTexture(i.TEXTURE_2D,l),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,i.drawingBufferWidth,i.drawingBufferHeight,0),l}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const i=this.style&&this.style.fog;return!!i&&i.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const i=this._backgroundTiles,l=this._backgroundTiles={},f=this.transform.coveringTiles({tileSize:512});for(const g of f)l[g.key]=i[g.key]||new s.Tile(g,512,this.transform.tileZoom,this);return l}clearBackgroundTiles(){this._backgroundTiles={}}}class k1{constructor(i=0,l=0,f=0,g=0){if(isNaN(i)||i<0||isNaN(l)||l<0||isNaN(f)||f<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=l,this.left=f,this.right=g}interpolate(i,l,f){return l.top!=null&&i.top!=null&&(this.top=s.number(i.top,l.top,f)),l.bottom!=null&&i.bottom!=null&&(this.bottom=s.number(i.bottom,l.bottom,f)),l.left!=null&&i.left!=null&&(this.left=s.number(i.left,l.left,f)),l.right!=null&&i.right!=null&&(this.right=s.number(i.right,l.right,f)),this}getCenter(i,l){const f=s.clamp((this.left+i-this.right)/2,0,i),g=s.clamp((this.top+l-this.bottom)/2,0,l);return new s.Point(f,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new k1(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function L1(h,i){const l=s.getColumn(h,3);s.fromQuat(h,i),s.setColumn(h,3,l)}function hn(h,i){const l=s.identity$1([]);return s.rotateZ$1(l,l,-i),s.rotateX$1(l,l,-h),l}function Ml(h,i){const l=[h[0],h[1],0],f=[i[0],i[1],0];if(s.length(l)>=1e-15){const T=s.normalize([],l);s.scale$2(f,T,s.dot(f,T)),i[0]=f[0],i[1]=f[1]}const g=s.cross([],i,h);if(s.len(g)<1e-15)return null;const v=Math.atan2(-g[1],g[0]);return hn(Math.atan2(Math.sqrt(h[0]*h[0]+h[1]*h[1]),-h[2]),v)}class oh{constructor(i,l){this.position=i,this.orientation=l}get position(){return this._position}set position(i){if(i){const l=i instanceof s.MercatorCoordinate?i:new s.MercatorCoordinate(i[0],i[1],i[2]);this._renderWorldCopies&&(l.x=s.wrap(l.x,0,1)),this._position=l}else this._position=null}lookAtPoint(i,l){if(this.orientation=null,!this.position)return;const f=this.position,g=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(i)):0,v=s.MercatorCoordinate.fromLngLat(i,g),T=[v.x-f.x,v.y-f.y,v.z-f.z];l||(l=[0,0,1]),l[2]=Math.abs(l[2]),this.orientation=Ml(T,l)}setPitchBearing(i,l){this.orientation=hn(s.degToRad(i),s.degToRad(-l))}}class z1{constructor(i,l){this._transform=s.identity([]),this.orientation=l,this.position=i}get mercatorPosition(){const i=this.position;return new s.MercatorCoordinate(i[0],i[1],i[2])}get position(){const i=s.getColumn(this._transform,3);return[i[0],i[1],i[2]]}set position(i){var l;i&&s.setColumn(this._transform,3,[(l=i)[0],l[1],l[2],1])}get orientation(){return this._orientation}set orientation(i){this._orientation=i||s.identity$1([]),i&&L1(this._transform,this._orientation)}getPitchBearing(){const i=this.forward(),l=this.right();return{bearing:Math.atan2(-l[1],l[0]),pitch:Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),-i[2])}}setPitchBearing(i,l){this._orientation=hn(i,l),L1(this._transform,this._orientation)}forward(){const i=s.getColumn(this._transform,2);return[-i[0],-i[1],-i[2]]}up(){const i=s.getColumn(this._transform,1);return[-i[0],-i[1],-i[2]]}right(){const i=s.getColumn(this._transform,0);return[i[0],i[1],i[2]]}getCameraToWorld(i,l){const f=new Float64Array(16);return s.invert(f,this.getWorldToCamera(i,l)),f}getWorldToCameraPosition(i,l,f){const g=this.position;s.scale$2(g,g,-i);const v=new Float64Array(16);return s.fromScaling(v,[f,f,f]),s.translate(v,v,g),v[10]*=l,v}getWorldToCamera(i,l){const f=new Float64Array(16),g=new Float64Array(4),v=this.position;return s.conjugate(g,this._orientation),s.scale$2(v,v,-i),s.fromQuat(f,g),s.translate(f,f,v),f[1]*=-1,f[5]*=-1,f[9]*=-1,f[13]*=-1,f[8]*=l,f[9]*=l,f[10]*=l,f[11]*=l,f}getCameraToClipPerspective(i,l,f,g){const v=new Float64Array(16);return s.perspective(v,i,l,f,g),v}getDistanceToElevation(i,l=!1){const f=i===0?0:s.mercatorZfromAltitude(i,l?s.latFromMercatorY(this.position[1]):this.position[1]),g=this.forward();return(f-this.position[2])/g[2]}clone(){return new z1([...this.position],[...this.orientation])}}function ya(h,i){const l=D1(h.projection,h.zoom,h.width,h.height),f=function(v,T,S,P,L){const k=new s.LngLat(S.lng-180*Bo,S.lat),F=new s.LngLat(S.lng+180*Bo,S.lat),$=v.project(k.lng,k.lat),q=v.project(F.lng,F.lat),X=-Math.atan2(q.y-$.y,q.x-$.x),H=s.MercatorCoordinate.fromLngLat(S);H.y=s.clamp(H.y,-1+Bo,1-Bo);const Y=H.toLngLat(),B=v.project(Y.lng,Y.lat),W=s.MercatorCoordinate.fromLngLat(Y);W.x+=Bo;const te=W.toLngLat(),re=v.project(te.lng,te.lat),pe=R1(re.x-B.x,re.y-B.y,X),me=s.MercatorCoordinate.fromLngLat(Y);me.y+=Bo;const fe=me.toLngLat(),Se=v.project(fe.lng,fe.lat),be=R1(Se.x-B.x,Se.y-B.y,X),Le=Math.abs(pe.x)/Math.abs(be.y),ot=s.identity([]);s.rotateZ(ot,ot,-X*(1-(L?0:P)));const Ae=s.identity([]);return s.scale(Ae,Ae,[1,1-(1-Le)*P,1]),Ae[4]=-be.x/be.y*P,s.rotateZ(Ae,Ae,X),s.multiply(Ae,ot,Ae),Ae}(h.projection,0,h.center,l,i),g=sh(h);return s.scale(f,f,[g,g,1]),f}function sh(h){const i=h.projection,l=D1(h.projection,h.zoom,h.width,h.height),f=ah(i,h.center),g=ah(i,s.LngLat.convert(i.center));return Math.pow(2,f*l+(1-l)*g)}function D1(h,i,l,f,g=1/0){const v=h.range;if(!v)return 0;const T=Math.min(g,Math.max(l,f)),S=Math.log(T/1024)/Math.LN2;return s.smoothstep(v[0]+S,v[1]+S,i)}const Bo=1/4e4;function ah(h,i){const l=s.clamp(i.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),f=new s.LngLat(i.lng-180*Bo,l),g=new s.LngLat(i.lng+180*Bo,l),v=h.project(f.lng,l),T=h.project(g.lng,l),S=s.MercatorCoordinate.fromLngLat(f),P=s.MercatorCoordinate.fromLngLat(g),L=T.x-v.x,k=T.y-v.y,F=P.x-S.x,$=P.y-S.y,q=Math.sqrt((F*F+$*$)/(L*L+k*k));return Math.log(q)/Math.LN2}function R1(h,i,l){const f=Math.cos(l),g=Math.sin(l);return{x:h*f-i*g,y:h*g+i*f}}class va{constructor(i,l,f,g,v,T,S){this.tileSize=512,this._renderWorldCopies=v===void 0||v,this._minZoom=i||0,this._maxZoom=l||22,this._minPitch=f??0,this._maxPitch=g??60,this.setProjection(T),this.setMaxBounds(S),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new k1,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new z1,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const i=new va(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return i._elevation=this._elevation,i._centerAltitude=this._centerAltitude,i._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,i.tileSize=this.tileSize,i.mercatorFromTransition=this.mercatorFromTransition,i.width=this.width,i.height=this.height,i.cameraElevationReference=this.cameraElevationReference,i._center=this._center,i._setZoom(this.zoom),i._seaLevelZoom=this._seaLevelZoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._nearZ=this._nearZ,i._farZ=this._farZ,i._averageElevation=this._averageElevation,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._camera=this._camera.clone(),i._calcMatrices(),i.freezeTileCoverage=this.freezeTileCoverage,i.frustumCorners=this.frustumCorners,i}get elevation(){return this._elevation}set elevation(i){this._elevation!==i&&(this._elevation=i,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(i,l=!1){const f=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||f)&&this._updateCameraOnTerrain(),(i||f)&&this._constrainCamera(l),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(i){this.projectionOptions=i||{name:"mercator"};const l=this.projection?this.getProjection():void 0;this.projection=s.getProjection(this.projectionOptions);const f=!C(l,this.getProjection());return f&&this._calcMatrices(),this.mercatorFromTransition=!1,f}setMercatorFromTransition(){const i=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.getProjection({name:"mercator"});const l=i!==this.projection.name;return l&&this._calcMatrices(),l}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get cameraWorldSize(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.Point(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(i){this.rotation=i}get rotation(){return-this.angle/Math.PI*180}set rotation(i){const l=-i*Math.PI/180;var f;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=(f=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f),function(g,v,T){var S=v[0],P=v[1],L=v[2],k=v[3],F=Math.sin(T),$=Math.cos(T);g[0]=S*$+L*F,g[1]=P*$+k*F,g[2]=S*-F+L*$,g[3]=P*-F+k*$}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const l=s.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const i=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/i)}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=s.degToRad(i),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(i){this._averageElevation=i,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(i){const l=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._setZoom(l),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(i){this._zoom=i,this.scale=this.zoomScale(i),this.tileZoom=Math.floor(i),this.zoomFraction=i-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const i=this._elevation;this._centerAltitude=i.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=i.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const i=this._elevation,l=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],f=this.horizonLineFromTop();let g=0,v=0;for(let T=0;T<l.length;T++){const S=new s.Point(l[T][0]*this.width,f+l[T][1]*(this.height-f)),P=i.pointCoordinate(S);if(!P)continue;const L=1/Math.hypot(P[0]-this._camera.position[0],P[1]-this._camera.position[1]);g+=P[3]*L,v+=L}return v===0?NaN:g/v}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const i=this._seaLevelZoom,l=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),f=this.pixelsPerMeter/this.worldSize*l,g=this._mercatorZfromZoom(i),v=this._mercatorZfromZoom(this._maxZoom),T=Math.max(g-f,v);this._setZoom(this._zoomFromMercatorZ(T))}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}computeZoomRelativeTo(i){const l=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,i.toAltitude()));let f;f=i.z<this._camera.position[2]?[l.x,l.y,l.z]:[i.x,i.y,i.z];const g=s.length(s.sub([],this._camera.position,f));return s.clamp(this._zoomFromMercatorZ(g),this._minZoom,this._maxZoom)}setFreeCameraOptions(i){if(!this.height||!i.position&&!i.orientation)return;this._updateCameraState();let l=!1;if(i.orientation&&!s.exactEquals(i.orientation,this._camera.orientation)&&(l=this._setCameraOrientation(i.orientation)),i.position){const f=[i.position.x,i.position.y,i.position.z];s.exactEquals$1(f,this._camera.position)||(this._setCameraPosition(f),l=!0)}l&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const i=this._camera.position,l=new oh;return l.position=new s.MercatorCoordinate(i[0],i[1],i[2]),l.orientation=this._camera.orientation,l._elevation=this.elevation,l._renderWorldCopies=this.renderWorldCopies,l}_setCameraOrientation(i){if(!s.length$1(i))return!1;s.normalize$1(i,i);const l=s.transformQuat([],[0,0,-1],i),f=s.transformQuat([],[0,-1,0],i);if(f[2]<0)return!1;const g=Ml(l,f);return!!g&&(this._camera.orientation=g,!0)}_setCameraPosition(i){const l=this.zoomScale(this.minZoom)*this.tileSize,f=this.zoomScale(this.maxZoom)*this.tileSize,g=this.cameraToCenterDistance;i[2]=s.clamp(i[2],g/f,g/l),this._camera.position=i}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,l,f){this._unmodified=!1,this._edgeInsets.interpolate(i,l,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const l=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(i){const l=[new s.UnwrappedTileID(0,i)];if(this.renderWorldCopies){const f=this.pointCoordinate(new s.Point(0,0)),g=this.pointCoordinate(new s.Point(this.width,0)),v=this.pointCoordinate(new s.Point(this.width,this.height)),T=this.pointCoordinate(new s.Point(0,this.height)),S=Math.floor(Math.min(f.x,g.x,v.x,T.x)),P=Math.floor(Math.max(f.x,g.x,v.x,T.x)),L=1;for(let k=S-L;k<=P+L;k++)k!==0&&l.push(new s.UnwrappedTileID(k,i))}return l}coveringTiles(i){let l=this.coveringZoomLevel(i);const f=l,g=this.elevation&&!i.isTerrainDEM,v=this.projection.name==="mercator";if(i.minzoom!==void 0&&l<i.minzoom)return[];i.maxzoom!==void 0&&l>i.maxzoom&&(l=i.maxzoom);const T=this.locationCoordinate(this.center),S=this.center.lat,P=1<<l,L=[P*T.x,P*T.y,0],k=this.projection.name==="globe",F=!k,$=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l,F),q=k?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),X=P*s.mercatorZfromAltitude(1,this.center.lat),H=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),Y=[P*q.x,P*q.y,H*(F?1:X)],B=this.cameraToCenterDistance/i.tileSize*(i.roundZoom?1:.502),W=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?l:0,te=i.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,re=i.isTerrainDEM?-te:this._elevation?this._elevation.getMinElevationBelowMSL():0,pe=this.projection.isReprojectedInTileSpace?sh(this):1,me=ke=>{const at=new s.MercatorCoordinate(ke.x+25e-6,ke.y,ke.z),Qe=new s.MercatorCoordinate(ke.x,ke.y+25e-6,ke.z),lt=ke.toLngLat(),Dt=at.toLngLat(),Gt=Qe.toLngLat(),Pt=this.locationCoordinate(lt),Ot=this.locationCoordinate(Dt),rn=this.locationCoordinate(Gt),en=Math.hypot(Ot.x-Pt.x,Ot.y-Pt.y),Lt=Math.hypot(rn.x-Pt.x,rn.y-Pt.y);return Math.sqrt(en*Lt)*pe/25e-6},fe=ke=>{const We=te,at=re;return{aabb:s.tileAABB(this,P,0,0,0,ke,at,We,this.projection),zoom:0,x:0,y:0,minZ:at,maxZ:We,wrap:ke,fullyVisible:!1}},Se=[];let be=[];const Le=l,ot=i.reparseOverscaled?f:l,Ae=ke=>ke*ke,qe=Ae((H-this._centerAltitude)*X),Fe=ke=>{if(!this._elevation||!ke.tileID||!v)return;const We=this._elevation.getMinMaxForTile(ke.tileID),at=ke.aabb;We?(at.min[2]=We.min,at.max[2]=We.max,at.center[2]=(at.min[2]+at.max[2])/2):(ke.shouldSplit=nt(ke),ke.shouldSplit||(at.min[2]=at.max[2]=at.center[2]=this._centerAltitude))},nt=ke=>{if(ke.zoom<W)return!0;if(ke.zoom===Le)return!1;if(ke.shouldSplit!=null)return ke.shouldSplit;const We=ke.aabb.distanceX(Y),at=ke.aabb.distanceY(Y);let Qe=qe,lt=1;if(k){Qe=Ae(ke.aabb.distanceZ(Y));const Pt=Math.pow(2,ke.zoom),Ot=s.latFromMercatorY((ke.y+1)/Pt),rn=s.latFromMercatorY(ke.y/Pt),en=Math.min(Math.max(S,Ot),rn),Lt=s.circumferenceAtLatitude(en)/s.circumferenceAtLatitude(S);if(lt=en===S?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Lt/this._mercatorScaleRatio),this.zoom<=s.GLOBE_ZOOM_THRESHOLD_MIN&&ke.zoom===Le-1&&Lt>=.9)return!0}else if(g&&(Qe=Ae(ke.aabb.distanceZ(Y)*X)),this.projection.isReprojectedInTileSpace&&f<=5){const Pt=Math.pow(2,ke.zoom),Ot=me(new s.MercatorCoordinate((ke.x+.5)/Pt,(ke.y+.5)/Pt));lt=Ot>.85?1:Ot}const Dt=We*We+at*at+Qe,Gt=Ae((1<<Le-ke.zoom)*B*lt*((Pt,Ot)=>{if(Ot*Ae(.707)<Pt)return 1;const rn=Math.sqrt(Ot/Pt);return rn/(1.4144271570014144+(Math.pow(1.1,rn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Qe,qe),Dt));return Dt<Gt};if(this.renderWorldCopies)for(let ke=1;ke<=3;ke++)Se.push(fe(-ke)),Se.push(fe(ke));for(Se.push(fe(0));Se.length>0;){const ke=Se.pop(),We=ke.x,at=ke.y;let Qe=ke.fullyVisible;if(!Qe){const lt=ke.aabb.intersects($);if(lt===0)continue;Qe=lt===2}if(ke.zoom!==Le&&nt(ke))for(let lt=0;lt<4;lt++){const Dt=(We<<1)+lt%2,Gt=(at<<1)+(lt>>1),Pt={aabb:v?ke.aabb.quadrant(lt):s.tileAABB(this,P,ke.zoom+1,Dt,Gt,ke.wrap,ke.minZ,ke.maxZ,this.projection),zoom:ke.zoom+1,x:Dt,y:Gt,wrap:ke.wrap,fullyVisible:Qe,tileID:void 0,shouldSplit:void 0,minZ:ke.minZ,maxZ:ke.maxZ};g&&!k&&(Pt.tileID=new s.OverscaledTileID(ke.zoom+1===Le?ot:ke.zoom+1,ke.wrap,ke.zoom+1,Dt,Gt),Fe(Pt)),Se.push(Pt)}else{const lt=ke.zoom===Le?ot:ke.zoom;if(i.minzoom&&i.minzoom>lt)continue;const Dt=L[0]-(.5+We+(ke.wrap<<ke.zoom))*(1<<l-ke.zoom),Gt=L[1]-.5-at,Pt=ke.tileID?ke.tileID:new s.OverscaledTileID(lt,ke.wrap,ke.zoom,We,at);be.push({tileID:Pt,distanceSq:Dt*Dt+Gt*Gt})}}if(this.fogCullDistSq){const ke=this.fogCullDistSq,We=this.horizonLineFromTop();be=be.filter(at=>{const Qe=[0,0,0,1],lt=[s.EXTENT,s.EXTENT,0,1],Dt=this.calculateFogTileMatrix(at.tileID.toUnwrapped());s.transformMat4$1(Qe,Qe,Dt),s.transformMat4$1(lt,lt,Dt);const Gt=s.getAABBPointSquareDist(Qe,lt);if(Gt===0)return!0;let Pt=!1;const Ot=this._elevation;if(Ot&&Gt>ke&&We!==0){const rn=this.calculateProjMatrix(at.tileID.toUnwrapped());let en;i.isTerrainDEM||(en=Ot.getMinMaxForTile(at.tileID)),en||(en={min:re,max:te});const Lt=s.furthestTileCorner(this.rotation),vn=[Lt[0]*s.EXTENT,Lt[1]*s.EXTENT,en.max];s.transformMat4(vn,vn,rn),Pt=(1-vn[1])*this.height*.5<We}return Gt<ke||Pt})}return be.sort((ke,We)=>ke.distanceSq-We.distanceSq).map(ke=>ke.tileID)}resize(i,l){this.width=i,this.height=l,this.pixelsToGLUnits=[2/i,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const l=s.clamp(i.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),f=this.projection.project(i.lng,l);return new s.Point(f.x*this.worldSize,f.y*this.worldSize)}unproject(i){return this.projection.unproject(i.x/this.worldSize,i.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(i,l){let f,g;const v=this.centerPoint;if(this.projection.name==="globe"){const S=this.worldSize;f=(l.x-v.x)/S,g=(l.y-v.y)/S}else{const S=this.pointCoordinate(l),P=this.pointCoordinate(v);f=S.x-P.x,g=S.y-P.y}const T=this.locationCoordinate(i);this.setLocation(new s.MercatorCoordinate(T.x-f,T.y-g))}setLocation(i){this.center=this.coordinateLocation(i),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(i){return this.projection.locationPoint(this,i)}locationPoint3D(i){return this.projection.locationPoint(this,i,!0)}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}pointLocation3D(i){return this.coordinateLocation(this.pointCoordinate3D(i))}locationCoordinate(i,l){const f=l?s.mercatorZfromAltitude(l,i.lat):void 0,g=this.projection.project(i.lng,i.lat);return new s.MercatorCoordinate(g.x,g.y,f)}coordinateLocation(i){return this.projection.unproject(i.x,i.y)}pointRayIntersection(i,l){const f=l??this._centerAltitude,g=[i.x,i.y,0,1],v=[i.x,i.y,1,1];s.transformMat4$1(g,g,this.pixelMatrixInverse),s.transformMat4$1(v,v,this.pixelMatrixInverse);const T=v[3];s.scale$1(g,g,1/g[3]),s.scale$1(v,v,1/T);const S=g[2],P=v[2];return{p0:g,p1:v,t:S===P?0:(f-S)/(P-S)}}screenPointToMercatorRay(i){const l=[i.x,i.y,0,1],f=[i.x,i.y,1,1];return s.transformMat4$1(l,l,this.pixelMatrixInverse),s.transformMat4$1(f,f,this.pixelMatrixInverse),s.scale$1(l,l,1/l[3]),s.scale$1(f,f,1/f[3]),l[2]=s.mercatorZfromAltitude(l[2],this._center.lat)*this.worldSize,f[2]=s.mercatorZfromAltitude(f[2],this._center.lat)*this.worldSize,s.scale$1(l,l,1/this.worldSize),s.scale$1(f,f,1/this.worldSize),new s.Ray([l[0],l[1],l[2]],s.normalize([],s.sub([],f,l)))}rayIntersectionCoordinate(i){const{p0:l,p1:f,t:g}=i,v=s.mercatorZfromAltitude(l[2],this._center.lat),T=s.mercatorZfromAltitude(f[2],this._center.lat);return new s.MercatorCoordinate(s.number(l[0],f[0],g)/this.worldSize,s.number(l[1],f[1],g)/this.worldSize,s.number(v,T,g))}pointCoordinate(i,l=this._centerAltitude){return this.projection.pointCoordinate(this,i.x,i.y,l)}pointCoordinate3D(i){if(!this.elevation)return this.pointCoordinate(i);let l=this.projection.pointCoordinate3D(this,i.x,i.y);if(l)return new s.MercatorCoordinate(l[0],l[1],l[2]);let f=0,g=this.horizonLineFromTop();if(i.y>g)return this.pointCoordinate(i);const v=.02*g,T=i.clone();for(let S=0;S<10&&g-f>v;S++){T.y=s.number(f,g,.66);const P=this.projection.pointCoordinate3D(this,T.x,T.y);P?(g=T.y,l=P):f=T.y}return l?new s.MercatorCoordinate(l[0],l[1],l[2]):this.pointCoordinate(i)}isPointAboveHorizon(i){return this.projection.isPointAboveHorizon(this,i)}isPointOnSurface(i){if(i.y<0||i.y>this.height||i.x<0||i.x>this.width)return!1;if(this.elevation||this.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(i);const l=this.pointCoordinate(i);return l.y>=0&&l.y<=1}_coordinatePoint(i,l){const f=l&&this.elevation?this.elevation.getAtPointOrZero(i,this._centerAltitude):this._centerAltitude,g=[i.x*this.worldSize,i.y*this.worldSize,f+i.toAltitude(),1];return s.transformMat4$1(g,g,this.pixelMatrix),g[3]>0?new s.Point(g[0]/g[3],g[1]/g[3]):new s.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:i,left:l}=this._edgeInsets,f=this.height-this._edgeInsets.bottom,g=this.width-this._edgeInsets.right,v=this.pointLocation3D(new s.Point(l,i)),T=this.pointLocation3D(new s.Point(g,i)),S=this.pointLocation3D(new s.Point(g,f)),P=this.pointLocation3D(new s.Point(l,f));let L=Math.min(v.lng,T.lng,S.lng,P.lng),k=Math.max(v.lng,T.lng,S.lng,P.lng),F=Math.min(v.lat,T.lat,S.lat,P.lat),$=Math.max(v.lat,T.lat,S.lat,P.lat);const q=Math.pow(2,-this.zoom)/16*270,X=this.projection.name==="globe"?1:4,H=(Y,B,W,te,re)=>{const pe=(Y+W)/2,me=(B+te)/2,fe=new s.Point(pe,me),{lng:Se,lat:be}=this.pointLocation3D(fe),Le=Math.max(0,L-Se,F-be,Se-k,be-$);L=Math.min(L,Se),k=Math.max(k,Se),F=Math.min(F,be),$=Math.max($,be),(re<X||Le>q)&&(H(Y,B,pe,me,re+1),H(pe,me,W,te,re+1))};if(H(l,i,g,i,1),H(g,i,g,f,1),H(g,f,l,f,1),H(l,f,l,i,1),this.projection.name==="globe"){const[Y,B]=s.polesInViewport(this);Y?($=90,k=180,L=-180):B&&(F=-90,k=180,L=-180)}return new s.LngLatBounds(new s.LngLat(L,F),new s.LngLat(k,$))}_getBoundsRectangular(i,l){const{top:f,left:g}=this._edgeInsets,v=this.height-this._edgeInsets.bottom,T=this.width-this._edgeInsets.right,S=new s.Point(g,f),P=new s.Point(T,f),L=new s.Point(T,v),k=new s.Point(g,v);let F=this.pointCoordinate(S,i),$=this.pointCoordinate(P,i);const q=this.pointCoordinate(L,l),X=this.pointCoordinate(k,l),H=(Y,B)=>(B.y-Y.y)/(B.x-Y.x);return F.y>1&&$.y>=0?F=new s.MercatorCoordinate((1-X.y)/H(X,F)+X.x,1):F.y<0&&$.y<=1&&(F=new s.MercatorCoordinate(-X.y/H(X,F)+X.x,0)),$.y>1&&F.y>=0?$=new s.MercatorCoordinate((1-q.y)/H(q,$)+q.x,1):$.y<0&&F.y<=1&&($=new s.MercatorCoordinate(-q.y/H(q,$)+q.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(F)).extend(this.coordinateLocation($)).extend(this.coordinateLocation(X)).extend(this.coordinateLocation(q))}_getBoundsRectangularTerrain(){const i=this.elevation;if(!i.visibleDemTiles.length||i.isUsingMockSource())return this._getBoundsRectangular(0,0);const l=i.visibleDemTiles.reduce((f,g)=>{if(g.dem){const v=g.dem.tree;f.min=Math.min(f.min,v.minimums[0]),f.max=Math.max(f.max,v.maximums[0])}return f},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(l.min*i.exaggeration(),l.max*i.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(i=!0){const l=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,f=this.height/2-l*(1-this._horizonShift);return i?Math.max(0,f):f}getMaxBounds(){return this.maxBounds}setMaxBounds(i){this.maxBounds=i,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,i&&(this.minLat=i.getSouth(),this.maxLat=i.getNorth(),this.minLng=i.getWest(),this.maxLng=i.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(i,l){return this.projection.createTileMatrix(this,l,i)}calculateDistanceTileData(i){const l=i.key,f=this._distanceTileDataCache;if(f[l])return f[l];const g=i.canonical,v=1/this.height,T=this.cameraWorldSize,S=T/this.zoomScale(g.z),P=(g.x+Math.pow(2,g.z)*i.wrap)*S,L=g.y*S,k=this.point;k.x*=T/this.worldSize,k.y*=T/this.worldSize;const F=this.angle,$=Math.sin(-F),q=-Math.cos(-F);return f[l]={bearing:[$,q],center:[(k.x-P)*v,(k.y-L)*v],scale:S/s.EXTENT*v},f[l]}calculateFogTileMatrix(i){const l=i.key,f=this._fogTileMatrixCache;if(f[l])return f[l];const g=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,i);return s.multiply(g,this.worldToFogMatrix,g),f[l]=new Float32Array(g),f[l]}calculateProjMatrix(i,l=!1){const f=i.key,g=l?this._alignedProjMatrixCache:this._projMatrixCache;if(g[f])return g[f];const v=this.calculatePosMatrix(i,this.worldSize);return s.multiply(v,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:l?this.alignedProjMatrix:this.projMatrix,v),g[f]=new Float32Array(v),g[f]}calculatePixelsToTileUnitsMatrix(i){const l=i.tileID.key,f=this._pixelsToTileUnitsCache;if(f[l])return f[l];const g=function(v,T){const{scale:S}=v.tileTransform,P=S*s.EXTENT/(v.tileSize*Math.pow(2,T.zoom-v.tileID.overscaledZ+v.tileID.canonical.z));return L=new Float32Array(4),$=(k=T.inverseAdjustmentMatrix)[1],q=k[2],X=k[3],Y=(F=[P,P])[1],L[0]=k[0]*(H=F[0]),L[1]=$*H,L[2]=q*Y,L[3]=X*Y,L;var L,k,F,$,q,X,H,Y}(i,this);return f[l]=g,f[l]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const i=1/this.worldSize,l=s.fromScaling([],[i,i,i]);return s.multiply(l,l,this.globeMatrix),l}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const i=this._elevation;this._updateCameraState();const l=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,f=this._computeCameraPosition(l),g=this._camera.forward(),v=s.mercatorZfromAltitude(1,this._center.lat);f[2]/=v,g[2]/=v,s.normalize(g,g);const T=i.raycast(f,g,i.exaggeration());if(T){const S=s.scaleAndAdd([],f,g,T),P=new s.MercatorCoordinate(S[0],S[1],s.mercatorZfromAltitude(S[2],s.latFromMercatorY(S[1]))),L=(P.z+s.length([P.x-f[0],P.y-f[1],P.z-f[2]*v]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(L),this._centerAltitude=P.toAltitude(),this._center=this.coordinateLocation(P),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(i=!1){if(!this._elevation)return;const l=this._elevation,f=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(f),v=l.getAtPointOrZero(new s.MercatorCoordinate(...g)),T=this.pixelsPerMeter/this.worldSize*v,S=this._minimumHeightOverTerrain(),P=g[2]-T;if(P<=S)if(P<0||i){const L=this.locationCoordinate(this._center,this._centerAltitude),k=[g[0],g[1],L.z-g[2]],F=s.length(k);k[2]-=(S-P)/this._pixelsPerMercatorPixel;const $=s.length(k);if($===0)return;s.scale$2(k,k,F/$*this._pixelsPerMercatorPixel),this._camera.position=[g[0],g[1],L.z*this._pixelsPerMercatorPixel-k[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||i){const $=this.center;return $.lat=s.clamp($.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!i)&&($.lng=s.clamp($.lng,this.minLng,this.maxLng)),this.center=$,void(this._constraining=!1)}const l=this._unmodified,{x:f,y:g}=this.point;let v=0,T=f,S=g;const P=this.width/2,L=this.height/2,k=this.worldMinY*this.scale,F=this.worldMaxY*this.scale;if(g-L<k&&(S=k+L),g+L>F&&(S=F-L),F-k<this.height&&(v=Math.max(v,this.height/(F-k)),S=(F+k)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const $=this.worldMinX*this.scale,q=this.worldMaxX*this.scale,X=this.worldSize/2-($+q)/2;T=(f+X+this.worldSize)%this.worldSize-X,T-P<$&&(T=$+P),T+P>q&&(T=q-P),q-$<this.width&&(v=Math.max(v,this.width/(q-$)),T=(q+$)/2)}T===f&&S===g||(this.center=this.unproject(new s.Point(T,S))),v&&(this.zoom+=this.scaleZoom(v)),this._constrainCamera(),this._unmodified=l,this._constraining=!1}_minZoomForBounds(){let i=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(i=Math.max(i,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),i}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,l=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.mercatorZfromAltitude(1,this.center.lat)/s.mercatorZfromAltitude(1,s.GLOBE_SCALE_MATCH_LATITUDE));const f=D1(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,f),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const g=this.projection.zAxisUnit==="meters"?l:1,v=this._camera.getWorldToCamera(this.worldSize,g),T=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);T[8]=2*-i.x/this.width,T[9]=2*i.y/this.height;let S=s.mul([],T,v);if(this.projection.isReprojectedInTileSpace){const me=this.locationCoordinate(this.center),fe=s.identity([]);s.translate(fe,fe,[me.x*this.worldSize,me.y*this.worldSize,0]),s.multiply(fe,fe,ya(this)),s.translate(fe,fe,[-me.x*this.worldSize,-me.y*this.worldSize,0]),s.multiply(S,S,fe),this.inverseAdjustmentMatrix=function(Se){const be=ya(Se,!0);return ze([],[be[0],be[1],be[4],be[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],S,[this.worldSize,this.worldSize,this.worldSize/g,1]),this.projMatrix=S,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const P=s.invert([],T);this.frustumCorners=s.FrustumCorners.fromInvProjectionMatrix(P,this.horizonLineFromTop(),this.height);const L=new Float32Array(16);s.identity(L),s.scale(L,L,[1,-1,1]),s.rotateX(L,L,this._pitch),s.rotateZ(L,L,this.angle);const k=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),F=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;k[8]=2*-i.x/this.width,k[9]=2*(i.y+F)/this.height,this.skyboxMatrix=s.multiply(L,k,L);const $=this.point,q=$.x,X=$.y,H=this.width%2/2,Y=this.height%2/2,B=Math.cos(this.angle),W=Math.sin(this.angle),te=q-Math.round(q)+B*H+W*Y,re=X-Math.round(X)+B*Y+W*H,pe=new Float64Array(S);if(s.translate(pe,pe,[te>.5?te-1:te,re>.5?re-1:re,0]),this.alignedProjMatrix=pe,S=s.create(),s.scale(S,S,[this.width/2,-this.height/2,1]),s.translate(S,S,[1,-1,0]),this.labelPlaneMatrix=S,S=s.create(),s.scale(S,S,[1,-1,1]),s.translate(S,S,[-1,-1,0]),s.scale(S,S,[2/this.width,2/this.height,1]),this.glCoordMatrix=S,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},S=s.invert(new Float64Array(16),this.pixelMatrix),!S)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=S,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.calculateGlobeMatrix(this);const me=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.transformMat4(me,me,v),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=S;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const i=this.cameraWorldSizeForFog,l=this.cameraPixelsPerMeter,f=this._camera.position,g=1/this.height/this._pixelsPerMercatorPixel,v=[i,i,l];s.scale$2(v,v,g),s.scale$2(f,f,-1),s.multiply$2(f,f,v);const T=s.create();s.translate(T,T,f),s.scale(T,T,v),this.mercatorFogMatrix=T,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(i,l,g)}_computeCameraPosition(i){const l=(i=i||this.pixelsPerMeter)/this.pixelsPerMeter,f=this._camera.forward(),g=this.point,v=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*l-i/this.worldSize*this._centerAltitude;return[g.x/this.worldSize-f[0]*v,g.y/this.worldSize-f[1]*v,i/this.worldSize*this._centerAltitude-f[2]*v]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(i){const l=this._maxCameraBoundsDistance()*Math.cos(this._pitch),f=this._camera.position[2],g=i[2];let v=1;this.projection.wrap&&(this.center=this.center.wrap()),g>0&&(v=Math.min((l-f)/g,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,i,v),this._updateStateFromCamera()}_updateStateFromCamera(){const i=this._camera.position,l=this._camera.forward(),{pitch:f,bearing:g}=this._camera.getPitchBearing(),v=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,T=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),S=Math.max((i[2]-v)/Math.cos(f),T),P=this._zoomFromMercatorZ(S);s.scaleAndAdd(i,i,l,S),this._pitch=s.clamp(f,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(g,-Math.PI,Math.PI),this._setZoom(s.clamp(P,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(i[0],i[1],i[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(i){return Math.pow(2,i)*this.tileSize}_mercatorZfromZoom(i){return this.cameraToCenterDistance/this._worldSizeFromZoom(i)}_minimumHeightOverTerrain(){const i=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(i)}_zoomFromMercatorZ(i){return this.scaleZoom(this.cameraToCenterDistance/(i*this.tileSize))}zoomFromMercatorZAdjusted(i){let l=0,f=s.GLOBE_ZOOM_THRESHOLD_MAX,g=0,v=1/0;for(;f-l>1e-6&&f>l;){const T=l+.5*(f-l),S=this.tileSize*Math.pow(2,T),P=this.getCameraToCenterDistance(this.projection,T,S),L=this.scaleZoom(P/(i*this.tileSize)),k=Math.abs(T-L);k<v&&(v=k,g=T),T<L?l=T:f=T}return g}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(i,l){const f=Math.min(i.x,l.x),g=Math.max(i.x,l.x),v=Math.min(i.y,l.y),T=Math.max(i.y,l.y);if(v<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const S=[new s.Point(f,v),new s.Point(g,T),new s.Point(f,T),new s.Point(g,v)],P=this.renderWorldCopies?-3:0,L=this.renderWorldCopies?4:1;for(const k of S){const F=this.pointRayIntersection(k);if(F.t<0)return!0;const $=this.rayIntersectionCoordinate(F);if($.x<P||$.y<0||$.x>L||$.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.Point(0,0),new s.Point(this.width,this.height))}zoomDeltaToMovement(i,l){const f=s.length(s.sub([],this._camera.position,i)),g=this._zoomFromMercatorZ(f)+l;return f-this._mercatorZfromZoom(g)}getCameraPoint(){if(this.projection.name==="globe"){const i=function([l,f,g],v){const T=[l,f,g,1];s.transformMat4$1(T,T,v);const S=T[3]=Math.max(T[3],1e-6);return T[0]/=S,T[1]/=S,T[2]/=S,T}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.Point(i[0],i[1])}{const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.Point(0,i))}}getCameraToCenterDistance(i,l=this.zoom,f=this.worldSize){const g=D1(i,l,this.width,this.height,1024),v=i.pixelSpaceConversion(this.center.lat,f,g);return .5/Math.tan(.5*this._fov)*this.height*v}getWorldToCameraMatrix(){const i=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.multiply(i,i,this.globeMatrix),i}}function xa(h,i){let l=!1,f=null;const g=()=>{f=null,l&&(h(),f=setTimeout(g,i),l=!1)};return()=>(l=!0,f||g(),f)}class Du{constructor(i){this._hashName=i&&encodeURIComponent(i),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=xa(this._updateHashUnthrottled.bind(this),300)}addTo(i){return this._map=i,s.window.addEventListener("hashchange",this._onHashChange,!1),i.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const i=this._map;if(!i)return"";const l=Cl(i);if(this._hashName){const f=this._hashName;let g=!1;const v=s.window.location.hash.slice(1).split("&").map(T=>{const S=T.split("=")[0];return S===f?(g=!0,`${S}=${l}`):T}).filter(T=>T);return g||v.push(`${f}=${l}`),`#${v.join("&")}`}return`#${l}`}_getCurrentHash(){const i=s.window.location.hash.replace("#","");if(this._hashName){let l;return i.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(l=f)}),(l&&l[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._map;if(!i)return!1;const l=this._getCurrentHash();if(l.length>=3&&!l.some(f=>isNaN(f))){const f=i.dragRotate.isEnabled()&&i.touchZoomRotate.isEnabled()?+(l[3]||0):i.getBearing();return i.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:f,pitch:+(l[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,i)}}function Cl(h,i){const l=h.getCenter(),f=Math.round(100*h.getZoom())/100,g=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,g),T=Math.round(l.lng*v)/v,S=Math.round(l.lat*v)/v,P=h.getBearing(),L=h.getPitch();let k=i?`/${T}/${S}/${f}`:`${f}/${S}/${T}`;return(P||L)&&(k+="/"+Math.round(10*P)/10),L&&(k+=`/${Math.round(L)}`),k}const Pl={linearity:.3,easing:s.bezier(0,0,.3,1)},F1=s.extend({deceleration:2500,maxSpeed:1400},Pl),B1=s.extend({deceleration:20,maxSpeed:1400},Pl),Et=s.extend({deceleration:1e3,maxSpeed:360},Pl),qi=s.extend({deceleration:1e3,maxSpeed:90},Pl);class lh{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,l=s.exported.now();for(;i.length>0&&l-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const l={zoom:0,bearing:0,pitch:0,pan:new s.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)l.zoom+=v.zoomDelta||0,l.bearing+=v.bearingDelta||0,l.pitch+=v.pitchDelta||0,v.panDelta&&l.pan._add(v.panDelta),v.around&&(l.around=v.around),v.pinchAround&&(l.pinchAround=v.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(l.pan.mag()){const v=Il(l.pan.mag(),f,s.extend({},F1,i||{}));g.offset=l.pan.mult(v.amount/l.pan.mag()),g.center=this._map.transform.center,Al(g,v)}if(l.zoom){const v=Il(l.zoom,f,B1);g.zoom=this._map.transform.zoom+v.amount,Al(g,v)}if(l.bearing){const v=Il(l.bearing,f,Et);g.bearing=this._map.transform.bearing+s.clamp(v.amount,-179,179),Al(g,v)}if(l.pitch){const v=Il(l.pitch,f,qi);g.pitch=this._map.transform.pitch+v.amount,Al(g,v)}if(g.zoom||g.bearing){const v=l.pinchAround===void 0?l.around:l.pinchAround;g.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),g.noMoveStart=!0,g}}function Al(h,i){(!h.duration||h.duration<i.duration)&&(h.duration=i.duration,h.easing=i.easing)}function Il(h,i,l){const{maxSpeed:f,linearity:g,deceleration:v}=l,T=s.clamp(h*g/(i/1e3),-f,f),S=Math.abs(T)/(v*g);return{easing:l.easing,duration:1e3*S,amount:T*(S/2)}}class Sr extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,l,f,g={}){const v=Oe(l.getCanvasContainer(),f),T=l.unproject(v);super(i,s.extend({point:v,lngLat:T,originalEvent:f},g)),this._defaultPrevented=!1,this.target=l}}class kl extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,l,f){const g=i==="touchend"?f.changedTouches:f.touches,v=rt(l.getCanvasContainer(),g),T=v.map(P=>l.unproject(P)),S=v.reduce((P,L,k,F)=>P.add(L.div(F.length)),new s.Point(0,0));super(i,{points:v,point:S,lngLats:T,lngLat:l.unproject(S),originalEvent:f}),this._defaultPrevented=!1}}class O1 extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,l,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}}class Ru{constructor(i,l){this._map=i,this._clickTolerance=l.clickTolerance}reset(){this._mousedownPos=void 0}wheel(i){return this._firePreventable(new O1(i.type,this._map,i))}mousedown(i,l){return this._mousedownPos=l,this._firePreventable(new Sr(i.type,this._map,i))}mouseup(i){this._map.fire(new Sr(i.type,this._map,i))}preclick(i){const l=s.extend({},i);l.type="preclick",this._map.fire(new Sr(l.type,this._map,l))}click(i,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||(this.preclick(i),this._map.fire(new Sr(i.type,this._map,i)))}dblclick(i){return this._firePreventable(new Sr(i.type,this._map,i))}mouseover(i){this._map.fire(new Sr(i.type,this._map,i))}mouseout(i){this._map.fire(new Sr(i.type,this._map,i))}touchstart(i){return this._firePreventable(new kl(i.type,this._map,i))}touchmove(i){this._map.fire(new kl(i.type,this._map,i))}touchend(i){this._map.fire(new kl(i.type,this._map,i))}touchcancel(i){this._map.fire(new kl(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class U1{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(i){this._map.fire(new Sr(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Sr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new Sr(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ch{constructor(i,l){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,l){this.isEnabled()&&i.shiftKey&&i.button===0&&(ne(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(i,l){if(!this._active)return;const f=l,g=this._startPos,v=this._lastPos;if(!g||!v||v.equals(f)||!this._box&&f.dist(g)<this._clickTolerance)return;this._lastPos=f,this._box||(this._box=G("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const T=Math.min(g.x,f.x),S=Math.max(g.x,f.x),P=Math.min(g.y,f.y),L=Math.max(g.y,f.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${T}px,${P}px)`,this._box.style.width=S-T+"px",this._box.style.height=L-P+"px")})}mouseupWindow(i,l){if(!this._active)return;const f=this._startPos,g=l;if(f&&i.button===0){if(this.reset(),Te(),f.x!==g.x||f.y!==g.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:v=>v.fitScreenCoordinates(f,g,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",i)}}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),ee(),delete this._startPos,delete this._lastPos}_fireEvent(i,l){return this._map.fire(new s.Event(i,{originalEvent:l}))}}function N1(h,i){const l={};for(let f=0;f<h.length;f++)l[h[f].identifier]=i[f];return l}class wa{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(i,l,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(g){const v=new s.Point(0,0);for(const T of g)v._add(T);return v.div(g.length)}(l),this.touches=N1(f,l)))}touchmove(i,l,f){if(this.aborted||!this.centroid)return;const g=N1(f,l);for(const v in this.touches){const T=g[v];(!T||T.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(i,l,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Fu{constructor(i){this.singleTap=new wa(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(i,l,f){this.singleTap.touchstart(i,l,f)}touchmove(i,l,f){this.singleTap.touchmove(i,l,f)}touchend(i,l,f){const g=this.singleTap.touchend(i,l,f);if(g){const v=i.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(g)<30;if(v&&T||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class ld{constructor(){this._zoomIn=new Fu({numTouches:1,numTaps:2}),this._zoomOut=new Fu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,l,f){this._zoomIn.touchstart(i,l,f),this._zoomOut.touchstart(i,l,f)}touchmove(i,l,f){this._zoomIn.touchmove(i,l,f),this._zoomOut.touchmove(i,l,f)}touchend(i,l,f){const g=this._zoomIn.touchend(i,l,f),v=this._zoomOut.touchend(i,l,f);return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()+1,around:T.unproject(g)},{originalEvent:i})}):v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()-1,around:T.unproject(v)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const uh={0:1,2:2};class ba{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(i,l){return!1}_move(i,l){return{}}mousedown(i,l){if(this._lastPoint)return;const f=we(i);this._correctButton(i,f)&&(this._lastPoint=l,this._eventButton=f)}mousemoveWindow(i,l){const f=this._lastPoint;if(f){if(i.preventDefault(),this._eventButton!=null&&function(g,v){const T=uh[v];return g.buttons===void 0||(g.buttons&T)!==T}(i,this._eventButton))this.reset();else if(this._moved||!(l.dist(f)<this._clickTolerance))return this._moved=!0,this._lastPoint=l,this._move(f,l)}}mouseupWindow(i){this._lastPoint&&we(i)===this._eventButton&&(this._moved&&Te(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bu extends ba{mousedown(i,l){super.mousedown(i,l),this._lastPoint&&(this._active=!0)}_correctButton(i,l){return l===0&&!i.ctrlKey}_move(i,l){return{around:l,panDelta:l.sub(i)}}}class Ou extends ba{_correctButton(i,l){return l===0&&i.ctrlKey||l===2}_move(i,l){const f=.8*(l.x-i.x);if(f)return this._active=!0,{bearingDelta:f}}contextmenu(i){i.preventDefault()}}class Uu extends ba{_correctButton(i,l){return l===0&&i.ctrlKey||l===2}_move(i,l){const f=-.5*(l.y-i.y);if(f)return this._active=!0,{pitchDelta:f}}contextmenu(i){i.preventDefault()}}class j1{constructor(i,l){this._map=i,this._el=i.getCanvasContainer(),this._minTouches=1,this._clickTolerance=l.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.Point(0,0)}touchstart(i,l,f){return this._calculateTransform(i,l,f)}touchmove(i,l,f){if(this._active&&!(f.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(f.length===1&&!s.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return i.cancelable&&i.preventDefault(),this._calculateTransform(i,l,f)}}touchend(i,l,f){this._calculateTransform(i,l,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,l,f){f.length>0&&(this._active=!0);const g=N1(f,l),v=new s.Point(0,0),T=new s.Point(0,0);let S=0;for(const L in g){const k=g[L],F=this._touches[L];F&&(v._add(k),T._add(k.sub(F)),S++,g[L]=k)}if(this._touches=g,S<this._minTouches||!T.mag())return;const P=T.div(S);return this._sum._add(P),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(S),panDelta:P}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=G("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Ll{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(i){}_move(i,l,f){return{}}touchstart(i,l,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([l[0],l[1]]))}touchmove(i,l,f){const g=this._firstTwoTouches;if(!g)return;i.preventDefault();const[v,T]=g,S=zl(f,l,v),P=zl(f,l,T);if(!S||!P)return;const L=this._aroundCenter?null:S.add(P).div(2);return this._move([S,P],L,i)}touchend(i,l,f){if(!this._firstTwoTouches)return;const[g,v]=this._firstTwoTouches,T=zl(f,l,g),S=zl(f,l,v);T&&S||(this._active&&Te(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function zl(h,i,l){for(let f=0;f<h.length;f++)if(h[f].identifier===l)return i[f]}function Nu(h,i){return Math.log(h/i)/Math.LN2}class hh extends Ll{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,l){const f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Nu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Nu(this._distance,f),pinchAround:l}}}function ju(h,i){return 180*h.angleWith(i)/Math.PI}class dh extends Ll{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,l){const f=this._vector;if(this._vector=i[0].sub(i[1]),f&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:ju(this._vector,f),pinchAround:l}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const l=25/(Math.PI*this._minDiameter)*360,f=this._startVector;if(!f)return!1;const g=ju(i,f);return Math.abs(g)<l}}function cs(h){return Math.abs(h.y)>Math.abs(h.x)}class ph extends Ll{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(i){this._lastPoints=i,cs(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,l,f){const g=this._lastPoints;if(!g)return;const v=i[0].sub(g[0]),T=i[1].sub(g[1]);return this._map._cooperativeGestures&&!s.isFullscreen()&&f.touches.length<3||(this._valid=this.gestureBeginsVertically(v,T,f.timeStamp),!this._valid)?void 0:(this._lastPoints=i,this._active=!0,{pitchDelta:(v.y+T.y)/2*-.5})}gestureBeginsVertically(i,l,f){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,v=l.mag()>=2;if(!g&&!v)return;if(!g||!v)return this._firstMove==null&&(this._firstMove=f),f-this._firstMove<100&&void 0;const T=i.y>0==l.y>0;return cs(i)&&cs(l)&&T}}const fh={panStep:100,bearingStep:15,pitchStep:10};class cd{constructor(){const i=fh;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let l=0,f=0,g=0,v=0,T=0;switch(i.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),v=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),v=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),T=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(f=0,g=0),{cameraAnimation:S=>{const P=S.getZoom();S.easeTo({duration:300,easeId:"keyboardHandler",easing:mh,zoom:l?Math.round(P)+l*(i.shiftKey?2:1):P,bearing:S.getBearing()+f*this._bearingStep,pitch:S.getPitch()+g*this._pitchStep,offset:[-v*this._panStep,-T*this._panStep],center:S.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function mh(h){return h*(2-h)}const Vu=4.000244140625;class _h{constructor(i,l){this._map=i,this._el=i.getCanvasContainer(),this._handler=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(i.ctrlKey||i.metaKey||this.isZooming()||s.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let l=i.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const f=s.exported.now(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,l!==0&&l%Vu==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),i.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=i,this._delta-=l,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=Oe(this._el,i);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:l,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;this._type==="wheel"&&i.projection.wrap&&(i._center.lng>=180||i._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const l=()=>i._terrainEnabled()&&this._aroundCoord?i.computeZoomRelativeTo(this._aroundCoord):i.zoom;if(this._delta!==0){const P=this._type==="wheel"&&Math.abs(this._delta)>Vu?this._wheelZoomRate:this._defaultZoomRate;let L=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&L!==0&&(L=1/L);const k=l(),F=Math.pow(2,k),$=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):F;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom($*L))),this._type==="wheel"&&(this._startZoom=k,this._easing=this._smoothOutEasing(200)),this._delta=0}const f=typeof this._targetZoom=="number"?this._targetZoom:l(),g=this._startZoom,v=this._easing;let T,S=!1;if(this._type==="wheel"&&g&&v){const P=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),L=v(P);T=s.number(g,f,L),P<1?this._frameId||(this._frameId=!0):S=!0}else T=f,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:T-l(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let l=s.ease;if(this._prevEase){const f=this._prevEase,g=(s.exported.now()-f.start)/f.duration,v=f.easing(g+.01)-f.easing(g),T=.27/Math.sqrt(v*v+1e-4)*.01,S=Math.sqrt(.0729-T*T);l=s.bezier(T,S,.25,1)}return this._prevEase={start:s.exported.now(),duration:i,easing:l},l}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=G("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class gh{constructor(i,l){this._clickZoom=i,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ur{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(i,l){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:f.getZoom()+(i.shiftKey?-1:1),around:f.unproject(l)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ud{constructor(){this._tap=new Fu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(i,l,f){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?f.length>0&&(this._swipePoint=l[0],this._swipeTouch=f[0].identifier):this._tap.touchstart(i,l,f))}touchmove(i,l,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const g=l[0],v=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(i,l,f)}touchend(i,l,f){this._tapTime?this._swipePoint&&f.length===0&&this.reset():this._tap.touchend(i,l,f)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yh{constructor(i,l,f){this._el=i,this._mousePan=l,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class hd{constructor(i,l,f){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=l,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class dd{constructor(i,l,f,g){this._el=i,this._touchZoom=l,this._touchRotate=f,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ai=h=>h.zoom||h.drag||h.pitch||h.rotate;class vh extends s.Event{}class pd{constructor(){this.constants=[1,1,.01],this.radius=0}setup(i,l){const f=s.sub([],l,i);this.radius=s.length(f[2]<0?s.div([],f,this.constants):[f[0],f[1],0])}projectRay(i){s.div(i,i,this.constants),s.normalize(i,i),s.mul$1(i,i,this.constants);const l=s.scale$2([],i,this.radius);if(l[2]>0){const f=s.scale$2([],[0,0,1],s.dot(l,[0,0,1])),g=s.scale$2([],s.normalize([],[l[0],l[1],0]),this.radius),v=s.add([],l,s.scale$2([],s.sub([],s.add([],g,f),l),2));l[0]=v[0],l[1]=v[1]}return l}}function Hi(h){return h.panDelta&&h.panDelta.mag()||h.zoomDelta||h.bearingDelta||h.pitchDelta}class _o{constructor(i,l){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new lh(i),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new pd,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(l),s.bindAll(["handleEvent","handleWindowEvent"],this);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[g,v,T]of this._listeners)g.addEventListener(v,g===s.window.document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[i,l,f]of this._listeners)i.removeEventListener(l,i===s.window.document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){const l=this._map,f=l.getCanvasContainer();this._add("mapEvent",new Ru(l,i));const g=l.boxZoom=new ch(l,i);this._add("boxZoom",g);const v=new ld,T=new Ur;l.doubleClickZoom=new gh(T,v),this._add("tapZoom",v),this._add("clickZoom",T);const S=new ud;this._add("tapDragZoom",S);const P=l.touchPitch=new ph(l);this._add("touchPitch",P);const L=new Ou(i),k=new Uu(i);l.dragRotate=new hd(i,L,k),this._add("mouseRotate",L,["mousePitch"]),this._add("mousePitch",k,["mouseRotate"]);const F=new Bu(i),$=new j1(l,i);l.dragPan=new yh(f,F,$),this._add("mousePan",F),this._add("touchPan",$,["touchZoom","touchRotate"]);const q=new dh,X=new hh;l.touchZoomRotate=new dd(f,X,q,S),this._add("touchRotate",q,["touchPan","touchZoom"]),this._add("touchZoom",X,["touchPan","touchRotate"]),this._add("blockableMapEvent",new U1(l));const H=l.scrollZoom=new _h(l,this);this._add("scrollZoom",H,["mousePan"]);const Y=l.keyboard=new cd;this._add("keyboard",Y);for(const B of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[B]&&l[B].enable(i[B])}_add(i,l,f){this._handlers.push({handlerName:i,handler:l,allowed:f}),this._handlersById[i]=l}stop(i){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ai(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(i,l,f){for(const g in i)if(g!==f&&(!l||l.indexOf(g)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const l=[];for(const f of i)this._el.contains(f.target)&&l.push(f);return l}handleEvent(i,l){this._updatingCamera=!0;const f=i.type==="renderFrame",g=f?void 0:i,v={needsRenderFrame:!1},T={},S={},P=i.touches?this._getMapTouches(i.touches):void 0,L=P?rt(this._el,P):f?void 0:Oe(this._el,i);for(const{handlerName:$,handler:q,allowed:X}of this._handlers){if(!q.isEnabled())continue;let H;this._blockedByActive(S,X,$)?q.reset():q[l||i.type]&&(H=q[l||i.type](i,L,P),this.mergeHandlerResult(v,T,H,$,g),H&&H.needsRenderFrame&&this._triggerRenderFrame()),(H||q.isActive())&&(S[$]=q)}const k={};for(const $ in this._previousActiveHandlers)S[$]||(k[$]=g);this._previousActiveHandlers=S,(Object.keys(k).length||Hi(v))&&(this._changes.push([v,T,k]),this._triggerRenderFrame()),(Object.keys(S).length||Hi(v))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:F}=v;F&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],F(this._map))}mergeHandlerResult(i,l,f,g,v){if(!f)return;s.extend(i,f);const T={handlerName:g,originalEvent:f.originalEvent||v};f.zoomDelta!==void 0&&(l.zoom=T),f.panDelta!==void 0&&(l.drag=T),f.pitchDelta!==void 0&&(l.pitch=T),f.bearingDelta!==void 0&&(l.rotate=T)}_applyChanges(){const i={},l={},f={};for(const[g,v,T]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new s.Point(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.aroundCoord!==void 0&&(i.aroundCoord=g.aroundCoord),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),s.extend(l,v),s.extend(f,T);this._updateMapTransform(i,l,f),this._changes=[]}_updateMapTransform(i,l,f){const g=this._map,v=g.transform,T=W=>[W.x,W.y,W.z];if((W=>{const te=this._eventsInProgress.drag;return te&&!this._handlersById[te.handlerName].isActive()})()&&!Hi(i)){const W=v.zoom;v.cameraElevationReference="sea",v.recenterOnTerrain(),v.cameraElevationReference="ground",W!==v.zoom&&this._map._update(!0)}if(v._isCameraConstrained&&g._stop(!0),!Hi(i))return void this._fireEvents(l,f,!0);let{panDelta:S,zoomDelta:P,bearingDelta:L,pitchDelta:k,around:F,aroundCoord:$,pinchAround:q}=i;v._isCameraConstrained&&(P>0&&(P=0),v._isCameraConstrained=!1),q!==void 0&&(F=q),(P||(W=>l[W]&&!this._eventsInProgress[W])("drag"))&&F&&(this._dragOrigin=T(v.pointCoordinate3D(F)),this._trackingEllipsoid.setup(v._camera.position,this._dragOrigin)),v.cameraElevationReference="sea",g._stop(!0),F=F||g.transform.centerPoint,L&&(v.bearing+=L),k&&(v.pitch+=k),v._updateCameraState();const X=[0,0,0];if(S)if(v.projection.name==="mercator"){const W=this._trackingEllipsoid.projectRay(v.screenPointToMercatorRay(F).dir),te=this._trackingEllipsoid.projectRay(v.screenPointToMercatorRay(F.sub(S)).dir);X[0]=te[0]-W[0],X[1]=te[1]-W[1]}else{const W=v.pointCoordinate(F);if(v.projection.name==="globe"){S=S.rotate(-v.angle);const te=v._pixelsPerMercatorPixel/v.worldSize;X[0]=-S.x*s.mercatorScale(s.latFromMercatorY(W.y))*te,X[1]=-S.y*s.mercatorScale(v.center.lat)*te}else{const te=v.pointCoordinate(F.sub(S));W&&te&&(X[0]=te.x-W.x,X[1]=te.y-W.y)}}const H=v.zoom,Y=[0,0,0];if(P){const W=T($||v.pointCoordinate3D(F)),te={dir:s.normalize([],s.sub([],W,v._camera.position))};if(te.dir[2]<0){const re=v.zoomDeltaToMovement(W,P);s.scale$2(Y,te.dir,re)}}const B=s.add(X,X,Y);v._translateCameraConstrained(B),P&&Math.abs(v.zoom-H)>1e-4&&v.recenterOnTerrain(),v.cameraElevationReference="ground",this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(l,f,!0)}_fireEvents(i,l,f){const g=Ai(this._eventsInProgress),v=Ai(i),T={};for(const k in i){const{originalEvent:F}=i[k];this._eventsInProgress[k]||(T[`${k}start`]=F),this._eventsInProgress[k]=i[k]}!g&&v&&this._fireEvent("movestart",v.originalEvent);for(const k in T)this._fireEvent(k,T[k]);v&&this._fireEvent("move",v.originalEvent);for(const k in i){const{originalEvent:F}=i[k];this._fireEvent(k,F)}const S={};let P;for(const k in this._eventsInProgress){const{handlerName:F,originalEvent:$}=this._eventsInProgress[k];this._handlersById[F].isActive()||(delete this._eventsInProgress[k],P=l[F]||$,S[`${k}end`]=P)}for(const k in S)this._fireEvent(k,S[k]);const L=Ai(this._eventsInProgress);if(f&&(g||v)&&!L){this._updatingCamera=!0;const k=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),F=$=>$!==0&&-this._bearingSnap<$&&$<this._bearingSnap;k?(F(k.bearing||this._map.getBearing())&&(k.bearing=0),this._map.easeTo(k,{originalEvent:P})):(this._map.fire(new s.Event("moveend",{originalEvent:P})),F(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,l){this._map.fire(new s.Event(i,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{this._frameId=void 0,this.handleEvent(new vh("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Fs="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class V1 extends s.Evented{constructor(i,l){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=l.bearingSnap,this._respectPrefersReducedMotion=l.respectPrefersReducedMotion!==!1,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,l){return this.jumpTo({center:i},l)}panBy(i,l,f){return i=s.Point.convert(i).mult(-1),this.panTo(this.transform.center,s.extend({offset:i},l),f)}panTo(i,l,f){return this.easeTo(s.extend({center:i},l),f)}getZoom(){return this.transform.zoom}setZoom(i,l){return this.jumpTo({zoom:i},l),this}zoomTo(i,l,f){return this.easeTo(s.extend({zoom:i},l),f)}zoomIn(i,l){return this.zoomTo(this.getZoom()+1,i,l),this}zoomOut(i,l){return this.zoomTo(this.getZoom()-1,i,l),this}getBearing(){return this.transform.bearing}setBearing(i,l){return this.jumpTo({bearing:i},l),this}getPadding(){return this.transform.padding}setPadding(i,l){return this.jumpTo({padding:i},l),this}rotateTo(i,l,f){return this.easeTo(s.extend({bearing:i},l),f)}resetNorth(i,l){return this.rotateTo(0,s.extend({duration:1e3},i),l),this}resetNorthPitch(i,l){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},i),l),this}snapToNorth(i,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,l):this}getPitch(){return this.transform.pitch}setPitch(i,l){return this.jumpTo({pitch:i},l),this}cameraForBounds(i,l){i=s.LngLatBounds.convert(i);const f=l&&l.bearing||0,g=l&&l.pitch||0,v=i.getNorthWest(),T=i.getSouthEast();return this._cameraForBounds(this.transform,v,T,f,g,l)}_extendCameraOptions(i){const l={top:0,bottom:0,right:0,left:0};if(typeof(i=s.extend({padding:l,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding=="number"){const f=i.padding;i.padding={top:f,bottom:f,right:f,left:f}}return i.padding=s.extend(l,i.padding),i}_minimumAABBFrustumDistance(i,l){const f=l.max[0]-l.min[0],g=l.max[1]-l.min[1];return f/g>i.aspect?f/(2*Math.tan(.5*i.fovX)*i.aspect):g/(2*Math.tan(.5*i.fovY)*i.aspect)}_cameraForBoundsOnGlobe(i,l,f,g,v,T){const S=i.clone(),P=this._extendCameraOptions(T);S.bearing=g,S.pitch=v;const L=s.LngLat.convert(l),k=s.LngLat.convert(f),F=.5*(L.lat+k.lat),$=.5*(L.lng+k.lng),q=s.latLngToECEF(F,$),X=s.normalize([],q),H=s.normalize([],s.cross([],X,[0,1,0])),Y=s.cross([],H,X),B=[H[0],H[1],H[2],0,Y[0],Y[1],Y[2],0,X[0],X[1],X[2],0,0,0,0,1],W=[q,s.latLngToECEF(L.lat,L.lng),s.latLngToECEF(k.lat,L.lng),s.latLngToECEF(k.lat,k.lng),s.latLngToECEF(L.lat,k.lng),s.latLngToECEF(F,L.lng),s.latLngToECEF(F,k.lng),s.latLngToECEF(L.lat,$),s.latLngToECEF(k.lat,$)];let te=s.Aabb.fromPoints(W.map(Qe=>[s.dot(H,Qe),s.dot(Y,Qe),s.dot(X,Qe)]));const re=s.transformMat4([],te.center,B);s.squaredLength(re)===0&&s.set(re,0,0,1),s.normalize(re,re),s.scale$2(re,re,s.GLOBE_RADIUS),S.center=s.ecefToLatLng(re);const pe=S.getWorldToCameraMatrix(),me=s.invert(new Float64Array(16),pe);te=s.Aabb.applyTransform(te,s.multiply([],pe,B)),s.transformMat4(re,re,pe);const fe=.5*(te.max[2]-te.min[2]),Se=this._minimumAABBFrustumDistance(S,te),be=s.scale$2([],[0,0,1],fe),Le=s.add(be,re,be),ot=Se+(S.pitch===0?0:s.distance(re,Le)),Ae=S.globeCenterInViewSpace,qe=s.sub([],re,[Ae[0],Ae[1],Ae[2]]);s.normalize(qe,qe),s.scale$2(qe,qe,ot);const Fe=s.add([],re,qe);s.transformMat4(Fe,Fe,me);const nt=s.earthRadius/s.GLOBE_RADIUS,ke=s.length(Fe),We=s.mercatorZfromAltitude(Math.max(ke*nt-s.earthRadius,Number.EPSILON),0),at=Math.min(S.zoomFromMercatorZAdjusted(We),P.maxZoom);return at>.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(S.setProjection({name:"mercator"}),S.zoom=at,this._cameraForBounds(S,l,f,g,v,T)):{center:S.center,zoom:at,bearing:g,pitch:v}}queryTerrainElevation(i,l){const f=this.transform.elevation;return f?(l=s.extend({},{exaggerated:!0},l),f.getAtPoint(s.MercatorCoordinate.fromLngLat(i),null,l.exaggerated)):null}_cameraForBounds(i,l,f,g,v,T){if(i.projection.name==="globe")return this._cameraForBoundsOnGlobe(i,l,f,g,v,T);const S=i.clone(),P=this._extendCameraOptions(T),L=S.padding;S.bearing=g,S.pitch=v;const k=s.LngLat.convert(l),F=s.LngLat.convert(f),$=new s.LngLat(k.lng,F.lat),q=new s.LngLat(F.lng,k.lat),X=S.project(k),H=S.project(F),Y=this.queryTerrainElevation(k),B=this.queryTerrainElevation(F),W=this.queryTerrainElevation($),te=this.queryTerrainElevation(q),re=[[X.x,X.y,Math.min(Y||0,B||0,W||0,te||0)],[H.x,H.y,Math.max(Y||0,B||0,W||0,te||0)]];let pe=s.Aabb.fromPoints(re);const me=S.getWorldToCameraMatrix(),fe=s.invert(new Float64Array(16),me);pe=s.Aabb.applyTransform(pe,me);const Se=s.sub([],pe.max,pe.min),be=L.left||0,Le=L.right||0,ot=L.bottom||0,Ae=L.top||0,{left:qe,right:Fe,top:nt,bottom:ke}=P.padding,We=.5*(be+Le),at=.5*(Ae+ot),Qe=Math.min(S.scaleZoom(S.scale*Math.min((S.width-(be+Le+qe+Fe))/Se[0],(S.height-(ot+Ae+ke+nt))/Se[1])),P.maxZoom),lt=S.scale/S.zoomScale(Qe);pe=new s.Aabb([pe.min[0]-(qe+We)*lt,pe.min[1]-(ke+at)*lt,pe.min[2]],[pe.max[0]+(Fe+We)*lt,pe.max[1]+(nt+at)*lt,pe.max[2]]);const Dt=.5*Se[2],Gt=this._minimumAABBFrustumDistance(S,pe),Pt=[0,0,1,0];s.transformMat4$1(Pt,Pt,me),s.normalize$2(Pt,Pt);const Ot=s.scale$2([],Pt,Gt+Dt),rn=s.add([],pe.center,Ot),en=(typeof P.offset.x=="number"&&typeof P.offset.y=="number"?new s.Point(P.offset.x,P.offset.y):s.Point.convert(P.offset)).rotate(-s.degToRad(g));pe.center[0]-=en.x*lt,pe.center[1]+=en.y*lt,s.transformMat4(pe.center,pe.center,fe),s.transformMat4(rn,rn,fe);const Lt=[pe.center[0],pe.center[1],rn[2]*S.pixelsPerMeter];s.scale$2(Lt,Lt,1/S.worldSize);const vn=s.lngFromMercatorX(Lt[0]),bn=s.latFromMercatorY(Lt[1]),Tn=Math.min(S._zoomFromMercatorZ(Lt[2]),P.maxZoom),En=new s.LngLat(vn,bn);return S.mercatorFromTransition&&Tn<.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(S.setProjection({name:"globe"}),S.zoom=Tn,this._cameraForBounds(S,l,f,g,v,T)):{center:En,zoom:Tn,bearing:g,pitch:v}}fitBounds(i,l,f){const g=this.cameraForBounds(i,l);return this._fitInternal(g,l,f)}fitScreenCoordinates(i,l,f,g,v){const T=s.Point.convert(i),S=s.Point.convert(l),P=new s.Point(Math.min(T.x,S.x),Math.min(T.y,S.y)),L=new s.Point(Math.max(T.x,S.x),Math.max(T.y,S.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(T,S))return this;const k=this.transform.pointLocation3D(P),F=this.transform.pointLocation3D(L),$=this.transform.pointLocation3D(new s.Point(P.x,L.y)),q=this.transform.pointLocation3D(new s.Point(L.x,P.y)),X=[Math.min(k.lng,F.lng,$.lng,q.lng),Math.min(k.lat,F.lat,$.lat,q.lat)],H=[Math.max(k.lng,F.lng,$.lng,q.lng),Math.max(k.lat,F.lat,$.lat,q.lat)],Y=g&&g.pitch?g.pitch:this.getPitch(),B=this._cameraForBounds(this.transform,X,H,f,Y,g);return this._fitInternal(B,g,v)}_fitInternal(i,l,f){return i?(delete(l=s.extend(i,l)).padding,l.linear?this.easeTo(l,f):this.flyTo(l,f)):this}jumpTo(i,l){this.stop();const f=i.preloadOnly?this.transform.clone():this.transform;let g=!1,v=!1,T=!1;return"zoom"in i&&f.zoom!==+i.zoom&&(g=!0,f.zoom=+i.zoom),i.center!==void 0&&(f.center=s.LngLat.convert(i.center)),"bearing"in i&&f.bearing!==+i.bearing&&(v=!0,f.bearing=+i.bearing),"pitch"in i&&f.pitch!==+i.pitch&&(T=!0,f.pitch=+i.pitch),i.padding==null||f.isPaddingEqual(i.padding)||(f.padding=i.padding),i.preloadOnly?(this._preloadTiles(f),this):(this.fire(new s.Event("movestart",l)).fire(new s.Event("move",l)),g&&this.fire(new s.Event("zoomstart",l)).fire(new s.Event("zoom",l)).fire(new s.Event("zoomend",l)),v&&this.fire(new s.Event("rotatestart",l)).fire(new s.Event("rotate",l)).fire(new s.Event("rotateend",l)),T&&this.fire(new s.Event("pitchstart",l)).fire(new s.Event("pitch",l)).fire(new s.Event("pitchend",l)),this.fire(new s.Event("moveend",l)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(Fs),this.transform.getFreeCameraOptions()}setFreeCameraOptions(i,l){const f=this.transform;if(!f.projection.supportsFreeCamera)return s.warnOnce(Fs),this;this.stop();const g=f.zoom,v=f.pitch,T=f.bearing;f.setFreeCameraOptions(i);const S=g!==f.zoom,P=v!==f.pitch,L=T!==f.bearing;return this.fire(new s.Event("movestart",l)).fire(new s.Event("move",l)),S&&this.fire(new s.Event("zoomstart",l)).fire(new s.Event("zoom",l)).fire(new s.Event("zoomend",l)),L&&this.fire(new s.Event("rotatestart",l)).fire(new s.Event("rotate",l)).fire(new s.Event("rotateend",l)),P&&this.fire(new s.Event("pitchstart",l)).fire(new s.Event("pitch",l)).fire(new s.Event("pitchend",l)),this.fire(new s.Event("moveend",l)),this}easeTo(i,l){this._stop(!1,i.easeId),((i=s.extend({offset:[0,0],duration:500,easing:s.ease},i)).animate===!1||this._prefersReducedMotion(i))&&(i.duration=0);const f=this.transform,g=this.getZoom(),v=this.getBearing(),T=this.getPitch(),S=this.getPadding(),P="zoom"in i?+i.zoom:g,L="bearing"in i?this._normalizeBearing(i.bearing,v):v,k="pitch"in i?+i.pitch:T,F="padding"in i?i.padding:f.padding,$=s.Point.convert(i.offset);let q,X,H;if(f.projection.name==="globe"){const be=s.MercatorCoordinate.fromLngLat(f.center),Le=$.rotate(-f.angle);be.x+=Le.x/f.worldSize,be.y+=Le.y/f.worldSize;const ot=be.toLngLat(),Ae=s.LngLat.convert(i.center||ot);this._normalizeCenter(Ae),q=f.centerPoint.add(Le),X=new s.Point(be.x,be.y).mult(f.worldSize),H=new s.Point(s.mercatorXfromLng(Ae.lng),s.mercatorYfromLat(Ae.lat)).mult(f.worldSize).sub(X)}else{q=f.centerPoint.add($);const be=f.pointLocation(q),Le=s.LngLat.convert(i.center||be);this._normalizeCenter(Le),X=f.project(be),H=f.project(Le).sub(X)}const Y=f.zoomScale(P-g);let B,W;i.around&&(B=s.LngLat.convert(i.around),W=f.locationPoint(B));const te=this._zooming||P!==g,re=this._rotating||v!==L,pe=this._pitching||k!==T,me=!f.isPaddingEqual(F),fe=be=>Le=>{if(te&&(be.zoom=s.number(g,P,Le)),re&&(be.bearing=s.number(v,L,Le)),pe&&(be.pitch=s.number(T,k,Le)),me&&(be.interpolatePadding(S,F,Le),q=be.centerPoint.add($)),B)be.setLocationAtPoint(B,W);else{const ot=be.zoomScale(be.zoom-g),Ae=P>g?Math.min(2,Y):Math.max(.5,Y),qe=Math.pow(Ae,1-Le),Fe=be.unproject(X.add(H.mult(Le*qe)).mult(ot));be.setLocationAtPoint(be.renderWorldCopies?Fe.wrap():Fe,q)}return i.preloadOnly||this._fireMoveEvents(l),be};if(i.preloadOnly){const be=this._emulate(fe,i.duration,f);return this._preloadTiles(be),this}const Se={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=te,this._rotating=re,this._pitching=pe,this._padding=me,this._easeId=i.easeId,this._prepareEase(l,i.noMoveStart,Se),this._ease(fe(f),be=>{f.recenterOnTerrain(),this._afterEase(l,be)},i),this}_prepareEase(i,l,f={}){this._moving=!0,this.transform.cameraElevationReference="sea",l||f.moving||this.fire(new s.Event("movestart",i)),this._zooming&&!f.zooming&&this.fire(new s.Event("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new s.Event("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new s.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new s.Event("move",i)),this._zooming&&this.fire(new s.Event("zoom",i)),this._rotating&&this.fire(new s.Event("rotate",i)),this._pitching&&this.fire(new s.Event("pitch",i))}_afterEase(i,l){if(this._easeId&&l&&this._easeId===l)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const f=this._zooming,g=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new s.Event("zoomend",i)),g&&this.fire(new s.Event("rotateend",i)),v&&this.fire(new s.Event("pitchend",i)),this.fire(new s.Event("moveend",i))}flyTo(i,l){if(this._prefersReducedMotion(i)){const Qe=s.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Qe,l)}this.stop(),i=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},i);const f=this.transform,g=this.getZoom(),v=this.getBearing(),T=this.getPitch(),S=this.getPadding(),P="zoom"in i?s.clamp(+i.zoom,f.minZoom,f.maxZoom):g,L="bearing"in i?this._normalizeBearing(i.bearing,v):v,k="pitch"in i?+i.pitch:T,F="padding"in i?i.padding:f.padding,$=f.zoomScale(P-g),q=s.Point.convert(i.offset);let X=f.centerPoint.add(q);const H=f.pointLocation(X),Y=s.LngLat.convert(i.center||H);this._normalizeCenter(Y);const B=f.project(H),W=f.project(Y).sub(B);let te=i.curve;const re=Math.max(f.width,f.height),pe=re/$,me=W.mag();if("minZoom"in i){const Qe=s.clamp(Math.min(i.minZoom,g,P),f.minZoom,f.maxZoom),lt=re/f.zoomScale(Qe-g);te=Math.sqrt(lt/me*2)}const fe=te*te;function Se(Qe){const lt=(pe*pe-re*re+(Qe?-1:1)*fe*fe*me*me)/(2*(Qe?pe:re)*fe*me);return Math.log(Math.sqrt(lt*lt+1)-lt)}function be(Qe){return(Math.exp(Qe)-Math.exp(-Qe))/2}function Le(Qe){return(Math.exp(Qe)+Math.exp(-Qe))/2}const ot=Se(0);let Ae=function(Qe){return Le(ot)/Le(ot+te*Qe)},qe=function(Qe){return re*((Le(ot)*(be(lt=ot+te*Qe)/Le(lt))-be(ot))/fe)/me;var lt},Fe=(Se(1)-ot)/te;if(Math.abs(me)<1e-6||!isFinite(Fe)){if(Math.abs(re-pe)<1e-6)return this.easeTo(i,l);const Qe=pe<re?-1:1;Fe=Math.abs(Math.log(pe/re))/te,qe=function(){return 0},Ae=function(lt){return Math.exp(Qe*te*lt)}}i.duration="duration"in i?+i.duration:1e3*Fe/("screenSpeed"in i?+i.screenSpeed/te:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0);const nt=v!==L,ke=k!==T,We=!f.isPaddingEqual(F),at=Qe=>lt=>{const Dt=lt*Fe,Gt=1/Ae(Dt);Qe.zoom=lt===1?P:g+Qe.scaleZoom(Gt),nt&&(Qe.bearing=s.number(v,L,lt)),ke&&(Qe.pitch=s.number(T,k,lt)),We&&(Qe.interpolatePadding(S,F,lt),X=Qe.centerPoint.add(q));const Pt=lt===1?Y:Qe.unproject(B.add(W.mult(qe(Dt))).mult(Gt));return Qe.setLocationAtPoint(Qe.renderWorldCopies?Pt.wrap():Pt,X),Qe._updateCameraOnTerrain(),i.preloadOnly||this._fireMoveEvents(l),Qe};if(i.preloadOnly){const Qe=this._emulate(at,i.duration,f);return this._preloadTiles(Qe),this}return this._zooming=!0,this._rotating=nt,this._pitching=ke,this._padding=We,this._prepareEase(l,!1),this._ease(at(f),()=>this._afterEase(l),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const f=this._onEaseEnd;this._onEaseEnd=void 0,f.call(this,l)}if(!i){const f=this.handlers;f&&f.stop(!1)}return this}_ease(i,l,f){f.animate===!1||f.duration===0?(i(1),l()):(this._easeStart=s.exported.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),l=this._onEaseFrame;l&&l(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,l){i=s.wrap(i,-180,180);const f=Math.abs(i-l);return Math.abs(i-360-l)<f&&(i-=360),Math.abs(i+360-l)<f&&(i+=360),i}_normalizeCenter(i){const l=this.transform;if(!l.renderWorldCopies||l.maxBounds)return;const f=i.lng-l.center.lng;i.lng+=f>180?-360:f<-180?360:0}_prefersReducedMotion(i){return this._respectPrefersReducedMotion&&s.exported.prefersReducedMotion&&!(i&&i.essential)}_emulate(i,l,f){const g=Math.ceil(15*l/1e3),v=[],T=i(f.clone());for(let S=0;S<=g;S++){const P=T(S/g);v.push(P.clone())}return v}}class Ct{constructor(i={}){this.options=i,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){const l=this.options&&this.options.compact;return this._map=i,this._container=G("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=G("button","mapboxgl-ctrl-attrib-button",this._container),G("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=G("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),l&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),l===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(i,l){const f=this._map._getUIString(`AttributionControl.${l}`);i.setAttribute("aria-label",f),i.removeAttribute("title"),i.firstElementChild&&i.firstElementChild.setAttribute("title",f)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));const l=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(i){const f=l.reduce((g,v,T)=>(v.value&&(g+=`${v.key}=${v.value}${T<l.length-1?"&":""}`),g),"?");i.href=`${s.config.FEEDBACK_URL}/${f}#${Cl(this._map,!0)}`,i.rel="noopener nofollow",this._setElementTitle(i,"MapFeedback")}}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let i=[];if(this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const l=this._map.style._sourceCaches;for(const g in l){const v=l[g];if(v.used){const T=v.getSource();T.attribution&&i.indexOf(T.attribution)<0&&i.push(T.attribution)}}i.sort((g,v)=>g.length-v.length),i=i.filter((g,v)=>{for(let T=v+1;T<i.length;T++)if(i[T].indexOf(g)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=[...this.options.customAttribution,...i]:i.unshift(this.options.customAttribution));const f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Gu{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(i){this._map=i,this._container=G("div","mapboxgl-ctrl");const l=G("a","mapboxgl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://www.mapbox.com/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const i=this._map.style._sourceCaches;if(Object.entries(i).length===0)return!0;for(const l in i){const f=i[l].getSource();if(f.hasOwnProperty("mapbox_logo")&&!f.mapbox_logo)return!1}return!0}_updateCompact(){const i=this._container.children;if(i.length){const l=i[0];this._map.getCanvasContainer().offsetWidth<250?l.classList.add("mapboxgl-compact"):l.classList.remove("mapboxgl-compact")}}}class $u{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const l=++this._id;return this._queue.push({callback:i,id:l,cancelled:!1}),l}remove(i){const l=this._currentlyRunning,f=l?this._queue.concat(l):this._queue;for(const g of f)if(g.id===i)return void(g.cancelled=!0)}run(i=0){const l=this._currentlyRunning=this._queue;this._queue=[];for(const f of l)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Ta(h,i,l){if(h=new s.LngLat(h.lng,h.lat),i){const f=new s.LngLat(h.lng-360,h.lat),g=new s.LngLat(h.lng+360,h.lat),v=360*Math.ceil(Math.abs(h.lng-l.center.lng)/360),T=l.locationPoint(h).distSqr(i),S=i.x<0||i.y<0||i.x>l.width||i.y>l.height;l.locationPoint(f).distSqr(i)<T&&(S||Math.abs(f.lng-l.center.lng)<v)?h=f:l.locationPoint(g).distSqr(i)<T&&(S||Math.abs(g.lng-l.center.lng)<v)&&(h=g)}for(;Math.abs(h.lng-l.center.lng)>180;){const f=l.locationPoint(h);if(f.x>=0&&f.y>=0&&f.x<=l.width&&f.y<=l.height)break;h.lng>l.center.lng?h.lng-=360:h.lng+=360}return h}const Bs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class xt extends s.Evented{constructor(i,l){if(super(),(i instanceof s.window.HTMLElement||l)&&(i=s.extend({element:i},l)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=i&&i.occludedOpacity||.2,i&&i.element)this._element=i.element,this._offset=s.Point.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=G("div");const g=41,v=27,T=ce("svg",{display:"block",height:g*this._scale+"px",width:v*this._scale+"px",viewBox:`0 0 ${v} ${g}`},this._element),S=ce("radialGradient",{id:"shadowGradient"},ce("defs",{},T));ce("stop",{offset:"10%","stop-opacity":.4},S),ce("stop",{offset:"100%","stop-opacity":.05},S),ce("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},T),ce("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},T),ce("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},T),ce("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},T),this._offset=s.Point.convert(i&&i.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",g=>{g.preventDefault()}),this._element.addEventListener("mousedown",g=>{g.preventDefault()});const f=this._element.classList;for(const g in Bs)f.remove(`mapboxgl-marker-anchor-${g}`);f.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(i){return i===this._map||(this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._updateMoving),i.on("moveend",this._update),i.on("remove",this._clearFadeTimer),i._addMarker(this),this.setDraggable(this._draggable),this._update(),i.on("click",this._onMapClick)),this}remove(){const i=this._map;return i&&(i.off("click",this._onMapClick),i.off("move",this._updateMoving),i.off("moveend",this._update),i.off("mousedown",this._addDragHandler),i.off("touchstart",this._addDragHandler),i.off("mouseup",this._onUp),i.off("touchend",this._onUp),i.off("mousemove",this._onMove),i.off("touchmove",this._onMove),i.off("remove",this._clearFadeTimer),i._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=s.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,i._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(i){const l=i.code,f=i.charCode||i.keyCode;l!=="Space"&&l!=="Enter"&&f!==32&&f!==13||this.togglePopup()}_onMapClick(i){const l=i.originalEvent.target,f=this._element;this._popup&&(l===f||f.contains(l))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?(i.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(i.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const i=this._map,l=this._pos;if(!i||!l)return!1;const f=i.unproject(l),g=i.getFreeCameraOptions();if(!g.position)return!1;const v=g.position.toLngLat();return v.distanceTo(f)<.9*v.distanceTo(this._lngLat)}_evaluateOpacity(){const i=this._map;if(!i)return;const l=this._pos;if(!l||l.x<0||l.x>i.transform.width||l.y<0||l.y>i.transform.height)return void this._clearFadeTimer();const f=i.unproject(l);let g;i._showingGlobe()&&s.isLngLatBehindGlobe(i.transform,this._lngLat)?g=0:(g=1-i._queryFogOpacity(f),i.transform._terrainEnabled()&&i.getTerrain()&&this._behindTerrain()&&(g*=this._occludedOpacity)),this._element.style.opacity=`${g}`,this._element.style.pointerEvents=g>0?"auto":"none",this._popup&&this._popup._setOpacity(g),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const i=this._pos;if(!i||!this._map)return;const l=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${i.x}px,${i.y}px)
            ${Bs[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${l.x}px,${l.y}px)
        `}_calculateXYTransform(){const i=this._pos,l=this._map,f=this.getPitchAlignment();if(!l||!i||f!=="map")return"";if(!l._showingGlobe()){const P=l.getPitch();return P?`rotateX(${P}deg)`:""}const g=s.radToDeg(s.globeTiltAtLngLat(l.transform,this._lngLat)),v=i.sub(s.globeCenterToScreenPoint(l.transform)),T=Math.abs(v.x)+Math.abs(v.y);if(T===0)return"";const S=g/T;return`rotateX(${-v.y*S}deg) rotateY(${v.x*S}deg)`}_calculateZTransform(){const i=this._pos,l=this._map;if(!l||!i)return"";let f=0;const g=this.getRotationAlignment();if(g==="map")if(l._showingGlobe()){const v=l.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),T=l.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(v);f=s.radToDeg(Math.atan2(T.y,T.x))-90}else f=-l.getBearing();else if(g==="horizon"){const v=s.smoothstep(4,6,l.getZoom()),T=s.globeCenterToScreenPoint(l.transform);T.y+=v*l.transform.height;const S=i.sub(T),P=s.radToDeg(Math.atan2(S.y,S.x));f=(P>90?P-270:P+90)*(1-v)}return f+=this._rotation,f?`rotateZ(${f}deg)`:""}_update(i){s.window.cancelAnimationFrame(this._updateFrameId);const l=this._map;l&&(l.transform.renderWorldCopies&&(this._lngLat=Ta(this._lngLat,this._pos,l.transform)),this._pos=l.project(this._lngLat),i===!0?this._updateFrameId=s.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),l._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(l._showingGlobe()||l.getTerrain()||l.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(i){return this._offset=s.Point.convert(i),this._update(),this}_onMove(i){const l=this._map;if(!l)return;const f=this._pointerdownPos,g=this._positionDelta;if(f&&g){if(!this._isDragging){const v=this._clickTolerance||l._clickTolerance;if(i.point.dist(f)<v)return;this._isDragging=!0}this._pos=i.point.sub(g),this._lngLat=l.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const i=this._map;i&&(i.off("mousemove",this._onMove),i.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(i){const l=this._map,f=this._pos;l&&f&&this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(f),this._pointerdownPos=i.point,this._state="pending",l.on("mousemove",this._onMove),l.on("touchmove",this._onMove),l.once("mouseup",this._onUp),l.once("touchend",this._onUp))}setDraggable(i){this._draggable=!!i;const l=this._map;return l&&(i?(l.on("mousedown",this._addDragHandler),l.on("touchstart",this._addDragHandler)):(l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(i){return this._occludedOpacity=i||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Zu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},fd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function xh(h=new s.Point(0,0),i="bottom"){if(typeof h=="number"){const l=Math.round(Math.sqrt(.5*Math.pow(h,2)));switch(i){case"top":return new s.Point(0,h);case"top-left":return new s.Point(l,l);case"top-right":return new s.Point(-l,l);case"bottom":return new s.Point(0,-h);case"bottom-left":return new s.Point(l,-l);case"bottom-right":return new s.Point(-l,-l);case"left":return new s.Point(h,0);case"right":return new s.Point(-h,0)}return new s.Point(0,0)}return h instanceof s.Point||Array.isArray(h)?s.Point.convert(h):s.Point.convert(h[i]||[0,0])}class Wu{constructor(i){this.jumpTo(i)}getValue(i){if(i<=this._startTime)return this._start;if(i>=this._endTime)return this._end;const l=s.easeCubicInOut((i-this._startTime)/(this._endTime-this._startTime));return this._start*(1-l)+this._end*l}isEasing(i){return i>=this._startTime&&i<=this._endTime}jumpTo(i){this._startTime=-1/0,this._endTime=-1/0,this._start=i,this._end=i}easeTo(i,l,f){this._start=this.getValue(l),this._end=i,this._startTime=l,this._endTime=l+f}}const wh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},bh={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},md={showCompass:!0,showZoom:!0,visualizePitch:!1};class _d{constructor(i,l,f=!1){this._clickTolerance=10,this.element=l,this.mouseRotate=new Ou({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,f&&(this.mousePitch=new Uu({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),l.addEventListener("mousedown",this.mousedown),l.addEventListener("touchstart",this.touchstart,{passive:!1}),l.addEventListener("touchmove",this.touchmove),l.addEventListener("touchend",this.touchend),l.addEventListener("touchcancel",this.reset)}down(i,l){this.mouseRotate.mousedown(i,l),this.mousePitch&&this.mousePitch.mousedown(i,l),ne()}move(i,l){const f=this.map,g=this.mouseRotate.mousemoveWindow(i,l),v=g&&g.bearingDelta;if(v&&f.setBearing(f.getBearing()+v),this.mousePitch){const T=this.mousePitch.mousemoveWindow(i,l),S=T&&T.pitchDelta;S&&f.setPitch(f.getPitch()+S)}}off(){const i=this.element;i.removeEventListener("mousedown",this.mousedown),i.removeEventListener("touchstart",this.touchstart,{passive:!1}),i.removeEventListener("touchmove",this.touchmove),i.removeEventListener("touchend",this.touchend),i.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){ee(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(i){this.down(s.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),Oe(this.element,i)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(i){this.move(i,Oe(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=rt(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=rt(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const qu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Hu={maxWidth:100,unit:"metric"},Xu={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Ea={version:s.version,supported:D,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends V1{constructor(h){if(s.LivePerformanceUtils.mark(s.PerformanceMarkers.create),(h=s.extend({},bh,h)).minZoom!=null&&h.maxZoom!=null&&h.minZoom>h.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(h.minPitch!=null&&h.maxPitch!=null&&h.minPitch>h.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(h.minPitch!=null&&h.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(h.maxPitch!=null&&h.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(h.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(h.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new va(h.minZoom,h.maxZoom,h.minPitch,h.maxPitch,h.renderWorldCopies),h),this._interactive=h.interactive,this._minTileCacheSize=h.minTileCacheSize,this._maxTileCacheSize=h.maxTileCacheSize,this._failIfMajorPerformanceCaveat=h.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=h.preserveDrawingBuffer,this._antialias=h.antialias,this._useWebGL2=h.useWebGL2,this._trackResize=h.trackResize,this._bearingSnap=h.bearingSnap,this._refreshExpiredTiles=h.refreshExpiredTiles,this._fadeDuration=h.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=h.crossSourceCollisions,this._collectResourceTiming=h.collectResourceTiming,this._optimizeForTerrain=h.optimizeForTerrain,this._language=this._parseLanguage(h.language),this._worldview=h.worldview,this._renderTaskQueue=new $u,this._domRenderTaskQueue=new $u,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.uniqueId(),this._locale=s.extend({},wh,h.locale),this._clickTolerance=h.clickTolerance,this._cooperativeGestures=h.cooperativeGestures,this._performanceMetricsCollection=h.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Wu(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new s.RequestManager(h.transformRequest,h.accessToken,h.testMode),this._silenceAuthErrors=!!h.testMode,typeof h.container=="string"){if(this._container=s.window.document.getElementById(h.container),!this._container)throw new Error(`Container '${h.container}' not found.`)}else{if(!(h.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=h.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),h.maxBounds&&this.setMaxBounds(h.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new _o(this,h),this._localFontFamily=h.localFontFamily,this._localIdeographFontFamily=h.localIdeographFontFamily,h.style&&this.setStyle(h.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),h.projection&&this.setProjection(h.projection),this._hash=h.hash&&new Du(typeof h.hash=="string"&&h.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:h.center,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch}),h.bounds&&(this.resize(),this.fitBounds(h.bounds,s.extend({},h.fitBoundsOptions,{duration:0})))),this.resize(),h.attributionControl&&this.addControl(new Ct({customAttribution:h.customAttribution})),this._logoControl=new Gu,this.addControl(this._logoControl,h.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new s.Event(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new s.Event(`${i.dataType}dataloading`,i))})}_getMapId(){return this._mapId}addControl(h,i){if(i===void 0&&(i=h.getDefaultPosition?h.getDefaultPosition():"top-right"),!h||!h.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=h.onAdd(this);this._controls.push(h);const f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(l,f.firstChild):f.appendChild(l),this}removeControl(h){if(!h||!h.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(h);return i>-1&&this._controls.splice(i,1),h.onRemove(this),this}hasControl(h){return this._controls.indexOf(h)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(h){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const i=!this._moving;return i&&this.fire(new s.Event("movestart",h)).fire(new s.Event("move",h)),this.fire(new s.Event("resize",h)),i&&this.fire(new s.Event("moveend",h)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(h){return this.transform.setMaxBounds(s.LngLatBounds.convert(h)),this._update()}setMinZoom(h){if((h=h??-2)>=-2&&h<=this.transform.maxZoom)return this.transform.minZoom=h,this._update(),this.getZoom()<h?this.setZoom(h):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(h){if((h=h??22)>=this.transform.minZoom)return this.transform.maxZoom=h,this._update(),this.getZoom()>h?this.setZoom(h):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(h){if((h=h??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(h>=0&&h<=this.transform.maxPitch)return this.transform.minPitch=h,this._update(),this.getPitch()<h?this.setPitch(h):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(h){if((h=h??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(h>=this.transform.minPitch)return this.transform.maxPitch=h,this._update(),this.getPitch()>h?this.setPitch(h):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(h){return this.transform.renderWorldCopies=h,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(h){return h==="auto"?s.window.navigator.language:Array.isArray(h)?h.length===0?void 0:h.map(i=>i==="auto"?s.window.navigator.language:i):h}setLanguage(h){const i=this._parseLanguage(h);if(!this.style||i===this._language)return this;this._language=i,this.style._reloadSources();for(const l of this._controls)l._setLanguage&&l._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(h){return this.style&&h!==this._worldview?(this._worldview=h,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(h){return this._lazyInitEmptyStyle(),h?typeof h=="string"&&(h={name:h}):h=null,this._useExplicitProjection=!!h,this._prioritizeAndUpdateProjection(h,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const h=this.transform,i=h.projection.name;let l;i==="globe"&&h.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?(h.setMercatorFromTransition(),l=!0):i==="mercator"&&h.zoom<s.GLOBE_ZOOM_THRESHOLD_MAX&&(h.setProjection({name:"globe"}),l=!0),l&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(h,i){return this._updateProjection(h||i||{name:"mercator"})}_updateProjection(h){let i;if(i=h.name==="globe"&&this.transform.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(h),this.style.applyProjectionUpdate(),i){this.painter.clearBackgroundTiles();for(const l in this.style._sourceCaches)this.style._sourceCaches[l].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(h){return this.transform.locationPoint3D(s.LngLat.convert(h))}unproject(h){return this.transform.pointLocation3D(s.Point.convert(h))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(h,i,l){if(h==="mouseenter"||h==="mouseover"){let f=!1;const g=T=>{const S=i.filter(L=>this.getLayer(L)),P=S.length?this.queryRenderedFeatures(T.point,{layers:S}):[];P.length?f||(f=!0,l.call(this,new Sr(h,this,T.originalEvent,{features:P}))):f=!1},v=()=>{f=!1};return{layers:new Set(i),listener:l,delegates:{mousemove:g,mouseout:v}}}if(h==="mouseleave"||h==="mouseout"){let f=!1;const g=T=>{const S=i.filter(P=>this.getLayer(P));(S.length?this.queryRenderedFeatures(T.point,{layers:S}):[]).length?f=!0:f&&(f=!1,l.call(this,new Sr(h,this,T.originalEvent)))},v=T=>{f&&(f=!1,l.call(this,new Sr(h,this,T.originalEvent)))};return{layers:new Set(i),listener:l,delegates:{mousemove:g,mouseout:v}}}{const f=g=>{const v=i.filter(S=>this.getLayer(S)),T=v.length?this.queryRenderedFeatures(g.point,{layers:v}):[];T.length&&(g.features=T,l.call(this,g),delete g.features)};return{layers:new Set(i),listener:l,delegates:{[h]:f}}}}on(h,i,l){if(l===void 0)return super.on(h,i);Array.isArray(i)||(i=[i]);const f=this._createDelegatedListener(h,i,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[h]=this._delegatedListeners[h]||[],this._delegatedListeners[h].push(f);for(const g in f.delegates)this.on(g,f.delegates[g]);return this}once(h,i,l){if(l===void 0)return super.once(h,i);Array.isArray(i)||(i=[i]);const f=this._createDelegatedListener(h,i,l);for(const g in f.delegates)this.once(g,f.delegates[g]);return this}off(h,i,l){if(l===void 0)return super.off(h,i);i=new Set(Array.isArray(i)?i:[i]);const f=(v,T)=>{if(v.size!==T.size)return!1;for(const S of v)if(!T.has(S))return!1;return!0},g=this._delegatedListeners?this._delegatedListeners[h]:void 0;return g&&(v=>{for(let T=0;T<v.length;T++){const S=v[T];if(S.listener===l&&f(S.layers,i)){for(const P in S.delegates)this.off(P,S.delegates[P]);return v.splice(T,1),this}}})(g),this}queryRenderedFeatures(h,i){return this.style?(i!==void 0||h===void 0||h instanceof s.Point||Array.isArray(h)||(i=h,h=void 0),this.style.queryRenderedFeatures(h=h||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(h,i){return this.style.querySourceFeatures(h,i)}isPointOnSurface(h){const{name:i}=this.transform.projection;return i!=="globe"&&i!=="mercator"&&s.warnOnce(`${i} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(s.Point.convert(h))}setStyle(h,i){return(i=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&h?(this._diffStyle(h,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(h,i))}_getUIString(h){const i=this._locale[h];if(i==null)throw new Error(`Missing UI string '${h}'`);return i}_updateStyle(h,i){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),h&&(this.style=new fo(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof h=="string"?this.style.loadURL(h):this.style.loadJSON(h)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new fo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(h,i){if(typeof h=="string"){const l=this._requestManager.normalizeStyleURL(h),f=this._requestManager.transformRequest(l,s.ResourceType.Style);s.getJSON(f,(g,v)=>{g?this.fire(new s.ErrorEvent(g)):v&&this._updateDiff(v,i)})}else typeof h=="object"&&this._updateDiff(h,i)}_updateDiff(h,i){try{this.style.setState(h)&&this._update(!0)}catch(l){s.warnOnce(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(h,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(h,i){return this._lazyInitEmptyStyle(),this.style.addSource(h,i),this._update(!0)}isSourceLoaded(h){return!!this.style&&this.style._isSourceCacheLoaded(h)}areTilesLoaded(){const h=this.style&&this.style._sourceCaches;for(const i in h){const l=h[i]._tiles;for(const f in l){const g=l[f];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(h,i,l){this._lazyInitEmptyStyle(),this.style.addSourceType(h,i,l)}removeSource(h){return this.style.removeSource(h),this._updateTerrain(),this._update(!0)}getSource(h){return this.style.getSource(h)}addImage(h,i,{pixelRatio:l=1,sdf:f=!1,stretchX:g,stretchY:v,content:T}={}){if(this._lazyInitEmptyStyle(),i instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&i instanceof s.window.ImageBitmap){const{width:S,height:P,data:L}=s.exported.getImageData(i);this.style.addImage(h,{data:new s.RGBAImage({width:S,height:P},L),pixelRatio:l,stretchX:g,stretchY:v,content:T,sdf:f,version:0})}else if(i.width===void 0||i.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:S,height:P}=i,L=i;this.style.addImage(h,{data:new s.RGBAImage({width:S,height:P},new Uint8Array(L.data)),pixelRatio:l,stretchX:g,stretchY:v,content:T,sdf:f,version:0,userImage:L}),L.onAdd&&L.onAdd(this,h)}}updateImage(h,i){const l=this.style.getImage(h);if(!l)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=i instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&i instanceof s.window.ImageBitmap?s.exported.getImageData(i):i,{width:g,height:v}=f;g!==void 0&&v!==void 0?g===l.data.width&&v===l.data.height?(l.data.replace(f.data,!(i instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&i instanceof s.window.ImageBitmap)),this.style.updateImage(h,l)):this.fire(new s.ErrorEvent(new Error(`The width and height of the updated image (${g}, ${v})
                must be that same as the previous version of the image
                (${l.data.width}, ${l.data.height})`))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(h){return h?!!this.style.getImage(h):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(h){this.style.removeImage(h)}loadImage(h,i){s.getImage(this._requestManager.transformRequest(h,s.ResourceType.Image),(l,f)=>{i(l,f instanceof s.window.HTMLImageElement?s.exported.getImageData(f):f)})}listImages(){return this.style.listImages()}addLayer(h,i){return this._lazyInitEmptyStyle(),this.style.addLayer(h,i),this._update(!0)}moveLayer(h,i){return this.style.moveLayer(h,i),this._update(!0)}removeLayer(h){return this.style.removeLayer(h),this._update(!0)}getLayer(h){return this.style.getLayer(h)}setLayerZoomRange(h,i,l){return this.style.setLayerZoomRange(h,i,l),this._update(!0)}setFilter(h,i,l={}){return this.style.setFilter(h,i,l),this._update(!0)}getFilter(h){return this.style.getFilter(h)}setPaintProperty(h,i,l,f={}){return this.style.setPaintProperty(h,i,l,f),this._update(!0)}getPaintProperty(h,i){return this.style.getPaintProperty(h,i)}setLayoutProperty(h,i,l,f={}){return this.style.setLayoutProperty(h,i,l,f),this._update(!0)}getLayoutProperty(h,i){return this.style.getLayoutProperty(h,i)}setLight(h,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(h,i),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(h){return this._lazyInitEmptyStyle(),!h&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(h),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(h){return this._lazyInitEmptyStyle(),this.style.setFog(h),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(h){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(h),this.transform):0}setFeatureState(h,i){return this.style.setFeatureState(h,i),this._update()}removeFeatureState(h,i){return this.style.removeFeatureState(h,i),this._update()}getFeatureState(h){return this.style.getFeatureState(h)}_updateContainerDimensions(){if(!this._container)return;const h=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300;let l,f,g,v=this._container;for(;v&&(!f||!g);){const T=s.window.getComputedStyle(v).transform;T&&T!=="none"&&(l=T.match(/matrix.*\((.+)\)/)[1].split(", "),l[0]&&l[0]!=="0"&&l[0]!=="1"&&(f=l[0]),l[3]&&l[3]!=="0"&&l[3]!=="1"&&(g=l[3])),v=v.parentElement}this._containerWidth=f?Math.abs(h/f):h,this._containerHeight=g?Math.abs(i/g):i}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const h=this._container;h.classList.add("mapboxgl-map"),(this._missingCSSCanary=G("div","mapboxgl-canary",h)).style.visibility="hidden",this._detectMissingCSS();const i=this._canvasContainer=G("div","mapboxgl-canvas-container",h);this._interactive&&i.classList.add("mapboxgl-interactive"),this._canvas=G("canvas","mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const l=this._controlContainer=G("div","mapboxgl-control-container",h),f=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(g=>{f[g]=G("div",`mapboxgl-ctrl-${g}`,l)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(h,i){const l=s.exported.devicePixelRatio||1;this._canvas.width=l*Math.ceil(h),this._canvas.height=l*Math.ceil(i),this._canvas.style.width=`${h}px`,this._canvas.style.height=`${i}px`}_addMarker(h){this._markers.push(h)}_removeMarker(h){const i=this._markers.indexOf(h);i!==-1&&this._markers.splice(i,1)}_addPopup(h){this._popups.push(h)}_removePopup(h){const i=this._popups.indexOf(h);i!==-1&&this._popups.splice(i,1)}_setupPainter(){const h=s.extend({},D.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._useWebGL2&&this._canvas.getContext("webgl2",h),l=i||this._canvas.getContext("webgl",h)||this._canvas.getContext("experimental-webgl",h);l?(this._useWebGL2&&!i&&s.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),s.storeAuthState(l,!0),this.painter=new ga(l,this.transform,!!i),this.on("data",f=>{f.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.exported$1.testSupport(l)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(h){h.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:h}))}_contextRestored(h){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:h}))}_onMapScroll(h){if(h.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(h){return this.style?(this._styleDirty=this._styleDirty||h,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(h){return this._update(),this._renderTaskQueue.add(h)}_cancelRenderFrame(h){this._renderTaskQueue.remove(h)}_requestDomTask(h){!this.loaded()||this.loaded()&&!this.isMoving()?h():this._domRenderTaskQueue.add(h)}_render(h){let i;const l=this.painter.context.extTimerQuery,f=s.exported.now();if(this.listens("gpu-timing-frame")&&(i=l.createQueryEXT(),l.beginQueryEXT(l.TIME_ELAPSED_EXT,i)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],s.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],s.window.performance.now())),this._renderTaskQueue.run(h),this._domRenderTaskQueue.run(h),this._removed)return;this._updateProjectionTransition();const g=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const S=this.transform.zoom,P=this.transform.pitch,L=s.exported.now(),k=new s.EvaluationParameters(S,{now:L,fadeDuration:g,pitch:P,transition:this.style.getTransition()});this.style.update(k)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let v=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),v=this._updateAverageElevation(f),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):v=this._updateAverageElevation(f),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,g,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:g,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),i){const S=s.exported.now()-f;l.endQueryEXT(l.TIME_ELAPSED_EXT,i),setTimeout(()=>{const P=l.getQueryObjectEXT(i,l.QUERY_RESULT_EXT)/1e6;l.deleteQueryEXT(i),this.fire(new s.Event("gpu-timing-frame",{cpuTime:S,gpuTime:P})),s.window.performance.mark("frame-gpu",{startTime:f,detail:{gpuTime:P}})},50)}if(this.listens("gpu-timing-layer")){const S=this.painter.collectGpuTimers();setTimeout(()=>{const P=this.painter.queryGpuTimers(S);this.fire(new s.Event("gpu-timing-layer",{layerTimes:P}))},50)}if(this.listens("gpu-timing-deferred-render")){const S=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const P=this.painter.queryGpuTimeDeferredRender(S);this.fire(new s.Event("gpu-timing-deferred-render",{gpuTime:P}))},50)}const T=this._sourcesDirty||this._styleDirty||this._placementDirty||v;if(T||this._repaint)this.triggerRepaint();else{const S=!this.isMoving()&&this.loaded();if(S&&(v=this._updateAverageElevation(f,!0)),v)this.triggerRepaint();else if(this._triggerFrame(!1),S&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const P=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:P})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||T||(this._fullyLoaded=!0,s.LivePerformanceUtils.mark(s.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&s.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(h){for(const i of this._markers)h&&!this.getRenderWorldCopies()&&(i._lngLat=i._lngLat.wrap()),i._update();for(const i of this._popups)!h||this.getRenderWorldCopies()||i._trackPointer||(i._lngLat=i._lngLat.wrap()),i._update()}_updateAverageElevation(h,i=!1){const l=f=>(this.transform.averageElevation=f,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&l(0);if((i||h-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(h)){const f=this.transform.averageElevation;let g=this.transform.sampleAverageElevation(),v=!1;this.transform.elevation&&(v=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(g)?g=0:this._averageElevationLastSampledAt=h;const T=Math.abs(f-g);if(T>1){if(this._isInitialLoad||v)return this._averageElevation.jumpTo(g),l(g);this._averageElevation.easeTo(g,h,300)}else if(T>1e-4)return this._averageElevation.jumpTo(g),l(g)}return!!this._averageElevation.isEasing(h)&&l(this._averageElevation.getValue(h))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,h=>{if(h&&(h.message===s.AUTH_ERR_MSG||h.status===401)){const i=this.painter.context.gl;s.storeAuthState(i,!1),this._logoControl instanceof Gu&&this._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const h=this._isDragging();this.painter.updateTerrain(this.style,h)}_calculateSpeedIndex(){const h=this.painter.canvasCopy(),i=this.painter.getCanvasCopiesAndTimestamps();i.timeStamps.push(performance.now());const l=this.painter.context.gl,f=l.createFramebuffer();function g(v){l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,v,0);const T=new Uint8Array(l.drawingBufferWidth*l.drawingBufferHeight*4);return l.readPixels(0,0,l.drawingBufferWidth,l.drawingBufferHeight,l.RGBA,l.UNSIGNED_BYTE,T),T}return l.bindFramebuffer(l.FRAMEBUFFER,f),this._canvasPixelComparison(g(h),i.canvasCopies.map(g),i.timeStamps)}_canvasPixelComparison(h,i,l){let f=l[1]-l[0];const g=h.length/4;for(let v=0;v<i.length;v++){const T=i[v];let S=0;for(let P=0;P<T.length;P+=4)T[P]===h[P]&&T[P+1]===h[P+1]&&T[P+2]===h[P+2]&&T[P+3]===h[P+3]&&(S+=1);f+=(l[v+2]-l[v+1])*(1-S/g)}return f}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1),s.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const h=this.painter.context.gl.getExtension("WEBGL_lose_context");h&&h.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(h){this._renderNextFrame=this._renderNextFrame||h,this.style&&!this._frame&&(this._frame=s.exported.frame(i=>{const l=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,l&&this._render(i)}))}_preloadTiles(h){const i=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(i,(l,f)=>l._preloadTiles(h,f),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(h){this._trackResize&&this.resize({originalEvent:h})._update()}_onVisibilityChange(){s.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(h){this._showTileBoundaries!==h&&(this._showTileBoundaries=h,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(h){this._showTerrainWireframe!==h&&(this._showTerrainWireframe=h,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(h){this._speedIndexTiming!==h&&(this._speedIndexTiming=h,this._update())}get showPadding(){return!!this._showPadding}set showPadding(h){this._showPadding!==h&&(this._showPadding=h,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(h){this._showCollisionBoxes!==h&&(this._showCollisionBoxes=h,h?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(h){this._showOverdrawInspector!==h&&(this._showOverdrawInspector=h,this._update())}get repaint(){return!!this._repaint}set repaint(h){this._repaint!==h&&(this._repaint=h,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(h){this._vertices=h,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(h){this._showTileAABBs!==h&&(this._showTileAABBs=h,h&&this._update())}_setCacheLimits(h,i){s.setCacheLimits(h,i)}get version(){return s.version}},NavigationControl:class{constructor(h){this.options=s.extend({},md,h),this._container=G("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",i=>{this._map&&this._map.zoomIn({},{originalEvent:i})}),G("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",i=>{this._map&&this._map.zoomOut({},{originalEvent:i})}),G("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",i=>{const l=this._map;l&&(this.options.visualizePitch?l.resetNorthPitch({},{originalEvent:i}):l.resetNorth({},{originalEvent:i}))}),this._compassIcon=G("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const h=this._map;if(!h)return;const i=h.getZoom(),l=i===h.getMaxZoom(),f=i===h.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())}_rotateCompassArrow(){const h=this._map;if(!h)return;const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(h.transform.pitch*(Math.PI/180)),.5)}) rotateX(${h.transform.pitch}deg) rotateZ(${h.transform.angle*(180/Math.PI)}deg)`:`rotate(${h.transform.angle*(180/Math.PI)}deg)`;h._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=i)})}onAdd(h){return this._map=h,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),h.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&h.on("pitch",this._rotateCompassArrow),h.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new _d(h,this._compass,this.options.visualizePitch)),this._container}onRemove(){const h=this._map;h&&(this._container.remove(),this.options.showZoom&&h.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&h.off("pitch",this._rotateCompassArrow),h.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(h,i){const l=G("button",h,this._container);return l.type="button",l.addEventListener("click",i),l}_setButtonTitle(h,i){if(!this._map)return;const l=this._map._getUIString(`NavigationControl.${i}`);h.setAttribute("aria-label",l),h.firstElementChild&&h.firstElementChild.setAttribute("title",l)}},GeolocateControl:class extends s.Evented{constructor(h){super(),this.options=s.extend({geolocation:s.window.navigator.geolocation},qu,h),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=xa(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(h){return this._map=h,this._container=G("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(h){const i=(l=!!this.options.geolocation)=>{this._supportsGeolocation=l,h(l)};this._supportsGeolocation!==void 0?h(this._supportsGeolocation):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then(l=>i(l.state!=="denied")).catch(()=>i()):i()}_isOutOfMapMaxBounds(h){const i=this._map.getMaxBounds(),l=h.coords;return!!i&&(l.longitude<i.getWest()||l.longitude>i.getEast()||l.latitude<i.getSouth()||l.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(h){if(this._map){if(this._isOutOfMapMaxBounds(h))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",h)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=h,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(h),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(h),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",h)),this._finish()}}_updateCamera(h){const i=new s.LngLat(h.coords.longitude,h.coords.latitude),l=h.coords.accuracy,f=this._map.getBearing(),g=s.extend({bearing:f},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(l),g,{geolocateSource:!0})}_updateMarker(h){if(h){const i=new s.LngLat(h.coords.longitude,h.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=h.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const h=this._map.transform,i=s.mercatorZfromAltitude(1,h._center.lat)*h.worldSize,l=Math.ceil(2*this._accuracy*i);this._circleElement.style.width=`${l}px`,this._circleElement.style.height=`${l}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(h){if(this._map){if(this.options.trackUserLocation)if(h.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(h.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",h)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(h){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=G("button","mapboxgl-ctrl-geolocate",this._container),G("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",h===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=G("div","mapboxgl-user-location"),this._dotElement.appendChild(G("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(G("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new xt({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=G("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new xt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}}_onDeviceOrientation(h){this._userLocationDotMarker&&(h.webkitCompassHeading?this._heading=h.webkitCompassHeading:h.absolute===!0&&(this._heading=-1*h.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let h;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(h={maximumAge:6e5,timeout:0},this._noTimeout=!0):(h=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,h),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const h=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(i=>{i==="granted"&&h()}).catch(console.error):h()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ct,ScaleControl:class{constructor(h){this.options=s.extend({},Hu,h),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),s.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const h=this.options.maxWidth||100,i=this._map,l=i._containerHeight/2,f=i._containerWidth/2-h/2,g=i.unproject([f,l]),v=i.unproject([f+h,l]),T=g.distanceTo(v);if(this.options.unit==="imperial"){const S=3.2808*T;S>5280?this._setScale(h,S/5280,"mile"):this._setScale(h,S,"foot")}else this.options.unit==="nautical"?this._setScale(h,T/1852,"nautical-mile"):T>=1e3?this._setScale(h,T/1e3,"kilometer"):this._setScale(h,T,"meter")}_setScale(h,i,l){this._map._requestDomTask(()=>{const f=function(v){const T=Math.pow(10,`${Math.floor(v)}`.length-1);let S=v/T;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:S>=1?1:function(P){const L=Math.pow(10,Math.ceil(-Math.log(P)/Math.LN10));return Math.round(P*L)/L}(S),T*S}(i),g=f/i;this._container.innerHTML=this._isNumberFormatSupported&&l!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:l}).format(f):`${f}&nbsp;${Xu[l]}`,this._container.style.width=h*g+"px"})}onAdd(h){return this._map=h,this._language=h.getLanguage(),this._container=G("div","mapboxgl-ctrl mapboxgl-ctrl-scale",h.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(h){this._language=h,this._update()}setUnit(h){this.options.unit=h,this._update()}},FullscreenControl:class{constructor(h){this._fullscreen=!1,h&&h.container&&(h.container instanceof s.window.HTMLElement?this._container=h.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(h){return this._map=h,this._container||(this._container=this._map.getContainer()),this._controlContainer=G("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const h=this._fullscreenButton=G("button","mapboxgl-ctrl-fullscreen",this._controlContainer);G("span","mapboxgl-ctrl-icon",h).setAttribute("aria-hidden","true"),h.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const h=this._getTitle();this._fullscreenButton.setAttribute("aria-label",h),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",h)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(h){super(),this.options=s.extend(Object.create(Zu),h),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(h&&h.className?h.className.trim().split(/\s+/):[])}addTo(h){return this._map&&this.remove(),this._map=h,this.options.closeOnClick&&h.on("preclick",this._onClose),this.options.closeOnMove&&h.on("move",this._onClose),h.on("remove",this.remove),this._update(),h._addPopup(this),this._focusFirstElement(),this._trackPointer?(h.on("mousemove",this._onMouseEvent),h.on("mouseup",this._onMouseEvent),h._canvasContainer.classList.add("mapboxgl-track-pointer")):h.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const h=this._map;return h&&(h.off("move",this._update),h.off("move",this._onClose),h.off("preclick",this._onClose),h.off("click",this._onClose),h.off("remove",this.remove),h.off("mousemove",this._onMouseEvent),h.off("mouseup",this._onMouseEvent),h.off("drag",this._onMouseEvent),h._canvasContainer&&h._canvasContainer.classList.remove("mapboxgl-track-pointer"),h._removePopup(this),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(h){this._lngLat=s.LngLat.convert(h),this._pos=null,this._trackPointer=!1,this._update();const i=this._map;return i&&(i.on("move",this._update),i.off("mousemove",this._onMouseEvent),i._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const h=this._map;return h&&(h.off("move",this._update),h.on("mousemove",this._onMouseEvent),h.on("drag",this._onMouseEvent),h._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(h){return this.setDOMContent(s.window.document.createTextNode(h))}setHTML(h){const i=s.window.document.createDocumentFragment(),l=s.window.document.createElement("body");let f;for(l.innerHTML=h;f=l.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(h){return this.options.maxWidth=h,this._update(),this}setDOMContent(h){let i=this._content;if(i)for(;i.hasChildNodes();)i.firstChild&&i.removeChild(i.firstChild);else i=this._content=G("div","mapboxgl-popup-content",this._container||void 0);if(i.appendChild(h),this.options.closeButton){const l=this._closeButton=G("button","mapboxgl-popup-close-button",i);l.type="button",l.setAttribute("aria-label","Close popup"),l.setAttribute("aria-hidden","true"),l.innerHTML="&#215;",l.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(h){return this._classList.add(h),this._updateClassList(),this}removeClassName(h){return this._classList.delete(h),this._updateClassList(),this}setOffset(h){return this.options.offset=h,this._update(),this}toggleClassName(h){let i;return this._classList.delete(h)?i=!1:(this._classList.add(h),i=!0),this._updateClassList(),i}_onMouseEvent(h){this._update(h.point)}_getAnchor(h){if(this.options.anchor)return this.options.anchor;const i=this._map,l=this._container,f=this._pos;if(!i||!l||!f)return"bottom";const g=l.offsetWidth,v=l.offsetHeight,T=f.x<g/2,S=f.x>i.transform.width-g/2;if(f.y+h<v)return T?"top-left":S?"top-right":"top";if(f.y>i.transform.height-v){if(T)return"bottom-left";if(S)return"bottom-right"}return T?"left":S?"right":"bottom"}_updateClassList(){const h=this._container;if(!h)return;const i=[...this._classList];i.push("mapboxgl-popup"),this._anchor&&i.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&i.push("mapboxgl-popup-track-pointer"),h.className=i.join(" ")}_update(h){const i=this._map,l=this._content;if(!i||!this._lngLat&&!this._trackPointer||!l)return;let f=this._container;if(f||(f=this._container=G("div","mapboxgl-popup",i.getContainer()),this._tip=G("div","mapboxgl-popup-tip",f),f.appendChild(l)),this.options.maxWidth&&f.style.maxWidth!==this.options.maxWidth&&(f.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ta(this._lngLat,this._pos,i.transform)),!this._trackPointer||h){const g=this._pos=this._trackPointer&&h?h:i.project(this._lngLat),v=xh(this.options.offset),T=this._anchor=this._getAnchor(v.y),S=xh(this.options.offset,T),P=g.add(S).round();i._requestDomTask(()=>{this._container&&T&&(this._container.style.transform=`${Bs[T]} translate(${P.x}px,${P.y}px)`)})}if(!this._marker&&i._showingGlobe()){const g=s.isLngLatBehindGlobe(i.transform,this._lngLat)?0:1;this._setOpacity(g)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const h=this._container.querySelector(fd);h&&h.focus()}_onClose(){this.remove()}_setOpacity(h){this._container&&(this._container.style.opacity=`${h}`),this._content&&(this._content.style.pointerEvents=h?"auto":"none")}},Marker:xt,Style:fo,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.Point,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:oh,Evented:s.Evented,config:s.config,prewarm:function(){Hn().acquire(zt)},clearPrewarmedResources:function(){const h=Wt;h&&(h.isPreloaded()&&h.numActive()===1?(h.release(zt),Wt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(h){s.config.ACCESS_TOKEN=h},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(h){s.config.API_URL=h},get workerCount(){return Vt.workerCount},set workerCount(h){Vt.workerCount=h},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(h){s.config.MAX_PARALLEL_IMAGE_REQUESTS=h},clearStorage(h){s.clearTileCache(h)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return Ea});var E=_;return E})})(Wy);var Hy=Wy.exports;const DC=ol(Hy),RC=dp({__proto__:null,default:DC},[Hy]);export{WC as F,UC as L,ZC as M,qC as N,xn as P,Xs as R,XC as S,s6 as W,YM as _,hp as a,GC as b,$C as c,HC as d,BC as e,H8 as f,jC as g,OC as h,FC as j,NC as p,K0 as q,Ne as r,VC as w};
